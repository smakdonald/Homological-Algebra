<?xml version='1.0' encoding='utf-8'?>

<pretext xml:lang="en-US" xmlns:xi="http://www.w3.org/2001/XInclude">

  <docinfo>

    <!-- the other option is "long" which will produce an -->
    <!-- entire front matter section with more headings   -->
    <author-biographies length="short" />

    <!--
    <brandlogo url="http://abstract.pugetsound.edu" source="images/cover_aata_2014.png" />
    -->

    <!--
    <covers front="images/original-front-cover-aata.pdf"
            back="images/plain-back-cover-aata.pdf"/>
    -->

    <!-- Prefix to enhance Sage notebook contents -->
    <!--
    <initialism>AATA</initialism>
    -->

    <macros>
        <!-- Operators     -->
        \def\ann{\operatorname{ann}}
        \newcommand{\Ass}{\operatorname{Ass}}
        \def\Aut{\operatorname{Aut}}
        \def\can{{\mathrm {can}}}
        \def\char{\operatorname{char}}
        \def\cp{\operatorname{CharPoly}}
        \def\codim{\operatorname{codim}} 
        \def\coker{\operatorname{coker}}
        \DeclareMathOperator*{\colim}{colim} 
        \def\cont{\operatorname{cont}} 
        \def\diam{\operatorname{diam}} 
        \def\dm{\operatorname{dim}} 
        \DeclareMathOperator{\edim}{embdim} 
        \def\End{\operatorname{End}} 
        \def\eval{\operatorname{eval}} 
        \def\Ext{\operatorname{Ext}} 
        \def\Frac{\operatorname{Frac}}
        \def\Fun{\operatorname{Fun}}
        \def\Gal{\operatorname{Gal}}
        \def\gcd{\operatorname{gcd}}
        \newcommand{\GL}{\operatorname{GL}} 
        \newcommand{\ht}{\operatorname{height}} 
        \def\Hom{\operatorname{Hom}} 
        \def\id{\operatorname{id}} 
        \def\im{\operatorname{im}} 
        \def\Inn{\operatorname{Inn}}
        \def\ker{\operatorname{ker}}
        \def\lcm{\operatorname{lcm}} 
        \def\Mat{\operatorname{Mat}}
        \newcommand{\Min}{\operatorname{Min}}
        \def\mp{\operatorname{MinPoly}}
        \def\mSpec{\operatorname{mSpec}}
        \def\MSpec{\operatorname{MSpec}}
        \def\null{\operatorname{Nul}}
        \DeclareMathOperator{\ns}{nullspace}
        \newcommand{\opp}{\operatorname{opp}}
        \def\Orb{\operatorname{Orb}} 
        \def\Out{\operatorname{Out}}
        \def\Perm{\operatorname{Perm}}
        \def\ptstab{\operatorname{PtStab}} 
        \def\rad{\operatorname{rad}}
        \DeclareMathOperator{\range}{range}
        \def\rank{\operatorname{rank}}
        \def\res{\operatorname{res}}
        \def\setstab{\operatorname{SetStab}}
        \def\sign{{\operatorname{sign}}}
        \newcommand{\SL}{\operatorname{SL}}
        \def\Span{\operatorname{Span}}
        \def\Spec{\operatorname{Spec}}
        \def\Stab{\operatorname{Stab}} 
        \DeclareMathOperator{\Supp}{Supp}
        \def\Syl{\operatorname{Syl}}
        \def\Tor{\operatorname{Tor}}
        \def\trace{\operatorname{trace}}
        \def\uSpec{\operatorname{\underline{Spec}}}
        <!-- Categories     -->
        \newcommand{\Ob}{\mathrm{Ob}}
        \newcommand{\Set}{\mathbf{Set}}
        \newcommand{\Grp}{\mathbf{Grp}}
        \newcommand{\Ab}{\mathbf{Ab}}
        \newcommand{\Sgrp}{\mathbf{Sgrp}}
        \newcommand{\Ring}{\mathbf{Ring}} 
        \newcommand{\Fld}{\mathbf{Fld}}
        \newcommand{\cRing}{\mathbf{cRing}}
        \newcommand{\Mod}{-\mathbf{Mod}}
        \newcommand{\mod}{-\mathbf{mod}} 
        \newcommand{\Cx}[1]{#1-\mathbf{Comp}} 
        \newcommand{\vs}[1]{#1-\mathbf{vect}}
        \newcommand{\Vs}[1]{#1-\mathbf{Vect}}
        \newcommand{\vsp}[1]{#1-\mathbf{vect}^+} 
        \newcommand{\Top}{\mathbf{Top}} 
        \newcommand{\Setp}{\mathbf{Set}_*} 
        \newcommand{\Alg}[1]{#1-\mathbf{Alg}} 
        \newcommand{\cAlg}[1]{#1-\mathbf{cAlg}} 
        \newcommand{\PO}{\mathbf{PO}}
        \newcommand{\Cont}{\mathrm{Cont}}
        \newcommand{\MaT}[1]{\mathbf{Mat}_{#1}}
        \newcommand{\Rep}[2]{\mathbf{Rep}_{#1}(#2)}
        <!-- Greek     -->
        \def\l{\lambda}
        \def\lx{\lambda_x}
        \newcommand{\a}{\alpha}
        \def\b{\beta}
        \def\d{\delta}
        \def\e{\varepsilon}
        \def\g{\gamma}
        \def\t{\theta}
        \def\s{\sigma}
        \def\z{\zeta}
        \def\vp{\varphi}
        <!-- Letters     -->
        <!-- MathBB     -->
        \newcommand{\A}{\mathbb{A}}
        \newcommand{\B}{\mathbb{B}}
        \newcommand{\C}{\mathbb{C}}
        \newcommand{\D}{\mathbb{D}}
        \newcommand{\E}{\mathbb{E}}
        \newcommand{\F}{\mathbb{F}}
        \newcommand{\G}{\mathbb{G}}
        \newcommand{\H}{\mathbb{H}}
        \newcommand{\I}{\mathbb{I}}
        \newcommand{\J}{\mathbb{J}}
        \newcommand{\K}{\mathbb{K}}
        \newcommand{\L}{\mathbb{L}} 
        \newcommand{\M}{\mathbb{M}}
        \newcommand{\N}{\mathbb{N}}
        \newcommand{\O}{\mathbb{O}}
        \newcommand{\P}{\mathbb{P}}
        \newcommand{\Q}{\mathbb{Q}} 
        \newcommand{\R}{\mathbb{R}} 
        \newcommand{\S}{\mathbb{S}}
        \newcommand{\T}{\mathbb{T}}
        \newcommand{\U}{\mathbb{U}}
        \newcommand{\V}{\mathbb{V}}
        \newcommand{\W}{\mathbb{W}}
        \newcommand{\X}{\mathbb{X}}
        \newcommand{\Y}{\mathbb{Y}}
        \newcommand{\Z}{\mathbb{Z}} 
        \newcommand{\ON}{\mathbb{ON}}
        <!-- MathCal     -->
        \def\cA{\mathcal A} 
        \def\cB{\mathcal B} 
        \def\cC{\mathcal C} 
        \def\cD{\mathcal D} 
        \def\cE{\mathcal E} 
        \def\cF{\mathcal F} 
        \def\cG{\mathcal G} 
        \def\cH{\mathcal H} 
        \def\cI{\mathcal I} 
        \def\cJ{\mathcal J} 
        \def\cK{\mathcal K} 
        \def\cL{\mathcal L}
        \def\cM{\mathcal M} 
        \def\cN{\mathcal N} 
        \def\cO{\mathcal O} 
        \def\cP{\mathcal P} 
        \def\cQ{\mathcal Q} 
        \def\cR{\mathcal R} 
        \def\cS{\mathcal S} 
        \def\cT{\mathcal T} 
        \def\cU{\mathcal U} 
        \def\cV{\mathcal V} 
        \def\cW{\mathcal W} 
        \def\cX{\mathcal X} 
        \def\cY{\mathcal Y} 
        \def\cZ{\mathcal Z} 
        <!-- MathFrak     -->
        \newcommand{\fa}{{\mathfrak a}} 
        \newcommand{\fb}{{\mathfrak b}} 
        \newcommand{\fc}{{\mathfrak c}} 
        \newcommand{\fd}{{\mathfrak d}} 
        \newcommand{\fe}{{\mathfrak e}}
        \newcommand{\fm}{{\mathfrak m}} 
        \newcommand{\fp}{{\mathfrak p}} 
        \newcommand{\fq}{{\mathfrak q}} 
        \newcommand{\fK}{{\mathfrak K}} 
        \newcommand{\fR}{{\mathfrak R}} 
        <!-- MathScr     -->
        \def\sA{\mathscr A} 
        \def\sB{\mathscr B} 
        \def\sC{\mathscr C} 
        \def\sD{\mathscr D} 
        \def\sE{\mathscr E} 
        \def\sF{\mathscr F} 
        \def\sG{\mathscr G} 
        \def\sH{\mathscr H} 
        \def\sI{\mathscr I} 
        \def\sJ{\mathscr J} 
        \def\sK{\mathscr K} 
        \def\sL{\mathscr L}
        \def\sM{\mathscr M}
        \def\sN{\mathscr N}
        \def\sO{\mathscr O}
        \def\sP{\mathscr P}
        \def\sQ{\mathscr Q}
        \def\sR{\mathscr R}
        \def\sS{\mathscr S}
        \def\sT{\mathscr T}
        \def\sU{\mathscr U}
        \def\sV{\mathscr V}
        \def\sW{\mathscr W}
        \def\sX{\mathscr X}
        \def\sY{\mathscr Y}
        \def\sZ{\mathscr Z}
        <!-- Tildes     -->
        \def\tS{\tilde{S}}
        <!-- Algebra     -->
        \def\sdp{\rtimes}
        \newcommand{\tensor}{\otimes} 
        \newcommand{\igen}[1]{\langle #1 \rangle} 
        \def\nsg{\unlhd} 
        \def\kval{{k-\mathrm{valued}}} 
        \def\kalg{{k-\mathrm{alg}}}
        \newcommand\GG[2]{\Gal(#1/#2)}
        <!-- Matrices     -->
        \newcommand{\MF}[3]{\Mat_{#1\times #2}(#3)}
        \newcommand{\vectwo}[2]{\begin{bmatrix} #1 \\ #2 \end{bmatrix}} 
        \newcommand{\vecthree}[3]{\begin{bmatrix} #1 \\ #2 \\ #3\end{bmatrix}} 
        \def\ob{{\mathfrak{ob}} }
        <!-- Misc     -->
        \def\qed{\square}
        \def\sse{\subseteq}
        \def\ss{\subset} 
        \def\ssne{\subsetneq}
        \def\sm{\setminus}
        \def\inv{^{-1}} 
        \newcommand{\es}{\emptyset} 
        \newcommand{\Zm}[1]{\Z/({#1})} 
        \def\ov#1{\overline{#1}} 
        \def\xdots{x_1, \dots, x_n} 
        \def\adots{a_1, \dots, a_n} 
        \def\bdots{b_1, \dots, b_n} 
        \def\udots{u_1, \dots, u_n} 
        \newcommand{\leg}[2]{\left(\frac{{#1}}{{#2}}\right)} 
        \def\th{^{th}} 
        \def\htpy{\simeq_{\mathrm{htpc}}} 
        <!-- Math Text     -->
        \def\textand{ \, \text{and} \, } 
        \def\textor{ \, \text{or} \, } 
        \def\textfor{ \, \text{for} \, } 
        \def\textfa{ \, \text{for all} \, } 
        \def\textst{ \, \text{such that} \, } 
        \def\textin{ \, \text{in} \, } 
        \def\fg{ \, \text{finitely generated} \, }
        \newcommand{\op}{\mathrm{op}}
        <!-- Arrows     -->
        \newcommand{\xra}[1]{\xrightarrow{#1}} 
        \newcommand{\xora}[1]{\xtwoheadrightarrow{#1}} 
        \newcommand{\xira}[1]{\xhookrightarrow{#1}} 
        \newcommand{\xla}[1]{\xleftarrow{#1}} 
        \def\lra{\longrightarrow}
        \def\into{\hookrightarrow}
        \def\onto{\twoheadrightarrow}
        <!-- Vectors     -->
        \newcommand{\vv}[1]{\mathbf{#1}}
        \newcommand{\lm}[2]{{#1}\,\l + {#2}\,\mu} 
        \renewcommand{\v}{\vv{v}}
        \renewcommand{\u}{\vv{u}}
        \newcommand{\w}{\vv{w}}
        \newcommand{\x}{\vv{x}}
        \renewcommand{\k}{\vv{k}}
        \newcommand{\0}{\vv{0}}
        \newcommand{\1}{\vv{1}}
        \newcommand{\vecs}[2]{#1_1,#1_2,\dots,#1_{#2}}
        \newcommand{\us}[1][n]{\vecs{\u}{#1}}
        \newcommand{\vs}[1][n]{\vecs{\v}{#1}}
        \newcommand{\ws}[1][n]{\vecs{\w}{#1}}
        \newcommand{\vps}[1][n']{\vecs{\v'}{#1}}
        \newcommand{\ls}[1][n]{\vecs{\l}{#1}}
        \newcommand{\mus}[1][n]{\vecs{\mu}{#1}} 
        \newcommand{\lps}[1][n]{\vecs{\l'}{#1}}
        \def\td{\tilde{\delta}}
        \def\oo{\overline{\omega}}
        \def\ctJ{\tilde{\mathcal J}}
        \def\tPhi{\tilde{\Phi}}
        \def\te{\tilde{e}}
        \def\M{\operatorname{M}}
        \newcommand{\homotopic}{\simeq}
        \newcommand{\homeq}{\cong}
        \newcommand{\iso}{\approx}
        \newcommand{\dual}{\vee} 
        \DeclarePairedDelimiter{\abs}{|}{|}
        \newcommand{\bv}{{\bar{v}}}
        \newcommand{\bu}{{\bar{u}}}
        \newcommand{\bw}{{\bar{w}}}
        \newcommand{\by}{{\bar{y}}}
        \newcommand{\ba}{{\bar{a}}}
        \newcommand{\bb}{{\bar{b}}}
        \newcommand{\bx}{{\bar{x}}}
        \DeclarePairedDelimiterX\setof[2]{\{}{\}}{#1\,|\,#2}
        \newcommand{\vx}{\underline{x}}
        \renewcommand{mod}[1]{\text{(mod }{#1})}
        \newcommand{\Slv}[3]{\sum_{{#2}=1}^{{#3}} {#1}_{{#2}} \v_{{#2}}}
    </macros>

    <!-- this is the default, but supresses a warning -->
    <cross-references text="type-global" />

    <!-- tikz package and libraries for images -->
    <latex-image-preamble>
      \usepackage{tikz}
      \usetikzlibrary{backgrounds}
      \usetikzlibrary{snakes}
      \usepackage{tkz-graph}
      \usepackage{tkz-euclide}
      \usetikzlibrary{patterns}
      \usetikzlibrary{positioning}
      \usetikzlibrary{matrix,arrows}
      \usetikzlibrary{calc}
      \usetikzlibrary{shapes}
      \usetikzlibrary{through,intersections,decorations,shadows,fadings}
      \usepackage{tikz-cd}
      \usepackage{pgfplots}
    </latex-image-preamble>


    <rename element="inlineexercise">Exercise</rename>
    <rename element="outcomes">Summary</rename>
    <rename element="objectives">Reminders and Recollections</rename>

  </docinfo>

  <book xml:id="book-homological"><title>Postmodern Algebra</title>

    <frontmatter xml:id="frontmatter">

      <titlepage>
        <author>
          <personname>Sam Macdonald</personname>
          <department>Department of Mathematics</department>
          <institution>University of Nebraska -- Lincoln</institution>
        </author>
        <date>
          <today />
        </date>
      </titlepage>

      <colophon>
        <website>
          <url href="https://smakdonald.github.io/index.html" visual="">smakdonald.github</url>
        </website>

        <copyright>
          <year>2020<ndash />2023</year>
          <holder>Sam Macdonald</holder>
          <shortlicense> 
            This work is licensed under the Creative Commons Attribution-ShareAlike 4.0 International License. To view a copy of this license, visit <url href="http://creativecommons.org/licenses/by-sa/4.0/" visual="creativecommons.org/licenses/by-sa/4.0"> CreativeCommons.org</url>
          </shortlicense>
        </copyright>
      </colophon>

      <acknowledgement>
        <p>
          The content and structure have been heavily based on the courses and notes of the following faculty:
          <ul>
            <li>
              <p>
                <url href="https://eloisagrifo.github.io/" visual="">Eloísa Grifo</url>
              </p>
            </li>

            <li>
              <p>
                <url href="https://jack-jeffries.github.io/" visual="">Jack Jeffries</url>
              </p>
            </li>

            <li>
              <p>
                <url href="https://www.math.unl.edu/~aseceleanu2/" visual="">Alexandra Seceleanu</url>
              </p>
            </li>

            <li>
              <p>
                <url href="https://executivevc.unl.edu/faculty/faculty-affairs-team" visual="">Mark Walker</url>
                <fn>Mark has somehow managed to be the only member of the mathematics faculty to not have so much as a single page on the UNL website. Luckily, there are workarounds.</fn>
              </p>
            </li>
          </ul>
        </p>

        <p>
          And, as always, I reserve a speical thank you for <url href="https://sites.google.com/willamette.edu/emcnicholas/home" visual="">Erin McNicholas</url> and <url href="https://willamette.edu/undergraduate/math/faculty/johnson/index.html" visual="">Inga Johnson</url> for forever tinting the world of mathematics purple.
        </p>

      </acknowledgement>

    </frontmatter>

    <part xml:id="part-homalg"><title>Homological Algebra</title>

      <chapter xml:id="ch-intro"><title>Where are we going?</title>

        <paragraphs><title>Chain Complexes and Short Exact Sequences</title>
          
          <p>
            Homological algebra first appeared in the study of topological spaces. 
            Roughly speaking, homology is a way of associating a sequence of abelian groups (or modules, or other more sophisticated algebraic objects) to another object, for example a topological space. 
            The homology of a topological space encodes topological information about the space in algebraic language - this is what algebraic topology is all about.
          </p>
      
          <p>
            More formally, we will study complexes and their homology from a more abstract perspective. 
            While algebraic topologists are often concerned with complexes of abelian groups, we will work a bit more generally with complexes of <m>R</m>-modules. 
            The basic assumptions and notation about rings and modules we will use in this class can be found in Appendix A. 
            As an appetizer, we begin with some basic homological algebra definitions.
          </p>

          <definition xml:id="def-chain-complex"><title>Chain Complex</title>
            <statement>
              <p>
                A <em>chain complex</em> of <m>R</m>-modules <m>\left(C_{\bullet}, \partial_{\bullet}\right)</m>, also referred to simply as a <em>complex</em>, is a sequence of <m>R</m>-modules <m>C_{i}</m> and <m>R</m>-module homomorphisms
                <me>
                  \cdots \longrightarrow C_{n+1} \stackrel{\partial_{n+1}}{\longrightarrow} C_{n} \stackrel{\partial_{n}}{\longrightarrow} C_{n-1} \longrightarrow \cdots
                </me>
                such that <m>\partial_{n} \partial_{n+1}=0</m> for all <m>n</m>. 
                The maps <m>\partial_{n}</m> are the <em>differentials</em> of our complex.
                <idx><h>chain complex</h></idx>
                <idx><h>differential</h></idx>
              </p>
            </statement>
          </definition>

          <convention>
            <p>
              We may sometimes omit the differentials <m>\partial_{n}</m> and simply refer to the complex <m>C_{\bullet}</m> or even <m>C</m>; 
              we may also sometimes refer to <m>\partial_{\bullet}</m> as the differential of <m>C_{\bullet}</m>.
            </p>
          </convention>

          <definition xml:id="def-ses"><title>Exact Sequences</title>
            <statement>
              <p>
                The complex <m>\left(C_{\bullet}, \partial_{\bullet}\right)</m> is exact at <m>n</m> if im <m>\partial_{n+1}=\operatorname{ker} \partial_{n}</m>. 
                An exact sequence is a complex that is exact everywhere. 
                More precisely, an exact sequence of <m>R</m>-modules is a sequence
                <me>
                  \cdots \stackrel{f_{n-1}}{\longrightarrow} C_{n} \stackrel{f_{n}}{\longrightarrow} C_{n+1} \stackrel{f_{n+1}}{\longrightarrow} \cdots
                </me>
                of <m>R</m>-modules and <m>R</m>-module homomorphisms such that <m>\operatorname{im} f_{n}=\operatorname{ker} f_{n+1}</m> for all <m>n</m>. 
                An exact sequence of the form
                <me>
                  0 \longrightarrow A \longrightarrow B \longrightarrow C \longrightarrow 0
                </me>
                is a short exact sequence, sometimes written ses.
                <idx><h>exact sequence</h></idx>
                <idx><h>short exact sequence</h></idx>
              </p>
            </statement>
          </definition>

          <exercise xml:id="rem-0.2">
            <statement>
              <p>
                The condition that <m>\partial_{n} \partial_{n+1}=0</m> for all <m>n</m> implies that <m>\im \partial_{n+1} \subseteq \operatorname{ker} \partial_{n}</m>.
              </p>
            </statement>
          </exercise>
      
          <theorem xml:id="thm-0.4">
            <p>
              The sequence
              <me>
                0 \longrightarrow M \stackrel{f}{\longrightarrow} N
              </me>
              is exact if and only if <m>f</m> is injective. 
              Similarly,
              <me>
                M \stackrel{f}{\longrightarrow} N \longrightarrow 0
              </me>
              is exact if and only if <m>f</m> is surjective. 
              So
              <me>
                0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0
              </me>
              is a short exact sequence if and only if
              <ul>
                <li>
                  <p>
                    <m>f</m> is injective
                  </p>
                </li>
        
                <li>
                  <p>
                    <m>g</m> is surjective
                  </p>
                </li>
          
                <li>
                  <p>
                    <m>\operatorname{im} f=\operatorname{ker} g</m>.
                  </p>
                </li>
              </ul>
            </p>
          </theorem>
      
          <p>
            When this is indeed a short exact sequence, we can identify <m>A</m> with its image <m>f(A)</m>, and <m>A=\operatorname{ker} g</m>. 
            Moreover, since <m>g</m> is surjective, by the First Isomorphism Theorem we conclude that <m>C \cong B / f(A)</m>, so we might abuse notation and identify <m>C</m> with <m>B / A</m>.
          </p>

          <convention>
            <p>
              We write <m>A \rightarrow B</m> to denote a surjective map, and <m>A \hookrightarrow B</m> to denote an injective map.
            </p>
          </convention>

          <definition xml:id="def-cokernel"><title>Cokernel</title>
            <statement>
              <p>
                The cokernel of a map of <m>R</m>-modules <m>A \stackrel{f}{\rightarrow} B</m> is the module
                <me>
                  \text { coker } f:=B / \operatorname{im}(f).
                </me>
              </p>
            </statement>
          </definition>

          <exercise xml:id="rem-0.7">
            <statement>
              <p>
                We can rephrase <xref ref="thm-0.4"/> in a fancier language: if
                <me>
                  0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0
                </me>
                is a short exact sequence, then <m>A=\operatorname{ker} g</m> and <m>C=\operatorname{coker} f</m>.
              </p>
            </statement>
          </exercise>

          <example>
            <p>
              Let <m>\pi</m> be the canonical projection <m>\mathbb{Z} \longrightarrow \mathbb{Z} / 2 \mathbb{Z}</m>. 
              The following is a short exact sequence:
              <me>
                0 \longrightarrow \mathbb{Z} \stackrel{2}{\longrightarrow} \mathbb{Z} \stackrel{\pi}{\longrightarrow} \mathbb{Z} / 2 \mathbb{Z} \longrightarrow 0
              </me>
            </p>
          </example>

          <example>
            <p>
              Let <m>R=k[x]</m> be a polynomial ring over the field <m>k</m>. 
              The following is a short exact sequence:
              <me>
                0 \longrightarrow R \stackrel{\cdot x}{\longrightarrow} R \stackrel{\pi}{\longrightarrow} R /\igen x \longrightarrow 0 \text {. }
              </me>
            </p>
        
            <p>
              The first map is multiplication by <m>x</m>, and the second map is the canonical projection.
            </p>
          </example>

          <example>
            <p>
              Given an ideal <m>I</m> in a ring <m>R</m>, the inclusion map <m>\iota: I \rightarrow R</m> and the canonical projection <m>\pi: R \rightarrow R / I</m> give us the following short exact sequence:
              <me>
                0 \longrightarrow I \stackrel{\iota}{\longrightarrow} R \stackrel{\pi}{\longrightarrow} R / I \longrightarrow 0
              </me>
            </p>
          </example>

          <example>
            <p>
              Let <m>R=k[x] /\igen x</m>. 
              The following complex is exact:
            </p>
        
            <p>
              <me>
                \cdots \longrightarrow R \stackrel{\cdot x}{\longrightarrow} R \stackrel{\cdot x}{\longrightarrow} R \longrightarrow \cdots
              </me>
            </p>
        
            <p>
              Indeed, the image and the kernel of multiplication by <m>x</m> are both <m>\igen x</m>.
            </p>
          </example>
      
          <p>
            Sometimes we can show that certain modules vanish or compute them explicitly when they do not vanish by seeing that they fit in some naturally constructed exact sequence involving other modules we understand better. 
            We will discuss this in more detail when we talk about long exact sequences.
          </p>

          <remark>
            <p>
              The complex <m>0 \longrightarrow M \stackrel{f}{\longrightarrow} N \longrightarrow 0</m> is exact if and only if <m>f</m> is an isomorphism.
            </p>
          </remark>

          <remark>
            <p>
              The complex <m>0 \longrightarrow M \longrightarrow 0</m> is exact if and only if <m>M=0</m>.
            </p>
          </remark>

        </paragraphs>

        <paragraphs><title>Homology</title>
    
          <p>
            Historically, chain complexes first appeared in topology. 
            To study a topological space, one constructs a particular chain complex that arises naturally from information from the space, and then calculates its homology, which ends up encoding important topological information in the form of a sequence of abelian groups.
          </p>

          <definition xml:id="def-homology"><title>Homology</title>
            <statement>
              <p>
                The homology of the complex <m>\left(C_{\bullet}, \partial_{\bullet}\right)</m> is the sequence of <m>R</m>-modules
                <me>
                  \mathrm{H}_{n}\left(C_{\bullet}\right)=\mathrm{H}_{n}(C):=\frac{\operatorname{ker} \partial_{n}}{\operatorname{im} \partial_{n+1}} .
                </me>
              </p>
          
              <p>
                The <m>n</m>th homology of <m>\left(C_{\bullet}, \partial_{\bullet}\right)</m> is <m>\mathrm{H}_{n}(C)</m>. 
              </p>
            </statement>
          </definition>

          <convention>
            <p>
              The submodules <m>Z_{n}\left(C_{\bullet}\right)=Z_{n}(C):=\operatorname{ker} \partial_{n} \subseteq C_{n}</m> are sometimes called <em>cycles</em>, while the submodules <m>B_{n}\left(C_{\bullet}\right)=B_{n}(C):=\operatorname{im} \partial_{n+1} \subseteq C_{n}</m> are sometimes called <em>boundaries</em>. 
              One sometimes uses the word boundary to refer an element of <m>B_{n}(C)</m> (an <m>n</m>-boundary), and the word cycle to refer to an element of <m>Z_{n}(C)</m> (an <m>n</m>-cycle).
            </p>
          </convention>

          <remark>
            <p>
              The homology of a complex measures how far our complex is from being exact at each point. 
              Again, we can talk about the cohomology of a cochain complex instead, which we write as <m>\mathrm{H}^{n}(C)</m>; we will for now not worry about the distinction.
            </p>
          </remark>

          <exercise xml:id="rem-0.15">
            <statement>
              <p>
                Note that <m>\left(C_{\bullet}, \partial_{\bullet}\right)</m> is exact at <m>n</m> if and only if <m>\mathrm{H}_{n}\left(C_{\bullet}\right)=0</m>. 
              </p>
            </statement>
          </exercise>

          <example>
            <p>
              Let <m>R=k[x] /\igen{x^3}</m>. 
              Consider the following complex:
              <me>
                F_{\bullet}=\cdots \longrightarrow R \stackrel{\cdot x^{2}}{\longrightarrow} R \stackrel{\cdot x^{2}}{\longrightarrow} R \longrightarrow \cdots .
              </me>
              The image of multiplication by <m>x^{2}</m> is <m>\igen{x^2}</m>, while the the kernel of multiplication by <m>x^{2}</m> is <m>\igen{x} \supseteq\igen{x^2}</m>. 
              For all <m>n</m>,
              <me>
                \mathrm{H}_{n}\left(F_{\bullet}\right)=\igen{x} /\igen{x^2} \cong R /\igen{x}
              </me>
            </p>
          </example>

          <example>
            <p>
              Let <m>\mathbb{Z} \stackrel{\pi}{\longrightarrow} \mathbb{Z} / 2 \mathbb{Z}</m> be the canonical projection map. 
              Then
            </p>
            <image source="2023_08_28_614593e69373955f3addg-07.jpg" width="50%"/>
            <p>
              is a complex of abelian groups, since the image of multiplication by <m>4</m> is <m>4 \mathbb{Z}</m>, and that is certainly contained in <m>\operatorname{ker} \pi=2 \mathbb{Z}</m>. 
              The homology of <m>C</m> is
              <me>
                \begin{array}{ll}
                \mathrm{H}_{n}(C)=0 &amp; \text { for } n \geqslant 3 \\
                \mathrm{H}_{2}(C)=\frac{\operatorname{ker}(\mathbb{Z} \stackrel{4}{\rightarrow} \mathbb{Z})}{\operatorname{im}(0 \longrightarrow \mathbb{Z})}=\frac{0}{0}=0 &amp; \\
                \mathrm{H}_{1}(C)=\frac{\operatorname{ker}(\mathbb{Z} \stackrel{\pi}{\rightarrow} \mathbb{Z} / 2 \mathbb{Z})}{\operatorname{im}(\mathbb{Z} \stackrel{4}{\rightarrow} \mathbb{Z})}=\frac{2 \mathbb{Z}}{4 \mathbb{Z}} \cong \mathbb{Z} / 2 \mathbb{Z} &amp; \\
                \mathrm{H}_{0}(C)=\frac{\operatorname{ker}(\mathbb{Z} / 2 \mathbb{Z} \longrightarrow 0)}{\operatorname{im}(\mathbb{Z} \longrightarrow \mathbb{Z} / 2 \mathbb{Z})}=\frac{\mathbb{Z} / 2 \mathbb{Z}}{\mathbb{Z} / 2 \mathbb{Z}}=0 &amp; \text { for } n&lt;0 \\
                \mathrm{H}_{n}(C)=0 &amp;
                \end{array}
              </me>
            </p>
        
            <p>
              Notice that our complex is exact at <m>2</m> and <m>0</m>. 
              The exactness at <m>2</m> says that the map <m>\mathbb{Z} \stackrel{4}{\rightarrow} \mathbb{Z}</m> is injective, while exactness at <m>0</m> says that <m>\pi</m> is surjective.
            </p>
          </example>
      
          <p>
            Before we can continue any further into the world of homological algebra, we will need some categorical language. 
            We will take a short break to introduce category theory, and then armed with that knowledge we will be ready to study homological algebra.
          </p>

        </paragraphs>

      </chapter>

      <chapter xml:id="ch-categories"><title>Categories for the Working Homological Algebraist</title>

        <section xml:id="sec-categories"><title>Categories</title>
  
          <objectives>
            <ul>
              <li>
                
              </li>
            </ul>
          </objectives>

          <introduction>
            <p>
              Most fields in modern mathematics follow the same basic recipe: there is a main type of object one wants to study - groups, rings, modules, topological spaces, etc - and a natural notion of arrows between these - group homomorphisms, ring homomorphisms, module homomorphisms, continuous maps, etc. 
              The objects are often sets with some extra structure, and the arrows are often maps between the objects that preserve whatever that extra structure is. 
              Category theory is born of this realization, by abstracting the basic notions that make math and studying them all at the same time. 
              How many times have we felt a sense of déjà vu when learning about a new field of math? Category theory unifies all those ideas we have seen over and over in different contexts.
            </p>
  
            <p>
              Category theory is an entire field of mathematics in its own right. 
              As such, there is a lot to say about category theory, and unfortunately it doesn't all fit in the little time we have to cover it in this course. 
              You are strongly encouraged to learn more about category theory, for example from [ML98] or [Rie17].
            </p>
        
            <p>
              Before we go any further, note that there is a long and fun story about why we use the word collection when describing the objects in a category. 
              Not all collections are allowed to be sets, an issue that was first discovered by Russel with his famous Russel's Paradox. 
              <fn>The collection of all sets that don't contain themselves cannot be a set. Do you see why? </fn>
              Russel exposed the fact that one has to be careful with how we formalize set theory. 
              We follow the ZFC (Zermelo-Fraenkel with choice, short for the Zermelo-Fraenkel axioms plus the Axiom of Choice) axiomatization of set theory, and while we will not discuss the details of this formalization here, you are encouraged to read more on the subject.
            </p>
          </introduction>

          <subsection xml:id="subsec-cat"><title>Definition and First Examples</title>

            <blockquote>
              <p>
                <q>
                  We'll only use as much category theory as is necessary. Famous last words...
                </q>
              </p>
              <attribution>Roman Abramovich</attribution>
            </blockquote>
          
            <p>
              A category consists of a collection of objects and arrows or morphisms between those objects. 
              While these are often sets and some kind of functions between them, beware that this will not always be the case. 
              We will use the words morphism and arrows interchangeably, though arrow has the advantage of reminding us we are not necessarily talking about functions.
            </p>

            <definition xml:id="def-category"><title>Category</title>
              <statement>
                <p>
                  A <em>category</em> <m>\mathscr{C}</m> consists of three different pieces of data:
                  <ul>
                    <li>
                      <p>
                        a collection of <em>objects</em>, <m>\mathbf{ob}(\mathscr{C}),</m>
                      </p>
                    </li>

                    <li>
                      <p>
                        for each two objects, say <m>A</m> and <m>B</m>, a collection <m>\operatorname{Hom}_{\mathscr{C}}(A, B)</m> of <em>arrows</em> or <em>morphisms</em> from <m>A</m> to <m>B</m>, and
                      </p>
                    </li>
          
                    <li>
                      <p>
                        for each three objects <m>A, B</m>, and <m>C</m>, a <em>composition</em>
                      </p>
                  
                      <p>
                        <me>
                          \begin{gathered}
                          \operatorname{Hom}_{\mathscr{C}}(A, B) \times \operatorname{Hom}_{\mathscr{C}}(B, C) \longrightarrow \operatorname{Hom}_{\mathscr{C}}(A, C) . \\
                          (f, g) \longmapsto g \circ f
                          \end{gathered}
                        </me>
                      </p>
                    </li>
                  </ul>
                  </p>
          
                <p>
                  We will often drop the <m>\circ</m> and write simply <m>gf</m> for <m>g \circ f</m>.
                </p>
          
                <p>
                  These ingredients satisfy the following axioms:
                  <ol>
                    <li>
                      <p>
                        The <m>\operatorname{Hom}_{\mathscr{C}}(A, B)</m> are all disjoint. 
                        In particular, if <m>f</m> is an arrow in <m>\mathscr{C}</m>, we can talk about its <em>source</em> <m>A</m> and its <em>target</em> <m>B</m> as the objects such that <m>f \in \operatorname{Hom}_{\mathscr{C}}(A, B)</m>.
                      </p>
                    </li>
            
                    <li>
                      <p>
                        For each object <m>A</m>, there is an <em>identity arrow</em> <m>1_{A} \in \operatorname{Hom}_{\mathscr{C}}(A, A)</m> such that <m>1_{A} \circ f=f</m> and <m>g \circ 1_{A}=g</m> for all <m>f \in \operatorname{Hom}_{\mathscr{C}}(B, A)</m> and all <m>g \in \operatorname{Hom}_{\mathscr{C}}(A, B)</m>.
                      </p>
                    </li>
            
                    <li>
                      <p>
                        Composition is <em>associative</em>: <m>f \circ(g \circ h)=(f \circ g) \circ h</m> for all appropriately chosen arrows.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
            </definition>

            <convention>
              <p>
                We sometimes write <m>f: A \rightarrow B</m> or <m>A \stackrel{f}{\rightarrow} B</m> for an arrow <m>f \in \operatorname{Hom}(A, B)</m>.
              </p>
            </convention>

            <exercise xml:id="exe-1"><title>Unique Identity Morphism</title>
              <statement>
                <p>
                  Every object in a category has a unique identity morphism.
                </p>
              </statement>
              <solution>
                <p>
                  
                </p>
              </solution>
            </exercise>

            <p>
              Here are some categories you have likely encountered before:
            </p>

            <example xml:id="ex-categories"><title>Categories</title>
              <tabular>
                <row bottom="minor">
                  <cell halign="center"><term>Category</term></cell>
                  <cell halign="center"><term>Objects</term></cell>
                  <cell halign="center"><term>Morphisms</term></cell>
                </row>
                <row>
                  <cell halign="center"><m>\Set</m></cell>
                  <cell halign="center">sets</cell>
                  <cell halign="center">functions</cell>
                </row>
                <row>
                  <cell halign="center"><m>\Grp</m></cell>
                  <cell halign="center">groups</cell>
                  <cell halign="center">group homomorphisms</cell>
                </row>
                <row>
                  <cell halign="center"><m>\Ab</m></cell>
                  <cell halign="center">abelian groups</cell>
                  <cell halign="center">abelian group homomorphisms</cell>
                </row>
                <row>
                  <cell halign="center"><m>\Ring</m></cell>
                  <cell halign="center">rings</cell>
                  <cell halign="center">ring homomorphisms</cell>
                </row>
                <row>
                  <cell halign="center"><m>R\Mod</m></cell>
                  <cell halign="center"><m>R</m>-modules</cell>
                  <cell halign="center"><m>R</m>-maps</cell>
                </row>
                <row>
                  <cell halign="center"><m>\Top</m></cell>
                  <cell halign="center">topological spaces</cell>
                  <cell halign="center">continuous functions</cell>
                </row>
              </tabular>
            </example>

            <p>
              While the collections of objects and arrows might not actually be sets, sometimes they are.
            </p>

            <definition xml:id="def-locally-small"><title>Locally Small</title>
              <statement>
                <p>
                  A category <m>\mathscr{C}</m> is <em>locally small</em> if for all objects <m>A</m> and <m>B</m> in <m>\mathscr{C}, \operatorname{Hom}_{\mathscr{C}}(A, B)</m> is a set. 
                  A category <m>\mathscr{C}</m> is <em>small</em> if it is locally small and the collection of all objects in <m>\mathscr{C}</m> is a set.
                </p>
              </statement>
            </definition>
        
            <p>
              In fact, one can define a small category as one where the collection of all arrows is a set. 
              It follows immediately that the collection of all objects is also a set, since it must be a subset of the set of arrows - for each object, there is an identity arrow.
            </p>

            <p>
              Many important categories are at least locally small. 
            </p>

            <example>
              <p>
                <m>\Set</m> is locally small but not small. 
              </p>
            </example>

            <definition xml:id="def-concrete">
              <statement>
                <p>
                  Categories where the objects are sets with some extra structure and the arrows are some kind of functions between the objects are called concrete.
                </p>
              </statement>
            </definition>

            <p>
              All of the categories we have seen thus far have been conctrete, but this is not the case in general.
            </p>

            <example xml:id="non-concrete-categories"><title>Non-Concrete Categories</title>
              <p>
                <ol>
                  <li xml:id="ex-poset-category"><title><m>\PO(X)</m></title>
                    <p>
                      Given a partially ordered set <m>(X, \leqslant)</m>, we can regard <m>X</m> itself as a category: 
                      the objects are the elements of <m>X</m>, and for each <m>x</m> and <m>y</m> in <m>X, \operatorname{Hom}_{X}(x, y)</m> is either a singleton if <m>x \leqslant y</m> or empty if <m>x \neq y</m>. 
                      There is only one possible way to define composition, and the transitive property of <m>\leqslant</m> guarantees that the composition of arrows is indeed well-defined: 
                      if there is an arrow <m>i \rightarrow j</m> and an arrow <m>j \rightarrow k</m>, then <m>i \leqslant j</m> and <m>j \leqslant k</m>, so <m>i \leqslant k</m> and thus there is a unique arrow <m>i \rightarrow k</m>. 
                      This category is locally small, since all nonempty <m>\Hom</m>-sets are in fact singletons. 
                      It is in fact small, since the objects are by construction the set <m>X</m>.
                    </p>
                  </li>

                  <li xml:id="poset-categories-2"><title><m>\mathbf{n}</m></title>
                    <p>
                      For each positive integer <m>n</m>, the category <m>\mathbf{n}</m> has <m>n</m> objects <m>0,1, \ldots, n-1</m> and <m>\operatorname{Hom}(i, j)</m> is either empty if <m>i&gt;j</m> or a singleton if <m>i \leqslant j</m>. 
                      As <xref ref="ex-poset-category"/>, composition is defined in the only way possible, and things work out. 
                      This is the poset category for the poset <m>(\{0,1, \ldots, n-1\}, \leqslant)</m> with the usual <m>\leqslant</m>.
                    </p>
                  </li>

                  <li xml:id="ex-mat-category"><title><m>\textbf{Mat}-k</m></title>
                    <p>
                      Fix a field <m>k</m>. 
                      We define a category <m>\textbf{Mat}-k</m> with objects all positive integers, and given two positive integers <m>a</m> and <m>b</m>, the <m>\operatorname{Hom}</m>-set <m>\operatorname{Hom}(a, b)</m> consists of all <m>b \times a</m> matrices with entries in <m>k</m>. 
                      The composition rule is given by product of matrices: given <m>A \in \operatorname{Hom}(a, b)</m> and <m>B \in \operatorname{Hom}(b, c)</m>, the composition <m>B \circ A</m> is the matrix <m>B A \in \operatorname{Hom}(a, c)</m>. 
                      For each object <m>a</m>, its identity arrow is given by the <m>a \times a</m> identity matrix.
                    </p>
                  </li>
                </ol>
              </p>
            </example>

            <remark>
              <p>
                A locally small category with just one element is completely determined by its unique <m>\Hom</m>-set; 
                it thus consists of a set <m>S</m> with an associative operation that has an identity element, which we call a monoid. 
              </p>
            </remark>

          </subsection>

          <subsection xml:id="subsec-diagrams-arrows"><title>Diagrams and Morphisms</title>

            <blockquote>
              <p>
                <q>
                  Make big plans; aim high in hope and work, remembering that a noble, logical diagram once recorded will not die.
                </q>
              </p>
              <attribution>Daniel Burnham</attribution>
            </blockquote>

            <p>
              A key insight we get from category theory is that many important concepts can be understood through diagrams. 
              Homological algebra is in many ways the study of commutative diagrams. 
              One way to formalize what a diagram is involves talking about functors, which we will discuss in Section 1.2; here is a more down to earth definition.
            </p>

            <definition xml:id="def-diagram"><title>Diagram</title>
              <statement>
                <p>
                  A <em>diagram</em> in a category <m>\mathscr{C}</m> is a directed multigraph whose vertices are objects in <m>\mathrm{C}</m> and whose arrows/edges are morphisms in <m>\mathscr{C}</m>. 
                  A <em>commutative diagram</em> in <m>\mathscr{C}</m> is a diagram in which for each pair of vertices <m>A</m> and <m>B</m>, any two paths from <m>A</m> to <m>B</m> compose to the same morphism.
                </p>
              </statement>
            </definition>

            <example xml:id="ex-commutative-diagram"><title>Commutative Diagram</title>
              <p>
                The diagram
              </p>
              <image source="2023_08_28_614593e69373955f3addg-11.jpg" width="20%"/>
              <p>
                commutes if and only if <m>g f=v u</m>.
              </p>
            </example>
        
            <p>
              There are some special types of arrows we will want to consider.
            </p>

            <definition xml:id="def-inverses"><title>Morphism Inverses</title>
              <statement>
                <p>
                  Let <m>\mathscr{C}</m> be any category.
                  <ul>
                    <li>
                      <p>
                        An arrow <m>f \in \operatorname{Hom}_{\mathscr{C}}(A, B)</m> is <em>left invertible</em> if there exists <m>g \in \operatorname{Hom}_{\mathscr{C}}(B, A)</m> such that <m>g f=1_{A}</m>. 
                        In this case, we say that <m>g</m> is the left inverse of <m>f</m>. 
                        So <m>g</m> is a left inverse of <m>f</m> if the diagram
                      </p>
                      <image source="2023_08_28_614593e69373955f3addg-11(1).jpg" width="20%"/>
                      <p>
                        commutes.
                      </p>
                    </li>

                    <li>
                      <p>
                        An arrow <m>f \in \operatorname{Hom}_{\mathscr{C}}(A, B)</m> is <em>right invertible</em> if there exists <m>g \in \operatorname{Hom}_{\mathscr{C}}(B, A)</m> such that <m>f g=1_{B}</m>. 
                        In this case, we say that <m>g</m> is the right inverse of <m>f</m>. So <m>g</m> is a right inverse of <m>f</m> if the diagram
                      </p>
                      <image source="2023_08_28_614593e69373955f3addg-12.jpg" width="20%"/>
                      <p>
                        commutes.
                      </p>
                    </li>
                
                    <li>
                      <p>
                        An arrow <m>f \in \operatorname{Hom}_{\mathscr{C}}(A, B)</m> is an <em>isomorphism</em> if there exists <m>g \in \operatorname{Hom}_{\mathscr{C}}(B, A)</m> such that <m>g f=1_{A}</m> and <m>f g=1_{B}</m>. 
                        Unsurprisingly, such an arrow <m>g</m> is called the <em>inverse</em> of <m>f</m>.
                      </p>
                    </li>
                  </ul>
                </p>
              </statement>
            </definition>

            <example xml:id="ex-isomorphisms"><title>Isomorphisms</title>
              <p>
                <ol>
                  <li>
                    <p>
                      In <m>\Grp</m>, <m>\Ring</m>, and <m>R\Mod</m> the isomorphisms are the morphisms that are bijective functions.
                    </p>
                  </li>

                  <li>
                    <p>
                      In contrast, in <m>\Top</m> the isomorphisms are the homeomorphisms, which are the bijective continuous functions with continuous inverses. 
                      These are not the same thing as just the bijective continuous functions.
                    </p>
                  </li>
                </ol>
              </p>
            </example>

          </subsection>

          <subsection xml:id="subsec-sub-dual"><title>Opposite Categories and Subcategories</title>

            <blockquote>
              <p>
                <q>
                  The life of this world is nothing but the harmony of opposites.
                </q>
              </p>
              <attribution>Rumi</attribution>
            </blockquote>
      
            <p>
              We will now continue to follow a familiar pattern and define the related concepts one can guess should be defined.
            </p>

            <definition xml:id="def-subcategory"><title>Subcategory</title>
              <statement>
                <p>
                  A <em>subcategory</em> <m>\mathscr{C}</m> of a category <m>\mathscr{D}</m> consists of a subcollection of the objects of <m>\mathscr{D}</m> and a subcollection of the morphisms of <m>\mathscr{D}</m> such that the following hold:
                  <ul>
                    <li>
                      <p>
                        For every object <m>C</m> in <m>\mathscr{C}</m>, the arrow <m>1_{C} \in \operatorname{Hom}_{\mathscr{D}}(C, C)</m> is an arrow in <m>\mathscr{C}</m>.
                      </p>
                    </li>
              
                    <li>
                      <p>
                        For every arrow in <m>\mathscr{C}</m>, its source and target in <m>\mathscr{D}</m> are objects in <m>\mathscr{C}</m>.
                      </p>
                    </li>
              
                    <li>
                      <p>
                        For every pair of arrows <m>f</m> and <m>g</m> in <m>\mathscr{C}</m> such that <m>f g</m> is an arrow that makes sense in <m>\mathscr{D}</m>, <m>f g</m> is an arrow in <m>\mathscr{C}</m>.
                      </p>
                    </li>
                  </ul>
                </p>
              </statement>
            </definition>
        
            <p>
              In particular, <m>\mathscr{C}</m> is a category in its own right.
            </p>

            <example xml:id="ex-subcategories"><title>Subcategories</title>
              <p>
                The category of finitely generated <m>R</m>-modules with <m>R</m>-module homomorphisms is a subcategory of <m>R</m><m>\Mod</m>.
              </p>
            </example>

            <example xml:id="ex-more-categories"><title>Subcategories of Vector Spaces</title>
              <p>
                Let <m>k</m> be a field.
                <ol>
                  <li>
                    <p>
                      The collection of finite dimensional <m>k</m>-vector spaces with all linear transformations is a category.
                    </p>
                  </li>
            
                  <li>
                    <p>
                      The collection of all <m>n</m>-dimensional <m>k</m>-vector spaces with all linear transformations is a category.
                    </p>
                  </li>
            
                  <li>
                    <p>
                      The collection of all <m>k</m>-vector spaces (or <m>n</m>-dimensional vector spaces) with linear isomorphisms is a category.
                    </p>
                  </li>
            
                  <li>
                    <p>
                      The collection of all <m>k</m>-vector spaces (or <m>n</m>-dimensional vector spaces) with nonzero linear transformations is not a category, since it is not closed under composition.
                    </p>
                  </li>
            
                  <li>
                    <p>
                      The collection of all <m>n</m>-dimensional vector spaces with linear transformations of determinant 0 is not a category, since it does not have identity maps.
                    </p>
                  </li>
                </ol>
              </p>
            </example>
            
            <definition xml:id="def-full-subcategory"><title>Full Subcategory</title>
              <statement>
                <p>
                  A subcategory <m>\mathscr{C}</m> of <m>\mathscr{D}</m> is a <em>full subcategory</em> if <m>\mathscr{C}</m> includes all of the arrows in <m>\mathscr{D}</m> between any two objects in <m>\mathscr{C}</m>.
                </p>
              </statement>
            </definition>

            <example xml:id="ex-full-subcategories"><title>Full Subcategories</title>
              <p>
                <ol>
                  <li>
                    <p>
                      The category <m>\mathbf{Ab}</m> of abelian groups is a full subcategory of <m>\Grp</m>.
                    </p>
                  </li>

                  <li>
                    <p>
                      Since every group is a set, and every homomorphism is a function, <m>\Grp</m> is a subcategory of <m>\Set</m>. 
                      However, not every function between two groups is a group homomorphism, so <m>\Grp</m> is not a full subcategory of <m>\Set</m>.
                    </p>
                  </li>

                  <li>
                    <p>
                      The category whose objects are all sets and with arrows all bijections is a subcategory of <m>\Set</m> that is not full.
                    </p>
                  </li>
                </ol>
              </p>
            </example>
        
            <p>
              Here is another way of constructing a new category out of an old one.
            </p>

            <definition xml:id="def-opposite-category"><title>Opposite Category</title>
              <statement>
                <p>
                  Let <m>\mathscr{C}</m> be a category. 
                  The <em>opposite category</em> of <m>\mathscr{C}</m>, denoted <m>\mathscr{C}^{op}</m>, is a category whose objects are the objects of <m>\mathscr{C}</m>, and such that each arrow <m>f \in \operatorname{Hom}_{\mathscr{C} \text { op }}(A, B)</m> is the same as some arrow in <m>\operatorname{Hom}_{\mathscr{C}}(B, A)</m>. 
                  The composition <m>f g</m> of two morphisms <m>f</m> and <m>g</m> in <m>\mathscr{C}^{\text {op }}</m> is defined as the composition <m>g f</m> in <m>\mathscr{C}</m>.
                </p>
              </statement>
            </definition>
        
            <p>
              Many objects and concepts one might want to describe are obtained from existing ones by flipping the arrows. 
              Opposite categories give us the formal framework to talk about such things. 
              We will often want to refer to dual notions, which will essentially mean considering the same notion in a category <m>\mathscr{C}</m> and in the opposite category <m>\mathscr{C}^{\mathrm{op}}</m>; 
              in practice, this means we should flip all the arrows involved.
              We will see examples of this later on.
            </p>
        
            <p>
              The dual category construction gives us a formal framework to talk about dual notions. 
              We will often make a statement in a category <m>\mathscr{C}</m> and make comments about the dual statement; 
              in practice, this corresponds to simply switching the way all arrows go. 
              Here are some examples of dual notions and statements:
            </p>
        
            <table><title></title>
              <tabular>
              <row bottom="minor">
                <cell halign="center"><term>source</term></cell>
                <cell halign="center"><term>target</term></cell>
              </row>
              <row>
                <cell halign="center">epi</cell>
                <cell halign="center">mono</cell>
              </row>
              <row>
                <cell halign="center"><m>g</m> is a right inverse for <m>f</m></cell>
                <cell halign="center"><m>g</m> is a left inverse for <m>f</m></cell>
              </row>
              <row>
                <cell halign="center"><m>f</m> is invertible</cell>
                <cell halign="center"><m>f</m> is invertible</cell>
              </row>
              <row>
                <cell halign="center">initial objects</cell>
                <cell halign="center">terminal objects</cell>
              </row>
              <row>
                <cell halign="center">homology</cell>
                <cell halign="center">cohomology</cell>
              </row>
              </tabular>
            </table>
        
            <p>
              Note that the dual of the dual is the original statement; 
              we can make this more formal by saying that <m>\left(\mathscr{C}^{\mathrm{op}}\right)^{\text {op }}=\mathscr{C}</m>. 
              Sometimes we can easily prove a statement by dualizing; however, this is not always straightforward, and one needs to carefully dualize all portions of the statement in question. 
              Nevertheless, Sanders MacLane, one of the fathers of category theory, wrote that "If any statement about a category is deducible from the axioms for a category, the dual statement is likely deducible".
              One of the upshots of duality is that any theorem in category theory must simultaneously prove two theorems: the original statement and its dual. 
              But for this to hold, we need proofs that use the abstraction of a purely categorical proof.
            </p>
        
            <p>
              Opposite categories are more interesting than they might appear at first; 
              there is more than just flipping all the arrows. 
              For example, consider the opposite category of Set. 
              For any nonempty set <m>X</m>, there is a unique morphism in Set (a function) <m>i: \emptyset \rightarrow X</m>, but there are no functions <m>X \rightarrow \emptyset</m>, so <m>i^{\text {op }}: \emptyset \rightarrow X</m> is not a function. 
              Thus thinking about Set <m>{ }^{\text {op }}</m> is a bit difficult. 
              One can show that this is the category of complete atomic Boolean algebras - but we won't concern ourselves with what that means.
            </p>

          </subsection>

          <outcomes>
            <ul>
              <li>
                <p>

                </p>
              </li>
            </ul>
          </outcomes>
          
        </section>

        <section xml:id="sec-functors"><title>Functors</title>

          <objectives>
            <ul>
              <li>
                <xref text="title" ref="def-category"/>
                <xref text="title" ref="def-inverses"/>
                <xref text="title" ref="def-diagram"/>
              </li>
            </ul>
          </objectives>

          <subsection xml:id="subsec-functors"><title>Functor? Damn Near Killed 'er!</title>

            <blockquote>
              <p>
                <q>
                  If you're brave enough to say goodbye, life will reward you with a new hello.
                </q>
              </p>
              <attribution>Paulo Coelho</attribution>
            </blockquote>
            
            <p>
              Many mathematical constructions are functorial, in the sense that they behave well with respect to morphisms. 
              In the formalism of category theory, this means that we can think of a functorial construction as a functor.
            </p>

            <definition xml:id="def-functor"><title>Functor</title>
              <statement>
                <p>
                  Let <m>\mathscr{C}</m> and <m>\mathscr{D}</m> be categories. 
                  A covariant functor <m>F: \mathscr{C} \longrightarrow \mathscr{D}</m> is a mapping that assigns to each object <m>A</m> in <m>\mathscr{C}</m> an object <m>F(A)</m> in <m>\mathscr{D}</m>, and to each arrow <m>f \in \operatorname{Hom}_{\mathscr{C}}(A, B)</m> an arrow <m>F(f) \in \operatorname{Hom}_{\mathscr{D}}(F(A), F(B))</m>, such that
                  <ul>
                    <li>
                      <p>
                        <m>F</m> preserves the composition of maps, meaning <m>F(f g)=F(f) F(g)</m> for all arrows <m>f</m> and <m>g</m> in <m>\mathscr{C}</m>, and
                      </p>
                    </li>
          
                    <li>
                      <p>
                        <m>F</m> preserves the identity arrows, meaning <m>F\left(1_{A}\right)=1_{F(A)}</m> for all objects <m>A</m> in <m>\mathscr{C}</m>.
                      </p>
                    </li>
                  </ul>
                </p>
            
                <p>
                  A <em>contravariant functor</em> <m>F: \mathscr{C} \longrightarrow \mathscr{D}</m> is a mapping that assigns to each object <m>A</m> in <m>\mathscr{C}</m> an object <m>F(A)</m> in <m>\mathscr{D}</m>, and to each arrow <m>f \in \operatorname{Hom}_{\mathscr{C}}(A, B)</m> an arrow <m>F(f) \in \operatorname{Hom}_{\mathscr{D}}(F(B), F(A))</m>, such that
                  <ul>
                    <li>
                      <p>
                        <m>F</m> preserves the composition of maps, meaning <m>F(f g)=F(g) F(f)</m> for all composable arrows <m>f</m> and <m>g</m> in <m>\mathscr{C}</m>, and
                      </p>
                    </li>
          
                    <li>
                      <p>
                        <m>F</m> preserves the identity arrows, meaning <m>F\left(1_{A}\right)=1_{F(A)}</m> for all objects <m>A</m> in <m>\mathscr{C}</m>.
                      </p>
                    </li>
                  </ul>
                </p>
              </statement>
            </definition>
      
            <p>
              So a contravariant functor is a functor that flips all the arrows. 
              We can also describe a contravariant functor as a covariant functor from <m>\mathscr{C}</m> to the opposite category of <m>\mathscr{D}</m>, <m>\mathscr{D}{ }^{\text {op }}</m>.
            </p>

            <remark>
              <p>
                A contravariant functor <m>F: \mathscr{C} \longrightarrow \mathscr{D}</m> can be thought of as a covariant functor <m>\mathscr{C}^{\text {op }} \longrightarrow \mathscr{D}</m>, or also as a covariant functor <m>\mathscr{C} \longrightarrow \mathscr{D}^{\text {op }}</m>. 
                If using one of these conventions, one needs to be careful, however, when composing functors, so that the respective sources and targets match up correctly.
                While we haven't specially discussed how one composes functors, it should be clear that applying a functor <m>F: \mathscr{C} \longrightarrow \mathscr{D}</m> and <m>G: \mathscr{D} \longrightarrow \mathscr{E}</m> is the same as applying a functor <m>\mathscr{C} \longrightarrow \mathscr{D}</m>, which we can write as <m>G F</m>.
              </p>
        
              <p>
                For example, if <m>F: \mathscr{C} \longrightarrow \mathscr{D}</m> and <m>G: \mathscr{D} \longrightarrow \mathscr{E}</m> are both contravariant functors, the composition <m>G F: \mathscr{C} \longrightarrow \mathscr{E}</m> is a covariant functor, since
              </p>
              <image source="2023_08_28_614593e69373955f3addg-15.jpg"/>
              <p>
                So we could think of <m>F</m> as a covariant functor <m>\mathscr{C} \longrightarrow \mathscr{D}^{\text {op }}</m> and <m>G</m> as a covariant functor <m>\mathscr{D}^{\text {op }} \longrightarrow \mathscr{E}</m>. 
                Similarly, if <m>F: \mathscr{C} \longrightarrow \mathscr{D}</m> is a covariant functor and <m>G: \mathscr{D} \longrightarrow \mathscr{E}</m> is a contravariant functor, <m>G F: \mathscr{C} \longrightarrow \mathscr{E}</m> is a contravariant functor. 
                In this case, we can think of <m>G</m> as a covariant functor <m>\mathscr{D} \longrightarrow \mathscr{E}^{\mathrm{op}}</m>, so that <m>G F</m> is now a covariant functor <m>\mathscr{C} \longrightarrow \mathscr{E}^{\mathrm{op}}</m>.
              </p>
            </remark>

            <exercise xml:id="exe-8"><title>Functors Preserve Isomorphisms</title>
              <statement>
                <p>
                  Show that functors preserve isomorphisms.
                </p>
              </statement>
            </exercise>

            <p>
              Here are some examples of functors you may have encountered before.
            </p>

            <example><title>Functors</title>
              <p>
                <ol>
                  <li>
                    <p>
                      Many categories one may think about are concrete categories, where the objects are sets with some extra structure, and the arrows are functions between those sets that preserved that extra structure. 
                      The <term>forgetful functor</term> from such a category to <m>\Set</m> is the functor that, just as the name says, forgets that extra structure, and sees only the underlying sets and functions of sets. 
                      For example, the forgetful functor <m>\mathbf{G r} \longrightarrow</m> <m>\Set</m> sends each group to its underlying set, and each group homomorphism to the corresponding function of sets.
                    </p>
                  </li>

                  <li>
                    <p>
                      The <term>identity functor</term> <m>1_{\mathscr{C}}</m> on any category <m>\mathscr{C}</m> does what the name suggests: it sends each object to itself and each arrow to itself.
                    </p>
                  </li>

                  <li>
                    <p>
                      Given a group <m>G</m>, the subgroup <m>[G, G]</m> of <m>G</m> generated by the set of commutators
                      <me>
                        \left\{g h g^{-1} h^{-1} \mid g, h \in G\right\}
                      </me>
                      is a normal subgroup, and the quotient <m>G^{\text {ab }}:=G /[G, G]</m> is called the abelianization of <m>G</m>. 
                      The group <m>G^{\text {ab }}</m> is abelian. 
                      Given a group homomorphism <m>f: G \rightarrow H, f</m> automatically takes commutators to commutators, so it induces a homomorphism <m>\tilde{f}: G^{\mathrm{ab}} \rightarrow H^{\mathrm{ab}}</m>. 
                      More precisely, abelianization gives a covariant functor from <m>\Grp</m> to <m>\Ab</m>.
                    </p>
                  </li>

                  <li>
                    <p>
                      The <em>unit group functor</em> <m>-^{*}</m> : <m>\Ring</m> <m>\rightarrow</m> <m>\Grp</m> sends a ring <m>R</m> to its group of units <m>R^{*}</m>. 
                      To see this is indeed a functor, we should check it behaves well on morphisms; 
                      and indeed if <m>f: R \rightarrow S</m> is a ring homomorphism, and <m>u \in R^{*}</m> is a unit in <m>R</m>, then
                      <me>
                        f(u) f\left(u^{-1}\right)=f\left(u u^{-1}\right)=f\left(1_{R}\right)=1_{S},
                      </me>
                      so <m>f(u)</m> is a unit in <m>S</m>. 
                      Thus <m>f</m> induces a function <m>R^{*} \rightarrow S^{*}</m> given by restriction of <m>f</m> to <m>R^{*}</m>, which must therefore be a group homomorphism since <m>f</m> preserves products.
                    </p>
                  </li>

                  <li>
                    <p>
                      Fix a field <m>k</m>. 
                      Given a vector space <m>V</m>, the collection <m>V^{*}</m> of linear transformations from <m>V</m> to <m>k</m> is again a <m>k</m>-vector space, the <em>dual vector space</em> of <m>V</m>. If <m>\varphi: W \rightarrow V</m> is a linear transformation and <m>\ell: V \rightarrow K</m> is an element of <m>V^{*}</m>, then <m>\ell \circ \varphi: W \rightarrow k</m> is in <m>W^{*}</m>. 
                      Doing this for all elements <m>\ell \in V^{*}</m> gives a function <m>\varphi^{*}: V^{*} \rightarrow W^{*}</m>, and one can show that <m>\varphi^{*}</m> is a linear transformation. 
                      The assignment that sends each vector space <m>V</m> to its dual vector space <m>V^{*}</m> and each linear transformation <m>\varphi</m> to <m>\varphi^{*}</m> is a contravariant functor on Vect- <m>k</m>.
                    </p>
                  </li>

                  <li>
                    <p>
                      Localization is a functor. 
                      Let <m>R</m> be a ring and <m>W</m> be a multiplicatively closed set in <m>R</m>. 
                      There is localization at <m>W</m> induces a a functor <m>R</m><m>\mod</m> <m>\longrightarrow W^{-1} R</m><m>\mod</m> that sends each <m>R</m>-module <m>M</m> to <m>W^{-1} M</m>, and each <m>R</m>-module homomorphism <m>\alpha: M \longrightarrow N</m> to the <m>R</m>-module homomorphism <m>W^{-1} \alpha: W^{-1} M \longrightarrow W^{-1} N</m>.
                    </p>
                  </li>
                </ol>
              </p>
            </example>
      
            <exercise xml:id="exe-8.5">
              <statement>
                <p>
                  If we apply a covariant functor to a diagram, then we get a diagram of the same shape: 
                </p>
                <image source='2023_08_28_614593e69373955f3addg-16.jpg'/>
                <p>
                  However, if we apply a contravariant functor to the same diagram, we get a similar diagram but with the arrows reversed:
                </p> 
                <image source='2023_08_28_614593e69373955f3addg-17.jpg'/>
              </statement>
            </exercise>

          </subsection>

          <subsection xml:id="subsec-funcor-props"><title>Properties of Functors</title>
            
            <blockquote>
              <p>
                <q>

                </q>
              </p>
              <attribution></attribution>
            </blockquote>

            <p>
              If we think about functors as functions between categories, it's natural to consider what would be the appropriate versions of the notions of injective or surjective.
            </p>

            <definition xml:id="def-functor-properties">
              <statement>
                <p>
                  A covariant functor <m>F: \mathscr{C} \longrightarrow \mathscr{D}</m> between locally small categories is
                  <ul>
                    <li>
                      <p>
                        <em>faithful</em> if all the functions of sets
                        <me>
                          \begin{gathered}
                          \operatorname{Hom}_{\mathscr{C}}(A, B) \longrightarrow \operatorname{Hom}_{\mathscr{D}}(F(A), F(B)) \\
                          f \longmapsto F(f)
                          \end{gathered}
                        </me>
                        are injective.
                      </p>
                    </li>
              
                    <li>
                      <p>
                        <em>full</em> if all the functions of sets
                        <me>
                          \begin{gathered}
                          \operatorname{Hom}_{\mathscr{C}}(A, B) \longrightarrow \operatorname{Hom}_{\mathscr{D}}(F(A), F(B)) \\
                          f \longmapsto F(f)
                          \end{gathered}
                        </me>
                        are surjective.
                      </p>
                    </li>
              
                    <li>
                      <p>
                        <em>fully faithful</em> if it is full and faithful.
                      </p>
                    </li>
              
                    <li>
                      <p>
                        <em>essentially surjective</em> if every object <m>d</m> in <m>\mathscr{D}</m> is isomorphic to <m>F c</m> for <m>c</m> in <m>\mathscr{C}</m>.
                      </p>
                    </li>
            
                    <li>
                      <p>
                        an <em>embedding</em> if it is fully faithful and injective on objects.
                      </p>
                    </li>
                  </ul>
                </p>
              </statement>
            </definition>

            <example><title>Forgetfull Functor is Faithful</title>
              <p>
                The forgetful functor <m>R</m><m>\mod</m> <m>\longrightarrow</m> <m>\Set</m> is faithful since any two maps of <m>R</m>-modules with the same source and target coincide if and only if they are the same function of sets. 
                This functor is not full, since there not every functions between the underlying sets of two <m>R</m>-modules is an <m>R</m>-module homomorphism.
              </p>
            </example>

            <remark>
              <p>
                A fully faithful functor is not necessarily injective on objects, but it is injective on objects up to isomorphism.
              </p>
            </remark>

            <exercise xml:id="exe-9">
              <statement>
                <p>
                  Show that every fully faithful functor <m>\mathscr{C} \longrightarrow \mathscr{D}</m> reflects isos:
                  <ol>
                    <li>
                      <p>
                        If <m>f</m> is an arrow in <m>\mathscr{C}</m> such that <m>F (f )</m> is an iso, then <m>f</m> is an iso.
                      </p>
                    </li>

                    <li>
                      <p>
                        If <m>F (X)</m> and <m>F (Y )</m> are isomorphic, then the objects <m>X</m> and <m>Y</m> are isomorphic in <m>\mathscr{C}</m>.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
            </exercise>

            <remark>
              <p>
                A subcategory <m>\mathscr{C}</m> of <m>\mathscr{D}</m> is <em>full</em> if the inclusion functor <m>\mathscr{C} \longrightarrow \mathscr{D}</m> is full.
              </p>
            </remark>

            <example><title>Full Subcategories</title>
              <p>
                <ol>
                  <li>
                    <p>
                      The category <m>\mathbf{A b}</m> of abelian groups is a full subcategory of <m>\Grp</m>.
                    </p>
                  </li>

                  <li>
                    <p>
                      The category whose objects are all sets and with arrows all bijections is a subcategory of <m>\Set</m> that is not full. 
                    </p>
                  </li>
                </ol>
              </p>
            </example>

          </subsection>

          <subsection xml:id="subsec-hom-functors"><title>The <m>\Hom</m> Functors</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>

            <p>
              To close this section, here are the two of the most important functors we will discuss this semester:
            </p>

            <definition xml:id="def-hom-functor"><title><m>\Hom</m> Functors</title>
              <statement>
                <p>
                  Let <m>\mathscr{C}</m> be a locally small category. 
                  An object <m>A</m> in <m>\mathscr{C}</m> induces two <m>\Hom</m> functors:
                  <ul>
                    <li>
                      <p>
                        The covariant functor <m>\operatorname{Hom}_{\mathscr{C}}(A,-): \mathscr{C} \longrightarrow</m> Set is defined as follows:
                      </p>
                      <image source="2023_08_28_614593e69373955f3addg-18(1).jpg"/>
                      <p>
                        We may refer to this functor as the covariant functor represented by <m>A</m>. 
                        Given an arrow <m>f</m> in <m>\mathscr{C}</m>, we write <m>f_{*}:=\operatorname{Hom}_{\mathscr{C}}(A, f)</m>. 
                        It is easier to see what <m>f_{*}</m> does through the following commutative diagram:
                        <me>
                          f_{*}=\operatorname{Hom}_{\mathscr{C}}(A, f):
                        </me>
                      </p>
                      <image source="2023_08_28_614593e69373955f3addg-18(3).jpg" width="30%"/>
                    </li>
                  
                    <li>
                      <p>
                        The contravariant functor <m>\operatorname{Hom}_{\mathscr{C}}(-, B): \mathscr{C} \longrightarrow\Set</m> is defined as follows:
                      </p>
                      <image source="2023_08_28_614593e69373955f3addg-18(2).jpg"/>
                      <p>
                        We may refer to this functor as the contravariant functor represented by <m>B</m>. 
                        Given an arrow <m>f</m> in <m>\mathscr{C}</m>, we write <m>f^{*}:=\operatorname{Hom}_{\mathscr{C}}(A,-)</m>. 
                        It is easier to see what <m>f^{*}</m> does through the following commutative diagram:
                        <me>
                          f^{*}=\operatorname{Hom}_{\mathscr{C}}(f, B):
                        </me>
                      </p>
                      <image source="2023_08_28_614593e69373955f3addg-18.jpg" width="30%"/>
                    </li>
                  </ul>
                </p>
              </statement>
            </definition>

            <exercise xml:id="exe-10">
              <statement>
                <p>
                  Check that <m>\operatorname{Hom}(A,-)</m> and <m>\operatorname{Hom}(-, B)</m> are indeed functors.
                </p>
              </statement>
            </exercise>
      
            <p>
              We will be particularly interested in the <m>\Hom</m>-functors in the category <m>R</m><m>\mod</m>, which we will study in detail in a later chapter.
            </p>
          </subsection>

          <conclusion>
            <p>
              Functors we will be using:
              Hom, tensor, homology, localization
            </p>
          </conclusion>

          <outcomes>
            <ul>
              <li>
                <p>
                  Functors are generalizatons of functions that allow us to move between categories. 
                  They can be either covariant or contravariant.
                </p>
              </li>

              <li>
                <p>
                  Two extremely important functors are the <m>\Hom</m> functors.
                </p>
              </li>
            </ul>
          </outcomes>

        </section>

        <section xml:id="sec-natural-transformations"><title>Natural Transformations</title>

          <objectives>
            <ul>
              <li>
                Definitions: functor, hom sets, diagram, hom functors
              </li>
            </ul>
          </objectives>

          <subsection xml:id="subsec-natural"><title>Natural Transformations</title>

            <blockquote>
              <p>
                <q>
                  The beauty of the natural world lies in the details.
                </q>
              </p>
              <attribution>Natalie Angier</attribution>
            </blockquote>
            
            <definition xml:id="def-natural-transformation">
              <statement>
                <p>
                  Let <m>F</m> and <m>G</m> be covariant functors <m>\mathscr{C} \longrightarrow \mathscr{D}</m>. 
                  A <em>natural transformation</em> between <m>F</m> and <m>G</m> is a mapping that to each object <m>A</m> in <m>\mathscr{C}</m> assigns an arrow <m>\eta_{A} \in \operatorname{Hom}_{\mathscr{D}}(F(A), G(A))</m> such that for all <m>f \in \operatorname{Hom}_{\mathscr{C}}(A, B)</m>, the diagram
                </p>
                <image source="2023_08_28_614593e69373955f3addg-19(1).jpg" width="30%"/>
                <p>
                  commutes. 
                  A natural isomorphism is a <em>natural transformation</em> <m>\eta</m> where each <m>\eta_{A}</m> is an isomorphism. 
                  We sometimes write
                </p>
                <image source="2023_08_28_614593e69373955f3addg-19(2).jpg" width="30%"/>
                <p>
                  or simply <m>\eta: F \Longrightarrow G</m>.
                </p>

                <p>
                  Let <m>F</m> and <m>G</m> be contravariant functors <m>\mathscr{C} \longrightarrow \mathscr{D}</m>. 
                  A natural transformation between <m>F</m> and <m>G</m> is a mapping that to each object <m>A</m> in <m>\mathscr{C}</m> assigns an arrow <m>\eta_{A} \in \operatorname{Hom}_{\mathscr{D}}(F(A), G(A))</m> such that for all <m>f \in \operatorname{Hom}_{\mathscr{C}}(A, B)</m>, the diagram
                </p>
                <image source="2023_08_28_614593e69373955f3addg-19.jpg" width="30%"/>
                <p>
                  commutes.
                </p>
              </statement>
            </definition>

            <p>
              Often, when studying a particular topic, we sometimes say a certain map is natural to mean that there is actually a natural transformation behind it.
            </p>

            <example>
              <p>
                Recall the abelianization functor we discussed in Example 1.26. 
                The abelianization comes equipped with a natural projection map <m>\pi_{G}: G \longrightarrow G^{\text {ab }}</m>, the usual quotient map from <m>G</m> to a normal subgroup. 
                Here we mean natural in two different ways: both that this is common sense map to consider, and that this is in fact coming from a natural transformation. 
                What's happening behind the scenes is that abelianization is a functor <m>ab: \Grp\longrightarrow \Grp</m>. 
                On objects, the abelianizations functor is defined as <m>G \mapsto G^{\text {ab }}</m>. 
                Given an arrow, meaning a group homomorphism <m>G \stackrel{f}{\rightarrow} H</m>, one can check that <m>[G, G]</m> is contained in the kernel of <m>\pi_{H} f</m>, so <m>\pi_{H} f</m> factors through <m>G^{\text {ab }}</m>, and there exists a group homomorphism <m>f^{\mathrm{ab}}</m> making the following diagram commute:
              </p>
              <image source="2023_08_28_614593e69373955f3addg-19(3).jpg" width="30%"/>
              <p>
                So the abelianization functor takes the arrow <m>f</m> to <m>f^{\text {ab }}</m>. 
                The commutativity of the diagram above says that <m>\pi_{-}</m>is a natural transformation between the identity functor on <m>\Grp</m> and the abelianization functor, which we can write more compactly as
                <me>
                  \operatorname{Grp} \underset{\frac{\mathrm{id}}{\Downarrow \pi}}{\stackrel{\mathrm{ab}}{\longrightarrow}} \operatorname{Grp}.
                </me>
              </p>
            </example>

            <definition xml:id="def-functor-category"><title>Functor Category</title>
              <statement>
                <p>
                  Let <m>F, G: \mathscr{C} \longrightarrow \mathscr{D}</m> be two functors between the categories <m>\mathscr{C}</m> and <m>\mathscr{D}</m>. 
                  We write
                  <me>
                    \operatorname{Nat}(F, G)=\{\text { natural transformations } F \longrightarrow G\}.
                  </me>
                </p>
          
                <p>
                  Given two categories <m>\mathscr{C}</m> and <m>\mathscr{D}</m>, one can build a <em>functor category</em>
                  <fn>Yes, the madness is neverending.</fn>
                  with objects all covariant functors <m>\mathscr{C} \longrightarrow \mathscr{D}</m>, and arrows the corresponding natural transformations. 
                  This category is denoted <m>\mathscr{D}^{\mathscr{C}}</m>. 
                  Sometimes one writes <m>\operatorname{Hom}(F, G)</m> for <m>\operatorname{Nat}(F, G)</m>, but we will avoid that, as it might make things even more confusing.
                </p>
              </statement>
            </definition>
      
            <p>
              For the functor category to truly be a category, though, we need to know how to compose natural transformations.
            </p>

            <remark><title>Composition of Natural Transformations</title>
              <p>
                Consider natural transformations
              </p>
              <image source="2023_08_28_614593e69373955f3addg-20(3).jpg" width="30%"/>
              <p>
                and
              </p>
              <image source="2023_08_28_614593e69373955f3addg-20(1).jpg" width="30%"/>
              <p>
                We can compose them for form a new natural transformation
              </p>
              <image source="2023_08_28_614593e69373955f3addg-20.jpg" width="30%"/>
              <p>
                We should think of this composition as happening vertically. 
                For each object <m>C</m> in <m>\mathscr{C}, \eta \varphi</m> sends <m>C</m> to the arrow <m>F(A) \stackrel{\varphi_{A}}{\longrightarrow} G(A) \stackrel{\eta_{A}}{\longrightarrow} H(A)</m>. 
                This makes the diagram
              </p>
              <image source="2023_08_28_614593e69373955f3addg-20(2).jpg" width="30%"/>
              <p>
                commute.
              </p>
            </remark>

            <exercise xml:id="exe-11">
              <statement>
                <p>
                  Show that a natural transformation <m>\eta: \mathscr{C} \Longrightarrow \mathscr{D}</m> is a natural isomorphism if and only if there exists a natural transformation <m>\mu: \mathscr{D} \Longrightarrow \mathscr{C}</m> such that <m>\eta \circ \mu</m> is the identity natural isomorphism on <m>G</m> and <m>\mu \circ \eta</m> is the identity natural isomorphism on <m>F</m>.
                </p>
              </statement>
            </exercise>

            <definition xml:id="def-equivalent-categories"><title>Equivalent Categories</title>
              <statement>
                <p>
                  Two categories <m>\mathscr{C}</m> and <m>\mathscr{D}</m> are equivalent if there exist functors <m>F: \mathscr{C} \rightarrow \mathscr{D}</m> and <m>G: \mathscr{D} \rightarrow \mathscr{C}</m> and two natural isomorphisms <m>\alpha: G F \Longrightarrow 1_{\mathscr{C}}</m> and <m>\beta: F G \Longrightarrow 1_{\mathscr{D}}</m>. 
                  We say that a functor <m>F: \mathscr{C} \rightarrow \mathscr{D}</m> is an equivalence of categories if there exists a functor <m>G</m> and natural isomorphisms <m>\alpha</m> and <m>\beta</m> as above.
              </p>
              </statement>
            </definition>

            <p>
              If one assumes the Axiom of Choice, this is the right notion of isomorphism of two categories (though not in the categorical sense!); better said, two categories that are equivalent are essentially the same. 
              Note that this does not mean that there is a bijection between the objects of <m>\mathscr{C}</m> and the objects of <m>\mathscr{D}</m>. 
              In fact, one can show that a functor is an equivalence of categories if and only if it is fully faithful and essentially surjective - though this fact requires the Axiom of Choice!
            </p>

            <exercise xml:id="exe-13">
              <statement>
                <p>
                  Let <m>\mathscr{C}</m> be the category with one object <m>C</m> and a unique arrow <m>1_{C}</m>. Let <m>\mathscr{D}</m> be the category with two objects <m>D_{1}</m> and <m>D_{2}</m> and four arrows: 
                  the identities <m>1_{D_{i}}</m> and two isomorphisms <m>\alpha: D_{1} \rightarrow D_{2}</m> and <m>\beta: D_{2} \rightarrow D_{1}</m>. 
                  Let <m>\mathscr{E}</m> be the category with two objects <m>E_{1}</m> and <m>E_{2}</m> and only two arrows, <m>1_{E_{1}}</m> and <m>1_{E_{2}}</m>.
                  <ol>
                    <li>
                      <p>
                        Show that <m>\mathscr{C}</m> and <m>\mathscr{D}</m> are equivalent categories.
                      </p>
                    </li>

                    <li>
                      <p>
                        Show that <m>\mathscr{C}</m> and <m>\mathscr{E}</m> are not equivalent categories.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
            </exercise>

          </subsection>

          <subsection xml:id="subsec-yoneda"><title>The Yoneda Lemma</title>

            <blockquote>
              <p>
                <q>
                  If it walks like a duck and homs like a duck, it's naturally isomorphic to a duck.
                </q>
              </p>
              <attribution>Twitter User @_julesh_</attribution>
            </blockquote>
            
            <p>
              Even though this is only a short introduction to category theory, we would be remiss not to mention the <xref text="title" ref="thm-yoneda"/>, arguably the most important statement in category theory.
            </p>

            <theorem xml:id="thm-yoneda"><title>Yoneda Lemma</title>
              <statement>
                <p>
                  Let <m>\mathscr{C}</m> be a locally small category, and fix an object <m>A</m> in <m>\mathscr{C}</m>. 
                  Let <m>F: \mathscr{C} \longrightarrow</m> Set be a covariant functor. 
                  Then there is a bijection
                  <me>\operatorname{Nat}\left(\operatorname{Hom}_{\mathscr{C}}(A,-), F\right) \stackrel{\gamma}{\longrightarrow} F(A)</me>
                  Moreover, this correspondence is natural in both <m>A</m> and <m>F</m>.
                </p>
              </statement>

              <proof>
                <p>
                  Let <m>\varphi</m> be a natural transformation in <m>\operatorname{Nat}\left(\operatorname{Hom}_{\mathscr{C}}(A,-), F\right)</m>. 
                  The proof of the Yoneda Lemma is essentially the following diagram:
                </p>
                <image source="2023_08_28_614593e69373955f3addg-21.jpg"/>
                <p>
                  Our bijection will be defined by <m>\gamma(\varphi):=\varphi_{A}\left(1_{A}\right)</m>. 
                  We should first check that this makes sense: 
                  arrows in Set are just functions between sets, and so <m>\varphi_{A}</m> is a function of sets <m>\operatorname{Hom}_{\mathscr{C}}(A, A) \longrightarrow F(A)</m>. 
                  Also, <m>\operatorname{Hom}_{\mathscr{C}}(A, A)</m> is a set that contains at least the element <m>1_{A}</m>, and <m>\varphi_{A}\left(1_{A}\right)</m> is some element in the set <m>F(A)</m>.
                </p>
          
                <p>
                  Given any fixed <m>f \in \operatorname{Hom}_{\mathscr{C}}(A, X)</m>, the fact that <m>\varphi</m> is a natural transformation translates into the outer commutative diagram. 
                  In particular, the maps of sets <m>F(f) \varphi_{A}</m> and <m>\varphi_{X} \operatorname{Hom}_{\mathscr{C}}(A, f)</m> coincide, and must in particular take <m>1_{A}</m> to the same element in <m>F(X)</m>. 
                  This is the commutativity of the inner diagram, with <m>u:=\varphi_{A}\left(1_{A}\right)</m>.
                </p>
          
                <p>
                  The commutativity of the diagram above says that <m>\varphi</m> is completely determined by <m>\varphi_{A}\left(1_{A}\right)</m>, since for any other object <m>X</m> in <m>\mathscr{C}</m> and any arrow <m>f \in \operatorname{Hom}_{\mathscr{C}}(A, X)</m>, we necessarily have <m>\varphi_{X}(f)=F(f) \varphi_{A}\left(1_{A}\right)</m>. 
                  In particular, our map <m>\gamma(\varphi)=\varphi_{A}\left(1_{A}\right)</m> is injective. 
                  Moreover, note that each choice of <m>u \in F(A)</m> gives rise to a different natural transformation <m>\varphi</m> by setting <m>\varphi_{X}(f)=F(f) u</m>. 
                  So our map <m>\gamma</m> is indeed a bijection.
                </p>
          
                <p>
                  We now have two naturality statements to prove. 
                  Naturality in the functor means that given a natural isomorphism <m>\eta: F \longrightarrow G</m>, the diagram
                </p>
                <image source="2023_08_28_614593e69373955f3addg-22.jpg" width="50%"/>
                <p>
                  commutes. 
                  Given a natural transformation <m>\varphi</m> between <m>\operatorname{Hom}_{\mathscr{C}}(A,-)</m> and <m>F</m>,
                  <me>
                    \begin{array}{rlr}
                    \eta_{A} \circ \gamma_{F}(\varphi) &amp; =\eta_{A}\left(\varphi_{A}\left(1_{A}\right)\right) &amp; \text { by definition of } \gamma \\
                    &amp; =(\eta \circ \varphi)_{A}\left(1_{A}\right) &amp; \text { by definition of composition of natural transformations } \\
                    &amp; =\gamma_{G}(\eta \circ \varphi) &amp; \text { by definition of } \gamma \\
                    &amp; =\gamma_{G} \circ \eta_{*}(\varphi) &amp; \text { by definition of } \eta_{*}
                    \end{array}
                  </me>
                  so commutativity does hold. 
                  Naturality on the object means that given an arrow <m>f: A \longrightarrow B</m>, the diagram
                </p>
                <image source="2023_08_28_614593e69373955f3addg-22(1).jpg" width="50%"/>
                <p>
                  commutes. 
                  Given a natural transformation <m>\varphi</m> between <m>\operatorname{Hom}_{\mathscr{C}}(A,-)</m> and <m>F</m>,
                  <me>
                    F(f) \circ \gamma_{A}(\varphi)=F(f)\left(\varphi_{A}\left(1_{A}\right)\right)
                  </me>
                  while
                  <me>
                    \gamma_{B} \circ\left(f^{*}\right)^{*}(\varphi)=\gamma_{B}\left(\varphi \circ f^{*}\right)=\left(\varphi \circ f^{*}\right)_{B}\left(1_{B}\right)
                  </me>
                  Now notice that
                  <me>
                    \begin{array}{r}
                    \operatorname{Hom}_{\mathscr{C}}(B, B) \stackrel{f^{*}}{\longrightarrow} \operatorname{Hom}_{\mathscr{C}}(A, B) \stackrel{\varphi_{B}}{\longrightarrow} F(B) . \\
                    1_{B} \longmapsto f \longmapsto \varphi_{B}(f)
                    \end{array}
                  </me>
                </p>

                <p>
                  Let's look back at the big commutative diagram we started our proof with: it says in particular that <m>\varphi_{B}(f)=F(f)\left(\varphi_{A}\left(1_{A}\right)\right)</m>. 
                  So commutativity does hold, and we are done. 
                </p>
              </proof>
            </theorem>

            <p>
              One can naturally (pun intended) define the notion of functor category of contravariant functors, and then prove the corresponding <xref text="title" ref="thm-yoneda"/>, which will instead use the contravariant Hom functor.
            </p>

            <exploration><title>Contravariant version of the Yoneda Lemma</title>
              <p>
                Let <m>\mathscr{C}</m> be a locally small category, and fix an object <m>B</m> in <m>\mathscr{C}</m>. Let <m>F: \mathscr{C} \longrightarrow</m> Set be a contravariant functor. 
                Then there is a bijection
                <me>
                  \text { Nat }\left(\operatorname{Hom}_{\mathscr{C}}(-, B), F\right) \stackrel{\gamma}{\longrightarrow} F(B).
                </me>
              </p>
            </exploration>

            <p>
              In a way, the <xref text="title" ref="thm-yoneda"/> says that to give a natural transformation between the functors <m>\operatorname{Hom}_{\mathscr{C}}(A,-)</m> and <m>F</m> is choosing an element in <m>F(A)</m>.
            </p>

            <remark>
              <p>
                Notice that the <xref text="title" ref="thm-yoneda"/> says in particular that the collection of all natural transformations from <m>\operatorname{Hom}_{\mathscr{C}}(A,-)</m> to <m>F</m> is a set. 
                This wasn't clear a priori, since the collection of objects in <m>\mathscr{C}</m> is not necessarily a set.
              </p>
            </remark>

            <remark>
              <p>
                If we apply the <xref text="title" ref="thm-yoneda"/> to the case when <m>F</m> itself is also a Hom functor, say <m>F=\operatorname{Hom}_{\mathscr{C}}(B,-)</m>, the <xref text="title" ref="thm-yoneda"/> says that there is a bijection between <m>\operatorname{Nat}\left(\operatorname{Hom}_{\mathscr{C}}(A,-), \operatorname{Hom}_{\mathscr{C}}(B,-)\right)</m> and <m>\operatorname{Hom}_{\mathscr{C}}(B, A)</m>. 
                In particular, each arrow in <m>\mathscr{C}</m> determines a natural transformation between Hom functors.
              </p>
            </remark>
      
            <p>
              One of the consequences of the <xref text="title" ref="thm-yoneda"/> is the Yoneda Embedding, which roughly says that every locally small category can be embedded into the category of contravariant functors from <m>\mathscr{C}</m> to Set. 
              In particular, the Yoneda embedding says that natural transformations between representable functors correspond to arrows between the representing objects.
            </p>

            <theorem xml:id="thm-yondea-embedding"><title>Yoneda Embedding</title>
              <statement>
                <p>
                  Let <m>\mathscr{C}</m> be a locally small category. The covariant functor
                </p>
                <image source="2023_08_28_614593e69373955f3addg-23(1).jpg" width="50%"/>
                <p>
                  from <m>\mathscr{C}</m> to the category of contravariant functors <m>\mathscr{C} \longrightarrow</m> Set is an embedding. 
                  Moreover, the contravariant functor 
                </p>
                <image source="2023_08_28_614593e69373955f3addg-23.jpg" width="50%"/>
                <p>
                  from the category <m>\mathscr{C}</m> to the category of covariant functors <m>\mathscr{C} \longrightarrow</m> Set is also an embedding.
                </p>
              </statement>

              <proof>
                <p>
                  First, note that our functors are injective on objects because the <m>\Hom</m>-sets in our category are all disjoint. 
                  We need to check that given objects <m>A</m> and <m>B</m> in <m>\mathscr{C}</m>, we have bijections
                  <me>
                    \operatorname{Hom}_{\mathscr{C}}(A, B) \cong \operatorname{Nat}\left(\operatorname{Hom}_{\mathscr{C}}(-, A), \operatorname{Hom}_{\mathscr{C}}(-, B)\right)
                  </me>
                  and
                  <me>
                    \operatorname{Hom}_{\mathscr{C} \text { op }}(A, B) \cong \operatorname{Nat}\left(\operatorname{Hom}_{\mathscr{C}}(A,-) \operatorname{Hom}_{\mathscr{C}}(B,-)\right).
                  </me>
                </p>
          
                <p>
                  We will do the details for the first one, and leave the second as an exercise.
                </p>
          
                <p>
                  First, let us take a sanity check and confirm that indeed our proposed functors take arrows <m>f: A \longrightarrow B</m> in <m>\mathscr{C}</m> to natural transformations between <m>\operatorname{Hom}_{\mathscr{C}}(-, A)</m> and <m>\operatorname{Hom}_{\mathscr{C}}(-, B)</m>. 
                  This is essentially the content of Remark 1.43, but let's carefully check the details. 
                  The <xref text="title" ref="thm-yoneda"/> applied here tells us that each natural transformation <m>\varphi</m> between <m>\mathrm{Hom}_{\mathscr{C}}(-, A)</m> and <m>F=\operatorname{Hom}_{\mathscr{C}}(-, B)</m> corresponds to an element <m>u \in \operatorname{Hom}_{\mathscr{C}}(A, B)</m>, which we obtain by taking <m>u:=\varphi_{A}\left(1_{A}\right)</m>. 
                  As we discussed in the proof of the <xref text="title" ref="thm-yoneda"/>, we can recover <m>\varphi</m> from <m>u</m> by taking the natural transformation <m>\varphi</m> that for each object <m>X</m> in <m>\mathscr{C}</m> has <m>\varphi_{X}: \operatorname{Hom}_{\mathscr{C}}(X, A) \longrightarrow \operatorname{Hom}_{\mathscr{C}}(X, B)</m> given by <m>\varphi_{X}(f)=\operatorname{Hom}_{\mathscr{C}}(f, B)(u)=f_{*}(u)</m>.
                </p>
          
                <p>
                  We can see that different arrows <m>f</m> give rise to different natural transformations by applying the resulting natural transformation <m>f_{;} *</m> to the identity arrow <m>1_{A}</m>, which takes it to <m>f</m>. 
                  Moreover, the <xref text="title" ref="thm-yoneda"/> tells us that every natural transformation <m>\varphi</m> between <m>\operatorname{Hom}_{\mathscr{C}}(-, A)</m> and <m>\operatorname{Hom}_{\mathscr{C}}(-, B)</m> is the image of some <m>u</m>, as described above.
                </p>
              </proof>
            </theorem>
      
            <p>
              The functors that are naturally isomorphic to some Hom functor are important.
            </p>

            <definition xml:id="def-representable-functor">
              <statement>
                <p>
                  A covariant functor <m>F: \mathscr{C} \longrightarrow \Set</m> is <em>representable</em> if there exists an object <m>A</m> in <m>\mathscr{C}</m> such that <m>F</m> is naturally isomorphic to <m>\operatorname{Hom}_{\mathscr{C}}(A,-)</m>. 
                  A contravariant functor <m>F: \mathscr{C} \longrightarrow \Set</m> is <em>representable</em> if there exists an object <m>B</m> in <m>\mathscr{C}</m> such that <m>F</m> is naturally isomorphic to <m>\operatorname{Hom}_{\mathscr{C}}(-, B)</m>.
                </p>
              </statement>
            </definition>

            <example>
              <p>
                We claim that the identity functor Set <m>\longrightarrow</m> Set is representable. 
                Let 1 be a singleton set. 
                Given any set <m>X</m>, there is a bijection between elements <m>x \in X</m> and functions <m>\mathbf{1} \longrightarrow X</m> sending the one element in <m>\mathbf{1}</m> to each <m>x</m>. 
                Moreover, given any other set <m>Y</m>, and a function <m>f: X \longrightarrow Y</m>, our bijections make the following diagram commute:
              </p>
              <image source="2023_08_28_614593e69373955f3addg-24.jpg" width="30%"/>
              <p>
                This data gives a natural isomorphism between the identity functor and <m>\operatorname{Hom}_{\text {Set }}(\mathbf{1},-)</m>.
              </p>
            </example>

            <exercise xml:id="exe-14">
              <statement>
                <p>
                  Show that the forgetful functor <m>\Grp \longrightarrow \Set</m> is representable.
                </p>
              </statement>
            </exercise>

            <exercise xml:id="exe-15">
              <statement>
                <p>
                  Given a ring <m>R</m>, show that the forgetful functor <m>R\Mod \longrightarrow \Set</m> is representable.
                </p>
              </statement>
            </exercise>

            <p>
              A representable functor encodes a universal property of the object that represents it. 
              For example, in Example 1.46, mapping out of the singleton set is the same as choosing an element <m>x</m> in a set <m>X</m>. 
              We have all seen constructions that are at first a bit messy but that end up satisfying some nice universal property that makes everything work out. 
              At the end of the day, a universal property allows us to ignore the messy details and focus on the universal property, which usually says everything we need to know about the construction. 
              And as you may have already realized, universal properties are everywhere. 
              Before we give a formal definition, we want to discuss some important examples.
            </p>

          </subsection>

          <outcomes>
            <ul>
              <li>
                <p>

                </p>
              </li>
            </ul>
          </outcomes>
          
        </section>
        
      </chapter>

      <chapter xml:id="ch-chain-complexes"><title>The Category of Chain Complexes</title>

        <section xml:id="sec-compelx-maps"><title>Maps of Complexes</title>

          <objectives>
            <ul>
              <li>
                Definitions: category, complex
              </li>
            </ul>
          </objectives>

          <introduction>
            <p>
              We are finally ready to introduce the category of chain complexes, and to talk more about exact sequences in homology.
            </p>
          </introduction>

          <subsection xml:id="subsec-ch-r"><title>Establishing <m>\mathrm{Ch}(R)</m></title>

            <blockquote>
              <p>
                <q>
                  A chain is no stronger than its weakest link, and life is after all a chain.
                </q>
              </p>
              <attribution>William James</attribution>
            </blockquote>
            
            <p>
              Unsurprisingly, we can form a category of complexes, but to do that we need the right definition of maps between complexes. 
              We also take this section as a chance to set up some definitions we will need later. 
              One thing to keep in mind as we build our basic definitions: we also want homology to be functorial.
            </p>

            <definition xml:id="def-2.1"><title>Chain Map</title>
              <statement>
                <p>
                  Let <m>\left(F_{\bullet}, \partial_{\bullet}^{F}\right)</m> and <m>\left(G_{\bullet}, \partial_{\bullet}^{G}\right)</m> be complexes. 
                  A <em>map of complexes</em> or a <em>chain map</em>, which we write as <m>h:\left(F_{\bullet}, \partial_{\bullet}^{F}\right) \longrightarrow\left(G_{\bullet}, \partial_{\bullet}^{G}\right)</m> or simply <m>h: F \longrightarrow G</m>, is a sequence of homomorphisms of <m>R</m>-modules <m>h_{n}: F_{n} \longrightarrow G_{n}</m> such that the following diagram commutes:
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-051.jpg" width="75%"/>
                <p>
                  This means that <m>h_{n} \partial_{n+1}^{F}=\partial_{n+1}^{G} h_{n+1}</m> for all <m>n</m>.
                </p>
              </statement>
            </definition>

            <convention><title>Map vs. Chain Map</title>
              <p>
                Note that throughout, whenever we call a function <m>f: M \rightarrow N</m> between <m>R</m>-modules <m>M</m> and <m>N</m> a <em>map</em>, we really mean to say it is a homomorphism of <m>R</m>-modules.
              </p>
            </convention>

            <example xml:id="ex-2.2"><title>Zero and Identity Chain Maps</title>
              <p>
                The zero and the identity maps of complexes <m>\left(F_{\bullet}, \partial_{\bullet}\right) \longrightarrow\left(F_{\bullet}, \partial_{\bullet}\right)</m> are exactly what they sound like: the zero map <m>0_{F_{\bullet}}</m> is 0 in every homological degree, and the identity map <m>1_{F_{\bullet}}</m> is the identity in every homological degree.
              </p>
            </example>
      
            <p>
              This is the notion of morphism we would want to form a category of chain complexes.
            </p>

            <definition xml:id="def-2.3"><title>Category of Chain Complexes</title>
              <statement>
                <p>
                  Let <m>R</m> be a ring. 
                  The <em>category of chain complexes</em> of <m>R</m>-modules, denoted <m>\mathrm{Ch}(R\mod)</m> or simply <m>\mathrm{Ch}(R)</m>, is the category with objects all chain complexes of <m>R</m>-modules and arrows all maps of complexes of <m>R</m>-modules.
                </p>
              </statement>
            </definition>

            <convention><title><m>\mathrm{Ch}(\Ab)</m></title>
              <p>
                When <m>R=\mathbb{Z}</m>, we write <m>\mathrm{Ch}(\Ab)</m> for <m>\mathrm{Ch}(\mathbb{Z})</m>, the category of chain complexes of abelian groups.
              </p>
            </convention>
      
            <p>
              Note that the identity maps defined above are precisely the identity arrows in the category of chain complexes.
            </p>

            <exercise xml:id="exe-25"><title>Understanding <m>\mathrm{Ch}(R)</m></title>
              <statement>
                <ol>
                  <li>
                    <p>
                      Verify that <m>\mathrm{Ch}(R\mod)</m> is indeed a category.
                    </p>
                  </li>

                  <li>
                    <p>
                      Show that the isomorphisms in the category <m>\mathrm{Ch}(R)</m> are precisely the maps of complexes
                    </p>
                    
                    <image source="2023_10_23_e2d6a27704be928b3deeg-052.jpg" width="75%"/>
                          
                    <p>
                      such that <m>h_{n}</m> is an isomorphism for all <m>n</m>.
                    </p>
                  </li>
                </ol>
              </statement>
            </exercise>

            <definition xml:id="def-2.13"><title>Subcomplexes and Quotient Complexes</title>
              <statement>
                <p>
                  Given complexes <m>B</m> and <m>C, B</m> is a <em>subcomplex</em> of <m>C</m> if <m>B_{n}</m> is a submodule of <m>C_{n}</m> for all <m>n</m>, and the inclusion maps <m>\iota_{n}: B_{n} \subseteq C_{n}</m> define a map of complexes <m>\iota: B \longrightarrow C</m>. 
                </p>

                <p>
                  Given a subcomplex <m>B</m> of <m>C</m>, the <em>quotient</em> of <m>C</m> by <m>B</m> is the complex <m>C / B</m> that has <m>C_{n} / B_{n}</m> in homological degree <m>n</m>, with differential induced by the differential on <m>C_{n}</m>.
                </p>
              </statement>
            </definition>

            <exercise xml:id="exe-30"><title>Subcomplex Maps are Well-Defined</title>
              <statement>
                <p>
                  If <m>B</m> is a subcomplex of <m>C</m>, then the differential <m>\partial</m> on <m>C</m> satisfies <m>\partial_{n}\left(B_{n}\right) \subseteq B_{n-1}</m>. 
                  Therefore, <m>\partial_{n}</m> induces a map of <m>R</m>-modules <m>C_{n} / B_{n} \longrightarrow C_{n-1} / B_{n-1}</m> for all <m>n</m>, so that our definition of the differential on <m>C / B</m> actually makes sense.
                </p>
              </statement>
            </exercise>
      
            <p>
              We can also talk about kernels and cokernels of maps of complexes.
            </p>

            <definition xml:id="def-2.14"><title>Kernel, Cokernel</title>
              <statement>
                <p>
                  Given any map of complexes <m>f: B_{\bullet} \longrightarrow C_{\bullet}</m>, the <em>kernel</em> of <m>f</m> is the subcomplex <m>\ker f</m> of <m>B_{\bullet}</m> that we can assemble from the the kernels <m>\ker f_{n}</m>. 
                  More precisely, <m>\operatorname{ker} f</m> is the complex
                  <me>
                    \cdots \longrightarrow \operatorname{ker} f_{n+1} \longrightarrow \operatorname{ker} f_{n} \longrightarrow \operatorname{ker} f_{n-1} \longrightarrow \cdots
                  </me>
                  where the differentials are simply the corresponding restrictions of the differentials on <m>B_{\bullet}</m>. 
                </p>

                <p>
                  Similarly, the image of <m>f</m> is the subcomplex of <m>C</m>.
                  <me>
                    \cdots \longrightarrow \operatorname{im} f_{n+1} \longrightarrow \operatorname{im} f_{n} \longrightarrow \operatorname{im} f_{n-1} \longrightarrow \cdots
                  </me>
                  where the differentials are given by restriction of the corresponding differentials in <m>C_{\bullet}</m>. 
                  The <em>cokernel</em> of <m>f</m> is the quotient complex <m>C_{\bullet} / \operatorname{im} f</m>.
                </p>
              </statement>
            </definition>

            <p>
              Again, there are some details to check.
            </p>

            <exercise xml:id="exe-31">
              <statement>
                <p>
                  Show that the kernel, image, and cokernel of a complex map are indeed complexes.
                </p>
              </statement>
            </exercise>

          </subsection>

          <subsection xml:id="subsec-homology-functor"><title>The Homology Functor</title>

            <p>
              This is a good notion of map of complexes: it induces homomorphisms in homology, which in particular allows us to say that homology is a functor.
            </p>

            <lemma xml:id="lem-2.4"><title>Induced Homomorphisms on Homology</title>
              <statement>
                <p>
                  Let <m>h:\left(F_{\bullet}, \partial_{\bullet}^{F}\right) \longrightarrow\left(G_{\bullet}, \partial_{\bullet}^{G}\right)</m> be a map of complexes. 
                  For all <m>n, h_{n}</m> restricts to homomorphisms 
                  <ul>
                    <li>
                      <p>
                        <m>B_{n}(h): B_{n}\left(F_{\bullet}\right) \longrightarrow B_{n}\left(G_{\bullet}\right)</m> and 
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>Z_{n}(h): Z_{n}\left(F_{\bullet}\right) \longrightarrow Z_{n}\left(G_{\bullet}\right)</m>.
                      </p>
                    </li>
                  </ul>
                  As a consequence, <m>h</m> induces homomorphisms on homology <m>\mathrm{H}_{n}(h): \mathrm{H}_{n}\left(F_{\bullet}\right) \longrightarrow \mathrm{H}_{n}\left(G_{\bullet}\right)</m>.
                </p>
              </statement>

              <proof>

                <image source="lem2.4.png" width="75%"/>
                
                <p>
                  Since <m>h_{n} \partial_{n+1}^{F}=\partial_{n+1}^{G} h_{n+1}</m>, any element <m>a \in B_{n}\left(F_{\bullet}\right)</m>, say <m>a=\partial_{n+1}^{F}(b)</m>, is taken to
                  <me>
                    h_{n}(a)=h_{n} \partial_{n+1}^{F}(b)=\partial_{n+1}^{G} h_{n+1}(b) \in \operatorname{im} \partial_{n+1}^{G}=B_{n}\left(G_{\bullet}\right)
                  </me>
                </p>
          
                <p>
                  Similarly, if <m>a \in Z_{n}\left(F_{\bullet}\right)=\operatorname{ker} \partial_{n}^{F}</m>, then   
                  <me>
                    \partial_{n} h_{n}(a)=h_{n-1} \partial_{n}^{F}(a)=0
                  </me>
                  so <m>h_{n}(a) \in \operatorname{ker} \partial_{n}^{G}=Z_{n}\left(G_{\bullet}\right)</m>. 
                  Finally, the restriction of <m>h_{n}</m> to <m>Z_{n}\left(F_{\bullet}\right) \longrightarrow Z_{n}\left(G_{\bullet}\right)</m> sends <m>B_{n}\left(F_{\bullet}\right)</m> into <m>B_{n}\left(G_{\bullet}\right)</m>, and thus it induces a well-defined homomorphism on the quotients <m>\mathrm{H}_{n}\left(F_{\bullet}\right) \longrightarrow \mathrm{H}_{n}\left(G_{\bullet}\right)</m>.
                </p>
              </proof>
            </lemma>

            <definition xml:id="def-2.5"><title>Induced Map in Homology</title>
              <statement>
                <p>
                  Let <m>h:\left(F_{\bullet}, \partial_{\bullet}^{F}\right) \longrightarrow\left(G_{\bullet}, \partial_{\bullet}^{G}\right)</m> be a map of complexes. 
                  We call the map
                  <me>
                    \begin{aligned}
                    \mathrm{H}_{n}(h): \mathrm{H}_{n}\left(F_{\bullet}\right)
                    &amp; \longrightarrow \mathrm{H}_{n}\left(G_{\bullet}\right) \\
                    a+B_{n}(F) &amp; \longmapsto h_{n}(a)+B_{n}(G)
                    \end{aligned}
                  </me>
                  the <em>induced map in homology</em>, and sometimes denote it by <m>h_{*}</m>.
                </p>
              </statement>
            </definition>

            <exercise xml:id="exe-25.5"><title>Homology Functor</title>
              <statement>
                <p>
                  One can show that <m>\mathrm{H}_{n}</m> preserves compositions, and that moreover, the map in homology induced by the identity is the identity. 
                  Thus taking <m>n</m>th homology is a functor
                  <me>
                    \mathrm{H}_{n}: \mathrm{Ch}(R) \longrightarrow R \text {-Mod }
                  </me>
                  which takes each map of complexes <m>h: F_{\bullet} \longrightarrow G_{\bullet}</m> to the <m>R</m>-module homomorphism
                  <me>
                    \mathrm{H}_{n}(h): \mathrm{H}_{n}\left(F_{\bullet}\right) \longrightarrow \mathrm{H}_{n}\left(G_{\bullet}\right)
                  </me>
                </p>
              </statement>
            </exercise>
      
            <definition xml:id="def-2.6"><title>Quasi-Isomorphism</title>
              <statement>
                <p>
                  A map of chain complexes <m>h</m> is a <em>quasi-isomorphism</em> if it induces an isomorphism in homology, meaning <m>\mathrm{H}_{n}(h)</m> is an isomorphism of <m>R</m>-modules for all <m>n</m>. 
                  If there exists a quasi-isomorphism between two complexes <m>C</m> and <m>D</m>, we say that <m>C</m> and <m>D</m> are <em>quasi-isomorphic</em>, and write <m>C \simeq D</m>.
                </p>
              </statement>
            </definition>

            <remark xml:id="rem-2.7">
              <p>
                Note that saying that if <m>f</m> is a quasi-isomorphism between <m>F</m> and <m>G</m> is a stronger statement that the fact that <m>\mathrm{H}_{n}(F) \cong \mathrm{H}_{n}(G)</m> for all <m>n</m>: 
                it also says that there are isomorphisms <m>\mathrm{H}_{n}(F) \cong \mathrm{H}_{n}(G)</m> that are all induced by <m>f</m>.
              </p>
            </remark>

            <p>
              Not all quasi-isomorphisms are isomorphisms, as the following example shows:
            </p>

            <exercise xml:id="exe-26">
              <statement>
                <p>
                  Let <m>\pi</m> denote the projection map from <m>\mathbb{Z}</m> to <m>\mathbb{Z} / 2 \mathbb{Z}</m>. 
                  The chain map
                </p>

                <image source="2023_10_23_e2d6a27704be928b3deeg-053.jpg" width="75%"/>
                <p>

                  is a quasi-isomorphism.
                </p>
              </statement>
              
              <solution>
                <p>
                  When we look at the induced map of <m>f</m> on homology, the only index where the induced homomorphism may not be <m>0</m> is at <m>0</m>. 
                  Observe however, that <m>H_0(\pi):\Z/2\to\Z/2</m> is the identity map, as <m>0</m> is mapped to <m>0</m> and <m>1</m> is mapped to <m>1</m>. 
                  Thus <m>f</m> is indeed a quasi-isomorphism.
                </p>
              </solution>
            </exercise>
            
          </subsection>

          <subsection xml:id="subsec-homotopy"><title>Homotopy</title>

            <blockquote>
              <p>
                <q>
                  Transformation is not automatic. It must be learned; it must be led.
                </q>
              </p>
              <attribution>W. Edwards Deming</attribution>
            </blockquote>
            
            <definition xml:id="def-2.8"><title>Homotopy</title>
              <statement>
                <p>
                  Let <m>f, g: F \longrightarrow G</m> be maps complexes. 
                  A <em>homotopy</em>, sometimes referred to as a <em>chain homotopy</em>, between <m>f</m> and <m>g</m> is a sequence of maps <m>h_{n}: F_{n} \longrightarrow G_{n+1}</m>
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-053(1).jpg"/>
                <p>
                  such that
                  <me>
                    \partial_{n+1} h_{n}+h_{n-1} \partial_{n}=f_{n}-g_{n}
                  </me>
                  for all <m>n</m>. 
                  If there exists a homotopy between <m>f</m> and <m>g</m>, we say that <m>f</m> and <m>g</m> are <em>homotopic</em> or that they have the <em>same homotopy type</em>. 
                  We write <m>f \simeq g</m> to say that <m>f</m> and <m>g</m> are homotopic. 
                  If <m>f</m> is homotopic to the zero map, we say <m>f</m> is <em>nullhomotopic</em>, and write <m>f \simeq 0</m>. 
                  This should not be confused with the notation <m>C \simeq D</m> on complexes.
                </p>
              </statement>
            </definition>

            <exercise xml:id="exe-27"><title>Homotopy is an Equivalence Relation</title>
              <statement>
                <p>
                  Homotopy is an equivalence relation.
                </p>
              </statement>
            </exercise>
          
            <p>
              The equivalence classes under homotopy are called homotopy classes. 
              Homotopy is an interesting equivalence relation because homotopic maps induce the same map on homology.
            </p>

            <lemma xml:id="lem-2.9"><title>Nullhomotopic Maps Induce Zero Map in Homology</title>
              <statement>
                <p>
                  Let <m>f, g:\left(F_{\bullet}, \partial_{\bullet}^{F}\right) \longrightarrow\left(G_{\bullet}, \partial_{\bullet}^{G}\right)</m> be maps of complexes. 
                  If <m>f</m> is homotopic to <m>g</m>, then <m>\mathrm{H}_{n}(f)=\mathrm{H}_{n}(g)</m> for all <m>n</m>. 
                  In particular, every nullhomotopic map induces the zero map in homology.
                </p>
              </statement>

              <proof>
                <p>
                  Let <m>f, g:\left(F_{\bullet}, \partial_{\bullet}^{F}\right) \longrightarrow\left(G_{\bullet}, \partial_{\bullet}^{G}\right)</m> be homotopic maps of complexes, and let <m>h</m> be a homotopy between <m>f</m> and <m>g</m>. 
                  We claim that the map of complexes <m>f-g</m> (defined in the obvious way) sends cycles to boundaries. 
                  If <m>a \in Z_{n}\left(F_{\bullet}\right)</m>, then
                  <me>
                    (f-g)_{n}(a)=\partial_{n+1} h_{n}(a)+h_{n-1} \underbrace{\partial_{n}(a)}_{0}=\partial_{n+1}\left(h_{n}(a)\right) \in B_{n}\left(G_{\bullet}\right)
                  </me>
                  The map on homology induced by <m>f-g</m> must then be the <m>0</m> map, so <m>f</m> and <m>g</m> induce the same map on homology. 
                  Here we are implicitly using the fact that <m>\mathrm{H}_{n}(f+h)=\mathrm{H}_{n}(f)+\mathrm{H}_{n}(g)</m>, which we leave as an exercise to be further explored in <xref ref="rem-3.4"/>.
                </p>
              </proof>
            </lemma>

            <exercise xml:id="exe-27.5">
              <statement>
                <p>
                  Let <m>f, g:\left(F_{\bullet}, \partial_{\bullet}^{F}\right) \longrightarrow\left(G_{\bullet}, \partial_{\bullet}^{G}\right)</m> be maps of complexes. 
                  Show that <m>\mathrm{H}_{n}(f+g)=\mathrm{H}_{n}(f)+\mathrm{H}_{n}(g)</m> for all <m>n</m>.
                </p>
              </statement>
              <solution>
                <p>
                  
                </p>
              </solution>
            </exercise>

            <remark>
              <p>
                This makes homology an <em>additive functor</em>, which we define explicitly in <xref ref="def-3.2"/>.
              </p>
            </remark>
      
            <p>
              Notice, however, that the converse is false: the induced map in homology can be the zero map (for all homological degrees) even if the original map of complexes is not nullhomotopic.
            </p>

            <exercise xml:id="exe-28">
              <statement>
                <p>
                  Consider the following map of complexes:
                </p>
                
                <image source="2023_10_23_e2d6a27704be928b3deeg-054(1).jpg" width="75%"/>
                
                <p>
                  Show that this map is not nullhomotopic, but that the induced map in homology is zero.
                </p>
              </statement>
              <solution>
                <p>
                  Suppose by way of contradiction that <m>g</m> is nullhomotopic. 
                  Thus <m>\partial_1^B h_0 + h_{-1}\partial_0^A = g - 0=g</m>, where the <m>h_i</m> arise from the definition of homotopy. 
                  Consider <m>1 \in \mathbb{Z}/2</m>. As <m>g(1) = 2</m> and <m>h_{-1}\partial_0^A(1) = 0</m>, by the given equality we must have <m>\partial_1^B h_0(1)=2</m>. 
                  Thus <m>h_0(1)</m> must map to either <m>1</m> or <m>3</m> in <m>\mathbb{Z}/4\Z</m>. 
                  However, the following shows that neither can be the case:
	              </p>

                <p>
                  <me>
                    \begin{aligned}
                      0 = h_0(0) &amp; = h_0(1+1)         &amp;  0 = h_0(0) &amp; = h_0(1+1+1)\\ 
                                 &amp; = h_0(1) + h_0(1)  &amp;             &amp; = h_0(1) + h_0(1) + h_0(1)\\ 
                                 &amp; = 1 + 1            &amp;             &amp; = 3 + 3 + 3\\
                                 &amp; = 2.               &amp;             &amp; = 1.
                    \end{aligned}
                  </me>
                </p>

                <p>
                  As <m>0 \neq 2</m> and <m>0 \neq 1</m> in <m>\Z/4\Z</m>, we have reached a contradiction. 
                  Thus, <m>g</m> is not nullhomotopic.
                </p>

                <p>
                  However, the induced map in homology at the <m>0^{th}</m> degree is <me>H_0(g): H_0(A) \longrightarrow H_0(B) = \mathbb{Z}/ 2 \longrightarrow \frac{\mathbb{Z}/4}{\mathbb{Z}/2},</me> where <m>x \longmapsto 2x + \mathbb{Z}/2\mathbb{Z}</m>. 
                  As <m>2x + \mathbb{Z}/2 = 0 + \mathbb{Z}/2</m> for all <m>x</m>, we see that <m>H_0(g)=0</m>. 
                  As this was the only location where the homology could have been nonzero, we see that the induced map on <m>g</m> is zero.
                </p>
              </solution>
            </exercise>

            <definition xml:id="def-2.10"><title>Homotopy Equivalent</title>
              <statement>
                <p>
                  If <m>f:\left(F_{\bullet}, \partial_{\bullet}^{F}\right) \longrightarrow\left(G_{\bullet}, \partial_{\bullet}^{G}\right)</m> and <m>g:\left(G_{\bullet}, \partial_{\bullet}^{G}\right) \longrightarrow\left(F_{\bullet}, \partial_{\bullet}^{F}\right)</m> are maps of complexes such that <m>f g</m> is homotopic to the identity map on <m>\left(G_{\bullet}, \partial_{\bullet}^{G}\right)</m> and <m>g f</m> is homotopic to the identity chain map on <m>\left(F_{\bullet}, \partial_{\bullet}^{F}\right)</m>, we say that <m>f</m> and <m>g</m> are <em>homotopy equivalences</em> and <m>\left(F_{\bullet}, \partial_{\bullet}^{F}\right)</m> and <m>\left(G_{\bullet}, \partial_{\bullet}^{G}\right)</m> are <em>homotopy equivalent</em>.
                </p>
              </statement>
            </definition>

            <corollary xml:id="cor-2.11"><title>Homotopy Equvivalences are Quasi-Isomorphisms</title>
              <statement>
                <p>
                  Homotopy equivalences are quasi-isomorphisms.
                </p>
              </statement>

              <proof>
                <p>
                  If <m>f:\left(F_{\bullet}, \partial_{\bullet}^{F}\right) \longrightarrow\left(G_{\bullet}, \partial_{\bullet}^{G}\right)</m> and <m>g:\left(G_{\bullet}, \partial_{\bullet}^{G}\right) \longrightarrow\left(F_{\bullet}, \partial_{\bullet}^{F}\right)</m> are such that <m>f g</m> is homotopic to <m>1_{G_{\bullet}}</m> and <m>g f</m> is homotopic to <m>1_{F_{\bullet}}</m>, then by <xref ref="lem-2.9"/> the map <m>f g</m> induces the identity map on homology. 
                  So for all <m>n</m> we have
                  <me>
                    \mathrm{H}_{n}(f) \mathrm{H}_{n}(g)=\mathrm{H}_{n}(f g)=\mathrm{H}_{n}(1)=1.
                  </me>
                  Therefore, <m>\mathrm{H}_{n}(f)</m> and <m>\mathrm{H}_{n}(g)</m> must both be isomorphisms.
                </p>
              </proof>
            </corollary>
      
            <p>
              The converse is false.
            </p>

            <exercise xml:id="exe-29">
              <statement>
                <p>
                  Let <m>\pi</m> denote the projection map from <m>\mathbb{Z}</m> to <m>\mathbb{Z} / 2 \mathbb{Z}</m>. 
                  The chain map
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-054.jpg" width="75%"/>
                <p>
                  is a quasi-isomorphism but not a homotopy equivalence.
                </p>
              </statement>
              <solution>
                <p>
                  
                </p>
              </solution>
            </exercise>

            <remark xml:id="rem-2.12">
              <p>
                The relation <m>F \simeq G</m>, meaning "there is a quasi-isomorphism from <m>F</m> to <m>G</m> ", is not symmetric: in <xref ref="exe-29"/>, there is no quasi-isomorphism going in the opposite direction of the one given.
              </p>
            </remark>

          </subsection>

          <subsection xml:id="subsec-complex-complex"><title>Complexes of Complexes</title>

            <blockquote>
              <p>
                <q>
                  Every complex problem has a simple solution that doesn't work.
                </q>
              </p>
              <attribution>H.L. Mencken</attribution>
            </blockquote>
    
            <p>
              Now that we know about maps between complexes, it's time to point out that we can also talk about complexes of complexes and exact sequences of complexes. 
              While we will later formalize this a little better when we discover that <m>\mathrm{Ch}(R)</m> is an <em>abelian category</em>, let's for now give quick definitions that we can use.
            </p>

            <definition xml:id="def-2.15"><title>Complexes in <m>\mathrm{Ch}(R)</m></title>
              <statement>
                <p>
                  A <em>complex</em> in <m>\mathrm{Ch}(R)</m> is a sequence of complexes of <m>R</m>-modules <m>C_{n}</m> and chain maps <m>d_{n}: C_{n} \longrightarrow C_{n-1}</m> between them
                  <me>
                    \cdots \longrightarrow C_{n+1} \stackrel{d_{n+1}}{\longrightarrow} C_{n} \stackrel{d_{n}}{\longrightarrow} C_{n-1} \longrightarrow \cdots
                  </me>
                  such that <m>d_{n} d_{n+1}=0</m> for all <m>n</m>. 
                  A complex of complexes is a diagram of the form
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-055.jpg" width="75%"/>
                <p>
                  where <m>C_{i, j}</m> is the module in homological degree <m>j</m> in the complex <m>C_{i}</m>. 
                  The <m>n</m>th column corresponds to the complex <m>C_{n}</m>, and every row is also a complex. 
                  The vertical maps are the differentials on each individual complex; 
                  the horizontal maps are the differentials on the complex of complexes.
                </p>
              </statement>
            </definition>
      
            <p>
              Given a complex <m>C</m> in <m>\operatorname{Ch}(R)</m>, we can talk about cycles and boundaries, which are a sequence of subcomplexes of the complexes in <m>C</m>, and thus its homology. 
              Such a complex is exact if <m>\operatorname{im} d_{n+1}=\operatorname{ker} d_{n}</m> for all <m>n</m>.
            </p>

            <definition xml:id="def-2.16"><title>Short Exact Sequences in <m>\mathrm{Ch}(R)</m></title>
              <statement>
                <p>
                  A <em>short exact sequence</em> of complexes is an exact complex in <m>\mathrm{Ch}(R)</m> of the form
                  <me>
                    0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0 .
                  </me>
                  Equivalently, a short exact sequence of complexes is a commutative diagram
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-056.jpg" width="75%"/>
                <p>
                  where the rows are exact and the columns are complexes.
                </p>
              </statement>
            </definition>

          </subsection>

          <outcomes>
            <ul>
              <li>
                <p>

                </p>
              </li>

              <li>
                <p>

                </p>
              </li>
            </ul>
          </outcomes>

        </section>

        <section xml:id="sec-split"><title>Split Exact Sequences</title>

          <objectives>
            <ul>
              <li>
                
              </li>
            </ul>
          </objectives>

          <subsection xml:id="subsec-splitting"><title>Definition and the Splitting Lemma</title>

            <blockquote>
              <p>
                <q>
                  The split in you is clear.
                </q>
              </p>
              <attribution>John Cantwell Kiley</attribution>
            </blockquote>
          
            <p>
              In this section, we will discuss short exact sequences of modules in a bit more detail. 
              We note, however, that everything we will discuss here can be extended for short exact sequences of complexes, and that the generalization is not too difficult: one just needs to replace modules with complexes and maps of modules by maps of complexes.
            </p>

            <example xml:id="ex-2.17"><title>Trivial Short Exact Sequences</title>
              <p>
                Fix a ring <m>R</m>, and let <m>A</m> and <m>C</m> be <m>R</m>-modules. 
                Consider the inclusion <m>i: A \rightarrow A \oplus C</m> of <m>A</m> into the first component of the direct sum, and the projection map <m>\pi: A \oplus C \rightarrow C</m> onto the second component of the product. 
                These two maps fit into a short exact sequence
                <me>
                  0 \longrightarrow A \stackrel{i}{\longrightarrow} A \oplus C \stackrel{p}{\longrightarrow} C \longrightarrow 0
                </me>
                These are sometimes called <em>trivial short exact sequences</em>.
              </p>
            </example>
        
            <p>
              On the one hand, the short exact sequences that look like this one are very important; 
              on the other hand, not all short exact sequences are of this type.
            </p>

            <definition xml:id="def-2.18"><title>Split Short Exact Sequences</title>
              <statement>
                <p>
                  We say that a short exact sequence
                  <me>
                    0 \longrightarrow A \longrightarrow B \longrightarrow C \longrightarrow 0
                  </me>
                  <em>splits</em> or is a <em>split short exact sequence</em> if it is isomorphic to
                  <me>
                    0 \longrightarrow A \stackrel{i}{\longrightarrow} A \oplus C \stackrel{p}{\longrightarrow} C \longrightarrow 0
                  </me>
                  where <m>i</m> is the inclusion of the first component and <m>p</m> is the projection onto the second component.
                </p>
              </statement>
            </definition>

            <lemma xml:id="lem-2.19"><title>Splitting Lemma</title>
              <statement>
                <p>
                  Consider the short exact sequence
                  <me>
                    0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0
                  </me>
                  of <m>R</m>-modules. 
                  The following are equivalent:
                  <ol>
                    <li>
                      <p>
                        There exists a homomorphism of <m>R</m>-modules <m>q: B \longrightarrow A</m> such that <m>q f=\operatorname{id}_{A}</m>.
                      </p>
                    </li>
        
                    <li>
                      <p>
                        There exists a homomorphism of <m>R</m>-modules <m>r: C \longrightarrow B</m> such that <m>g r=\operatorname{id}_{C}</m>.
                      </p>
                    </li>
        
                    <li>
                      <p>
                        The short exact sequence splits.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>

              <proof><title>Proof: <m>3\Rightarrow 1</m> and <m>3\Rightarrow 2</m></title>
                <p>
                  First, we will show that c implies a and b. If the sequence splits, then consider an isomorphism of complexes
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-057.jpg" width="50%"/>
                <p>
                  meaning that the diagram commutes and <m>a, b</m>, and <m>c</m> are isomorphisms of <m>R</m>-modules, <m>i</m> is the inclusion in the first component, and <m>p</m> is the projection onto the second component. 
                  Let <m>\pi: A \oplus C \longrightarrow A</m> be the projection onto the first component, and <m>j: C \longrightarrow A \oplus C</m> be the inclusion onto the first component. 
                  Now consider the maps <m>q:=a^{-1} \pi b</m> and <m>r:=b^{-1} j c</m>. 
                  Then
                  <me>
                    \begin{array}{rlr}
                    q f &amp; =a^{-1} \pi b f &amp; \\
                    &amp; =a^{-1} \pi i a &amp; \text { by commutativity } \\
                    &amp; =a^{-1} a &amp; \text { because } \pi i=\mathrm{id}_{A} \\
                    &amp; =1_{A} &amp;
                    \end{array}
                  </me>
                  and
                  <me>
                    \begin{aligned}
                    g r &amp; =g b^{-1} j c &amp; &amp; \\
                    &amp; =c^{-1}(c g) b^{-1} j c &amp; &amp; \text { multiplying by } c^{-1} c=1_{C} \\
                    &amp; =c^{-1}(p b) b^{-1} j c &amp; &amp; \text { by commutativity } \\
                    &amp; =c^{-1} p j c &amp; &amp; \text { because } b b^{-1}=1_{B} \\
                    &amp; =c^{-1} c &amp; &amp; \text { because } p j=\mathrm{id}_{C} \\
                    &amp; =1_{C} . &amp; &amp;
                    \end{aligned}
                  </me>
                  Therefore, c implies a and b.
                </p>
              </proof>

              <proof><title>Proof: <m>1\Rightarrow 3</m></title>
                <p>
                  Now suppose that a holds, and let's show that the sequence splits. 
                  First, we need to show that <m>B \cong A \oplus C</m>. 
                  Every <m>b \in B</m> can be written as
                  <me>
                    b=(b-f q(b))+f q(b)
                  </me>
                  where <m>f q(b) \in \operatorname{im} f \cong A</m>, and
                  <me>
                    q(b-f q(b))=q(b)-\underbrace{q f}_{\operatorname{id}_{A}}(q(b))=q(b)-q(b)=0
                  </me>
                  so <m>b-f q(b) \in \operatorname{ker} q</m>. 
                  This shows that <m>B=\operatorname{im} f+\operatorname{ker} q</m>. 
                  Moreover, if <m>f(a) \in \operatorname{ker} q</m>, then <m>a=q f(a)=0</m>, so <m>\operatorname{im} f \cap \operatorname{ker} q=0</m>, and <m>B=\operatorname{im} f \oplus \operatorname{ker} q</m>. 
                  Now when we restrict <m>g</m> to <m>\operatorname{ker} q, g</m> becomes injective. 
                  We claim it is also surjective, and thus an isomorphism. 
                  Indeed, for any <m>c \in C</m> we can pick <m>b \in B</m> such that <m>g(b)=c</m>, since <m>g</m> is surjective, and we showed that we can write <m>b=f(a)+k</m> for some <m>k \in \operatorname{ker} q</m>. 
                  Then
                  <me>
                    g(k)=\underbrace{g f}_{0}(a)+g(k)=g(b)=c.
                  </me>
                  Finally, note that <m>\operatorname{im} f \cong A</m>, so we conclude that <m>B \cong A \oplus C</m>, via the isomorphism <m>\varphi</m> given by
                  <me>
                    \begin{aligned}
                    &amp; B \longrightarrow \operatorname{im} f \oplus \operatorname{ker} q \longrightarrow A \oplus C \\
                    &amp; b \longmapsto(f q(b), b-f q(b)) \longmapsto(q(b), g(b)) .
                    \end{aligned}
                  </me>
                  Since <m>g f=0</m> and <m>q f=\operatorname{id}_{A}, \varphi f(a)=(q f(a), 0)=(a, 0)</m>, so <m>\varphi f=i</m>, where <m>i: A \longrightarrow A \oplus C</m> is the inclusion on the first factor. 
                  If <m>p: A \oplus C \longrightarrow C</m> denotes the projection onto the second factor, <m>p \varphi=g</m>. 
                  Together, these two facts say that the following is a map of complexes:
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-058.jpg" width="50%"/>
                <p>
                  Since <m>\varphi</m> is an isomorphism, so is our map of complexes, and thus our original sequence is a split exact sequence. 
                  This shows that a implies <m>c</m>.
                </p>
              </proof>

              <proof><title>Proof: <m>2\Rightarrow 3</m></title>
                <p>
                  Now assume b holds. 
                  Every <m>b \in B</m> can be written as
                  <me>
                    b=(b-r g(b))+r g(b)
                  </me>
                  where <m>r g(b) \in \operatorname{im} r</m> and
                  <me>
                    g(b-r g(b))=g(b)-\underbrace{g r}_{\mathrm{id}_{C}}(g(b))=g(b)-g(b)=0
                  </me>
                  so <m>b-r g(b) \in \operatorname{ker} g</m>. 
                  This shows that <m>B=\operatorname{ker} g+\operatorname{im} r</m>. 
                  Moreover, if <m>r(c) \in \operatorname{ker} g</m>, then
                  <me>
                    c=\operatorname{id}_{C}(c)=g r(c)=0
                  </me>
                  Therefore, <m>B=\operatorname{ker} g \oplus \operatorname{im} r</m>. 
                  Now <m>r</m> is injective, since <m>r(c)=0 \Longrightarrow c=g r(c)=0</m>, and thus <m>\operatorname{im} r \cong C</m>. 
                  Since <m>\operatorname{ker} g=\operatorname{im} f \cong A</m>, we conclude that <m>B \cong A \oplus C</m>, via the isomorphism
                  <me>
                    \begin{aligned}
                    &amp; A \oplus C \stackrel{\psi}{\longrightarrow} B \\
                    &amp; (a, c) \longmapsto f(a)+r(c) .
                    \end{aligned}
                  </me>
                  Finally, let <m>i: A \longrightarrow A \oplus C</m> denote the inclusion of the first factor, and <m>p: A \oplus C \longrightarrow C</m> denote the projection onto the second factor. 
                  By construction, <m>\psi i=f</m>. 
                  Moreover,
                  <me>
                    g \psi(a, c)=\underbrace{g f}_{0}(a)+\underbrace{g r}_{\mathrm{id}_{C}}(c)=c
                  </me>
                  so <m>g \psi=p</m>. 
                  Together, these say that the diagram
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-059.jpg" width="50%"/>
                <p>
                  commutes, and must then be an isomorphism of short exact sequences.
                </p>
              </proof>
            </lemma>
        
            <definition xml:id="def-2.20"><title>Splittings</title>
              <statement>
                <p>
                  Given a split short exact sequence
                  <me>
                    0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0
                  </me>
                  maps <m>q</m> and <m>r</m> satisfying the conditions of the Splitting Lemma are called <em>splittings</em>.
                </p>
              </statement>
            </definition>

            <remark xml:id="rem-2.21">
              <p>
                In the split short exact sequence
                <me>
                  0 \longrightarrow A \stackrel{i}{\longrightarrow} A \oplus C \stackrel{p}{\longrightarrow} C \longrightarrow 0
                </me>
                the canonical projection <m>q: A \oplus C \rightarrow A</m> and the usual inclusion <m>r: C \rightarrow A \oplus C</m> are splittings.
              </p>
            </remark>

          </subsection>

          <subsection xml:id="subsec-when-split"><title>When Do Short Exact Sequences Split?</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>
      
            <p>
              The Rank-Nulity Theorem can be recast in this setting as a consequence of the fact that every short exact sequence of <m>k</m>-vector spaces splits.
            </p>

            <exercise xml:id="exe-32"><title>Splittings in Vector Spaces</title>
              <statement>
                <p>
                  <ol>
                    <li>
                      <p>
                        Let <m>k</m> be a field. 
                        Show that every short exact sequence of <m>k</m>-vector spaces splits.
                      </p>
                    </li>

                    <li>
                      <p>
                        Prove the Rank-Nulity Theorem using <xref ref="exe-32"/>: show that given any linear transformation <m>T: V \rightarrow W</m> of <m>k</m>-vector spaces,
                        <me>
                          \operatorname{dim}(\operatorname{im} T)+\operatorname{dim}(\operatorname{ker} T)=\operatorname{dim} V
                        </me>
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>

              <solution>
                <p>
                  <ol>
                    <li>
                      <p>
                        Let <m>0 \longrightarrow A \overset{f}{\longrightarrow} B  \overset{g}{\longrightarrow} C \longrightarrow 0</m> be a short exact sequence of <m>k</m>-vector spaces. 
                        Thus <m>f</m> is injective. 
                        Let <m>U</m> be a basis for <m>A</m>. 
                        As <m>f</m> is injective it maps linearly independent sets to linearly independent sets, and so <m>f(U) = V</m>, where <m>V</m> is a linearly independent in <m>B</m>.
                      </p>
                    
                      <p>
                        As proved so deliciously in 818 (and 815), in vector spaces we can extend any linearly independent set into a basis (with some help from Zorn), and thus we extend <m>V</m> into a basis <m>V'</m>. 
                        Using the UMP for free modules there exists a unique <m>k</m>-vector space homomorphism <m>q</m> such that <m>q(b) = h(b)</m> for all <m>b \in B</m>, where <m>h: W' \longrightarrow A</m> maps <m>w_i</m> to <m>v_i</m> whenever <m>f(v_i) = w_i</m>.
                      </p>
                    
                      <p>
                        Let <m>a \in A</m> and consider <m>qf(a)</m>. 
                        As <m>a = \sum\limits_ix_iv_i</m> for <m>x_i \in k</m> and <m>v_i \in V</m>, 
                        <me>qf(a) = qf\left(\sum\limits_ix_iv_i\right)=q\left(\sum\limits_ix_iw_i\right)=\sum\limits_ix_iq(w_i)= \sum\limits_ix_ih(w_i)=\sum\limits_ix_iv_i= a.</me>
                      </p>
                    
                      <p>
                        Thus <m>qf = \mathop{\mathrm{id}}_A</m>. 
                        Therefore, by the Splitting Lemma, every exact sequence of <m>k</m>-vector spaces splits.
                      </p>
                    </li>

                    <li>
                      <p>
                        Let <m>T:V \to W</m> be a linear transformation. 
                        Then <m>\mathop{\mathrm{im}}(T)</m> and <m>\ker(T)</m> are both subspaces (just in different places). 
                        Consider the sequence <me>0 \longrightarrow \ker T \overset{\iota}{\longrightarrow} V \overset{T'}{\longrightarrow} \mathop{\mathrm{im}}T \longrightarrow 0</me> where <m>i</m> is the natural inclusion and <m>T'</m> is <m>T</m> restricted to its image. 
                        As <m>\iota</m> is injective and <m>T'</m> is surjective (by definition), this sequence is exact. 
                        By part <m>(a)</m>. the sequence splits. 
                        Thus <m>V = \ker T \oplus \mathop{\mathrm{im}}T</m>, which implies that <m>\dim V = \dim (\ker T) + \dim (\mathop{\mathrm{im}}T)</m>, completing the proof.
                      </p>
                    </li>
                  </ol>
                </p>
              </solution>
            </exercise>

            <p>
              But over a general ring, not every short exact sequence splits.
            </p>
  
            <example xml:id="ex-2.22">
              <p>
                The short exact sequence
                <me>
                  0 \longrightarrow \mathbb{Z} \stackrel{2}{\longrightarrow} \mathbb{Z} \longrightarrow \mathbb{Z} / 2 \longrightarrow 0
                </me>
                is not split. 
                Indeed, <m>\mathbb{Z}</m> does not have any 2 -torsion elements, so it is not isomorphic to <m>\mathbb{Z} \oplus \mathbb{Z} / 2</m>.
              </p>
              <p>
                An alternative explanation is that there is no splitting to the inclusion <m>\mathbb{Z} \stackrel{2}{\longrightarrow} \mathbb{Z}</m>. 
                On the one hand, every <m>\mathbb{Z}</m>-module map is given by multiplication by a fixed integer <m>n</m>, so a splitting <m>f: \mathbb{Z} \longrightarrow \mathbb{Z}</m> would be of the form <m>f(a)=n a</m> for some fixed <m>n</m>. 
                On the other hand, our proposed splitting <m>f</m> must send <m>2</m> to <m>1</m> , but there is no integer solution <m>n</m> to <m>2 n=f(2)=1</m>.
              </p>
            </example>
  
            <p>
              More surprisingly, a short exact sequence of the form
              <me>
                0 \longrightarrow A \stackrel{f}{\longrightarrow} A \oplus C \stackrel{g}{\longrightarrow} C \longrightarrow 0
              </me>
              is not necessarily split, not unless <m>f</m> is the inclusion of the first component and <m>g</m> is the projection onto the second component, as the next example will show.
            </p>
  
            <example xml:id="ex-2.23">
              <p>
                Consider the short exact sequence
                <me>
                  0 \longrightarrow \mathbb{Z} /(2) \stackrel{f}{\longrightarrow} \mathbb{Z} /(4) \stackrel{g}{\longrightarrow} \mathbb{Z} /(2) \longrightarrow 0
                </me>
                where <m>f</m> is the inclusion of the subgroup generated by 2, so <m>f(1+(2))=2+(4)</m>, and <m>g</m> is the quotient onto that subgroup, meaning <m>g(1)=1</m>. 
                This is not a split short exact sequence, because <m>\mathbb{Z} /(4) \nsucceq \mathbb{Z} /(2) \oplus \mathbb{Z} /(2)</m>. 
                Now let
                <me>
                  M:=\bigoplus_{\mathbb{N}}(\mathbb{Z} /(2) \oplus \mathbb{Z} /(4))
                </me>
                be the direct sum of infinitely many copies of <m>\mathbb{Z} /(2) \oplus \mathbb{Z} /(4)</m>. 
                Then
                <me>
                  \mathbb{Z} /(2) \oplus M \cong M \cong M \oplus \mathbb{Z} /(4)
                </me>
                and the sequence
                <me>
                  0 \longrightarrow \mathbb{Z} /(2) \stackrel{h}{\longrightarrow} \mathbb{Z} /(4) \oplus M \stackrel{t}{\longrightarrow} \mathbb{Z} /(2) \oplus M \longrightarrow 0
                </me>
                with <m>h(a)=(f(a), 0)</m> and <m>t(a, m)=(g(a), m)</m> is still exact. 
                The middle term is indeed isomorphic to the direct sum of the other two:
                <me>
                  \mathbb{Z} /(4) \oplus M \cong M \cong(M \oplus \mathbb{Z} /(2)) \oplus \mathbb{Z} /(2)
                </me>
                And yet this is not a split exact sequence: 
                if we had a splitting <m>q: \mathbb{Z} /(4) \oplus M \longrightarrow \mathbb{Z} /(2)</m> of <m>h</m>, then its restriction to the first factor would give us a splitting <m>\mathbb{Z} /(4) \longrightarrow \mathbb{Z} /(2)</m> of <m>f</m>, which we know cannot exist, since
                <me>
                  0 \longrightarrow \mathbb{Z} /(2) \stackrel{f}{\longrightarrow} \mathbb{Z} /(4) \stackrel{g}{\longrightarrow} \mathbb{Z} /(2) \longrightarrow 0
                </me>
                does not split.
              </p>
            </example>
        
            <p>
              Given splittings <m>q</m> and <m>r</m> for a short exact sequence as in <xref ref="lem-2.19"/>, we can quickly show that our short exact sequence splits using the Five Lemma. 
              To prove the Five Lemma, one needs to use diagram chasing. 
              Diagram chasing is a common technique in homological algebra, which essentially consists of tracing elements around in the diagram. 
              We will see some examples of diagram chasing in the next section.
            </p>
  
            <exercise xml:id="five-lemma"><title>The Five Lemma</title>
              <statement>
                <p>
                  Consider the following commutative diagram of <m>R</m>-modules with exact rows:
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-060.jpg" width="50%"/>
                <p>
                  Show that if <m>a, b, d</m>, and <m>e</m> are isomorphisms, then <m>c</m> is an isomorphism.
                </p>
              </statement>
            </exercise>
  
            <remark xml:id="rem-2.24">
              <p>
                Given a short exact sequence, suppose we have <m>R</m>-module homomorphisms <m>q</m> and <m>r</m>
              </p>
  
              <image source="2023_10_23_e2d6a27704be928b3deeg-061.jpg" width="30%"/>
            
              <p>
                such that <m>q f=\operatorname{id}_{A}</m> and <m>r g=\operatorname{id}_{C}</m>. 
                Then we get an induced map
                <me>
                  \begin{aligned}
                  &amp; B \stackrel{\varphi}{\longrightarrow} A \oplus C \\
                  &amp; b \longmapsto(q(b), g(b))
                  \end{aligned}
                </me>
                such that the diagram
              </p>
              <image source="2023_10_23_e2d6a27704be928b3deeg-061(1).jpg" width="30%"/>
              <p>
                commutes. 
                The <xref text="title" ref="five-lemma"/> guarantees that <m>\varphi</m> must be an isomorphism, so our diagram is an isomorphism of short exact sequences.
              </p>
            </remark>
      
            <p>
              There are many ways in which <m>R</m>-Mod behaves better than the category of groups, and this is one of them.
            </p>
  
            <remark xml:id="rem-2.25">
              <p>
                The <xref text="title" ref="lem-2.19"/> does not hold if we replace <m>R</m>-modules with the category <m>\Grp</m> of groups. 
                For example, consider the symmetric group on 3 elements <m>S_{3}</m> and the inclusion <m>A_{3} \hookrightarrow S_{3}</m> of the alternating group in <m>S_{3}</m>. 
                Notice that <m>A_{3}</m> is precisely the kernel of the sign map
                <me>
                  \operatorname{sign}: S_{3} \longrightarrow \mathbb{Z} / 2
                </me>
                which sends even permutations to <m>0</m> and odd permutations to <m>1</m> . 
                Therefore,
                <me>
                  0 \longrightarrow A_{3} \longrightarrow S_{3} \longrightarrow \mathbb{Z} / 2 \longrightarrow 0
                </me>
                is a short exact sequence.
                When writing exact sequences of nonabelian groups such as this one, one sometimes uses <m>\{e\}</m> for instead of <m>0</m>, to indicate that trivial group. 
                So our short exact sequence is
                <me>
                  \{e\} \longrightarrow A_{3} \longrightarrow S_{3} \longrightarrow \mathbb{Z} / 2 \longrightarrow\{e\}
                </me>
              </p>
          
              <p>
                Moreover, this exact sequence is not split, since <m>S_{3}</m> is not abelian but <m>A_{3} \oplus \mathbb{Z} / 2</m> is, and thus <m>S_{3} \neq A_{3} \oplus \mathbb{Z} / 2</m>. 
                However, any group homomorphism <m>u: \mathbb{Z} / 2 \rightarrow S_{3}</m> defined by sending the generator to any two cycle is a splitting for our short exact sequence, meaning signo <m>u=\mathrm{id}_{\mathbb{Z} / 2}</m>.
              </p>
          
              <p>
                Funny enough, there is no splitting for the inclusion <m>A_{3} \subseteq S_{3}</m>, since there are no nontrivial homomorphisms <m>S_{3} \rightarrow A_{3}: A_{3}</m> has no elements of order <m>2</m>, so a group homomorphism <m>S_{3} \rightarrow A_{3}</m> must send every <m>2</m>-cycle in <m>S_{3}</m> must be sent to the identity, but <m>2</m>-cycles generate <m>S_{3}</m>.
              </p>
            </remark>
        
            <p>
              We will return to the topic of split short exact sequences when we talk about projective and injective modules.
            </p>
        
            <exercise xml:id="exe-35">
              <statement>
                <p>
                  Fix a ring <m>R</m>. 
                  Show that if <m>F</m> is a free <m>R</m>-module, then every short exact sequence of <m>R</m>-modules
                  <me>
                    0 \longrightarrow A \longrightarrow B \longrightarrow F \longrightarrow 0
                  </me>
                  splits.
                </p>
              </statement>
            </exercise>

          </subsection>

          <outcomes>
            <ul>
              <li>
                <p>

                </p>
              </li>
            </ul>
          </outcomes>
          
        </section>

        <section xml:id="sec-les"><title>Long Exact Sequences</title>

          <objectives>
            <ul>
              <li>
                
              </li>
            </ul>
          </objectives>

          <subsection xml:id="subsec-snake"><title>The Snake Lemma</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>

            <p>
              A long exact sequence is just what it sounds like: an exact sequence that is, well, long. 
              Usually, we use the term long exact sequence to refer to any exact sequence, especially if it is not a short exact sequence. 
              So in particular, a long exact sequence does not literally have to be that long.
            </p>
      
            <p>
              Long exact sequences arise naturally in various ways, and are often induced by some short exact sequence. 
              The first long exact sequence one encounters is the long exact sequence on homology. 
              All other long exact sequences are, in some way, a special case of this one. 
              The main tool we need to build it is the Snake Lemma.
            </p>
  
            <theorem xml:id="thm-2.26"><title>Snake Lemma</title>
              <statement>
                <p>
                  Consider the commutative diagram of <m>R</m>-modules
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-062.jpg" width="75%"/>
                <p>
                  If the rows of the diagram are exact, then there exists an exact sequence
                  <me>
                    \operatorname{ker} f \longrightarrow \operatorname{ker} g \longrightarrow \operatorname{ker} h \stackrel{\partial}{\longrightarrow} \operatorname{coker} f \longrightarrow \operatorname{coker} g \longrightarrow \text { coker } h
                  </me>
                  Given <m>c^{\prime} \in \operatorname{ker} h</m>, pick <m>b^{\prime} \in B^{\prime}</m> such that <m>p^{\prime}\left(b^{\prime}\right)=c^{\prime}</m>, and <m>a \in A</m> such that <m>i(a)=g\left(b^{\prime}\right)</m>. 
                  Then
                  <me>
                    \partial\left(c^{\prime}\right)=a+\operatorname{im} f \in \operatorname{coker} f
                  </me>
                  The picture to keep in mind (and which explains the name of the lemma) is the following:
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-062(1).jpg" width="75%"/>
              </statement>
  
              <proof>
                <p>
                  If <m>a^{\prime} \in \operatorname{ker} f</m>, then
                  <me>
                    g\left(i^{\prime}\left(a^{\prime}\right)\right)=i f\left(a^{\prime}\right)=0
                  </me>
                  by commutativity, so <m>i^{\prime}\left(a^{\prime}\right) \in \operatorname{ker} g</m>. 
                  Similarly, if <m>b^{\prime} \in \operatorname{ker} g</m> then <m>p^{\prime}\left(b^{\prime}\right) \in \operatorname{ker}(g)</m>. 
                  So
                  <me>A^{\prime} \stackrel{i^{\prime}}{\longrightarrow} B^{\prime} \stackrel{p^{\prime}}{\longrightarrow} C^{\prime} \quad \text { restrict to maps } \quad \operatorname{ker} f \stackrel{i^{\prime}}{\longrightarrow} \operatorname{ker} g \stackrel{p^{\prime}}{\longrightarrow} \operatorname{ker} h \text {. }</me>
                </p>
          
                <p>
                  We claim that the sequence obtained by restriction
                  <me>\operatorname{ker} f \stackrel{i^{\prime}}{\longrightarrow} \operatorname{ker} g \stackrel{p^{\prime}}{\longrightarrow} \operatorname{ker} h</me>
                  is exact. 
                  On the one hand, we already know that the original maps satisfy <m>p^{\prime} i^{\prime}=0</m>, so their restrictions must satisfy this as well, guaranteeing that
                  <me>i^{\prime}(\operatorname{ker} f) \subseteq \operatorname{ker}\left(\operatorname{ker} g \stackrel{p^{\prime}}{\rightarrow} \operatorname{ker} h\right)</me>
                  On the other and, if <m>b^{\prime} \in \operatorname{ker} g</m> is such that <m>p^{\prime}\left(b^{\prime}\right)=0</m>, then by exactness of the original sequence there exists <m>a^{\prime} \in A^{\prime}</m> such that <m>i^{\prime}\left(a^{\prime}\right)=b^{\prime}</m>; 
                  we only need to check that we can choose such <m>a^{\prime}</m> satisfying <m>a^{\prime} \in \operatorname{ker} f</m>. 
                  An indeed, by commutativity, any <m>a^{\prime}</m> with <m>i^{\prime}\left(a^{\prime}\right)=b^{\prime}</m> satisfies
                  <me>i f\left(a^{\prime}\right)=g i^{\prime}\left(a^{\prime}\right)=g\left(b^{\prime}\right)=0 \text {, }</me>
                  and since <m>i</m> is injective, we must have <m>f\left(a^{\prime}\right)=0</m>. 
                  So we have shown that the following is an exact sequence:
                  <me>\operatorname{ker} f \stackrel{i^{\prime}}{\longrightarrow} \operatorname{ker} g \stackrel{p^{\prime}}{\longrightarrow} \operatorname{ker} h</me>
                </p>
          
                <p>
                  Similarly, if <m>a \in \operatorname{im} f</m>, the commutativity of the diagram guarantees that <m>i(a) \in \operatorname{im} g</m>, and if <m>b \in \operatorname{im} g</m>, then <m>p(b) \in \operatorname{im} h</m>. 
                  So the maps <m>A \stackrel{i}{\longrightarrow} B \stackrel{p}{\longrightarrow} C</m> restrict to maps
                  <me>\operatorname{im} f \stackrel{i}{\longrightarrow} \operatorname{im} g \stackrel{p}{\longrightarrow} \operatorname{im} h</me>
                  which then induce maps
                  <me>\text { coker } f \longrightarrow \text { coker } g \longrightarrow \text { coker } h \text {. }</me>
                  To make the notation less heavy, we denote the induced maps on the quotients by <m>i</m> and <m>p</m>. 
                  Again, the fact that <m>p i=0</m> automatically gives us that the restrictions satisfy
                  <me>\operatorname{im}(\operatorname{coker} f \rightarrow \operatorname{coker} g) \subseteq \operatorname{ker}(\operatorname{coker} g \rightarrow \operatorname{coker} h)</me>
                  so we only need to check equality. 
                  Consider <m>b+\operatorname{im} g</m> such that <m>p(b+\operatorname{im} g)=0</m>, meaning that <m>p(b)=0</m>, meaning that <m>p(b) \in \operatorname{im} h</m>. 
                  Let <m>c^{\prime} \in C</m> be such that <m>h\left(c^{\prime}\right)=p(b)</m>. Since <m>p^{\prime}</m> is surjective, there exists <m>b^{\prime} \in B^{\prime}</m> such that <m>p^{\prime}\left(b^{\prime}\right)=c^{\prime}</m>, and by commutativity,
                  <me>p g\left(b^{\prime}\right)=h p^{\prime}\left(b^{\prime}\right)=h\left(c^{\prime}\right)=p(b) \text {. }</me>
                  Then <m>b-g\left(b^{\prime}\right) \in \operatorname{ker} p=\operatorname{im} i</m>. 
                  Let <m>a \in A</m> be such that <m>i(a)=b-g\left(b^{\prime}\right)</m>. 
                  Now in coker <m>g</m> we have
                  <me>
                    \begin{aligned}
                    b+\operatorname{im} g &amp; =b-g\left(b^{\prime}\right)+\operatorname{im} g \\
                    &amp; =i(a)+\operatorname{im} g \\
                    &amp; =i(a+\operatorname{im} f)
                    \end{aligned}
                  </me>
                  This concludes the proof of exactness of <m>\operatorname{ker} f \longrightarrow \operatorname{ker} g \longrightarrow \operatorname{ker} h \quad</m> and <m>\quad</m> coker <m>f \longrightarrow \operatorname{coker} g \longrightarrow\coker h</m>.
                </p>
          
                <p>
                  We still need to show the parts of the statement related to the connecting homomorphism <m>\partial</m>. 
                  Our definition of <m>\partial</m> can be visualized as follows:
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-064(1).jpg"/>
                <p>
                  Let's recap the process in words. 
                  First, we fix <m>c^{\prime} \in \operatorname{ker} h \subseteq C^{\prime}</m>. 
                  Since <m>p^{\prime}</m> is surjective, we can always pick <m>b^{\prime} \in B^{\prime}</m> such that <m>p^{\prime}\left(b^{\prime}\right)=c^{\prime}</m>. 
                  Since <m>c^{\prime} \in</m> ker <m>h</m>, by commutativity we have
                  <me>p g\left(b^{\prime}\right)=h p^{\prime}\left(b^{\prime}\right)=h\left(c^{\prime}\right)=0,</me>
                  so <m>g\left(b^{\prime}\right) \in \operatorname{ker} p=\operatorname{im} i</m>. 
                  Therefore, there exists <m>a \in A</m> such that <m>i(a)=g\left(b^{\prime}\right)</m>. 
                  In fact, since <m>i</m> is injective, there exists a unique <m>a \in A</m> such that <m>i(a)=g\left(b^{\prime}\right)</m>. 
                  Our definition of <m>\partial\left(c^{\prime}\right)</m> sets
                  <me>\partial\left(c^{\prime}\right)=a+\operatorname{im} f \in \operatorname{coker} f .</me>
                  The fact that <m>\partial</m> is a homomorphism of <m>R</m>-modules follows from the fact that all the maps involved are homomorphisms of <m>R</m>-modules: 
                  given <m>c_{1}^{\prime}, c_{2}^{\prime} \in \operatorname{ker} h</m>, and <m>b_{1}^{\prime}, b_{2}^{\prime} \in B^{\prime}, a_{1}, a_{2} \in A</m> such that
                  <me>p^{\prime}\left(b_{1}^{\prime}\right)=c_{1}^{\prime}, \quad p^{\prime}\left(b_{2}^{\prime}\right)=c_{2}^{\prime}, \quad i\left(a_{1}\right)=g\left(b_{1}^{\prime}\right), \quad i\left(a_{2}\right)=g\left(b_{2}^{\prime}\right),</me>
                  we have
                  <me>i\left(a_{1}+a_{2}\right)=i\left(a_{1}\right)+i\left(a_{2}\right)=g\left(b_{1}^{\prime}\right)+g\left(b_{2}^{\prime}\right)=g\left(b_{1}^{\prime}+b_{2}^{\prime}\right) \text {, }</me>
                  So
                  <me>\partial\left(c_{1}^{\prime}\right)=a_{1}+\operatorname{im} f, \quad \partial\left(c_{2}^{\prime}\right)=a_{2}+\operatorname{im} f, \quad \text { and } \quad \partial\left(c_{1}^{\prime}+c_{2}^{\prime}\right)=\left(a_{1}+a_{2}\right)+\operatorname{im} f</me>
                  Therefore, <m>\partial\left(c_{1}^{\prime}\right)+\partial\left(c_{2}^{\prime}\right)=\partial\left(c_{1}^{\prime}+c_{2}^{\prime}\right)</m>. 
                  Similarly, given any <m>r \in R</m>,
                  <m>r\left(a_{1}+\operatorname{im} f\right)=r a_{1}+\operatorname{im} f, \quad i\left(r a_{1}\right)=r i\left(a_{1}\right)=r g\left(b_{1}^{\prime}\right)=g\left(r b_{1}^{\prime}\right), \quad</m> and <m>\quad p^{\prime}\left(r b_{1}\right)=r p^{\prime}\left(b_{1}\right)=r c_{1}</m>,
                  so <m>\partial\left(r c_{1}\right)=r\left(a_{1}+\operatorname{im} f\right)=r \partial\left(c_{1}\right)</m>. We now need to show the following:
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-064.jpg"/>
                <p>
                  Points 2) and 3) together say that the sequence
                  <m>\operatorname{ker} g \longrightarrow \operatorname{ker} h \stackrel{\partial}{\longrightarrow} \operatorname{coker} f \longrightarrow \operatorname{coker} g</m>
                  is exact, and this will complete the proof.
                </p>
          
                <p>
                  First, let's show that <m>\partial(0)</m> is well-defined. 
                  Ultimately, our definition of <m>\partial</m> only involves one choice, when we pick <m>b^{\prime} \in B^{\prime}</m> such that <m>p^{\prime}\left(b^{\prime}\right)=0</m>; 
                  we need to show that <m>\partial(0)</m> does not depend on the choice of <m>b^{\prime}</m>. 
                  Given <m>b^{\prime} \in B^{\prime}</m> such that <m>p^{\prime}\left(b^{\prime}\right)=0</m>, by exactness we have <m>b^{\prime} \in \operatorname{ker} p^{\prime}=\operatorname{im} i^{\prime}</m>. 
                  Therefore, there exists <m>a^{\prime} \in A^{\prime}</m> such that <m>i^{\prime}\left(a^{\prime}\right)=b^{\prime}</m>. 
                  Notice that <m>a:=f\left(a^{\prime}\right) \in A</m> is such that
                  <me>i(a)=i f\left(a^{\prime}\right)=g i^{\prime}\left(a^{\prime}\right)=g\left(b^{\prime}\right) .</me>
                  Thus our definition says that <m>\partial(0)=a+\operatorname{im} f \in \operatorname{coker} f</m>. 
                  Since <m>a=f\left(a^{\prime}\right) \in \operatorname{im} f</m>, we conclude that <m>a+\operatorname{im} f=0</m>, so <m>\partial(0)=0</m> for any choice of <m>b^{\prime}</m>.
                  Now consider any <m>c^{\prime} \in \operatorname{ker} h</m>. 
                  Again, to show <m>\partial</m> is well-defined, we need only to show it does not depend on the choice of <m>b^{\prime}</m> such that <m>p^{\prime}\left(b^{\prime}\right)=c^{\prime}</m>. 
                  Consider <m>b_{1}^{\prime}, b_{2}^{\prime} \in B^{\prime}</m> such that
                  <me>p^{\prime}\left(b_{1}^{\prime}\right)=p^{\prime}\left(b_{2}^{\prime}\right)=c^{\prime},</me>
                  and <m>a_{1}, a_{2} \in A</m> such that
                  <me>i\left(a_{1}\right)=g\left(b_{1}^{\prime}\right) \quad \text { and } \quad i\left(a_{2}\right)=g\left(b_{2}^{\prime}\right) \text {. }</me>
                  Note that
                  <me>i\left(a_{1}-a_{2}\right)=g\left(b_{1}^{\prime}-b_{2}^{\prime}\right)</me>
                  and since
                  <me>p^{\prime}\left(b_{1}^{\prime}-b_{2}^{\prime}\right)=c^{\prime}-c^{\prime}=0</me>
                  we must have
                  <me>a_{1}-a_{2}+\operatorname{im} f=\partial(0)=0</me>
                  Thus
                  <me>a_{1}+\operatorname{im} f=a_{2}+\operatorname{im} f,</me>
                  and this concludes our proof that <m>\partial</m> is well-defined.
                </p>
          
                <p>
                  Now we show 2): that <m>p^{\prime}(\operatorname{ker} g)=\operatorname{ker} \partial</m>.
                </p>
          
                <p>
                  If <m>b^{\prime} \in \operatorname{ker} g</m>, then the only <m>a \in A</m> such that <m>i(a)=g\left(b^{\prime}\right)=0</m> is <m>a=0</m>. 
                  Therefore, <m>\partial\left(p^{\prime}\left(b^{\prime}\right)\right)=0</m>, so <m>p^{\prime}(\operatorname{ker} g) \subseteq \operatorname{ker} \partial</m>. 
                  On the other hand, let <m>c^{\prime} \in \operatorname{ker} h</m> be such that <m>\partial\left(c^{\prime}\right)=0</m>. 
                  That means that for any <m>b^{\prime} \in B^{\prime}</m> such that <m>p^{\prime}\left(b^{\prime}\right)=c^{\prime}</m> we must have <m>g\left(b^{\prime}\right)=i(a)</m> for some <m>a \in \operatorname{im} f</m>. Let <m>a^{\prime} \in A^{\prime}</m> be such that <m>f\left(a^{\prime}\right)=a</m>. 
                  Then
                </p>
          
                <p>
                  <me>g i^{\prime}\left(a^{\prime}\right)=i f\left(a^{\prime}\right)=i(a)=g\left(b^{\prime}\right)</me>
                </p>
          
                <p>
                  so <m>b^{\prime}-i^{\prime}\left(a^{\prime}\right) \in \operatorname{ker} g</m>. 
                  Since <m>p^{\prime} i^{\prime}=0</m>,
                </p>
          
                <p>
                  <me>c^{\prime}=p^{\prime}\left(b^{\prime}\right)=p^{\prime}\left(b^{\prime}-i^{\prime}\left(a^{\prime}\right)\right) \in p^{\prime}(\operatorname{ker} g) .</me>
                </p>
          
                <p>
                  We conclude that <m>\operatorname{ker} \partial=p^{\prime}(\operatorname{ker} g)</m>, and this shows 2<m>)</m>.
                </p>
          
                <p>
                  Now we show 3 ), that is, <m>\operatorname{im} \partial=\operatorname{ker}(\operatorname{coker} f \stackrel{i}{\rightarrow} \operatorname{coker} g)</m>.
                </p>
          
                <p>
                  Let <m>a \in A</m> be such that <m>i(a+\operatorname{im} f)=0</m>. 
                  In <m>B</m>, this says that <m>i(a) \in \operatorname{im} g</m>, so we can choose <m>b^{\prime} \in B^{\prime}</m> such that <m>g\left(b^{\prime}\right)=i(a)</m>. 
                  Using commutativity and the fact that <m>p i=0</m>, we have
                </p>
          
                <p>
                  <me>h p^{\prime}\left(b^{\prime}\right)=p g\left(b^{\prime}\right)=p i(a)=0 \quad \text { so } \quad p^{\prime}\left(b^{\prime}\right) \in \operatorname{ker} h \text {. }</me>
                </p>
          
                <p>
                  This shows that <m>a+\operatorname{im} f=\partial\left(p^{\prime}\left(b^{\prime}\right)\right)</m>, and thus <m>\operatorname{ker}(\operatorname{coker} f \stackrel{i}{\rightarrow} \operatorname{coker} g) \subseteq \operatorname{im} \partial</m>.
                  Finally, if <m>p^{\prime}\left(b^{\prime}\right)=c^{\prime}</m> and <m>i(a)=g\left(b^{\prime}\right)</m>, then
                </p>
          
                <p>
                  <me>i \partial\left(c^{\prime}\right)=i(a+\operatorname{im} f)=g\left(b^{\prime}\right)+\operatorname{im} g=0, \quad \text { so } \quad \operatorname{im} \partial \subseteq \operatorname{ker}(\operatorname{coker} f \stackrel{i}{\rightarrow} \operatorname{coker} g)</me>
                </p>
              </proof>
            </theorem>
  
            <definition xml:id="def-2.27"><title>Connecting Homomorphism</title>
              <statement>
                <p>
                  The map <m>\partial</m> in the <xref text="title" ref="thm-2.26"/> is the <em>connecting homomorphism</em>.
                </p>
              </statement>
            </definition>
  
            <p>
              The proof of the <xref text="title" ref="thm-2.26"/> is what we call a diagram chase, for reasons that may be obvious by now: 
              we followed the diagram in the natural way, and everything worked out in the end. 
              The <xref text="title" ref="five-lemma"/> is another classical example of a diagram chase.
            </p>
            
          </subsection>

          <subsection xml:id="subsec-long-exact"><title>The Long Exact Sequence in Homology</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>

            <p>
              Now that we have the <xref text="title" ref="thm-2.26"/>, we can construct the long exact sequence in homology:
            </p>
  
            <theorem xml:id="thm-2.28"><title>Long Exact Sequence in Homology</title>
              <statement>
                <p>
                  Given a short exact sequence in <m>\mathrm{Ch}(R)</m>
                  <me>
                    0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0
                  </me>
                  there are connecting homomorphisms <m>\partial: \mathrm{H}_{n}(C) \longrightarrow \mathrm{H}_{n-1}(A)</m> such that
                  <me>
                    \cdots \longrightarrow \mathrm{H}_{n+1}(C) \stackrel{\partial}{\longrightarrow} \mathrm{H}_{n}(A) \stackrel{f}{\longrightarrow} \mathrm{H}_{n}(B) \stackrel{g}{\longrightarrow} \mathrm{H}_{n}(C) \stackrel{\partial}{\longrightarrow} \mathrm{H}_{n-1}(A) \longrightarrow \cdots
                  </me>
                  is an exact sequence.
                </p>
              </statement>
  
              <proof>
                <p>
                  For each <m>n</m>, we have short exact sequences
                  <me>
                    0 \longrightarrow A_{n} \longrightarrow B_{n} \longrightarrow C_{n} \longrightarrow 0
                  </me>
                </p>
          
                <p>
                  The condition that <m>f</m> and <m>g</m> are maps of complexes implies, by <xref ref="lem-2.4"/>, that <m>f</m> and <m>g</m> take cycles to cycles, so we get exact sequences
                  <me>
                    0 \longrightarrow Z_{n}(A) \longrightarrow Z_{n}(B) \longrightarrow Z_{n}(C)
                  </me>
                  Again by <xref ref="lem-2.4"/>, the condition that <m>f</m> and <m>g</m> are maps of complexes also implies that <m>f</m> and <m>g</m> both take boundaries to boundaries, so that we get exact sequences
                  <me>
                    A_{n} / \mathrm{im} d_{n+1}^{A} \longrightarrow B_{n} / \operatorname{im} d_{n+1}^{B} \longrightarrow C_{n} / \mathrm{im} d_{n+1}^{C} \longrightarrow 0
                  </me>
                </p>
          
                <p>
                  Let <m>F</m> be any complex. 
                  The boundary maps on <m>F</m> induce maps <m>F_{n} \longrightarrow Z_{n-1}(F)</m> that send <m>\operatorname{im} d_{n+1}</m> to <m>0</m>, so we get induced maps <m>F_{n} / \operatorname{im} d_{n+1} \longrightarrow Z_{n-1}(F)</m>. 
                  Applying this general fact to <m>A, B</m>, and <m>C</m>, and putting all this together, we have a commutative diagram with exact rows
                </p>
        
                <image source="2023_10_23_e2d6a27704be928b3deeg-066.jpg"/>
                
                <p>
                  For any complex <m>F</m>,
                  <me>
                    \operatorname{ker}\left(F_{n} / \operatorname{im} d_{n+1}^{F} \stackrel{d_{n}^{F}}{\longrightarrow} Z_{n-1}(F)\right)=\mathrm{H}_{n}(F)
                  </me>
                  and
                  <me>
                    \operatorname{coker}\left(F_{n} / \operatorname{im} d_{n+1}^{F} \stackrel{d_{n}^{F}}{\longrightarrow} Z_{n-1}(F)\right)=Z_{n-1}(F) / \operatorname{im} d_{n}^{F}=\mathrm{H}_{n-1}(F)
                  </me>
                </p>
          
                <p>
                  The <xref text="title" ref="thm-2.26"/> now gives us exact sequences
                  <me>
                    \mathrm{H}_{n}(A) \longrightarrow \mathrm{H}_{n}(B) \longrightarrow \mathrm{H}_{n}(C) \stackrel{\partial}{\longrightarrow} \mathrm{H}_{n-1}(A) \longrightarrow \mathrm{H}_{n-1}(B) \longrightarrow \mathrm{H}_{n-1}(C)
                  </me>
                </p>
          
                <p>
                  Finally, we glue all these together to obtain the long exact sequence in homology.
                </p>
              </proof>
            </theorem>
  
            <remark xml:id="rem-2.29">
              <p>
                It's helpful to carefully consider how to compute the connecting homomorphisms in the long exact sequence in homology, which we can easily put together from the proof of the <xref text="title" ref="thm-2.26"/>. 
                Suppose that <m>c \in Z_{n+1}(C)=\operatorname{ker} d_{n+1}^{C}</m>. 
                When we view <m>c</m> as an element in <m>C_{n+1}</m>, we can find <m>b \in B_{n+1}</m> such that <m>g_{n+1}(b)=c</m>, since <m>g_{n+1}</m> is surjective by assumption. 
                Since <m>g</m> is a map of complexes, we have
                <me>
                  g_{n} d_{n+1}^{B}(b)=d_{n+1}^{C} g_{n+1}(b)=d_{n+1}^{C}(c)=0
                </me>
                so <m>d_{n+1}^{B}(b) \in \operatorname{ker} g_{n}</m>. 
                In fact, note that <m>d_{n+1}^{B}(b) \in \mathbb{Z}_{n}(B)</m>, so
                <me>
                  b \in \operatorname{ker}\left(Z_{n}(B) \stackrel{g_{n}}{\rightarrow} Z_{n}(C)\right)=\operatorname{im}\left(Z_{n}(A) \rightarrow Z_{n}(B)\right)
                </me>
              </p>
        
              <p>
                Thus there exists <m>a \in Z_{n}(A)</m> such that <m>f_{n}(a)=d_{n+1}^{B}(b)</m>. 
                Finally,
                <me>
                  \partial\left(c+\operatorname{im} d_{n+2}\right)=a+\operatorname{im} d_{n+1}^{A}.
                </me>
              </p>
        
              <p>
                So in summary, the recipe goes as follows: given <m>c+\operatorname{im} d_{n+2} \in H_{n+1}(C)</m>, we find <m>b \in B_{n+1}</m> such that <m>g_{n+1}(b)=c</m> and <m>a \in Z_{n}(A)</m> such that <m>f_{n}(a)=d_{n+1}^{B}(b)</m>, and
                <me>
                  \partial(c)=a+\operatorname{im} d_{n+1}^{A}.
                </me>
              </p>
            </remark>
      
            <p>
              We will soon see that long exact sequences appear everywhere, and that they are very helpful. 
              Before we see more examples, we want to highlight a connection between long and short exact sequences.
            </p>
  
            <remark xml:id="rem-2.30">
              <p>
                Suppose that
                <me>
                  \cdots \longrightarrow C_{n+1} \stackrel{f_{n+1}}{\longrightarrow} C_{n} \stackrel{f_{n}}{\longrightarrow} \cdots
                </me>
                is a long exact sequence. 
                This long exact sequence breaks into the short exact sequences
                <me>
                  0 \longrightarrow \operatorname{ker} f_{n} \stackrel{i}{\longrightarrow} C_{n} \stackrel{\pi}{\longrightarrow} \operatorname{coker} f_{n+1} \longrightarrow 0
                </me>
              </p>
        
              <p>
                The first map <m>i</m> is simply the inclusion of the submodule  <m>\ker f_{n}</m> into <m>C_{n}</m>, while the second map <m>\pi</m> is the canonical projection onto the quotient. 
                While it is clear that <m>i</m> is injective and <m>\pi</m> is surjective, exactness at the middle is less obvious. 
                This follows from the exactness of the original complex, which gives <m>\operatorname{im} i=\operatorname{ker} f_{n}=\operatorname{im} f_{n+1}=\operatorname{ker} \pi</m>.
              </p>
            </remark>
      
            <p>
              The long exact sequence in homology is natural.
            </p>
  
            <theorem xml:id="thm-2.31"><title>Naturality of the long exact sequence in homology</title>
              <statement>
                <p>
                  Any commutative diagram in <m>\mathrm{Ch}(R)</m>
                </p>
          
                <image source="2023_10_23_e2d6a27704be928b3deeg-067(1).jpg" width="50%"/>
          
                <p>
                  with exact rows induces a commutative diagram with exact rows
                </p>
          
                <image source="2023_10_23_e2d6a27704be928b3deeg-067.jpg"/>
              </statement>
  
              <proof>
                <p>
                  The rows of the resulting diagram are the long exact sequences in homology induced by each row of the original diagram, as in <xref text="title" ref="thm-2.28"/>. 
                  So the content of the theorem is that the maps induced in homology by <m>f, g</m>, and <m>h</m> make the diagram commute. 
                  The commutativity of
                </p>
          
                <image source="2023_10_23_e2d6a27704be928b3deeg-068(2).jpg" width="50%"/>
                
                <p>
                  follows from the fact that <m>\mathrm{H}_{n}</m> is a functor, so we only need to check commutativity of the square
                </p>
          
              <image source="2023_10_23_e2d6a27704be928b3deeg-068(1).jpg" width="30%"/>
                
                <p>
                  that involves the connecting homomorphisms <m>\partial</m> and <m>\partial^{\prime}</m>. 
                  Consider the following commutative diagram:
                </p>
          
                <image source="2023_10_23_e2d6a27704be928b3deeg-068(3).jpg"/>
          
                <p>
                  Given <m>c \in \operatorname{ker}\left(d_{n}: C_{n} \longrightarrow C_{n-1}\right)</m>, we need to check that <m>f_{n-1}(\partial(c))=\partial^{\prime} h_{n}(c)</m> in <m>\mathrm{H}_{n-1}\left(A^{\prime}\right)</m>. 
                  To compute <m>\partial(c)</m>, we find a lift <m>b \in B_{n}</m> such that <m>p_{n}(b)=c</m>, and <m>a \in A_{n-1}</m> with <m>i_{n-1}(a)=d_{n}(b)</m>, and set <m>\partial(c)=a+\operatorname{im} d_{n} \in \mathrm{H}_{n-1}(A)</m>. 
                  So <m>f_{n-1} \partial(c)=f_{n-1}(a)+\operatorname{im} d_{n}</m>. 
                  On the other hand, to compute <m>\partial^{\prime} h_{n}(c)</m>, we start by finding <m>b^{\prime} \in B_{n}^{\prime}</m> such that <m>p_{n}^{\prime}\left(b^{\prime}\right)=h_{n}(c)</m>. 
                  By commutativity of the right back square
                </p>
          
                <image source="2023_10_23_e2d6a27704be928b3deeg-068.jpg" width="30%"/>
                
                <p>
                  we can choose <m>b^{\prime}=g_{n}(b)</m>, since
                  <me>
                    p_{n}^{\prime}\left(b^{\prime}\right)=p_{n}^{\prime} g_{n}(b)=h_{n} p_{n}(b)=h_{n}(c)
                  </me>
                </p>
          
                <p>
                  Next we take <m>a^{\prime} \in A_{n-1}^{\prime}</m> such that <m>i_{n-1}^{\prime}\left(a^{\prime}\right)=d_{n}\left(b^{\prime}\right)</m>, and set <m>\partial^{\prime}(h(c))=a^{\prime}+\operatorname{im} d_{n} \in \mathrm{H}_{n-1}\left(A^{\prime}\right)</m>.
                  By commutativity of the middle square
                </p>
          
                <image source="2023_10_23_e2d6a27704be928b3deeg-069.jpg" width="30%"/>
                
                <p>
                  we have
                  <me>
                    d_{n}\left(b^{\prime}\right)=d_{n} g_{n}(b)=g_{n-1} d_{n}(b).
                  </me>
                </p>
          
                <p>
                  By our choice of <m>a</m>, we have
                  <me>
                    d_{n}\left(b^{\prime}\right)=g_{n-1} d_{n}(b)=g_{n-1} i_{n-1}(a)
                  </me>
                  and by commutativity of the front left square
                </p>
          
                <image source="2023_10_23_e2d6a27704be928b3deeg-069(1).jpg" width="30%"/>
          
                <p>
                  we have
                  <me>
                    i_{n-1}^{\prime} f_{n-1}(a)=g_{n-1} i_{n-1}(a)=d_{n}\left(b^{\prime}\right)
                  </me>
                </p>
          
                <p>
                  So we can take <m>a^{\prime}=f_{n-1}(a)</m>. 
                  Finally, this means <m>\partial^{\prime}\left(h_{n}(c)\right)=f_{n-1}(a)+\operatorname{im} d_{n-1}</m>, as we wanted to prove.
                </p>
              </proof>
            </theorem>
  
            <remark xml:id="rem-2.32">
              <p>
                Let
                <me>
                  0 \longrightarrow A \stackrel{i}{\longrightarrow} B \stackrel{p}{\longrightarrow} C \longrightarrow 0
                </me>
                be a short exact sequence in <m>\operatorname{Ch}(R)</m>. 
                We can think of <xref ref="thm-2.31"/> as saying that the induced maps on homology <m>i_{*}: \mathrm{H}_{n}(A) \longrightarrow \mathrm{H}_{n}(B)</m> and <m>p_{*}: \mathrm{H}_{n}(B) \longrightarrow \mathrm{H}_{n}(C)</m> and the connecting homomorphism <m>\partial: \mathrm{H}_{n}(C) \longrightarrow \mathrm{H}_{n-1}(A)</m> are all natural transformations. 
                More precisely, consider the category SES of short exact sequences of <m>R</m>-modules, which is a full subcategory of <m>\mathrm{Ch}(R)</m>. 
                Homology gives us functors SES <m>\longrightarrow R</m>-Mod that given a short exact sequence
                <me>
                  0 \longrightarrow A \stackrel{i}{\longrightarrow} B \stackrel{p}{\longrightarrow} C \longrightarrow 0
                </me>
                return the <m>R</m>-modules <m>\mathrm{H}_{n}(A), \mathrm{H}_{n}(B)</m>, or <m>\mathrm{H}_{n}(C)</m>. 
                A map between two short exact sequences then induces <m>R</m>-module homomorphisms between the corresponding homologies. 
                With this framework, <xref ref="thm-2.31"/> says that <m>i_{*}: \mathrm{H}_{n}(A) \longrightarrow \mathrm{H}_{n}(B)</m>, and <m>p_{*}: \mathrm{H}_{n}(B) \longrightarrow \mathrm{H}_{n}(C)</m> and the connecting homomorphism <m>\partial: \mathrm{H}_{n}(C) \longrightarrow \mathrm{H}_{n-1}(A)</m> are all natural transformations between the corresponding homology functors.
              </p>
            </remark>
            
          </subsection>

          <outcomes>
            <ul>
              <li>
                <p>

                </p>
              </li>
            </ul>
          </outcomes>

        </section>
        
      </chapter>

      <chapter xml:id="ch-rmod"><title><m>R</m>-Mod</title>

        <section xml:id="sec-hom"><title><m>\Hom</m></title>

          <objectives>
            <ul>
              <li>
                
              </li>
            </ul>
          </objectives>

          <subsection xml:id="subsec-hom"><title>There's No Place Like <m>\Hom</m></title>

            <blockquote>
              <p>
                <q>
                  We shape our <m>\Hom</m>s and then our <m>\Hom</m>s shape us.
                </q>
              </p>
              <attribution>Winston Churchill</attribution>
            </blockquote>

            <p>
              From now on, let's fix a ring <m>R</m>. 
              Recall that whenever we say an <m>R</m>-module <m>M</m>, we mean a left <m>R</m>-module; any general facts about left modules can be naturally converted into statements about right <m>R</m>-modules, under small appropriate corrections. 
              When <m>M</m> is commutative, left and right module structures agree, so the distinction is not relevant.
            </p>
      
            <p>
              Our goal is to get to know the category <m>R</m>-Mod, which as we are about to discover is a very nice category. 
              One of the many nice things about <m>R</m>-Mod is that the <m>\Hom</m>-sets have an extra structure. 
              (Roughly speaking, a locally small category where the <m>\Hom</m>-sets are objects in some other category is called an enriched category).
            </p>
      
            <p>
              To make the notation less heavy, we write <m>\operatorname{Hom}_{R}(M, N)</m> instead of <m>\operatorname{Hom}_{R-\operatorname{Mod}}(M, N)</m> for the <m>\Hom</m>-set between <m>M</m> and <m>N</m> in <m>R</m>-Mod. 
              The arrows in <m>\operatorname{Hom}_{R}(M, N)</m> are all the <m>R</m>-module homomorphisms from <m>M</m> to <m>N</m>. 
              This is a locally small category, meaning that the <m>\Hom</m>-sets are actual sets, but more even is true: 
              the <m>\Hom</m>-sets are actually abelian groups, and when <m>R</m> is commutative, they are even <m>R</m>-modules.
            </p>
      
            <p>
              Given <m>f, g \in \operatorname{Hom}_{R}(M, N), f+g</m> is the <m>R</m>-module homomorphism defined by
              <me>
                (f+g)(m):=f(m)+g(m)
              </me>
              When <m>R</m> is a commutative ring, given <m>r \in R</m> and <m>f \in \operatorname{Hom}_{R}(M, N), r \cdot f</m> is the <m>R</m>-module homomorphism defined by
            </p>
      
            <p>
              <me>
                (r \cdot f)(m):=f(r m)
              </me>
            </p>

            <exercise xml:id="exe-36">
              <statement>
                <p>
                  Let <m>M</m> and <m>N</m> be <m>R</m>-modules. 
                  Then <m>\operatorname{Hom}_{R}(M, N)</m> is an abelian group under the sum defined above.
                </p>
              </statement>
            </exercise>

            <exercise xml:id="exe-37">
              <statement>
                <p>
                  Let <m>M</m> and <m>N</m> be <m>R</m>-modules over a commutative <m>\operatorname{ring} R</m>. 
                  Then <m>\operatorname{Hom}_{R}(M, N)</m> is an <m>R</m>-module.
                </p>
              </statement>
            </exercise>
            
            <remark xml:id="rem-3.1">
              <p>
                The main reason we need commutativity for <m>\operatorname{Hom}_{R}(M, N)</m> to be a module is that given any <m>r \in R</m> and <m>f \in \operatorname{Hom}_{R}(M, N)</m>, we need <m>r f</m> to be an <m>R</m>-module homomorphism, so in particular for any <m>a \in M</m> and any <m>s \in R</m> we need
                <me>
                  (r f)(s a)=s(r f)(a)
                </me>
                So
                <me>
                  (r s) f(a)=r f(s a)=(r f)(s a)=s(r f)(a)=s(r f(a))=(s r) f(a).
                </me>
                This holds whenever <m>r s=s r</m>, but not in general.
              </p>
            </remark>
      
            <p>
              Some <m>\Hom</m>-sets can easily be identified with other well-understood modules.
            </p>

            <exercise xml:id="exe-38">
              <statement>
                <p>
                  Let <m>R</m> be a commutative ring. 
                  Let <m>M</m> be an <m>R</m>-module, and <m>I</m> an ideal in <m>R</m>. 
                  Then we have the following isomorphisms of <m>R</m>-modules:
                  <ol>
                    <li>
                      <p>
                        <m>\operatorname{Hom}_{R}(R, M) \cong M</m>.
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>\operatorname{Hom}_{R}\left(R^{n}, M\right) \cong M^{n}</m> for any <m>n \geqslant 1</m>.
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>\operatorname{Hom}_{R}(R / I, M) \cong\left(0:_{M} I\right):=\{m \in M \mid I m=0\}</m>.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
            </exercise>

          </subsection>

          <subsection xml:id="subsec-additive-functors"><title>Additive Functors</title>

            <blockquote>
              <p>
                <q>
                  To split yourself in two is just about the most radical thing you can do.
                </q>
              </p>
              <attribution>Ani DiFranco</attribution>
            </blockquote>
            
            <p>
              Since <m>R</m>-Mod is a locally small category, we saw in Definition 1.34 that there are two <m>\Hom</m>-functors from <m>R</m>-Mod to <m>\Set</m>, the covariant functor <m>\operatorname{Hom}_{R}(M,-): R</m>-Mod <m>\longrightarrow</m> Set and the contravariant functor <m>\operatorname{Hom}_{R}(-, N): R</m>-Mod <m>\longrightarrow</m> Set. 
              In light of <xref ref="exe-37"/>, we can upgrade these functors to land in <m>\mathbf{A b}</m>, or in <m>R</m>-Mod when <m>R</m> is commutative, not just in <m>\Set</m>. 
              Note that while there are two <m>\Hom</m>-functors, we will sometimes refer to the Hom functor when talking about properties that are common to both of them.
            </p>
      
            <p>
              A functor that lands in <m>\mathbb{R}-\bmod</m>, or <m>\mathbf{A b}</m> in particular, can have some additional good properties.
            </p>

            <definition xml:id="def-3.2"><title>Additive Functor</title>
              <statement>
                <p>
                  Let <m>R</m> and <m>S</m> be rings. 
                  A functor <m>T: R</m>-Mod <m>\longrightarrow S</m>-Mod is an <em>additive functor</em> if
                  <me>T(f+g)=T(f)+T(g)</me>
                  for all <m>f, g \in \operatorname{Hom}_{R}(M, N)</m>.
                </p>
              </statement>
            </definition>

            <p>
              Note that to say that <m>T</m> is a covariant additive functor is to say that for all <m>A</m> and <m>B</m>, the map
              <me>
                \begin{gathered}
                \operatorname{Hom}(A, B) \longrightarrow \operatorname{Hom}(T(A), T(B)) \\
                f \longmapsto T(f)
                \end{gathered}
              </me>
              induced by <m>T</m> is a homomorphism of abelian groups. 
              Similarly, a contravariant additive functor <m>T</m> is one such that
              <me>
                \begin{gathered}
                \operatorname{Hom}(A, B) \longrightarrow \operatorname{Hom}(T(B), T(A)) \\
                f \longmapsto T(f)
                \end{gathered}
              </me>
              is a homomorphism of abelian groups.
              Notice moreover that this definition makes sense more generally in any category <m>\mathscr{C}</m> whose objects have an abelian group structure.
            </p>

            <exercise xml:id="exe-39"><title><m>\Hom</m> is Additive</title>
              <statement>
                <p>
                  Show that <m>\operatorname{Hom}_{R}(M,-)</m> and <m>\operatorname{Hom}_{R}(-, N)</m> are both additive functors.
                </p>
              </statement>
            </exercise>
      
            <p>
              Note that in <xref ref="exe-39"/> we were purposely vague about where <m>\operatorname{Hom}_{R}(M,-)</m> and <m>\operatorname{Hom}_{R}(-, N)</m> land: 
              these are additive functors whether we consider them as functors with target <m>\mathbf{A b}</m> or target <m>R</m>-Mod, when appropriate.
            </p>
      
            <p>
              Additive functors have many nice properties.
            </p>

            <lemma xml:id="lem-3.3"><title>Properties of Additive Functors</title>
              <statement>
                <p>
                  Let <m>T: R-</m> Mod <m>\longrightarrow S</m>-Mod be an additive functor.
                  <ol>
                    <li>
                      <p>
                        Let <m>0</m> denote the <m>0</m>-map between any two <m>R</m>-modules <m>M</m> and <m>N</m>. 
                        Then <m>T(0)=0</m> is the <m>0-\operatorname{map} T(M) \rightarrow T(N)</m>.
                      </p>
                    </li>

                    <li>
                      <p>
                        Let <m>0</m> denote the zero <m>R</m>-module. 
                        Then <m>T(0)=0</m> is the zero <m>S</m>-module.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>

              <proof>
                <p>
                  <ol>
                    <li>
                      <p>
                        As a function defined on each fixed <m>\operatorname{Hom}_{R}(M, N), T</m> is a group homomorphism, so it must send <m>0</m> to <m>0</m>.
                      </p>
                    </li>

                    <li>
                      <p>
                        An <m>R</m>-module <m>M</m> is the zero module if and only if the zero and identity maps on <m>M</m> coincide. 
                        Let <m>N</m> be the image of the zero <m>R</m>-module via <m>T</m>. 
                        On the one hand, any functor must send identity maps to identity maps, so the identity map on the zero module must be sent to the identity on <m>N</m>. 
                        On the other hand, we have shown that the zero map must be sent to the zero map on <m>N</m>, so the zero and identity maps on <m>N</m> must coincide, so <m>N=0</m>.
                      </p>
                    </li>
                  </ol>
                </p>
              </proof>
            </lemma>

            <remark xml:id="rem-3.4">
              <p>
                Note that the category of chain complexes also has a similar structure to <m>R</m>-Mod: 
                given two maps of complexes <m>f, g: C \rightarrow D</m>, we define a map of complexes <m>f+g</m> : <m>C \rightarrow D</m> given by
                <me>(f+g)_{n}:=f_{n}+g_{n}</me>
                It is routine to check that this again gives a map of complexes, and that this operation gives the <m>\Hom</m>-sets in <m>\operatorname{Ch}(R)</m> the structure of an abelian group. 
                In fact, this abelian group structure can be upgraded to an <m>R</m>-module structure when <m>R</m> is commutative, by setting
                <me>(r f)_{n}:=r f_{n}</me>
                for all <m>r \in R</m>. 
                This allows us to talk about additive functors to and from the category <m>\operatorname{Ch}(R)</m>, and there is a version of <xref ref="lem-3.3"/> in <m>\mathrm{Ch}(R)</m>.
              </p>
            </remark>

            <exercise xml:id="exe-40"><title>Homology is Additive</title>
              <statement>
                <p>
                  Show that homology is an additive functor.
                </p>
              </statement>
            </exercise>
      
            <p>
              Most functors between categories or modules or chain complexes are additive. 
              In fact, we will spend the rest of this chapter studying three very important additive functors: the two <m>\Hom</m> functors, and a third functor we have yet to define.
            </p>

            <exercise xml:id="exe-41"><title>Additive Functors Preserve Direct Sums</title>
              <statement>
                <p>
                  Let <m>R</m> and <m>S</m> be rings and let <m>T: R</m>-Mod <m>\longrightarrow S</m>-Mod be an additive functor. 
                  Show that for all <m>R</m>-modules <m>A</m> and <m>B</m>,
                  <me>T(A \oplus B) \cong T(A) \oplus T(B)</me>
                </p>
              </statement>
            </exercise>
      
            <p>
              <m>\Hom</m> satisfies a stronger version of this property.
            </p>

            <theorem xml:id="thm-3.5">
              <statement>
                <p>
                  For all <m>R</m>-modules <m>M, N, M_{i}, N_{i}</m>, there are isomorphisms of abelian groups
                  <me>\operatorname{Hom}_{R}\left(M, \prod_{i} N_{i}\right) \cong \prod_{i} \operatorname{Hom}_{R}\left(M, N_{i}\right) \text { and } \operatorname{Hom}_{R}\left(\bigoplus_{i} M_{i}, N\right) \cong \prod_{i} \operatorname{Hom}_{R}\left(M_{i}, N\right)</me>
                  Moreover, when <m>R</m> is commutative, these are in fact isomorphisms of <m>R</m>-modules.
                </p>
          
                <p>
                  In particular,
                  <me>\operatorname{Hom}_{R}(A \oplus B, C) \cong \operatorname{Hom}_{R}(A, C) \oplus \operatorname{Hom}_{R}(B, C)</me>
                  and
                  <me>\operatorname{Hom}_{R}(A, B \oplus C) \cong \operatorname{Hom}_{R}(A, B) \oplus \operatorname{Hom}_{R}(A, C) .</me>
                </p>
              </statement>

              <proof>
                <p>
                  For each <m>i</m>, let <m>\pi_{i}: \prod_{j} N_{j} \longrightarrow N_{i}</m> be the canonical projection map. 
                  Consider the map
                  <me>
                    \begin{gathered}
                    \operatorname{Hom}_{R}\left(M, \prod_{i} N_{i}\right) \stackrel{\alpha}{\longrightarrow} \prod_{i} \operatorname{Hom}_{R}\left(M, N_{i}\right) \\
                    f \longmapsto\left(\pi_{i} f\right)
                    \end{gathered}
                  </me>
                  We claim this map is the desired isomorphism. 
                  We leave it as an exercise to show that <m>\alpha</m> is a homomorphism of abelian groups, and a homomorphism of <m>R</m>-modules when <m>R</m> is commutative; 
                  we focus on proving that <m>\alpha</m> is a bijection. 
                  First, take <m>\left(f_{i}\right)_{i} \in \prod_{i} \operatorname{Hom}_{R}\left(M, N_{i}\right)</m>. 
                  Define a map
                  <me>
                    \begin{aligned}
                    &amp; M \stackrel{\psi}{\longrightarrow} \prod_{i} N_{i} \\
                    &amp; m \longmapsto\left(f_{i}(m)\right)
                    \end{aligned}
                  </me>
                  This makes the diagram
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-073.jpg" width="50%"/>
                <p>
                  commute, so that <m>\alpha(\psi)=\left(\pi_{i} \psi\right)_{i}=\left(f_{i}\right)</m>. 
                  This shows that <m>\alpha</m> us surjective.
                  Now let us show that <m>\alpha</m> is injective. 
                  Suppose <m>f \in \operatorname{Hom}_{R}\left(M, \prod_{i} N_{i}\right)</m> is such that <m>\alpha(f)=0</m>. 
                  For each <m>m \in M</m>, let <m>f(m)=\left(n_{i}\right)_{i}</m>, so <m>\pi_{i} f(m)=n_{i}</m>. 
                  By assumption, <m>\left(\pi_{i} f(m)\right)=0</m>, which means that <m>\pi_{i} \alpha=0</m> for all <m>i</m>, and thus <m>n_{i}=0</m> for all <m>i</m>. 
                  So <m>f=0</m>. 
                  We conclude that <m>\alpha</m> is an isomorphism.
                </p>
          
                <p>
                  Now consider the map
                  <me>
                    \begin{gathered}
                    \operatorname{Hom}_{R}\left(\bigoplus_{i} M_{i}, N\right) \stackrel{\beta}{\longrightarrow} \prod_{i} \operatorname{Hom}_{R}\left(M_{i}, N\right) \\
                    f \longmapsto\left(f \iota_{i}\right)
                    \end{gathered}
                  </me>
                  where <m>\iota_{j}: M_{j} \longrightarrow \bigoplus_{i} M_{i}</m> is the inclusion of the <m>j</m> th factor. 
                  We leave it as an exercise to prove that <m>\beta</m> is a homomorphism of abelian groups, and that whenever <m>R</m> is commutative, <m>\beta</m> is in fact a homomorphism of <m>R</m>-modules.
                </p>
          
                <p>
                  Given <m>\left(f_{i}\right)_{i} \in \prod_{i} \operatorname{Hom}_{R}\left(M_{i}, N\right)</m>, let
                </p>
        
                <image source="2023_10_23_e2d6a27704be928b3deeg-074.jpg" width="50%"/>
                  
                <p>
                  Then <m>\beta(\psi)=\left(\psi \iota_{i}\right)_{i}</m>, so for each <m>i</m> and each <m>m_{i} \in M_{i}, \psi \iota_{i}\left(m_{i}\right)=f_{i}\left(m_{i}\right)</m>, and <m>\beta(\psi)=\left(f_{i}\right)_{i}</m>. 
                  This shows that <m>\beta</m> is surjective.
                </p>
          
                <p>
                  Now assume <m>\beta(f)=0</m>, which implies that <m>f \iota_{i}</m> is the zero map for each <m>i</m>. 
                  Consider any <m>\left(m_{i}\right)_{i} \in \bigoplus_{i} M_{i}</m>. 
                  For each <m>i, f \iota_{i}\left(m_{i}\right)=0</m>. 
                  On the other hand, <m>\left(m_{i}\right)_{i}=\sum_{i} \iota_{i}\left(m_{i}\right)</m>, so <m>f\left(\left(m_{i}\right)_{i}\right)=\sum_{i} \iota_{i}\left(m_{i}\right)=0</m>. 
                  We conclude that <m>f=0</m>, and <m>\beta</m> is injective.
                </p>
              </proof>
            </theorem>
          
            <p>
              These two properties, however, are consequences of <xref ref="exe-39"/> and <xref ref="exe-41"/>: 
              <m>\Hom</m> is additive, and additive functors preserve finite direct sums.
            </p>

            <exercise xml:id="exe-42">
              <statement>
                <p>
                  Show that the isomorphisms in <xref ref="thm-3.5"/> are natural on both components. 
                  More precisely, given any other family of <m>R</m>-modules <m>L_{i}</m> such that for each <m>i</m> there exists <m>j</m>, a map <m>\sigma_{i j}</m> there exist <m>R</m>-module maps making the following diagrams commute: 
                </p>
                <image source='2023_10_23_e2d6a27704be928b3deeg-074(1).jpg'/>
                <p>
                  In fact, one can show that more generally, <m>\Hom</m> behaves well with limits and colimits.
                </p>
              </statement>
            </exercise>

            <exercise xml:id="exe-43">
              <statement>
                <p>
                  Let <m>R</m> be any ring and consider <m>R</m>-modules <m>A</m> and <m>\left\{M_{i}\right\}</m>.
                  <ol>
                    <li>
                      <p>
                        For any inverse system <m>\left\{M_{i}\right\}</m>, there is a natural isomorphism
                        <me>\operatorname{Hom}_{R}\left(A, \lim _{i} M_{i}\right) \cong \lim _{i} \operatorname{Hom}_{R}\left(A, M_{i}\right)</me>
                      </p>
                    </li>

                    <li>
                      <p>
                        For any direct system <m>\left\{M_{i}\right\}</m> or <m>R</m>-modules, there is a natural isomorphism
                        <me>\operatorname{Hom}_{R}\left(\operatorname{colim}_{i} M_{i}, A\right) \cong \lim _{i} \operatorname{Hom}_{R}\left(M_{i}, B\right)</me>
                      </p>
                    </li>
                  </ol>
                  Moreover, when <m>R</m> is commutative, these are isomorphisms of modules.
                </p>
              </statement>
            </exercise>

          </subsection>

          <subsection xml:id="subsec-exact-functors"><title>Exact Functors</title>

            <blockquote>
              <p>
                <q>
                  My biggest problem is retaining the exact information.
                </q>
              </p>
              <attribution>David Cross</attribution>
            </blockquote>

            <p>
              Another important property of <m>\Hom</m> is how it interacts with exact sequences. 
              First, an important note about general additive functors:
            </p>

            <remark xml:id="rem-3.6">
              <p>
                Let <m>F: R</m>-Mod <m>\rightarrow S</m>-Mod be an additive functor. 
                Thanks to <xref ref="lem-3.3"/>, if <m>g f=0</m>, then
                <me>F(g f)=F(g) F(f)=F(0)=0.</me>
                Thus <m>F</m> must send complexes to complexes, and in fact, <m>F</m> induces a functor <m>\operatorname{Ch}(R) \rightarrow \operatorname{Ch}(S)</m>, which we also call <m>F</m>. 
                Now if <m>h</m> is a homotopy between two maps of complexes, <m>F</m> must preserve the identities
                <me>\delta_{n+1} h_{n}+h_{n-1} \delta_{n}=f_{n}-g_{n}</me>
                for all <m>n</m>, so <m>F(h)</m> is a homotopy between <m>F(f)</m> and <m>F(g)</m>.
              </p>
            </remark>
    
            <p>
              While additive functors send complexes to complexes, they don't have to preserve exactness. 
              Functors that do preserve exactness are very special.
            </p>

            <definition xml:id="def-3.7"><title>Exact Functors</title>
              <statement>
                <p>
                  An additive functor <m>T: R</m>-Mod <m>\longrightarrow S</m>-Mod is an <em>exact functor</em> if it preserves short exact sequences. 
                  When <m>T</m> is covariant, this means that every short exact sequence
                  <me>0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0</me>
                  is taken to the short exact sequence
                  <me>0 \longrightarrow T(A) \stackrel{T(f)}{\longrightarrow} T(B) \stackrel{T(g)}{\longrightarrow} T(C) \longrightarrow 0</me>
                </p>
          
                <p>
                  When <m>T</m> is contravariant, this means that any short exact sequence
                  <me>0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0</me>
                  is taken to the short exact sequence
                  <me>0 \longrightarrow T(C) \stackrel{T(g)}{\longrightarrow} T(B) \stackrel{T(f)}{\longrightarrow} T(A) \longrightarrow 0</me>
                </p>
              </statement>
            </definition>

            <exercise xml:id="exe-44"><title>Functors are Exact iff They Commute with Homology</title>
              <statement>
                <p>
                  Show that an additive functor <m>T</m> is exact if it commutes with homology, that is, for all complexes <m>C</m> and all <m>n</m>,
                  <me>\mathrm{H}_{n}(T(C))=T\left(\mathrm{H}_{n}(C)\right)</me>
                </p>
              </statement>
            </exercise>
      
            <p>
              As we will soon see, most functors are not exact. 
              However, many functors of interest preserve some exactness.
            </p>

            <definition xml:id="def-3.8"><title>Left and Right Exact Functors</title>
              <statement>
                <p>
                  A covariant additive functor <m>T: R</m>-Mod <m>\longrightarrow S</m>-Mod is left exact if it takes every exact sequence
                  <me>0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C</me>
                  of <m>R</m>-modules to the exact sequence
                  <me>0 \longrightarrow T(A) \stackrel{T(f)}{\longrightarrow} T(B) \stackrel{T(g)}{\longrightarrow} T(C)</me>
                  of <m>S</m>-modules, and right exact if it takes every exact sequence of <m>R</m>-modules
                  <me>A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0</me>
                  to the exact sequence of <m>S</m>-modules
                  <me>T(A) \stackrel{T(f)}{\longrightarrow} T(B) \stackrel{T(g)}{\longrightarrow} T(C) \longrightarrow 0 .</me>
                </p>
              </statement>
            </definition>

            <definition xml:id="def-3.9"><title>Left and Right Exact Functors</title>
              <statement>
                <p>
                  A contravariant additive functor <m>T: R</m>-Mod <m>\longrightarrow S</m>-Mod is left exact if it takes every exact sequence
                  <me>A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0</me>
                  of <m>R</m>-modules to the exact sequence
                  <me>0 \longrightarrow T(C) \stackrel{T(g)}{\longrightarrow} T(B) \stackrel{T(f)}{\longrightarrow} T(A)</me>
                  of <m>S</m>-modules, and right exact if it takes every exact sequence of <m>R</m>-modules
                  <me>0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C</me>
                  to the exact sequence of <m>S</m>-modules
                  <me>T(C) \stackrel{T(g)}{\longrightarrow} T(B) \stackrel{T(f)}{\longrightarrow} T(A) \longrightarrow 0 .</me>
                </p>
              </statement>
            </definition>

            <exercise xml:id="exe-45"><title>Exactness and SESs</title>
              <statement>
                <p>
                  The definitions above all stay unchanged if for each condition we start with a short exact sequence. 
                  For example, a covariant additive functor <m>T</m> is left exact if and only if for every short exact sequence
                  <me>0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0</me>
                  of <m>R</m>-modules,
                  <me>0 \longrightarrow T(A) \stackrel{T(f)}{\longrightarrow} T(B) \stackrel{T(g)}{\longrightarrow} T(C)</me>
                  is exact.
                </p>
              </statement>
            </exercise>

            <remark xml:id="rem-3.10">
              <p>
                Left exact covariant functors take kernels to kernels, while right exact covariant functors take cokernels to cokernels: 
                the kernel of <m>f</m> fits in an exact sequence
                <me>0 \longrightarrow \operatorname{ker} f \longrightarrow A \stackrel{f}{\longrightarrow} B</me>
                and applying a left exact functor <m>F</m> gives us an exact sequence
                <me>0 \longrightarrow F(\operatorname{ker} f) \longrightarrow F(A) \stackrel{F(f)}{\longrightarrow} F(B)</me>
                Exactness tells us that <m>F(\operatorname{ker} f)</m> is the kernel of <m>F(f)</m>. 
              </p>
                
              <p>
                Similarly, the cokernel of <m>f</m> fits into an exact sequence
                <me>A \stackrel{f}{\longrightarrow} B \longrightarrow \operatorname{coker} f \longrightarrow 0</me>
                which any right exact functor <m>G</m> will take to an exact sequence
                <me>G(A) \stackrel{G(f)}{\longrightarrow} G(B) \longrightarrow G(\operatorname{coker} f) \longrightarrow 0</me>
                Exactness says that <m>G(\operatorname{coker} f)</m> is the cokernel of <m>G(f)</m>.
              </p>
        
              <p>
                Similarly, left exact contravariant functors take cokernels to kernels, and right exact contravariant functors take kernels to cokernels. 
                A left exact contravariant functor <m>F</m> will take the exact sequence
                <me>A \stackrel{f}{\longrightarrow} B \longrightarrow \operatorname{coker} f \longrightarrow 0</me>
                to an exact sequence
                <me>0 \longrightarrow F(\operatorname{coker} f) \longrightarrow F(B) \stackrel{F(f)}{\longrightarrow} F(A)</me>
                and exactness tells us that <m>F(\operatorname{coker} f)</m> is the kernel of <m>F(f)</m>.
              </p>
        
              <p>
                A right exact contravariant functor <m>G</m> will take the exact sequence
                <me>0 \longrightarrow \operatorname{ker} f \longrightarrow A \stackrel{f}{\longrightarrow} B</me>
                to the exact sequence
                <me>G(B) \stackrel{G(f)}{\longrightarrow} G(A) \longrightarrow G(\operatorname{ker} f) \longrightarrow 0</me>
                and exactness says that <m>G(\operatorname{ker} f)</m> is the cokernel of <m>G(f)</m>.
              </p>
            </remark>
      
            <p>
              Exactness is preserved by natural isomorphisms.
            </p>

            <remark xml:id="rem-3.11">
              <p>
                Suppose that <m>F, G: R</m>-Mod <m>\longrightarrow S</m>-Mod are naturally isomorphic additive functors. 
                We claim that <m>F</m> is exact if and only if <m>G</m> is exact. 
                Let's prove it in the case when <m>F</m> and <m>G</m> are covariant. 
                Given any short exact sequence
                <me>0 \longrightarrow A \longrightarrow B \longrightarrow C \longrightarrow 0</me>
                applying each of our functors yields complexes of <m>R</m>-modules which may or may not be exact. 
                Our natural isomorphism gives us an isomorphism of complexes
              </p>

              <image source="2023_10_23_e2d6a27704be928b3deeg-077.jpg"/>

              <p>
                Isomorphisms of complexes induce isomorphisms in homology, so the top sequence is exact if and only if the bottom sequence is exact. 
                Thus <m>F</m> preserves the short exact sequence if and only if <m>G</m> does.
              </p>
        
              <p>
                A similar argument shows that <m>F</m> is left (respectively, right) exact if and only if <m>G</m> is left (respectively, right) exact; we leave the details as an exercise.
              </p>
            </remark>
      
            <p>
              However, an additive functor does not have to be left exact nor right exact. 
              There are even some functors that preserve exactness in the middle.
            </p>

            <example xml:id="ex-3.12"><title>Homology is Exact in the Middle</title>
              <p>
                The homology functor is exact in the middle: given a short exact sequence
                <me>0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0</me>
                the exactness of the long exact sequence in homology says in particular that
                <me>\mathrm{H}_{n}(A) \stackrel{\mathrm{H}_{n}(f)}{\longrightarrow} \mathrm{H}_{n}(B) \stackrel{\mathrm{H}_{n}(g)}{\longrightarrow} \mathrm{H}_{n}(C)</me>
                is exact for all <m>n</m>. On the other hand, we claim that the homology functor is neither left exact nor right exact. More precisely, <m>\mathrm{H}_{n}(f)</m> might fail to be injective and <m>\mathrm{H}_{n}(g)</m> might fail to be surjective. Finding a counterexample amounts to finding a short exact sequence of complexes such that the connecting homomorphism in the long exact sequence in homology is not the zero map.
              </p>
        
              <p>
                For example, consider the following complexes and maps of complexes:
              </p>
        
              <image source="2023_10_23_e2d6a27704be928b3deeg-078.jpg"/>
                
              <p>
                Applying <m>\mathrm{H}_{0}</m> gives us
                <me>
                  \begin{gathered}
                  \mathrm{H}_{0}(A) \stackrel{\mathrm{H}_{0}(f)}{\longrightarrow} \mathrm{H}_{0}(B) \\
                  \mathbb{Z} \stackrel{0}{\longrightarrow} 0
                  \end{gathered}
                </me>
                which is not injective, so
                <me>0 \longrightarrow \mathrm{H}_{0}(A) \stackrel{\mathrm{H}_{0}(f)}{\longrightarrow} \mathrm{H}_{0}(B) \stackrel{\mathrm{H}_{0}(g)}{\longrightarrow} \mathrm{H}_{0}(C)</me>
                is not exact. 
                Similarly, applying <m>\mathrm{H}_{1}</m> gives
                <me>
                  \begin{gathered}
                  \mathrm{H}_{1}(B) \stackrel{\mathrm{H}_{1}(g)}{\longrightarrow} \mathrm{H}_{1}(C) \\
                  0 \stackrel{0}{\longrightarrow} \mathbb{Z}
                  \end{gathered}
                </me>
                which is not surjective, so
                <me>\mathrm{H}_{1}(A) \stackrel{\mathrm{H}_{1}(f)}{\longrightarrow} \mathrm{H}_{1}(B) \stackrel{\mathrm{H}_{1}(g)}{\longrightarrow} \mathrm{H}_{1}(C) \longrightarrow 0</me>
                is not exact. 
                Thus homology is neither left exact nor right exact, though it is exact in the middle.
              </p>
            </example>
      
            <p>
              But in general, an additive functor might fail to preserve exactness even in the middle.
            </p>

            <example xml:id="ex-3.13">
              <p>
                Fix a prime <m>p</m> and consider the functor <m>F: \mathbf{A b} \rightarrow \mathbf{A b}</m> which on objects is defined by
                <me>F(M)=\operatorname{Hom}_{\mathbb{Z}}\left(\mathbb{Z} / p, M / p^{2} M\right)</me>
                given a homomorphism of abelian groups <m>f: M \rightarrow N</m>, we get an induced homomorphism of abelian groups
                <me>
                  \begin{gathered}
                  M / p^{2} M \stackrel{\bar{f}}{\longrightarrow} N / p^{2} N \\
                  m+p^{2} M \longmapsto f(m)+p^{2} N
                  \end{gathered}
                </me>
                and <m>F(f)=\bar{f} \circ-</m> is postcomposition with <m>\bar{f}</m>. 
                Consider the short exact sequence
                <me>0 \longrightarrow \mathbb{Z} / p^{2} \stackrel{f}{\longrightarrow} \mathbb{Z} / p^{3} \stackrel{g}{\longrightarrow} \mathbb{Z} / p \longrightarrow 0</me>
                where <m>f</m> is the multiplication by <m>p</m> map, which sends <m>1 \mapsto p</m>, and <m>g</m> is the canonical quotient map by the subgroup generated by <m>p</m>.
              </p>
        
              <p>
                Note that
                <me>F\left(\mathbb{Z} / p^{2}\right)=\operatorname{Hom}_{\mathbb{Z}}\left(\mathbb{Z} / p, \mathbb{Z} / p^{2}\right)</me>
                is the submodule of <m>\mathbb{Z} / p^{2}</m> of elements killed by <m>p</m>, which is generated by the class of <m>p</m>, so <m>F\left(\mathbb{Z} / p^{2}\right)=\mathbb{Z} / p</m>. 
                Moreover,
                <me>\frac{\mathbb{Z} / p^{3}}{p^{2} \mathbb{Z} / p^{3}} \cong \mathbb{Z} / p^{2}</me>
                so <m>F\left(\mathbb{Z} / p^{3}\right)</m> is the the submodule of <m>\mathbb{Z} / p^{2}</m> of elements killed by <m>p</m>, which is generated by <m>p</m> and isomorphic to <m>\mathbb{Z} / p</m>, so <m>F\left(\mathbb{Z} / p^{3}\right)=\mathbb{Z} / p</m>.
                Now
                <me>F(f): \mathbb{Z} / p \rightarrow \mathbb{Z} / p</me>
                is the map induced by multiplication by <m>p</m>, so it is the zero map. 
                The map
                <me>\bar{g}: \mathbb{Z} / p^{2} \rightarrow \mathbb{Z} / p</me>
                is the canonical quotient by the subgroup generated by <m>p</m>; 
                any element in
                <me>F\left(Z / p^{3}\right)=\operatorname{Hom}_{\mathbb{Z}}\left(\mathbb{Z} / p, \mathbb{Z} / p^{2}\right)</me>
                corresponds to choosing an element of order <m>p</m>, and thus in the subgroup generated by <m>p</m>, so applying <m>\bar{g}</m> always results in <m>0</m>. 
                We conclude that <m>F(g)=0</m>. 
                Finally, this shows that applying <m>F</m> to the original short exact sequence gives us the complex
                <me>0 \longrightarrow \mathbb{Z} / p \stackrel{0}{\longrightarrow} \mathbb{Z} / p \stackrel{0}{\longrightarrow} \mathbb{Z} / p \longrightarrow 0</me>
                which is not exact anywhere.
              </p>
            </example>
      
            <p>
              One amazing fact, however, is that even if a functor is not exact, it must always preserve split short exact sequences.
            </p>

            <exercise xml:id="exe-46"><title>Additive Functors Preserve Split Exact Sequences</title>
              <statement>
                <p>
                  Show that additive functors preserve split short exact sequences.
                </p>
              </statement>
            </exercise>

          </subsection>

          <subsection xml:id="subsec-hom-left"><title><m>\Hom</m> is Left Exact</title>

            <blockquote>
              <p>
                <q>
                  One should always aim at being interesting, rather than exact.
                </q>
              </p>
              <attribution>Voltaire</attribution>
            </blockquote>
            
            <p>
              We are now ready for our first important example of a left exact functor: 
              <m>\Hom</m> is left exact.
            </p>

            <theorem xml:id="thm-3.14"><title><m>\Hom</m> is Left Exact</title>
              <statement>
                <p>
                  Let <m>M</m> be an R-module.
                  <ol>
                    <li>
                      <p>
                        The covariant functor <m>\operatorname{Hom}_{R}(M,-)</m> is left exact: 
                        for every exact sequence
                        <me>0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C</me>
                        of <m>R</m>-modules, the sequence
                        <me>0 \longrightarrow \operatorname{Hom}_{R}(M, A) \stackrel{\operatorname{Hom}_{R}(M, f)}{\longrightarrow} \operatorname{Hom}_{R}(M, B) \stackrel{\operatorname{Hom}_{R}(M, g)}{\longrightarrow} \operatorname{Hom}_{R}(M, C)</me>
                        is exact.
                      </p>
                    </li>

                    <li>
                      <p>
                        The contravariant functor <m>\operatorname{Hom}_{R}(-, M)</m> is left exact: for every exact sequence
                        <me>A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0</me>
                        of <m>R</m>-modules, the sequence
                        <me>0 \longrightarrow \operatorname{Hom}_{R}(C, M) \stackrel{\operatorname{Hom}_{R}(g, M)}{\longrightarrow} \operatorname{Hom}_{R}(B, M) \stackrel{\operatorname{Hom}_{R}(f, M)}{\longrightarrow} \operatorname{Hom}_{R}(A, M)</me>
                        is exact.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>

              <proof>
                <p>
                  To make the notation less heavy, we will write
                  <me>f_{*}:=\operatorname{Hom}_{R}(M, f) \quad \text { and } \quad g_{*}:=\operatorname{Hom}_{R}(M, g)</me>
                  and similarly
                  <me>f^{*}:=\operatorname{Hom}_{R}(f, M) \quad \text { and } \quad g^{*}:=\operatorname{Hom}_{R}(g, M) \text {. }</me>
                </p>
          
                <p>
                  Since additive functors send complexes to complexes, as outlined in <xref ref="rem-3.6"/>, we at least know that
                  <me>0 \longrightarrow \operatorname{Hom}_{R}(M, A) \stackrel{\operatorname{Hom}_{R}(M, f)}{\longrightarrow} \operatorname{Hom}_{R}(M, B) \stackrel{\operatorname{Hom}_{R}(M, g)}{\longrightarrow} \operatorname{Hom}_{R}(M, C)</me>
                  and
                  <me>0 \longrightarrow \operatorname{Hom}_{R}(C, M) \stackrel{\operatorname{Hom}_{R}(g, M)}{\longrightarrow} \operatorname{Hom}_{R}(B, M) \stackrel{\operatorname{Hom}_{R}(f, M)}{\longrightarrow} \operatorname{Hom}_{R}(A, M)</me>
                  are functors, so in particular
                  <me>g_{*} f_{*}=0 \Longrightarrow \operatorname{im} f_{*} \subseteq \operatorname{ker} g_{*}</me>
                  and
                  <me>f^{*} g^{*}=0 \Longrightarrow \operatorname{im} g^{*} \subseteq \operatorname{ker} f^{*}</me>
                </p>
          
                <p>
                  <ol>
                    <li>
                      <p>
                        We have two things to show:
                        <ol>
                          <li><title><m>\underline{f_{*} \text { is injective: }}</m></title>
                            <p>
                              Suppose that <m>h \in \operatorname{Hom}_{R}(M, A)</m> is such that <m>f_{*}(h)=0</m>. 
                              By definition, this means that <m>f h=0</m>. 
                              But <m>f</m> is injective, so for any <m>m \in M</m>
                              <me>f h(m)=0 \Longrightarrow h(m)=0 \text {. }</me>
                              We conclude that <m>h=0</m>, and <m>f_{*}</m> is injective.
                            </p>
                          </li>

                          <li><title><m>\underline{\operatorname{ker} g_{*} \subseteq \operatorname{im} f_{*}:}</m></title>
                            <p>
                              Let <m>h \in \operatorname{Hom}_{R}(M, B)</m> be in the kernel of <m>g_{*}</m>. 
                              Then <m>g h=g_{*}(h)=0</m>, so for each <m>m \in M</m>, <m>g h(m)=0</m>. 
                              Then <m>h(m) \in \operatorname{ker} g=\operatorname{im} f</m>, so there exists <m>a \in A</m> such that <m>f(a)=h(m)</m>. 
                              Since <m>f</m> is injective, this element <m>a</m> is unique for each <m>m \in M</m>. So setting <m>k(m):=a</m> gives us a well-defined function <m>k: M \longrightarrow A</m>. 
                            </p>

                            <p>
                              We claim that <m>k</m> is in fact an <m>R</m>-module homomorphism. 
                              To see that, notice that if <m>k\left(m_{1}\right)=a_{1}</m> and <m>k\left(m_{2}\right)=a_{2}</m>, then
                              <me>f\left(a_{1}+a_{2}\right)=f\left(a_{1}\right)+f\left(a_{2}\right)=h\left(m_{1}\right)+h\left(m_{2}\right)=h\left(m_{1}+m_{2}\right)</me>
                              so that <m>k\left(m_{1}+m_{2}\right)=a_{1}+a_{2}=k\left(m_{1}\right)+k\left(m_{2}\right)</m>. 
                            </p>
                            
                            <p>
                              Similarly, given any <m>r \in R</m>,
                              <me>f\left(r a_{1}\right)=r f\left(a_{1}\right)=r h\left(m_{1}\right)=h\left(r m_{1}\right)</me>
                              so <m>k\left(r m_{1}\right)=r a_{1}=r k\left(m_{1}\right)</m>. 
                              Finally, this element <m>k \in \operatorname{Hom}_{R}(M, A)</m> satisfies
                              <me>f_{*}(k)(m)=f(k(m))=h(m)</me>
                              for all <m>m \in M</m>, so <m>f_{*}(k)=h</m> and <m>h \in \operatorname{im} f_{*}</m>.
                            </p>
                          </li>
                        </ol>
                      </p>
                    </li>

                    <li>
                      <p>
                        Again, we have two things to show:
                        <ol>
                          <li><title><m>g^{*}</m> is injective:</title>
                            <p>
                              If <m>g^{*}(h)=0</m> for some <m>h \in \operatorname{Hom}_{R}(C, M)</m>, then <m>h g=g^{*}(h)=0</m>. 
                              Consider any <m>c \in C</m>. 
                              Since <m>g</m> is surjective, there exists <m>b \in B</m> such that <m>g(b)=c</m>. 
                              Then <m>h(c)=h g(b)=0</m>, so <m>h=0</m>.
                            </p>
                          </li>

                          <li><title><m>\underline{\operatorname{ker} f^{*} \subseteq \operatorname{im} g^{*}:}</m></title>
                            <p>
                              Let <m>h \in \operatorname{Hom}_{R}(B, M)</m> be in <m>\ker f^{*}</m>, so that <m>h f=0</m>. 
                              Given any <m>c \in C</m>, there exists <m>b \in B</m> such that <m>g(b)=c</m>, since <m>g</m> is surjective. 
                              Let <m>k: C \longrightarrow M</m> be the function defined by <m>k(c):=h(b)</m> for some <m>b</m> with <m>g(b)=c</m>. 
                              This function is well-defined, since whenever <m>g\left(b^{\prime}\right)=g(b)=c, b-b^{\prime} \in \operatorname{ker} g=\operatorname{im} f</m>, say <m>b-b^{\prime}=f(a)</m>, and thus <m>h\left(b-b^{\prime}\right)=h(f(a))=0</m>. 
                              Moreover, we claim that <m>k</m> is indeed a homomorphism of <m>R</m>-modules. 
                              If <m>c_{1}, c_{2} \in C</m>, and <m>g\left(b_{1}\right)=c_{1}, g\left(b_{2}\right)=c_{2}</m>, then <m>g\left(b_{1}+b_{2}\right)=c_{1}+c_{2}</m>, so
                              <me>k\left(c_{1}+c_{2}\right)=h\left(b_{1}+b_{2}\right)=h\left(b_{1}\right)+h\left(b_{2}\right)=k\left(b_{1}\right)+k\left(b_{2}\right)</me>
                            </p>
                      
                            <p>
                              Finally, this element <m>k \in \operatorname{Hom}_{R}(C, M)</m> is such that <m>g^{*}(k)</m> satisfies
                              <me>\left(g_{*}(k)\right)(b)=k(g(b))=h(b)</me>
                              for all <m>b \in B</m>, so <m>g^{*}(k)=h</m>, and <m>h \in \operatorname{im} g^{*}</m>.
                            </p>
                          </li>
                        </ol>
                      </p>
                    </li>
                  </ol>
                </p>
                <p>
                  So <m>\operatorname{Hom}_{R}(M,-)</m> preserves kernels, and <m>\operatorname{Hom}_{R}(-, N)</m> sends cokernels to kernels.
                </p>
              </proof>
            </theorem>

            <p>
              However, <m>\Hom</m> is not right exact in general.
            </p>

            <example xml:id="ex-3.15">
              <p>
                Consider the short exact sequence of abelian groups
                <me>0 \longrightarrow \mathbb{Z} \longrightarrow \mathbb{Q} \longrightarrow \mathbb{Q} / \mathbb{Z} \longrightarrow 0</me>
                where the first map is the inclusion of <m>\mathbb{Z}</m> into <m>\mathbb{Q}</m>, and the second map is the canonical projection. 
                The elements in the abelian group <m>\mathbb{Q} / \mathbb{Z}</m> are cosets of the form <m>\frac{p}{q}+\mathbb{Z}</m>, where <m>\frac{p}{q} \in \mathbb{Q}</m>, and whenever <m>\frac{p}{q} \in \mathbb{Z}, \frac{p}{q}+\mathbb{Z}=0</m>. 
                While <xref ref="thm-3.14"/> says that
                <me>0 \longrightarrow \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z} / 2, \mathbb{Z}) \longrightarrow \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z} / 2, \mathbb{Q}) \longrightarrow \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z} / 2, \mathbb{Q} / \mathbb{Z})</me>
                is exact, we claim that this cannot be extended to a short exact sequence, since the map <m>\operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z} / 2, \mathbb{Q}) \longrightarrow \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z} / 2, \mathbb{Q} / \mathbb{Z})</m> is not surjective.
                On the one hand, there are no nontrivial homomorphisms from <m>\mathbb{Z} / 2</m> to either <m>\mathbb{Z}</m> nor <m>\mathbb{Q}</m>, since there are no elements in <m>\mathbb{Z}</m> nor <m>\mathbb{Q}</m> of order <m>2</m>. 
                This shows that
                <me>\operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z} / 2, \mathbb{Q}) \cong 0.</me>
              </p>
        
              <p>
                On the other hand, <m>\operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z} / 2, \mathbb{Q} / \mathbb{Z})</m> is nonzero: 
                to give a homomorphism of abelian groups <m>\mathbb{Z} / 2 \rightarrow \mathbb{Q} / Z Z</m> is to choose an element in <m>\mathbb{Q} / \mathbb{Z}</m> of order <m>2</m>. 
                Since <m>\frac{1}{2}+\mathbb{Z}</m> is an element of order 2 in <m>\mathbb{Q} / \mathbb{Z}</m>, the map sending <m>1</m> in <m>\mathbb{Z} / 2</m> to <m>\frac{1}{2}+\mathbb{Z}</m> in <m>\mathbb{Z} / \mathbb{Q}</m> is nonzero. 
                So after applying <m>\operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z} / 2,-)</m>, we get the exact sequence
                <me>0 \longrightarrow 0 \longrightarrow 0 \longrightarrow \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z} / 2, \mathbb{Q} / \mathbb{Z})</me>
                So this shows that <m>\operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z} / 2,-)</m> is not an exact functor, only left exact.
              </p>
            </example>

            <p>
              Similarly, we can show that <m>\operatorname{Hom}_{\mathbb{Z}}(-, \mathbb{Z})</m> is not exact:
            </p>

            <example xml:id="ex-3.16">
              <p>
                Let's apply <m>\operatorname{Hom}_{\mathbb{Z}}(-, \mathbb{Z})</m> to the short exact sequence
                <me>0 \longrightarrow \mathbb{Z} \longrightarrow \mathbb{Q} \longrightarrow \mathbb{Q} / \mathbb{Z} \longrightarrow 0</me>
                This time, <xref ref="thm-3.14"/> says that
                <me>0 \longrightarrow \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Q} / \mathbb{Z}, \mathbb{Z}) \longrightarrow \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Q}, \mathbb{Z}) \longrightarrow \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z}, \mathbb{Z})</me>
                is exact. 
                We claim that the last map is not surjective.
                First, we claim that <m>\operatorname{Hom}_{\mathbb{Z}}(\mathbb{Q}, \mathbb{Z})=0</m>. 
                Indeed, if <m>f: \mathbb{Q} \longrightarrow \mathbb{Z}</m> is a homomorphism of abelian groups, then for all <m>n \geqslant 1</m> we have
                <me>f(1)=n f\left(\frac{1}{n}\right)</me>
                So <m>f(1)</m> is an integer that is divisible by every integer, which is impossible unless <m>f(1)=0</m>. 
                We conclude that <m>f=0</m>, and thus <m>\operatorname{Hom}_{\mathbb{Z}}(\mathbb{Q}, \mathbb{Z}) \cong 0</m>. 
                So our exact sequence above is actually
                <me>0 \longrightarrow \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Q} / \mathbb{Z}, \mathbb{Z}) \longrightarrow 0 \longrightarrow \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z}, \mathbb{Z})</me>
                By <xref ref="exe-38"/>, <m>\operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z}, \mathbb{Z}) \cong \mathbb{Z} \neq 0</m>, so the last map in our sequence can't possibly be surjective, so our sequence is not a short exact sequence.
              </p>
        
              <p>
                The other fun consequence is that <m>\operatorname{since} \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Q}, \mathbb{Z})=0</m> and we have an exact sequence
                <me>0 \longrightarrow \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Q} / \mathbb{Z}, \mathbb{Z}) \longrightarrow \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Q}, \mathbb{Z})=0</me>
                we can now conclude that
                <me>\operatorname{Hom}_{\mathbb{Z}}(\mathbb{Q} / \mathbb{Z}, \mathbb{Z})=0</me>
              </p>
            </example>

            <p>
              The last observation is a common trick: once we know we have an exact sequence involving certain modules we do not know, we can sometimes calculate them exactly by studying the other modules and maps in the exact sequence.
            </p>
      
            <p>
              We can use the left exactness of Hom to compute some modules of interest:
            </p>

            <example xml:id="exe-3.17">
              <p>
                Let <m>R</m> be a commutative ring and <m>M</m> be a finitely presented <m>R</m>-module. 
                This means that <m>M</m> has a presentation with finitely many generators and relations, which translates into an exact sequence of the form
                <me>R^{m} \stackrel{f}{\longrightarrow} R^{n} \longrightarrow M \longrightarrow 0</me>
              </p>
        
              <p>
                Since <m>R^{m}</m> and <m>R^{n}</m> are free modules, we can think of the map <m>f</m> as multiplication by a matrix <m>A</m> with <m>n</m> rows and <m>m</m> columns, after we fix a basis for <m>R^{n}</m> and <m>R^{m}</m>. 
                Applying <m>\operatorname{Hom}_{R}(-, R)</m> to the exact sequence above, we get an exact sequence
                <me>0 \longrightarrow \operatorname{Hom}_{R}(M, R) \longrightarrow \operatorname{Hom}_{R}\left(R^{n}, R\right) \stackrel{f^{*}}{\longrightarrow} \operatorname{Hom}\left(R^{m}, R\right)</me>
                By <xref ref="exe-38"/>, <m>\operatorname{Hom}_{R}\left(R^{n}, R\right) \cong R^{n}</m> and <m>\operatorname{Hom}_{R}\left(R^{m}, R\right) \cong R^{m}</m>. 
                Moreover, we claim that <m>f^{*}</m> is multiplication by the transpose of <m>A</m>.
              </p>
        
              <p>
                First, note that given a basis <m>\left\{e_{1}, \ldots, e_{n}\right\}</m> for <m>R^{n}</m>, we get a dual basis <m>\left\{e_{1}^{*}, \ldots, e_{n}^{*}\right\}</m> for <m>\operatorname{Hom}_{R}\left(R^{n}, R\right)</m>, where
                <me>e_{i}^{*}\left(e_{j}\right)= \begin{cases}1 &amp; \text { if } i=j \\ 0 &amp; \text { otherwise }\end{cases}</me>
              </p>
        
              <p>
                Similarly, we have a dual basis <m>\left\{e_{1}^{*}, \ldots, e_{m}^{*}\right\}</m> for <m>\operatorname{Hom}_{R}\left(R^{m}, R\right) \cong R^{m}</m>; 
                we might as well assume that we picked the canonical basis in both cases, so that we can use similar notation on both.
              </p>
        
              <p>
                Now the map <m>f^{*}</m> is also given by multiplication by a matrix, now having <m>m</m> rows and <m>n</m> columns. 
                To calculate its <m>j\th</m> column, we need to calculate <m>f^{*}\left(e_{j}^{*}\right)</m>, which is given by precomposition with <m>f</m>, so <m>f^{*}\left(e_{j}^{*}\right)=e_{j}^{*} A</m>; 
                this reads off the <m>j</m> th row of <m>A</m>. Thus <m>f^{*}</m> is indeed multiplication by <m>A^{T}</m>, and we have an exact sequence
                <me>0 \longrightarrow \operatorname{Hom}_{R}(M, R) \longrightarrow R^{n} \stackrel{A^{T}}{\longrightarrow} R^{m}</me>
              </p>
        
              <p>
                In particular, we have shown that <m>\operatorname{Hom}_{R}(M, R)</m> is the kernel of multiplication by <m>A^{T}</m>.
              </p>
            </example>

          </subsection>

          <outcomes>
            <ul>
              <li>
                <p>

                </p>
              </li>
            </ul>
          </outcomes>
          
        </section>

        <section xml:id="sec-tensor"><title>Tensor Products</title>

          <objectives>
            <ul>
              <li>
                
              </li>
            </ul>
          </objectives>

          <subsection xml:id="subsec-biadditive"><title>Biadditive Maps and First Properties</title>

            <blockquote>
              <p>
                <q>
                 Tenser, said the Tensor. Tension, apprehension, and dissension have begun.
                </q>
              </p>
              <attribution>Alfred Bester</attribution>
            </blockquote>
            
            <definition xml:id="def-3.18">
              <statement>
                <p>
                  Definition 3.18. Fix a ring <m>R</m>, and consider:
                </p>
          
                <p><ul>
                  <li>
                        <p>
                  a right <m>R</m>-module <m>M</m>,
                </p>
                  </li>
          
                  <li>
                        <p>
                  a left <m>R</m>-module <m>N</m>,
                </p>
                  </li>
          
                  <li>
                        <p>
                  an abelian group <m>L</m>.
                </p>
                  </li>
          
                </ul></p>
          
                <p>
                  A function <m>f: M \times N \longrightarrow L</m> is <m>R</m>-biadditive if for all <m>m, m^{\prime} \in M</m>, all <m>n, n^{\prime} \in N</m>, and all <m>r \in R</m> we have
                </p>
          
                <p><ul>
                  <li>
                        <p>
                  <m>f\left(m+m^{\prime}, n\right)=f(m, n)+f\left(m^{\prime}, n\right)</m>
                </p>
                  </li>
          
                  <li>
                        <p>
                  <m>f\left(m, n+n^{\prime}\right)=f(m, n)+f\left(m, n^{\prime}\right)</m>
                </p>
                  </li>
          
                  <li>
                        <p>
                  <m>f(m r, n)=f(m, r n)</m>.
                </p>
                  </li>
          
                </ul></p>
          
                <p>
                  When <m>R</m> is a commutative ring, suppose that <m>L</m> is also an <m>R</m>-module. We say that a function <m>f: M \times N \longrightarrow L</m> is <m>R</m>-bilinear if for all <m>m, m^{\prime} \in M</m>, all <m>n, n^{\prime} \in N</m>, and all <m>r \in R</m> we have
                </p>
          
                <p><ul>
                  <li>
                        <p>
                  <m>f\left(m+m^{\prime}, n\right)=f(m, n)+f\left(m^{\prime}, n\right)</m>
                </p>
                  </li>
          
                  <li>
                        <p>
                  <m>f\left(m, n+n^{\prime}\right)=f(m, n)+f\left(m, n^{\prime}\right)</m>
                </p>
                  </li>
          
                  <li>
                        <p>
                  <m>f(r m, n)=f(m, r n)=r f(m, n)</m>.
                </p>
                  </li>
          
                </ul></p>
              </statement>
            </definition>
      
            <p>
              Note that an <m>R</m>-bilinear function is an <m>R</m>-biadditive function that satisfies
            </p>
      
            <p>
              <me>f(r m, n)=f(m, r n)=r f(m, n)</me>
            </p>

            <example>
              <p>
                Example 3.19. The product on <m>R</m> is an <m>R</m>-biadditive function <m>R \times R \longrightarrow R</m>. The first two rules follow from distributivity of multiplication over the sum; the final rule is a consequence of the associativity of multiplication.
              </p>
        
              <p>
                When <m>R</m> is commutative, this is an <m>R</m>-bilinear function.
              </p>
            </example>

            <definition xml:id="def-3.20">
              <statement>
                <p>
                  Definition 3.20. Let <m>M</m> be a right <m>R</m>-module and let <m>N</m> be a left <m>R</m>-module. The tensor product of <m>M</m> and <m>N</m> is an abelian group <m>M \otimes_{R} N</m> together with an <m>R</m>-biadditive function <m>\tau: M \times N \longrightarrow M \otimes_{R} N</m> with the following universal property: for every abelian group <m>A</m> and every <m>R</m>-biadditive map <m>f: M \times N \longrightarrow A</m>, there exists a unique group homomorphism <m>\tilde{f}: M \otimes_{R} N \longrightarrow A</m> such that the following diagram commutes:
                </p>
          
        
                <image source="2023_10_23_e2d6a27704be928b3deeg-084.jpg"/>
              </statement>
            </definition>  
      
            <p>
              We will now show that tensor products exist and are unique up to isomorphism; in particular, we can talk about the tensor product of <m>M</m> and <m>N</m>.
            </p>

            <lemma xml:id="lem-3.21">
              <statement>
                <p>
                  Lemma 3.21. Let <m>R</m> be any ring, <m>M</m> be a right <m>R</m>-module, and <m>N</m> a left <m>R</m>-module. The tensor product of <m>M</m> and <m>N</m> is unique up to unique isomorphism. More precisely, if <m>M \times N \stackrel{\tau_{1}}{\rightarrow} T_{1}</m> and <m>M \times N \stackrel{\tau_{2}}{\rightarrow} T_{2}</m> are two tensor products, then there exists a unique isomorphism <m>T_{1} \stackrel{i}{\rightarrow} T_{2}</m> such that
                </p>
          
        
                <image source="2023_10_23_e2d6a27704be928b3deeg-085(1).jpg"/>
              </statement>

              <proof>
                <p>
                  Proof. First, note that the universal property of the tensor product implies that there exists a unique <m>\varphi</m> such that
                </p>
          
        
                <image source="2023_10_23_e2d6a27704be928b3deeg-085.jpg"/>
                  
          
                <p>
                  commutes. Since the identity map <m>T_{i} \longrightarrow T_{i}</m> is such a map, it must be the only such map.
                </p>
          
                <p>
                  Similarly, there are unique maps <m>\varphi_{1}: T_{1} \longrightarrow T_{2}</m> and <m>\varphi_{2}: T_{2} \longrightarrow T_{1}</m> such that 
                </p>
                <image source='2023_10_23_e2d6a27704be928b3deeg-085(2).jpg'/>
                <p>
                  both commute. Stacking these up, we get commutative diagrams 
                </p>
        
                <image source='2023_10_23_e2d6a27704be928b3deeg-085(4).jpg'/>
        
                <p>
                  Note that the identity maps on <m>T_{1}</m> and <m>T_{2}</m> are homomorphisms <m>T_{1} \rightarrow T_{1}</m> and <m>T_{2} \rightarrow T_{2}</m> that would make each of these triangles commute: 
                </p>
                <image source='2023_10_23_e2d6a27704be928b3deeg-085(3).jpg'/>
                <p>
                  By uniqueness, <m>\varphi_{2} \varphi_{1}</m> must be the identity on <m>T_{1}</m> and <m>\varphi_{1} \varphi_{2}</m> must be the identity on <m>T_{2}</m>. In particular, <m>T_{1}</m> and <m>T_{2}</m> are isomorphic, and the isomorphisms <m>\varphi_{1}</m> and <m>\varphi_{2}</m> are unique.
                </p>
              </proof>
            </lemma>
      
            <theorem xml:id="thm-3.22">
              <statement>
                <p>
                  Theorem 3.22. Given any right <m>R</m>-modules <m>M</m> and any left <m>R</m>-module <m>N</m>, their tensor product <m>M \otimes_{R} N</m> exists, and it is given by the abelian group <m>M \otimes_{R} N</m> defined as follows:
                </p>
          
                <p><ul>
                  <li>
                        <p>
                  Generators: For each pair of elements <m>m \in M</m> and <m>n \in N</m>, we have a generator <m>m \otimes n</m>.
                </p>
                  </li>
          
                  <li>
                        <p>
                  Relations: the generators of <m>m \otimes n</m> satisfy the following relations, where <m>m, m^{\prime} \in M</m>, <m>n, n^{\prime} \in N</m>, and <m>r \in R</m> :
                </p>
                  </li>
          
                </ul></p>
          
                <p>
                  <me>\begin{aligned}
          m \otimes\left(n+n^{\prime}\right) &amp; =m \otimes n+m \otimes n^{\prime} \\
          \left(m+m^{\prime}\right) \otimes n &amp; =m \otimes n+m \otimes n^{\prime} \\
          (m r) \otimes n &amp; =m \otimes(r n) .
          \end{aligned}</me>
                </p>
              </statement>

              <proof>
                <p>
                  Proof. Let <m>F</m> be the free abelian group on the set <m>M \times N</m>. In what follows, we identify a pair <m>(m, n) \in M \times N</m> with the corresponding basis element for <m>F</m>. Let <m>S</m> be the subgroup of <m>F</m> generated by
                </p>
          
                <p>
                  <me>\left.S=\left(\begin{array}{c|c}
          \left(m, n+n^{\prime}\right)-(m, n)-\left(m, n^{\prime}\right) &amp; m, m^{\prime} \in M \\
          \left(m+m^{\prime}, n\right)-(m, n)-\left(m^{\prime}, n\right) &amp; n, n^{\prime} \in N \\
          (m r, n)-(m, r n) &amp; r \in R
          \end{array}\right\}\right)</me>
                </p>
          
                <p>
                  Let <m>M \otimes_{R} N:=F / S</m>, and let <m>m \otimes n</m> denote the class of <m>(m, n)</m> in the quotient. We claim that this abelian group <m>M \otimes_{R} N</m> is a tensor product for <m>M</m> and <m>N</m>, together with the map
                </p>
          
                <p>
                  <me>\begin{gathered}
          M \times N \stackrel{\tau}{\longrightarrow} M \otimes N \\
          (m, n) \longmapsto M \otimes n
          \end{gathered}</me>
                </p>
          
                <p>
                  Notice <m>\tau</m> is the restriction of the quotient map <m>F \longrightarrow F / S</m> to the basis elements of <m>F</m>. Moreover, by construction of <m>M \otimes_{R} N</m>, the following identities hold:
                </p>
          
                <p>
                  <me>\begin{array}{r}
          m \otimes\left(n+n^{\prime}\right)=m \otimes n+m \otimes n^{\prime} \\
          \left(m+m^{\prime}\right) \otimes n=m \otimes n+m \otimes n^{\prime} \\
          (m r) \otimes n=m \otimes(r n)
          \end{array}</me>
                </p>
          
                <p>
                  Together, these make <m>\tau</m> an <m>R</m>-biadditive map. The map <m>M \times N \longrightarrow F</m> that sends each pair <m>(m, n)</m> to the corresponding basis element is <m>R</m>-bilinear by construction. Moreover, there is a natural quotient map <m>F \longrightarrow M \otimes_{R} N</m>, and these maps make the diagram
                </p>
          
        
                <image source="2023_10_23_e2d6a27704be928b3deeg-086.jpg"/>
                  
          
                <p>
                  commute.
                </p>
          
                <p>
                  Now suppose that <m>A</m> is any other abelian group, and let <m>M \times N \stackrel{f}{\rightarrow} A</m> by any <m>R</m>-biadditive map. Since <m>F</m> is the free <m>R</m>-module on <m>M \times N, f</m> induces a homomorphism of abelian groups <m>\varphi: F \longrightarrow A</m> such that <m>f i=\varphi</m>, meaning <m>f(m, n)=\varphi(m, n)</m> for all <m>m \in M</m> and all <m>n \in N</m>.
                </p>
          
                <p>
                  Finally, the fact that <m>f</m> is bilinear implies that <m>S \subseteq \operatorname{ker} \varphi</m>. Therefore, <m>\varphi</m> induces a group homomorphism on <m>F / S=M \otimes_{R} N</m>. All this fits in the following commutative diagram:
                </p>
          
        
                <image source="2023_10_23_e2d6a27704be928b3deeg-087.jpg"/>
                  
          
                <p>
                  Finally, this map <m>\tilde{f}</m> we constructed satisfies <m>\tilde{f}(n \otimes n)=f(m, n)</m>, and since <m>M \otimes_{R} N</m> is generated by such elements, <m>\tilde{f}</m> is completely determined by the images of <m>m \otimes n</m>, and thus unique.
                </p>
              </proof>
            </theorem>
      
            <p>
              The construction in Theorem 3.22 gives us generators <m>m \otimes n</m> for <m>M \otimes_{R} N</m>. These are usually called simple tensors. So any element in <m>M \otimes_{R} N</m> is of the form
            </p>
      
            <p>
              <me>\sum_{i=1}^{k} m_{i} \otimes n_{i}</me>
            </p>
      
            <p>
              Such expressions are not unique. For a cheap example, consider the relations we used to construct <m>M \otimes_{R} N</m> from the abelian group on <m>M \times N</m>, which gives us nontrivial ways to write the 0 element in <m>M \otimes_{R} N</m> :
            </p>
      
            <p>
              <me>
                \begin{array}{r}
                0=m \otimes\left(n+n^{\prime}\right)-m \otimes n-m \otimes n^{\prime} \\
                0=\left(m+m^{\prime}\right) \otimes n-m \otimes n-m \otimes n^{\prime} \\
                0=(m r) \otimes n-m \otimes(r n) .
                \end{array}
              </me>
            </p>
      
            <p>
              This makes things unexpectedly tricky. For starters, the tensor product of two nonzero modules might be zero nevertheless. Also, whenever we try to define some <m>R</m>-module homomorphism from <m>M \otimes_{R} N</m> into some other <m>R</m>-module, we must carefully check that our map is well-defined, which is in principle not an easy task. Therefore, the easiest way to define some <m>R</m>-module homomorphism from <m>M \otimes_{R} N</m> is to give some <m>R</m>-bilinear map from <m>M \times N</m> into our desired <m>R</m>-module.
            </p>
      
            <p>
              In summary: the tensor product <m>M \otimes_{R} N</m> of <m>M</m> and <m>N</m> is generated by the simple tensors <m>m \otimes n</m>, but it's important to remember (though we're all bound to forget once or twice) that not all elements in <m>M \otimes_{R} N</m> are simple tensors. Moreover, even if <m>M</m> and <m>N</m> are nonzero, <m>M \otimes_{R} N</m> could very well be zero.
            </p>

            <remark>
              <p>
                Remark 3.23. Two group homomorphisms <m>M \otimes_{R} N \longrightarrow L</m> coincide if and only if they agree on simple tensors, since these are generators for <m>M \otimes_{R} N</m>.
              </p>
            </remark>

            <remark>
              <p>
                Remark 3.24. In any tensor product <m>M \otimes_{R} N</m>, the simple tensor <m>0 \otimes 0</m> is the zero element, and
              </p>
        
              <p>
                <me>m \otimes 0=0=0 \otimes n</me>
              </p>
        
              <p>
                for all <m>m \in M</m> and <m>n \in N</m>.
              </p>
            </remark>

          </subsection>

          <subsection xml:id="subsec-tensor-elements"><title>Elements in Tensor Products</title>

            <blockquote>
              <p>
                <q>
                  In the beginning God said, the four-dimensional divergence of an antisymmetric, second rank tensor equals zero, and there was light, and it was good. And on the seventh day he rested.
                </q>
              </p>
              <attribution>Michio Kaku</attribution>
            </blockquote>
          
            <p>
              Let's see some examples of how tensor products can be zero.
            </p>

            <example>
              <p>
                Example 3.25. We claim that <m>\mathbb{Z} / 2 \otimes_{\mathbb{Z}} \mathbb{Q}=0</m>, despite the fact that both of these <m>\mathbb{Z}</m>-modules are nonzero. To see that, simply note that given any <m>a \in \mathbb{Z} / 2</m> and any <m>p \in \mathbb{Q}</m>,
              </p>
        
              <p>
                <me>a \otimes p=a \otimes \frac{2 p}{2}=(2 a) \otimes \frac{p}{2}=0 \otimes \frac{p}{2}=0</me>
              </p>
        
              <p>
                Since <m>\mathbb{Z} / 2 \otimes_{\mathbb{Z}} \mathbb{Q}</m> is generated by simple tensors, which are all 0 , we conclude that <m>\mathbb{Z} / 2 \otimes_{\mathbb{Z}} \mathbb{Q}=0</m>.
              </p>
            </example>

            <example>
              <p>
                Example 3.26. Consider the abelian group <m>\mathbb{Q} / \mathbb{Z}</m>. Again, this is very much nonzero, and yet we claim that <m>\mathbb{Q} / \mathbb{Z} \otimes_{\mathbb{Z}} \mathbb{Q} / \mathbb{Z}=0</m>. For any simple tensor,
              </p>
        
              <p>
                <me>
                  \begin{aligned}
                  \left(\frac{p}{q}+\mathbb{Z}\right) \otimes\left(\frac{a}{b}+\mathbb{Z}\right)=\left(\frac{b p}{b q}+\mathbb{Z}\right) \otimes\left(\frac{a}{b}+\mathbb{Z}\right) &amp; =\left(\frac{p}{b q}+\mathbb{Z}\right) \otimes b\left(\frac{a}{b}+\mathbb{Z}\right) \\
                  &amp; =\left(\frac{p}{b q}+\mathbb{Z}\right) \otimes 0=0 \otimes 0=0
                  \end{aligned}
                </me>
              </p>
            </example>

            <example>
              <p>
                Example 3.27. Let <m>p</m> and <m>q</m> be distinct prime integers. Then <m>p</m> has inverse modulo <m>q</m>, say <m>a p \equiv 1 \bmod q</m>, and <m>q</m> has an inverse modulo <m>p</m>, say <m>b q \equiv 1 \bmod p</m>. Given any simple tensor <m>n \otimes m</m> in <m>\mathbb{Z} / p \otimes_{\mathbb{Z}} \mathbb{Z} / q</m>
              </p>
        
              <p>
                <me>n \otimes m=((b q) n) \otimes((a p) m)=(p b n) \otimes(q a m)=0 \otimes 0</me>
              </p>
        
              <p>
                Since all simple tensors are 0 and <m>\mathbb{Z} / p \otimes_{\mathbb{Z}} \mathbb{Z} / q</m> is generated by simple tensors, we conclude that <m>\mathbb{Z} / p \otimes_{\mathbb{Z}} \mathbb{Z} / q=0</m>.
              </p>
            </example>
      
            <p>
              More generally, the following holds:
            </p>

            <exercise xml:id="exe-47">
              <statement>
                <p>
                  Show that if <m>d=\operatorname{gcd}(m, n)</m>, then <m>\mathbb{Z} / n \otimes_{\mathbb{Z}} \mathbb{Z} / m \cong \mathbb{Z} / d</m>.
                </p>
              </statement>
            </exercise>
      
            <p>
              Of course not all tensor products are zero. A good method for showing that a particular element <m>m</m> in a module <m>M</m> is nonzero is to give a homomorphism from <m>M</m> sending <m>m</m> to some nonzero element. We apply this technique to tensor products: to show that a particular element <m>x</m> in <m>M \otimes_{R} N</m> is nonzero, we construct a homomorphism from <m>M \otimes_{R} N</m> that takes <m>x</m> no some nonzero element. This is typically easier for simple tensors: we need an <m>R</m>-biadditive map out of <m>M \times N</m> that sends the corresponding pair to a nonzero element.
            </p>

            <example>
              <p>
                Example 3.28. Consider the abelian group <m>2 \mathbb{Z} \otimes_{\mathbb{Z}} \mathbb{Z} / 2</m>. The map
              </p>
        
              <p>
                <me>
                  \begin{array}{r}
                  2 \mathbb{Z} \times \mathbb{Z} / 2 \longrightarrow \mathbb{Z} / 2 \\
                  (a, b) \longmapsto \frac{a b}{2}
                  \end{array}
                </me>
              </p>
        
              <p>
                is <m>\mathbb{Z}</m>-bilinear, and thus it induces a homomorphism <m>2 \mathbb{Z} \otimes_{\mathbb{Z}} \mathbb{Z} / 2 \longrightarrow \mathbb{Z} / 2</m>. Via this map, <m>2 \otimes 1 \mapsto 1 \neq 0</m>, so <m>2 \otimes 1</m> is nonzero in <m>2 \mathbb{Z} \otimes_{\mathbb{Z}} \mathbb{Z} / 2</m>, and <m>2 \mathbb{Z} \otimes_{\mathbb{Z}} \mathbb{Z} / 2 \neq 0</m>.
              </p>
            </example>
      
            <p>
              Moreover, not all elements in a tensor product are simple tensors.
            </p>

            <exercise xml:id="exe-48">
              <statement>
                <p>
                  Let <m>R=\mathbb{Z}[x]</m> and consider the ideal <m>I=(2, x)</m>. Show that in <m>I \otimes_{R} I</m>, the element <m>2 \otimes 2+x \otimes x</m> is not a simple tensor.
                </p>
              </statement>
            </exercise>

          </subsection>

          <subsection xml:id="subsec-tensor-module"><title>Bimodules and When Tensor Products are Modules</title>

            <blockquote>
              <p>
                <q>
                  Envy, like a false mirror, distorts the symmetry of the sweetest form.
                </q>
              </p>
              <attribution>Norm Macdonald</attribution>
            </blockquote>
    
            <p>
              We can sometimes give <m>M \otimes_{R} N</m> the structure of an <m>R</m>-module.
            </p>

            <remark>
              <p>
                Remark 3.29. Let <m>R</m> be a commutative ring, and let <m>M</m> and <m>N</m> be <m>R</m>-modules. We can give <m>M \otimes_{R} N</m> the structure of an <m>R</m>-module, as follows: given <m>r \in R</m> and a simple tensor <m>m \otimes n</m>,
              </p>
        
              <p>
                <me>r(m \otimes n)=(r m) \otimes n=m \otimes(r n)</me>
              </p>
        
              <p>
                We can then extend this linearly to all other elements of <m>M \otimes_{R} N</m>. We leave it as an exercise to check that this does indeed make the abelian group <m>M \otimes_{R} N</m> into an <m>R</m>-module.
              </p>
            </remark>
      
            <p>
              Alternatively, over a commutative ring we can define the tensor product as follows:
            </p>

            <definition xml:id="def-3.30">
              <statement>
                <p>
                  Definition 3.30. 
                  Let <m>R</m> be a commutative ring and <m>M</m> and <m>N</m> be <m>R</m>-modules. 
                  The tensor product of <m>M</m> and <m>N</m> is an <m>R</m>-module <m>M \otimes_{R} N</m> together with an <m>R</m>-bilinear map <m>\tau: M \times N \longrightarrow</m> <m>M \otimes_{R} N</m> with the following universal property: 
                  for every <m>R</m>-module <m>A</m> and every <m>R</m>-bilinear map <m>f: M \times N \longrightarrow A</m> there exists a unique <m>R</m>-module homomorphism <m>\tilde{f}: M \otimes_{R} N \longrightarrow A</m> such that the following diagram commutes:
                </p>
          
        
                <image source="2023_10_23_e2d6a27704be928b3deeg-089(1).jpg"/>
              </statement>
            </definition>
      
            <p>
              One can now check that if we take the abelian group <m>M \otimes_{R} N</m>, which is the unique abelian group which satisfies the universal property of the tensor product (as defined for a general ring <m>R</m> ), and endow it with the <m>R</m>-module structure defined in Remark 3.29, the resulting <m>R</m>-module satisfies the universal property in Definition 3.30, and the argument we gave in Lemma 3.21 can be repurposed to show that this is the unique <m>R</m>-module satisfying this universal property.
            </p>

            <remark>
              <p>
                Remark 3.31. We can express the universal property of the tensor product in the framework of Definition 1.87. For simplicity, assume that <m>R</m> is a commutative ring. Consider the functor <m>\operatorname{Bilin}(M \times N,-): R</m>-Mod <m>\longrightarrow</m> Set that sends an <m>R</m>-module <m>A</m> to the set of <m>R</m>-bilinear maps <m>M \times N \longrightarrow A</m>, and a map of <m>R</m>-modules <m>f A \longrightarrow B</m> to the function of sets induced by post-composition of functions. The universal property of the tensor product is encoded in the representable functor <m>\operatorname{Bilin}(M \times N,-): R</m>-Mod <m>\longrightarrow</m> Set together with the bilinear map <m>\tau \in \operatorname{Bilin}\left(M \times N, M \otimes_{R} N\right)</m>. Indeed, this says that <m>\tau</m> induces a natural isomorphism between <m>\operatorname{Hom}_{R}\left(M \otimes_{R} N,-\right)</m> and <m>\operatorname{Bilin}(M \times N,-)</m> by sending each <m>R</m>-module <m>A</m> to the bijection
              </p>
        
              <p>
                <me>
                  \begin{aligned}
                  \operatorname{Hom}_{R}\left(M \otimes_{R} N, A\right) &amp; \longrightarrow \operatorname{Bilin}(M \times N, A) \\
                  f &amp; \longmapsto \operatorname{Bilin}(M \times N, f) \tau=f_{*}(\tau)=f \tau
                  \end{aligned}
                </me>
              </p>
        
              <p>
                The fact that this is a bijection says that for every <m>R</m>-bilinear map <m>g</m> there exists a unique <m>R</m>-module homomorphism <m>f</m> such that
              </p>
        
      
              <image source="2023_10_23_e2d6a27704be928b3deeg-089.jpg"/>
                
        
              <p>
                commutes. So this is indeed the universal property we described before.
              </p>
            </remark>
      
            <p>
              More generally, <m>M \otimes_{R} N</m> has a module structure when one of <m>M</m> or <m>N</m> is a bimodule.
            </p>

            <definition xml:id="def-3.32">
              <statement>
                <p>
                  Definition 3.32. Fix rings <m>R</m> and <m>S</m>. An <m>(R, S)</m>-bimodule is an abelian group <m>M</m> together with a left <m>R</m>-module structure and a right <m>S</m>-module structure such that for all <m>r \in R, s \in S</m>, and <m>m \in M</m>,
                </p>
          
                <p>
                  <me>(r m) s=r(m s)</me>
                </p>
          
                <p>
                  One sometimes writes <m>{ }_{R} M_{S}</m> to indicate <m>M</m> is an <m>(R, S)</m>-bimodule. An <m>R</m>-bimodule is an <m>(R, R)</m>-bimodule.
                </p>
              </statement>
            </definition>

            <example>
              <p>Example 3.33.</p>
      
              <p>
                a) Let <m>\mathrm{M}_{m, n}(R)</m> denote the ring of <m>m \times n</m> matrices with entries in a ring <m>R</m>. We can also view <m>\mathrm{M}_{m, n}(R)</m> as an <m>\left(\mathrm{M}_{m, m}, \mathrm{M}_{n, n}\right)</m>-bimodule via left and right multiplication of matrices.
              </p>
          
              <p>
                b) Any two-sided ideal <m>I</m> of a ring <m>R</m> is an <m>R</m>-bimodule.
              </p>
          
              <p>
                c) Let <m>R</m> be a commutative ring and let <m>M</m> be any left <m>R</m>-module. Then <m>M</m> is also a right <m>R</m>-module under the same module structure, by setting
              </p>
          
              <p>
                <me>m \cdot r:=r m \text {. }</me>
              </p>
          
              <p>
                Moreover, <m>M</m> is also an <m>R</m>-bimodule using both of these structures at once.
              </p>
          
              <p>
                d) Let <m>f: R \rightarrow S</m> be a ring homomorphism. We can view <m>S</m> as an <m>(R, S)</m>-bimodule via
              </p>
          
              <p>
                <me>t \cdot s \cdot r:=t s f(r)</me>
              </p>
          
              <p>
                for <m>t, s \in S</m> and <m>r \in R</m>, where the right hand side is just multiplication in <m>s</m>. Similarly, <m>S</m> can be viewed as an <m>(S, R)</m>-bimodule and as an <m>(R, R)</m>-bimodule.
              </p>
          
              <p>
                e) Let <m>R</m> be a commutative ring of prime characteristic <m>p&gt;0</m>, meaning that <m>R</m> contains a copy of <m>\mathbb{F}_{p}</m>, or equivalently, that
              </p>
          
              <p>
                <me>\underbrace{1+\cdots+1}_{p \text { times }}=0</me>
              </p>
          
              <p>
                Then <m>R</m> is an <m>R</m>-bimodule with the left module structure given by the Frobenius map
              </p>
          
              <p>
                <me>\begin{aligned}
          &amp; R \stackrel{F}{\longrightarrow} R \\
          &amp; r \longmapsto r^{p}
          \end{aligned}</me>
              </p>
          
              <p>
                and right module structure given by the usual multiplication on <m>R</m>. More precisely, given <m>r, s, t \in R</m>,
              </p>
          
              <p>
                <me>r \cdot s \cdot t:=r^{p} s t</me>
              </p>
          
              <p>
                where the right hand side is just multiplication in <m>R</m>.
              </p>
            </example>

            <exercise xml:id="exe-49">
              <statement>
                <p>
                  Let <m>M</m> be an <m>(S, R)</m>-bimodule and <m>N</m> a left <m>R</m>-module. 
                  Consider <m>M \times N</m> as a left <m>S</m>-module via
                </p>
            
                <p>
                  <me>s(m, n)=(s m, n) \text {. }</me>
                </p>
            
                <p>
                  Then <m>M \otimes_{R} N</m> is a left <m>S</m>-module via
                </p>
            
                <p>
                  <me>s\left(\sum_{i} m_{i} \otimes n_{i}\right)=\left(s m_{i}\right) \otimes n_{i}</me>
                </p>
            
                <p>
                  The map
                </p>
            
                <p>
                  <me>\begin{gathered}
            M \times N \longrightarrow M \otimes_{R} N \\
            (m, n) \longrightarrow m \otimes n
            \end{gathered}</me>
                </p>
            
                <p>
                  is left <m>S</m>-linear, and for any left <m>S</m>-module <m>A</m> and left <m>S</m>-linear <m>R</m>-biadditive map <m>b: M \times N \rightarrow A</m>, there is a unique left <m>S</m>-linear map <m>\alpha: M \otimes_{R} N \rightarrow A</m> such that <m>\alpha(m \otimes n)=b(m, n)</m>.
                </p>
            
                <p>
                  Similarly, for a left <m>R</m>-module <m>M</m> and an <m>(R, S)</m>-bimodule <m>N, M \times N</m> is a right <m>S</m>-module via
                </p>
            
                <p>
                  <me>(m, n) s=(m, n s)</me>
                </p>
            
                <p>
                  Then <m>M \otimes_{R} N</m> is a right <m>S</m>-module via
                </p>
            
                <p>
                  <me>\left(\sum_{i} m_{i} \otimes n_{i}\right) s=m_{i} \otimes\left(n_{i} s\right)</me>
                </p>
            
                <p>
                  and the map
                </p>
            
                <p>
                  <me>\begin{gathered}
            M \times N \longrightarrow M \otimes_{R} N \\
            (m, n) \longrightarrow m \otimes n
            \end{gathered}</me>
                </p>
            
                <p>
                  is right <m>S</m>-linear, and for any <m>S</m>-module <m>A</m> and right <m>S</m>-linear <m>R</m>-biadditive map <m>b: M \times N \rightarrow A</m>, there is a unique right <m>S</m>-linear map <m>\alpha: M \otimes_{R} N \rightarrow A</m> such that <m>\alpha(m \otimes n)=b(m, n)</m>.
                </p>
              </statement>
            </exercise>   

          </subsection>

          <subsection xml:id="subsec-tensor-functor"><title>The Tensor Product Functor</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>
      
            <p>
              We can also take tensor products of maps.
            </p>

            <lemma xml:id="lem-3.34">
              <statement>
                <p>
                  Lemma 3.34. Let <m>R</m> be a ring, <m>f: A \rightarrow C</m> be a homomorphism of right <m>R</m>-modules, and <m>g: B \rightarrow D</m> be a homomorphism of left <m>R</m>-modules. There exists a unique homomorphism of abelian groups <m>f \otimes g: A \otimes_{R} B \longrightarrow C \otimes_{R} D</m> such that
                </p>
            
                <p>
                  <me>(f \otimes g)(a \otimes b)=f(a) \otimes g(b)</me>
                </p>
            
                <p>
                  for all <m>a \in A</m> and <m>b \in B</m>. When <m>R</m> is commutative, this map <m>f \otimes g</m> is a homomorphism of <m>R</m>-modules. Moreover, if <m>A</m> and <m>B</m> are <m>(S, R)</m>-bimodules and <m>f</m> is left <m>S</m>-linear, then <m>f \otimes g</m> is also a homomorphism of left <m>S</m>-modules, and if <m>C</m> and <m>D</m> are <m>(R, S)</m>-bimodules and <m>g</m> is right <m>S</m>-linear, then <m>f \otimes g</m> is also a homomorphism of right <m>S</m>-modules.
                </p>
              </statement>

              <proof>
                <p>
                  Proof sketch. The function
                </p>
            
                <p>
                  <me>\begin{aligned}
            A \times B &amp; \longrightarrow C \otimes_{R} D \\
            (a, b) &amp; \longmapsto f(a) \otimes g(b)
            \end{aligned}</me>
                </p>
            
                <p>
                  is <m>R</m>-biadditive, and <m>R</m>-bilinear when <m>R</m> is commutative, and right or left <m>S</m>-linear in the bimodule case, so the universal property of tensor products in each case gives the desired homomorphism and its uniqueness.
                </p>
              </proof>
            </lemma>

            <lemma xml:id="lem-3.35">
              <statement>
                <p>
                  Lemma 3.35. Given <m>R</m>-module maps <m>A_{1} \stackrel{f_{1}}{\longrightarrow} A_{2} \stackrel{f_{2}}{\longrightarrow} A_{3}</m> and <m>B_{1} \stackrel{b_{1}}{\longrightarrow} B_{2} \stackrel{g_{2}}{\longrightarrow} B_{3}</m>, the composition of <m>f_{1} \otimes g_{1}</m> satisfies <m>f_{2} \otimes g_{2}</m>
                </p>
            
                <p>
                  <me>\left(f_{2} \otimes g_{2}\right) \circ\left(f_{1} \otimes g_{1}\right)=\left(f_{2} f_{1}\right) \otimes\left(g_{2} g_{1}\right)</me>
                </p>
              </statement>
            </lemma>

            <proof>
              <p>
                Proof. It's sufficient to check that these maps agree on simple tensors, and indeed they both take <m>a \otimes b</m> to <m>\left(f_{2} f_{1}(a)\right) \otimes\left(g_{2} g_{1}(b)\right)</m>.
              </p>
            </proof>
        
            <p>
              We are particularly interested in tensor products because of the tensor functor.
            </p>

            <theorem xml:id="thm-3.36">
              <statement>
                <p>
                  Theorem 3.36. Let <m>M</m> be a right <m>R</m>-module. There is an additive covariant functor
                </p>
            
                <p>
                  <me>M \otimes_{R}-: R-\operatorname{Mod} \longrightarrow \mathbf{A b}</me>
                </p>
            
                <p>
                  that takes each <m>R</m>-module <m>N</m> to <m>M \otimes_{R} N</m>, and each <m>R</m>-module homomorphism <m>f: A \longrightarrow B</m> to the homomorphism of abelian groups <m>1_{M} \otimes f: M \otimes_{R} A \longrightarrow M \otimes_{R} B</m>.
                </p>
            
                <p>
                  When <m>R</m> is commutative, we can view <m>M \otimes_{R}-</m> as an additive functor <m>R-\boldsymbol{M o d} \rightarrow R</m>-Mod.
                </p>
              </statement>

              <proof>
                <p>
                  Proof. Let <m>T:=M \otimes_{R}-</m>. First, note that <m>T</m> preserves identities, meaning <m>T\left(1_{N}\right)=1_{T(N)}</m>, since the identity map on <m>M \otimes_{R} N</m> agrees with <m>T\left(1_{N}\right)=1_{M} \otimes 1_{N}</m> on simple tensors. Moreover, <m>T</m> preserves compositions, since by Lemma 3.35 we have
                </p>
            
                <p>
                  <me>T(f) T(g)=(1 \otimes f)(1 \otimes g)=1 \otimes(f g)=T(f g)</me>
                </p>
            
                <p>
                  Therefore, <m>T</m> is a functor. To check that it is an additive functor, we need to prove that <m>T(f+g)=T(f)+T(g)</m> for all <m>f, g \in \operatorname{Hom}_{R}(A, B)</m>. It is sufficient to check that the maps <m>T(f+g)=1 \otimes(f+g)</m> and <m>T(f)+T(g)=1 \otimes f+1 \otimes g</m> agree on simple tensors. Indeed,
                </p>
            
                <p>
                  <me>\begin{aligned}
            T(f+g)(a \otimes b) &amp; =(1 \otimes(f+g))(a \otimes b) \\
            &amp; =a \otimes(f+g)(b) \\
            &amp; =a \otimes f(b)+g(b) \\
            &amp; =a \otimes f(b)+a \otimes g(b) \\
            &amp; =(1 \otimes f)(a \otimes b)+(1 \otimes g)(a \otimes b) \\
            &amp; =T(f)(a \otimes b)+T(g)(a \otimes b) .
            \end{aligned}</me>
                </p>
            
                <p>
                  We conclude that <m>T(f+g)=T(f)+T(g)</m>.
                </p>
              </proof>
            </theorem>
            
            <definition xml:id="def-3.37">
              <statement>
                <p>
                  Definition 3.37. Given a ring <m>R</m> and a right <m>R</m>-module <m>M</m>, the functor <m>M \otimes_{R}-</m> is the tensor product functor.
                </p>
              </statement>
            </definition>
            
            <p>
              Note that we were purposely vague on the target of the tensor product functor: when <m>R</m> is commutative, we get both a functor <m>R</m>-Mod <m>\rightarrow \mathrm{Ab}</m> and a functor <m>R</m>-Mod <m>\rightarrow R</m>-Mod. The two functors are essentially the same: the tensor product functor <m>R-\mathbf{M o d} \rightarrow \mathbf{A b}</m> is the composition of functor <m>R</m>-Mod <m>\rightarrow R</m>-Mod followed by the forgetful functor <m>R</m>-Mod <m>\rightarrow \mathbf{A b}</m>.
            </p>
        
            <p>
              We can similarly define the tensor product functor <m>-\otimes_{R} N</m>; when <m>R</m> is commutative, it turns out that the two constructions are essentially the same.
            </p>

            <lemma xml:id="lem-3.38">
              <statement>
                <p>
                  Lemma 3.38 (Commutativity of tensor products). Let <m>R</m> be a commutative ring. There is a natural isomorphism <m>M \otimes_{R}-\cong-\otimes_{R} N</m>. In particular, for all <m>R</m>-modules <m>M</m> and <m>N</m> we have
                </p>
            
                <p>
                  <me>M \otimes_{R} N \cong N \otimes_{R} M</me>
                </p>
              </statement>

              <proof>
                <p>
                  Proof. One can check (exercise!) that the map <m>M \times N \longrightarrow N \otimes_{R} M</m> given by <m>(m, n) \mapsto n \otimes m</m> is <m>R</m>-biadditive, and <m>R</m>-bilinear if <m>R</m> is commutative. The universal property of the tensor product <m>M \otimes_{R} N</m> gives us a homomorphism <m>\varphi</m> of abelian groups or <m>R</m>-modules, depending on the case, such that the diagram
                </p>
            
            
                <image source="2023_10_23_e2d6a27704be928b3deeg-093(1).jpg"/>
                  
            
                <p>
                  commutes. Similarly, we get a map <m>\psi</m> and a commutative diagram
                </p>
            
            
                <image source="2023_10_23_e2d6a27704be928b3deeg-093(3).jpg"/>
                  
            
                <p>
                  Then <m>\varphi \psi</m> agrees with the identity on <m>N \otimes_{R} M</m> on simple tensors, so it is the identity. Similarly, <m>\psi \varphi</m> is the identity on <m>M \otimes_{R} N</m>, and these are the desired isomorphisms.
                </p>
            
                <p>
                  The statement about naturality is more precisely the following: for every <m>R</m>-module maps <m>f: M_{1} \longrightarrow M_{2}</m> and <m>g: N_{1} \longrightarrow N_{2}</m>, our isomorphisms <m>M_{1} \otimes_{R} N_{1} \cong N_{1} \otimes_{R} M_{1}</m> and <m>M_{2} \otimes_{R} N_{2} \cong N_{2} \otimes_{R} M_{2}</m> make the diagram
                </p>
            
            
                <image source="2023_10_23_e2d6a27704be928b3deeg-093.jpg"/>
                  
            
                <p>
                  commute. To check this, it's sufficient to check commutativity on simple tensors, and indeed
                </p>
            
            
                <image source="2023_10_23_e2d6a27704be928b3deeg-093(2).jpg"/>
              </proof>
            </lemma>

            <lemma xml:id="lem-3.39">
              <statement>
                <p>
                  Lemma 3.39 (Associativity of tensors). Given a right <m>R</m>-module <m>A</m>, an <m>(R, S)</m>-bimodule <m>B</m>, and a left <m>S</m>-module <m>C</m>,
                </p>
            
                <p>
                  <me>\left(A \otimes_{R} B\right) \otimes_{S} C \cong A \otimes_{R}\left(B \otimes_{S} C\right)</me>
                </p>
              </statement>

              <proof>
                <p>
                  Proof. Fix <m>c \in C</m>. The map
                </p>
            
                <p>
                  <me>\begin{gathered}
            A \times B \longrightarrow A \otimes_{R}\left(B \otimes_{R} C\right) \\
            (a, b) \longmapsto a \otimes(b \otimes c)
            \end{gathered}</me>
                </p>
            
                <p>
                  is <m>R</m>-biadditive, so it induces a homomorphism of abelian groups
                </p>
            
                <p>
                  <me>\varphi_{c}: A \otimes_{R} B \longrightarrow A \otimes_{R}\left(B \otimes_{R} C\right)</me>
                </p>
            
                <p>
                  This map is in fact a homomorphism of <m>R</m>-modules when <m>R</m> is commutative. Moreover,
                </p>
            
                <p>
                  <me>\begin{gathered}
            \left(A \otimes_{R} B\right) \times C \longrightarrow A \otimes_{R}\left(B \otimes_{R} C\right) \\
            (a \otimes b, c) \longmapsto a \otimes(b \otimes c)
            \end{gathered}</me>
                </p>
            
                <p>
                  is also <m>R</m>-biadditive, and it induces a homomorphism that sends <m>(a \otimes b) \otimes c</m> to <m>a \otimes(b \otimes c)</m>. Similarly, we can define a homomorphism
                </p>
            
                <p>
                  <me>\begin{gathered}
            A \otimes_{R}\left(B \otimes_{R} C\right) \longrightarrow\left(A \otimes_{R} B\right) \otimes_{R} C \\
            a \otimes(b \otimes c) \longmapsto(a \otimes b) \otimes c .
            \end{gathered}</me>
                </p>
            
                <p>
                  The composition of these two homomorphisms in either order is the identity on simple tensors, and thus they are both isomorphisms.
                </p>
              </proof>
            </lemma>

            <lemma xml:id="lem-3.40">
              <statement>
                <p>
                  Lemma 3.40. Let <m>R</m> be any ring. There is a natural isomorphism between <m>R \otimes_{R}-</m> and the identity functor on <m>R</m>-Mod. In particular, for every left <m>R</m>-module <m>M</m> there is an isomorphism of <m>R</m>-modules
                </p>
            
                <p>
                  <me>R \otimes_{R} M \cong M</me>
                </p>
              </statement>

              <proof>
                <p>
                  Proof. First, note that <m>R</m> is an <m>R</m>-bimodule, so <m>R \otimes_{R} M</m> is a left <m>R</m>-module. The map
                </p>
            
                <p>
                  <me>\begin{aligned}
            R \times M &amp; \longrightarrow M \\
            (r, m) &amp; \longmapsto r m
            \end{aligned}</me>
                </p>
            
                <p>
                  is <m>R</m>-biadditive (by the distributive laws), <m>R</m>-bilinear (by associativity of the action on a module), and <m>R</m>-linear, so it induces a homomorphism of <m>R</m>-modules <m>R \otimes_{R} M \stackrel{\varphi_{M}}{\longrightarrow} M</m>. By definition, <m>\varphi_{M}</m> is surjective. Moreover, the map
                </p>
            
                <p>
                  <me>\begin{aligned}
            &amp; M \stackrel{f_{M}}{\longmapsto} R \otimes_{R} M \\
            &amp; m \longmapsto 1 \otimes m
            \end{aligned}</me>
                </p>
            
                <p>
                  is a homomorphism of <m>R</m>-modules, since
                </p>
            
                <p>
                  <me>f_{M}(a+b)=1 \otimes(a+b)=1 \otimes a+1 \otimes b \text { and } f_{M}(r a)=1 \otimes(r a)=r(1 \otimes a)=r f_{M}(a)</me>
                </p>
            
                <p>
                  For every <m>m \in M, \varphi_{M} f_{M}(m)=\varphi_{M}(1 \otimes m)=1 m=m</m>, and for every simple tensor, <m>f_{M} \varphi_{M}(r \otimes m)=f_{M}(r m)=1 \otimes(r m)=r \otimes m</m>. This shows that <m>\varphi_{M}</m> is an isomorphism.
                </p>
            
                <p>
                  Finally, given any <m>f \in \operatorname{Hom}_{R}(M, N)</m>, since <m>f</m> is <m>R</m>-linear we conclude that the diagram
                </p>
            
                <image source="2023_10_23_e2d6a27704be928b3deeg-095.jpg"/>
                  
                <p>
                  commutes, so our isomorphism is natural.
                </p>
              </proof>
            </lemma>

            <p>
              Similarly to the Hom functor, tensor behaves well with respect to arbitrary direct sums.
            </p>

            <theorem xml:id="thm-3.41">
              <statement>
                <p>
                  Theorem 3.41. Let <m>M</m> be a right <m>R</m>-module, and let <m>\left\{N_{i}\right\}_{i \in I}</m> be an arbitrary family of left <m>R</m>-modules. Then the map
                </p>
            
                <p>
                  <me>\begin{gathered}
            M \otimes_{R}\left(\bigoplus_{i \in I} N_{i}\right) \cong \underset{i \in I}{\rightrightarrows} \bigoplus_{i \in I} M \otimes_{R} N_{i} \\
            m \otimes\left(a_{i}\right)_{i} \longmapsto \\
            \longrightarrow\left(m \otimes a_{i}\right)
            \end{gathered}</me>
                </p>
            
                <p>
                  is an isomorphism of abelian groups in general, of <m>R</m>-modules in the commutative case, of <m>S</m> modules if each <m>N_{i}</m> is an <m>(S, R)</m>-bimodule, and of right <m>S</m>-modules if <m>N</m> is an <m>(R, S)</m>-bimodule. Moreover, this isomorphism is natural: given two families of left <m>R</m>-modules <m>\left\{A_{i}\right\}_{i \in I}</m> and <m>\left\{B_{j}\right\}_{j \in J}</m>, and left <m>R</m>-module homomorphisms <m>\sigma_{i j}: A_{i} \longrightarrow B_{j}</m>, the <m>R</m>-module homomorphisms
                </p>
            
                <p>
                  <me>\begin{aligned}
            &amp; \bigoplus_{i \in I} A_{i} \stackrel{\sigma}{\longrightarrow} \bigoplus_{j \in J} B_{j} \quad \text { and } \quad \tilde{\sigma}=\bigoplus_{i \in I} \sigma_{i j}: \bigoplus_{i \in I} M \otimes_{R} A_{i} \longrightarrow \bigoplus_{j \in J} M \otimes_{R} B_{j} \\
            &amp; \left(a_{i}\right)_{i \in I} \longmapsto\left(\sigma_{i j}\left(a_{i}\right)\right)_{j \in J}
            \end{aligned}</me>
                </p>
            
                <p>
                  give a commutative diagram
                </p>
            
                <p>
                  <me>\begin{aligned}
            M \otimes_{R}\left(\bigoplus_{i \in I} A_{i}\right) &amp; \cong \bigoplus_{i \in I} M \otimes_{R} A_{i} \\
            1 \otimes \sigma &amp; \downarrow \\
            M \otimes_{R}\left(\bigoplus_{j \in J} B_{j}\right) &amp; \stackrel{\sim}{\longleftarrow} \bigoplus_{j \in J} M \otimes_{R} B_{j} .
            \end{aligned}</me>
                </p>
              </statement>

              <proof>
                <p>
                  Proof. First, note that the function
                </p>
            
                <p>
                  <me>\begin{gathered}
            M \times\left(\bigoplus_{i \in I} A_{i}\right) \longrightarrow \bigoplus_{i \in I}\left(M \otimes_{R} A_{i}\right) \\
            \left(m,\left(a_{i}\right)_{i}\right) \longmapsto\left(m \otimes a_{i}\right)
            \end{gathered}</me>
                </p>
            
                <p>
                  is <m>R</m>-bilinear, so it induces a homomorphism
                </p>
            
                <p>
                  <me>M \otimes_{R}\left(\bigoplus_{i \in I} A_{i}\right) \stackrel{\tau}{\longrightarrow} \bigoplus_{i \in I}\left(M \otimes_{R} A_{i}\right)</me>
                </p>
            
                <p>
                  For each <m>k \in I</m>, let <m>\iota_{k}</m> denote the inclusion map <m>A_{k} \subseteq \bigoplus_{i} A_{i}</m>. The universal property of the coproduct (which in the case of <m>R</m>-modules, means the direct sum) gives an <m>R</m>-module homomorphism
                </p>
            
                <p>
                  <me>\begin{array}{r}
            \bigoplus_{i \in I}\left(M \otimes_{R} A_{i}\right) \stackrel{\lambda}{\longrightarrow} M \otimes_{R} \bigoplus_{i \in I}\left(A_{i}\right) \\
            \left(m \otimes a_{i}\right)_{i} \longmapsto m \otimes \sum_{i} \iota_{i}\left(a_{i}\right)
            \end{array}</me>
                </p>
            
                <p>
                  which we obtain by assembling the <m>R</m>-module homomorphisms <m>1 \otimes \iota_{i}</m>. It is routine to check that <m>\lambda</m> is the inverse of <m>\tau</m>, which must then be an isomorphism. Finally, we can check naturality by checking commutativity of the square above, element by element:
                </p>
            
            
                <image source="2023_10_23_e2d6a27704be928b3deeg-096.jpg"/>
              </proof>
            </theorem>

            <remark>
              <p>
                Remark 3.42. By commutativity of the tensor product, we also get natural isomorphisms
              </p>
          
              <p>
                <me>\left(\bigoplus_{i \in I} N_{i}\right) \otimes_{R} M \stackrel{\cong}{\longrightarrow} \bigoplus_{i \in I} N_{i} \otimes_{R} M</me>
              </p>
            </remark>
            
            <p>
              The following follows as a corollary of Lemma 3.40 and Theorem 3.41:
            </p>

            <exercise xml:id="exe-50">
              <statement>
                <p>
                  Show that if <m>F</m> and <m>G</m> are free <m>R</m>-modules on bases <m>\left\{e_{\lambda}\right\}_{\lambda \in \Lambda}</m> and <m>\left\{e_{\gamma}\right\}_{\gamma \in \Gamma}</m>, respectively, then <m>F \otimes_{R} G</m> is the free <m>R</m>-module on basis
                </p>
            
                <p>
                  <me>\left\{e_{\lambda} \otimes e_{\gamma} \mid \lambda \in \Lambda, \gamma \in \Gamma\right\}</me>
                </p>
            
                <p>
                  In particular,
                </p>
            
                <p>
                  <me>R^{n} \otimes R^{m} \cong R^{n m}</me>
                </p>
              </statement>
            </exercise>

            <example>
              <p>
                Example 3.43. Let <m>R</m> be any ring and consider <m>R^{2} \otimes_{R} R^{2}</m>. Let <m>e_{1}=(1,0) \in R^{2}</m> and <m>e_{2}=(0,1) \in R^{2}</m>. We claim that the element <m>e_{1} \otimes e_{2}+e_{2} \otimes e_{1}</m> is not a simple tensor. Suppose, by contradiction, that there exist <m>v, y \in R^{2}</m> such that
              </p>
          
              <p>
                <me>e_{1} \otimes e_{2}+e_{2} \otimes e_{1}=v \otimes w</me>
              </p>
          
              <p>
                Since <m>\left\{e_{1}, e_{2}\right\}</m> is a basis for the free module <m>R^{2}</m>, we can write
              </p>
          
              <p>
                <me>v=v_{1} e_{1}+v_{2} e_{2} \quad \text { and } \quad w=w_{1} e_{1}+w_{2} e_{2}</me>
              </p>
          
              <p>
                Substituting above, we see that
              </p>
          
              <p>
                <me>\begin{aligned}
          v \otimes w &amp; =\left(v_{1} e_{1}+v_{2} e_{2}\right) \otimes\left(w_{1} e_{1}+w_{2} e_{2}\right) \\
          &amp; =v_{1} w_{1} e_{1} \otimes e_{1}+v_{1} w_{2} e_{1} \otimes e_{2}+v_{2} w_{1} e_{2} \otimes e_{1}+v_{2} w_{2} e_{2} \otimes e_{2}
          \end{aligned}</me>
              </p>
          
              <p>
                But by Exercise 50, <m>\left\{e_{1} \otimes e_{1}, e_{1} \otimes e_{2}, e_{2} \otimes e_{1}, e_{2} \otimes e_{2}\right\}</m> is a basis for the free <m>R</m>-module <m>R^{2} \otimes R^{2} \cong R^{4}</m>, so we can now compare coefficients: since
              </p>
          
              <p>
                <me>e_{1} \otimes e_{2}+e_{2} \otimes e_{1}=v_{1} w_{1} e_{1} \otimes e_{1}+v_{1} w_{2} e_{1} \otimes e_{2}+v_{2} w_{1} e_{2} \otimes e_{1}+v_{2} w_{2} e_{2} \otimes e_{2}</me>
              </p>
          
              <p>
                we must have
              </p>
          
              <p>
                <me>\left\{\begin{array} { l } 
          { v _ { 1 } w _ { 1 } = 1 } \\
          { v _ { 1 } w _ { 2 } = 0 } \\
          { v _ { 2 } w _ { 1 } = 0 } \\
          { v _ { 2 } w _ { 2 } = 1 }
          \end{array} \Longrightarrow \left\{\begin{array}{l}
          v_{1} \text { and } w_{1} \text { are units } \\
          v_{1} w_{2}=0 \\
          v_{2} w_{1}=0 \\
          v_{2} \text { and } w_{2} \text { are units }
          \end{array}\right.\right.</me>
              </p>
          
              <p>
                But since <m>v_{1}</m> is a unit and <m>v_{1} w_{2}=0</m>, we must have <m>w_{2}=0</m>; similarly, since <m>v_{2}</m> is a unit and <m>v_{2} w_{1}=0</m>, we must have <m>w_{1}=0</m>. But we have both <m>w_{1}=w_{2}=0</m> and that <m>w_{1}, w_{2}</m> are units, which is a contradiction. We conclude that <m>e_{1} \otimes e_{2}+e_{2} \otimes e_{1}</m> is not a simple tensor.
              </p>
            </example>
        
            <p>
              One of the reasons tensor products are useful is that we can use tensor products to extend module structures to ring extensions.
            </p>

            <remark>
              <p>
                Remark 3.44. Let <m>f: R \rightarrow S</m> be a ring homomorphism. Since <m>S</m> is an <m>(S, R)</m>-bimodule, the abelian group <m>S \otimes_{R} M</m> has a left <m>S</m>-module structure for every left <m>R</m>-module <m>M</m>. Thus <m>S \otimes_{R}</m> - determines a functor from <m>R</m>-modules to <m>S</m>-modules.
              </p>
            </remark>

            <definition xml:id="def-3.45">
              <statement>
                <p>
                  Definition 3.45. Let <m>f: R \rightarrow S</m> be a ring homomorphism. The extension of scalars from <m>R</m> to <m>S</m> is the functor <m>S \otimes_{R}-: R</m>-Mod <m>\longrightarrow S</m>-mod: for each <m>R</m>-module <m>M</m>, we get an <m>S</m>-module <m>S \otimes_{R} M</m> with
                </p>
            
                <p>
                  <me>s \cdot\left(\sum_{i} s_{i} \otimes m_{i}\right):=\sum_{i}\left(s s_{i}\right) \otimes m_{i}</me>
                </p>
            
                <p>
                  and for each <m>R</m>-module homomorphism <m>f: M \rightarrow N</m> we get the <m>S</m>-module homomorphism <m>1 \otimes_{R} f: S \otimes_{R} M \longrightarrow S \otimes_{R} N</m>.
                </p>
              </statement>
            </definition>
        
            <p>
              This functor is closely related to restriction of scalars: we will soon show that restriction and extension of scalars are adjoint functors.
            </p>

            <definition xml:id="def-3.46">
              <statement>
                <p>
                  Definition 3.46. Let <m>f: R \rightarrow S</m> be a ring homomorphism. The restriction of scalars functor from <m>S</m> to <m>R</m> is the functor <m>f^{*}: S</m>-mod <m>\longrightarrow R</m>-Mod that takes each <m>S</m>-module <m>M</m> to the <m>R</m>-module <m>f^{*} M</m> with underlying abelian group <m>M</m> and <m>R</m>-module structure
                </p>
            
                <p>
                  <me>r \cdot m:=f(r) m</me>
                </p>
            
                <p>
                  induced by <m>f</m>. Moreover, for each <m>S</m>-module homomorphism <m>g: M \longrightarrow N</m> we get the <m>R</m> module homomorphism <m>f^{*}(g): f^{*}(M) \longrightarrow f^{*}(N)</m> defined by <m>f^{*}(g)(m):=g(n)</m>.
                </p>
              </statement>
            </definition>

            <exercise xml:id="exe-51">
              <statement>
                <p>
                  Check that restriction of scalars as defined above is indeed a functor.
                </p>
              </statement>
            </exercise>

          </subsection>

          <subsection xml:id="subsec-tensor-right-exact"><title>Tensor is Right Exact</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>
            
            <p>
              Tensor is right exact.
            </p>

            <theorem xml:id="thm-3.47">
              <statement>
                <p>
                  Theorem 3.47. Let <m>M</m> be a right <m>R</m>-module. The functor <m>M \otimes_{R}-</m> is right exact, meaning that for every exact sequence
                </p>
            
                <p>
                  <me>A \stackrel{i}{\longrightarrow} B \stackrel{p}{\longrightarrow} C \longrightarrow 0</me>
                </p>
            
                <p>
                  the sequence
                </p>
            
                <p>
                  <me>M \otimes_{R} A \stackrel{1 \otimes i}{\longrightarrow} M \otimes_{R} B \stackrel{1 \otimes p}{\longrightarrow} M \otimes_{R} C \longrightarrow 0</me>
                </p>
            
                <p>
                  is exact.
                </p>
              </statement>

              <proof>
                <p>
                  Proof. Since additive functors send complexes to complexes, <m>(1 \otimes p)(1 \otimes i)=0</m>. We have two more things to show:
                </p>
                <image source='2023_10_23_e2d6a27704be928b3deeg-098.jpg'/>
                <p>
                  we can find <m>b_{1}, \ldots, b_{n} \in B</m> such that <m>p\left(b_{i}\right)=c_{i}</m>. Therefore,
                </p>
            
                <p>
                  <m>(1 \otimes p)\left(m_{1} \otimes b_{1}+\cdots+m_{n} \otimes b_{n}\right)=m_{1} \otimes p\left(b_{1}\right)+\cdots+m_{n} \otimes p\left(b_{n}\right)=m_{1} \otimes c_{1}+\cdots+m_{n} \otimes c_{n}</m>.
                </p>
            
                <p>
                  <m>\operatorname{ker}(1 \otimes p)=\operatorname{im}(1 \otimes i)</m> : Let <m>I=\operatorname{im}(1 \otimes i)</m>. We have already shown that <m>I \subseteq \operatorname{ker}(1 \otimes p)</m>, so <m>\overline{1 \otimes p \text { induces a map } q}:\left(M \otimes_{R} B\right) / I \longrightarrow M \otimes_{R} C</m>. Let <m>\pi: M \otimes_{R} B \longrightarrow\left(M \otimes_{R} B\right) / I</m> be the canonical projection. By definition, <m>q \pi=1 \otimes p</m>.
                </p>
            
                <p>
                  Consider the map
                </p>
            
                <p>
                  <me>\begin{gathered}
            M \times C \stackrel{f}{\longrightarrow}\left(M \otimes_{R} B\right) / I \\
            (m, c) \longmapsto m \otimes b
            \end{gathered}</me>
                </p>
            
                <p>
                  where <m>b</m> is such that <m>p(b)=c</m>. First, we should check this map <m>f</m> is well-defined. To see that, suppose that <m>b^{\prime} \in B</m> is another element with <m>p\left(b^{\prime}\right)=c</m>, so that <m>p\left(b-b^{\prime}\right)=0</m>. Then <m>b-b^{\prime} \in \operatorname{ker} p=\operatorname{im} i</m>, so <m>m \otimes\left(b-b^{\prime}\right) \in \operatorname{im}(1 \otimes i) \subseteq I</m>. Therefore, <m>m \otimes b=m \otimes b^{\prime}</m> modulo <m>I</m>, and <m>f</m> is well-defined.
                </p>
            
                <p>
                  Moreover, one can check (exercise!) that <m>f</m> is <m>R</m>-biadditive, so it induces a homomorphism of <m>R</m>-modules <m>M \otimes_{R} C \longrightarrow\left(M \otimes_{R} B\right) / I</m>, which we will denote by <m>\hat{f}</m>. We will show that <m>\hat{f}</m> is a left inverse of <m>q</m>, so <m>q</m> is injective. And indeed, given <m>m_{i} \in M</m> and <m>b_{i} \in B</m>, we have
                </p>
            
                <p>
                  <me>\hat{f} q\left(\sum_{i=1}^{n} m_{i} \otimes b_{i}\right)=f\left(\sum_{i=1}^{n} m_{i} \otimes p\left(b_{i}\right)\right)=\sum_{i=1}^{n} f\left(m_{i} \otimes p\left(b_{i}\right)\right)=\sum_{i=1}^{n} m_{i} \otimes b_{i}</me>
                </p>
            
                <p>
                  We conclude that <m>q</m> is injective, and thus
                </p>
            
                <p>
                  <me>\operatorname{ker}(1 \otimes p)=\operatorname{ker}(q \pi)=\operatorname{ker} \pi=I=\operatorname{im}(1 \otimes i)</me>
                </p>
              </proof>
            </theorem>

            <p>
              However, tensor is not exact.
            </p>

            <example>
              <p>
                Example 3.48. Consider the short exact sequence
              </p>
          
              <p>
                <me>0 \longrightarrow \mathbb{Z} \stackrel{i}{\longrightarrow} \mathbb{Q} \stackrel{p}{\longrightarrow} \mathbb{Q} / \mathbb{Z} \longrightarrow 0</me>
              </p>
          
              <p>
                Applying the functor <m>\mathbb{Z} / 2 \otimes_{\mathbb{Z}}-</m>, we get an exact sequence
              </p>
          
              <p>
                <me>\mathbb{Z} / 2 \otimes_{\mathbb{Z}} \mathbb{Z} \stackrel{1 \otimes i}{\longrightarrow} \mathbb{Z} / 2 \otimes_{\mathbb{Z}} \mathbb{Q} \stackrel{1 \otimes p}{\longrightarrow} \mathbb{Z} / 2 \otimes_{\mathbb{Z}} \mathbb{Q} / \mathbb{Z} \longrightarrow 0</me>
              </p>
          
              <p>
                However, we claim that <m>1 \otimes i</m> is not injective. On the one hand, by Lemma 3.40 we have an isomorphism <m>\mathbb{Z} / 2 \otimes_{\mathbb{Z}} \mathbb{Z} \cong \mathbb{Z} / 2 \neq 0</m>. On the other hand, we have seen in Example 3.25 that <m>\mathbb{Z} / 2 \otimes_{\mathbb{Z}} \mathbb{Q}=0</m>, so the map <m>1 \otimes i: \mathbb{Z} / 2 \rightarrow 0</m> cannot possibly be injective.
              </p>
            </example>
        
            <p>
              We can now show that extension of scalars turns an <m>R</m>-module into the <m>S</m>-module with the same presentation.
            </p>

            <remark>
              <p>
                Remark 3.49. Let <m>R</m> be a ring, <m>M</m> be a right <m>R</m>-module, and <m>N</m> be a left <m>R</m>-module. We can compute <m>M \otimes_{R} N</m> by taking a presentation of <m>M</m>
              </p>
          
              <p>
                <me>R^{\oplus \Gamma} \stackrel{\phi}{\longrightarrow} R^{\oplus \Lambda} \longrightarrow M \longrightarrow 0</me>
              </p>
          
              <p>
                and tensoring with <m>N</m> to get
              </p>
          
              <p>
                <me>N^{\oplus \Gamma} \longrightarrow N^{\oplus \Lambda} \longrightarrow M \otimes_{R} N \longrightarrow 0</me>
              </p>
          
              <p>
                so <m>M \otimes_{R} N</m> is the cokernel of the map <m>N^{\oplus \Gamma} \rightarrow N^{\oplus \Lambda}</m> induced by <m>\phi</m>. We can also compute <m>M \otimes_{R} N</m> by taking a presentation of <m>N</m>
              </p>
          
              <p>
                <me>R^{\oplus \Xi} \stackrel{\psi}{\longrightarrow} R^{\oplus \Omega} \longrightarrow N \longrightarrow 0</me>
              </p>
          
              <p>
                and tensoring with <m>M</m> to get
              </p>
          
              <p>
                <me>M^{\oplus \Xi} \longrightarrow M^{\oplus \Omega} \longrightarrow M \otimes_{R} N \longrightarrow 0</me>
              </p>
          
              <p>
                so <m>M \otimes_{R} N</m> is isomorphic to the cokernel of the map <m>M^{\oplus \Gamma} \rightarrow M^{\oplus \Lambda}</m> induced by <m>\psi</m>.
              </p>
            </remark>

          </subsection>

          <outcomes>
            <ul>
              <li>
                <p>

                </p>
              </li>
            </ul>
          </outcomes>
          
        </section>

        <section xml:id="sec-localization"><title>Localization</title>
          
          <p>
            Recall that a multiplicatively closed subset of a <m>\operatorname{ring} R</m> is a set <m>W \ni 1</m> that is closed for products. 
            The three most important classes of multiplicatively closed sets are the following:
          </p>

          <example>
            <p>
              Example 3.50. Let <m>R</m> be a commutative ring.
            </p>
      
            <p>
            <ol>
              <li>
                    <p>
              For any <m>f \in R</m>, the set <m>W=\left\{1, f, f^{2}, f^{3}, \ldots\right\}</m> is a multiplicatively closed set.
            </p>
              </li>
      
              <li>
                    <p>
              If <m>P \subseteq R</m> is a prime ideal, the set <m>W=R \backslash P</m> is multiplicatively closed: this is an immediate translation of the definition.
            </p>
              </li>
      
              <li>
                    <p>
              An element that is not a zerodivisor is called a nonzerodivisor or regular element. The set of regular elements in <m>R</m> forms a multiplicatively closed subset. When <m>R</m> is a domain, this set is precisely the set of all nonzero elements <m>R \backslash\{0\}</m>.
            </p>
              </li>
      
            </ol></p>
          </example>

          <definition xml:id="def-3.51">
            <statement>
              <p>
                Definition 3.51 (Localization of a ring). Let <m>R</m> be a commutative ring, and <m>W</m> be a multiplicative set with <m>0 \notin W</m>. The localization of <m>R</m> at <m>W</m> is a ring, denoted by <m>W^{-1} R</m> or <m>R_{W}</m>, given by where <m>\sim</m> is the equivalence relation
              </p>
        
              <p>
                <me>\frac{r}{w} \sim \frac{r^{\prime}}{w^{\prime}} \text { if there exists } u \in W \text { such that } u\left(r w^{\prime}-r^{\prime} w\right)=0</me>
              </p>
        
              <p>
                The operations are given by
              </p>
        
              <p>
                <me>\frac{r}{v}+\frac{s}{w}=\frac{r w+s v}{v w} \quad \text { and } \quad \frac{r}{v} \frac{s}{w}=\frac{r s}{v w}</me>
              </p>
        
              <p>
                The zero in <m>W^{-1} R</m> is <m>\frac{0}{1}</m> and the multiplcative identity is <m>\frac{1}{1}</m>. There is a canonical ring homomorphism
              </p>
        
              <p>
                <me>\begin{aligned}
        &amp; R \longrightarrow W^{-1} R \\
        &amp; r \longmapsto \frac{r}{1}
        \end{aligned}</me>
              </p>
        
              <p>
                Note that we write elements in <m>W^{-1} R</m> in the form <m>\frac{r}{w}</m> even though they are equivalence classes of such expressions.
              </p>
        
              <p>
                Let <m>M</m> be an <m>R</m>-module. The localization of <m>M</m> at <m>W</m> is the <m>W^{-1} R</m>-module <m>W^{-1} M</m> or <m>M_{W}</m> given by
              </p>
        
              <p>
                <me>W^{-1} M:=\left\{\frac{m}{w} \mid m \in M, w \in W\right\} / \sim</me>
              </p>
        
              <p>
                where <m>\sim</m> is the equivalence relation <m>\frac{m}{w} \sim \frac{m^{\prime}}{w^{\prime}}</m> if <m>u\left(m w^{\prime}-m^{\prime} w\right)=0</m> for some <m>u \in W</m>. The operations are given by
              </p>
        
              <p>
                <me>\frac{m}{v}+\frac{n}{w}=\frac{m w+n v}{v w} \quad \text { and } \quad \frac{r}{v} \frac{m}{w}=\frac{r m}{v w}</me>
              </p>
        
              <p>
                The zero in the module <m>W^{-1} M</m> is given by <m>\frac{0}{1}</m>.
              </p>
            </statement>
          </definition>
    
          <p>
            Here are the most important examples of localizations you will come across in commutative algebra.
          </p>

          <example>
            <p>
              Example 3.52 (Most important localizations). Let <m>R</m> be a commutative ring.
            </p>
      
            <p><ol>
              <li>
                    <p>
              For <m>f \in R</m> and <m>W=\left\{1, f, f^{2}, f^{3}, \ldots\right\}=\left\{f^{n} \mid n \geqslant 0\right\}</m>, we usually write <m>R_{f}</m> for <m>W^{-1} R</m>.
            </p>
              </li>
      
              <li>
                    <p>
              When <m>W</m> is the set of nonzerodivisors on <m>R</m>, we call <m>W^{-1} R</m> the total ring of fractions of <m>R</m>. When <m>R</m> is a domain, this is just the fraction field of <m>R</m>, and in this case this coincides with the localization at the prime <m>(0)</m>, as described below.
            </p>
              </li>
      
              <li>
                    <p>
              For a prime ideal <m>P</m> in <m>R</m>, we generally write <m>R_{P}</m> for <m>(R \backslash P)^{-1} R</m>, and call it the localization of <m>R</m> at <m>P</m>. Given an ideal <m>I</m> in <m>R</m>, we sometimes write <m>I_{P}</m> to refer to <m>I R_{P}</m>, the image of <m>I</m> via the canonical map <m>R \rightarrow R_{P}</m>. Notice that when we localize at a prime <m>P</m>, the resulting ring is a local ring <m>\left(R_{P}, P_{P}\right)</m>. We can think of the process of localization at <m>P</m> as zooming in at the prime <m>P</m>. Many properties of an ideal <m>I</m> can be checked locally, by checking them for <m>I R_{P}</m> for each prime <m>P \in V(I)</m>.
            </p>
              </li>
      
            </ol></p>
          </example>

          <remark>
            <p>
              Remark 3.53. If <m>R</m> is a domain, the equivalence relation defining the localization simplifies to <m>r w^{\prime}=r^{\prime} w</m>. In particular, <m>\operatorname{Frac}(R)=R_{(0)}=(R \backslash\{0\})^{-1} R</m> is a localization of <m>R</m>.
            </p>
          </remark>
    
          <p>
            If <m>R</m> is not a domain, the canonical map <m>R \rightarrow W^{-1} R</m> is not necessarily injective.
          </p>

          <example>
            <p>
              Example 3.54. Consider <m>R=k[x, y] /(x y)</m>. The canonical maps <m>R \longrightarrow R_{(x)}</m> and <m>R \longrightarrow R_{y}</m> are not injective, since in both cases <m>y</m> is invertible in the localization, and thus
            </p>
      
            <p>
              <me>x \mapsto \frac{x}{1}=\frac{x y}{y}=\frac{0}{y}=\frac{0}{1}</me>
            </p>
          </example>
    
          <p>
            In <m>W^{-1} R</m>, every element of <m>W</m> becomes a unit. The following universal property says roughly that <m>W^{-1} R</m> is the smallest <m>R</m>-algebra in which every element of <m>W</m> is a unit.
          </p>

          <theorem xml:id="thm-3.55">
            <statement>
              <p>
                Theorem 3.55. 
                Let <m>R</m> be a commutative ring, and <m>W</m> a multiplicative set with <m>0 \notin W</m>. Let <m>S</m> be an <m>R</m>-algebra in which every element of <m>W</m> is a unit. Then there is a unique homomorphism <m>\alpha</m> such that the following diagram commutes:
              </p>
        
              <image source="2023_10_23_e2d6a27704be928b3deeg-101.jpg"/>
        
              <p>
                where the vertical map is the structure homomorphism and the horizontal map is the canonical homomorphism.
              </p>
            </statement>

            <proof>
              <p>
                Proof. Given an <m>R</m>-algebra <m>S</m> such that every element of <m>W</m> is a unit, where the algebra structure is induced by the ring homomorphism <m>f: R \rightarrow S</m>, consider the map
              </p>
        
              <p>
                <me>
                  \begin{aligned}
                  &amp; W^{-1} R \longrightarrow S \\
                  &amp; \quad \frac{r}{w} \longmapsto f(w)^{-1} f(r) .
                  \end{aligned}
                </me>
              </p>
        
              <p>
                First, note that our assumption that every element of <m>W</m> is invertible in <m>S</m> means that <m>f(w)</m> is invertible in <m>S</m>, and thus <m>f(w)^{-1} f(r)</m> makes sense. Moreover, we claim that <m>\alpha</m> is a ring homomorphism:
              </p>
        
              <p>
                <me>\alpha(1)=f(1)^{-1} f(1)=1</me>
              </p>
        
              <p>
                and moreover
              </p>
        
              <p>
                <me>
                  \begin{aligned}
                  \alpha\left(\frac{a}{u} \frac{b}{v}\right) \alpha &amp; \left(\frac{a b}{u v}\right) \\
                  &amp; =f(u v)^{-1} f(a b) \\
                  &amp; =\left(f(u)^{-1} f(a)\right)\left(f(v)^{-1} f(b)\right) \\
                  &amp; =\alpha\left(\frac{a}{u}\right)\left(\frac{b}{v}\right)
                  \end{aligned}
                </me>
              </p>
        
              <p>
                and
              </p>
        
              <p>
                <me>
                  \begin{aligned}
                  \alpha\left(\frac{a}{u}+\frac{b}{v}\right) &amp; \alpha\left(\frac{a v+b u}{u v}\right) \\
                  &amp; =f(u v)^{-1} f(a v+b u) \\
                  &amp; =\left(f(u)^{-1} f(v)^{-1}\right)(f(a) f(v)+f(b) f(u)) \\
                  &amp; =\left(f(u)^{-1} f(a)+\left(f(v)^{-1} f(b)\right.\right. \\
                  &amp; =\alpha\left(\frac{a}{u}\right)+\left(\frac{b}{v}\right)
                  \end{aligned}
                </me>
              </p>
        
              <p>
                Our definition of <m>\alpha</m> gives us
              </p>
        
              <p>
                <me>\alpha\left(\frac{r}{1}\right)=f(1)^{-1} f(r)=f(r)</me>
              </p>
        
              <p>
                as desired. Moreover, if <m>\beta: W^{-1} R \rightarrow S</m> is any ring homomorphism such that
              </p>
        
              <p>
                <me>\beta\left(\frac{r}{1}\right)=f(1)^{-1} f(r)=f(r)</me>
              </p>
        
              <p>
                then
              </p>
        
              <p>
                <me>\beta\left(\frac{r}{s}\right)=\beta\left(\frac{s}{1}\right)^{-1} \beta\left(\frac{r}{1}\right)=f(s)^{-1} f(r)=\alpha\left(\frac{s}{1}\right)^{-1} \alpha\left(\frac{r}{1}\right)=\alpha\left(\frac{r}{s}\right)</me>
              </p>
        
              <p>
                This proves our uniqueness claim.
              </p>
            </proof>
          </theorem>

          <definition xml:id="def-3.56">
            <statement>
              <p>
                Definition 3.56. Let <m>R</m> be a commutative ring and let <m>W</m> be a multiplicative subset of <m>R</m>. The localization at <m>W</m> is the functor <m>R</m>-Mod <m>\rightarrow W^{-1} R</m>-mod that sends each <m>R</m>-module <m>M</m> to the <m>W^{-1} R</m>-module <m>W^{-1} M</m>, and that sends each <m>R</m>-module homomorphism <m>f: M \rightarrow N</m> to the homomorphism of <m>W^{-1} R</m>-modules given by
              </p>
        
              <p>
                <me>
                  \begin{gathered}
                  W^{-1} M \longrightarrow W^{-1} N \\
                  \frac{m}{w} \longmapsto \frac{f(m)}{w}
                  \end{gathered}
                </me>
              </p>
        
              <p>
                We might denote this functor by <m>W^{-1}(-)</m> or <m>(-)_{W}</m>. When <m>W</m> is the complement of a prime ideal <m>P</m>, we write the localization at <m>P</m> as <m>(-)_{P}</m>.
              </p>
            </statement>
          </definition>

          <exercise xml:id="exe-52">
            <statement>
            <p>
              Show that for all <m>R</m>-module homomorphisms <m>f: M \rightarrow N</m>,
            </p>
      
            <image source="2023_10_23_e2d6a27704be928b3deeg-102.jpg"/>
      
            <p>
              is a homomorphism of modules over <m>W^{-1} R</m>.
            </p>
            </statement>
          </exercise>

          <exercise xml:id="exe-53">
            <statement>
              <p>
                Show that localization is an exact additive functor.
              </p>
            </statement>
          </exercise>

          <theorem xml:id="thm-3.57">
            <statement>
              <p>
                Theorem 3.57. Let <m>R</m> be a commutative ring, and <m>W \ni 1</m> a multiplicative subset of <m>R</m>. Then the localization at <m>W</m> and <m>W^{-1} R \otimes-</m> are naturally isomorphic functors. In particular, for every <m>R</m>-module <m>M</m>, there is an isomorphism of <m>W^{-1} R</m>-modules
              </p>
        
              <p>
                <me>W^{-1} R \otimes_{R} M \cong W^{-1} M</me>
              </p>
        
              <p>
                and given an <m>R</m>-module map <m>\alpha: M \rightarrow N</m>, the map of <m>W^{-1} R</m>-modules <m>W^{-1} R \otimes \alpha</m> corresponds to <m>W^{-1} \alpha=\alpha_{W}</m> under these isomorphisms.
              </p>
            </statement>

            <proof>
              <p>
                Proof. The bilinear map <m>\quad W^{-1} R \times M \longrightarrow W^{-1} M</m>
              </p>
        
              <p>
                <me>\left(\frac{r}{w}, m\right) \longmapsto \frac{r m}{w}</me>
              </p>
        
              <p>
                induces a homomorphism <m>\psi: W^{-1} R \times M \rightarrow W^{-1} M</m> that is surjective.
              </p>
        
              <p>
                For an inverse map, set <m>\phi\left(\frac{m}{w}\right):=\frac{1}{w} \otimes m</m>. To see this is well-defined, suppose <m>\frac{m}{w}=\frac{m^{\prime}}{w^{\prime}}</m>, so there exists some <m>v \in W</m> such that <m>v\left(m w^{\prime}-m^{\prime} w\right)=0</m>. Then,
              </p>
        
              <p>
                <me>\phi\left(\frac{m}{w}\right)-\phi\left(\frac{m^{\prime}}{w^{\prime}}\right)=\frac{1}{w} \otimes m-\frac{1}{w^{\prime}} \otimes m^{\prime}</me>
              </p>
        
              <p>
                We can multiply through by <m>\frac{v w w^{\prime}}{v w w^{\prime}}</m> to get
              </p>
        
              <p>
                <me>\frac{v w^{\prime}}{v w w^{\prime}} \otimes m-\frac{v w}{v w w^{\prime}} \otimes m^{\prime}=\frac{1}{v w w^{\prime}} \otimes v\left(m w^{\prime}-m^{\prime} w\right)=0</me>
              </p>
        
              <p>
                To see this is a homomorphism, we note that
              </p>
        
              <p>
                <me>
                  \begin{aligned}
                  \phi\left(\frac{m}{w}+\frac{m^{\prime}}{w^{\prime}}\right) &amp; =\phi\left(\frac{m w^{\prime}+m^{\prime} w}{w w^{\prime}}\right)=\frac{1}{w w^{\prime}} \otimes\left(m w^{\prime}+m^{\prime} w\right)=\frac{1}{w w^{\prime}} \otimes m w^{\prime}+\frac{1}{w w^{\prime}} \otimes m^{\prime} w \\
                  &amp; =\frac{w^{\prime}}{w w^{\prime}} \otimes m+\frac{w}{w w^{\prime}} \otimes m^{\prime}=\frac{1}{w} \otimes m+\frac{1}{w^{\prime}} \otimes m^{\prime}=\phi\left(\frac{m}{w}\right)+\phi\left(\frac{m^{\prime}}{w^{\prime}}\right)
                  \end{aligned}
                </me>
              </p>
        
              <p>
                and
              </p>
        
              <p>
                <me>\phi\left(r \frac{m}{w}\right)=\frac{1}{w} \otimes r m=r\left(\frac{1}{w} \otimes m\right)=r \phi\left(\frac{m}{w}\right)</me>
              </p>
        
              <p>
                The composition <m>\phi \circ \psi</m> sends
              </p>
        
              <p>
                <me>\frac{r}{w} \otimes m \mapsto \frac{r m}{w} \mapsto \frac{1}{w} \otimes r m=\frac{r}{w} \otimes m</me>
              </p>
        
              <p>
                Since this is the identity on simple tensors, and simple tensors generated the tensor product, it must be the identity.
              </p>
        
              <p>
                For the claim about maps, we need check that <m>\psi_{N} \circ\left(W^{-1} R \otimes \alpha\right)=W^{-1} \alpha \circ \psi_{M}</m> for every <m>R</m>-module homomorphism <m>\alpha !: M \rightarrow N</m>. And indeed,
              </p>
        
              <p>
                <me>
                  \begin{aligned}
                  \left(\psi_{N} \circ\left(W^{-1} R \otimes \alpha\right)\right)\left(\frac{r}{w} \otimes m\right) &amp; =\psi_{N}\left(\frac{r}{w} \otimes \alpha(m)\right)=\frac{r \alpha(m)}{w} \\
                  &amp; =\frac{\alpha(r m)}{w}=W^{-1} \alpha\left(\frac{r m}{w}\right)=\left(W^{-1} \alpha \circ \psi_{M}\right)\left(\frac{r}{w} \otimes m\right)
                  \end{aligned}
                </me>
              </p>
        
              <p>
                Finally, we note that our isomorphisms <m>W^{-1} R \otimes_{R} M \cong W^{-1} M</m> give a natural isomorphism between the localization functor <m>W^{-1}(-)</m> and the tensor functor <m>W^{-1} R \otimes_{R}-</m>. Indeed, given a map of <m>R</m>-modules <m>M \stackrel{f}{\rightarrow} N</m>, the diagram
              </p>
        
              <image source="2023_10_23_e2d6a27704be928b3deeg-104(1).jpg"/>
                
              <p>
                commutes, since it commutes for simple tensors:
              </p>
      
              <image source="2023_10_23_e2d6a27704be928b3deeg-104.jpg"/>
        
              <p>
                Now since localization is exact, we conclude that <m>W^{-1} R \otimes_{R}-</m> is an exact functor for all commutative rings <m>R</m> and all multiplicatively closed subsets <m>W</m>.
              </p>
            </proof>
          </theorem>

          <exercise xml:id="exe-54">
            <statement>
              <p>
                Let <m>R</m> be a commutative noetherian ring, <m>W</m> be a multiplicative set, <m>M</m> be a finitely generated <m>R</m>-module, and <m>N</m> an arbitrary <m>R</m>-module. Show that
              </p>
        
              <p>
                <me>\operatorname{Hom}_{W^{-1} R}\left(W^{-1} M, W^{-1} N\right) \cong W^{-1} \operatorname{Hom}_{R}(M, N) .</me>
              </p>
        
              <p>
                In particular, if <m>P</m> is prime,
              </p>
        
              <p>
                <me>\operatorname{Hom}_{R_{P}}\left(M_{P}, N_{P}\right) \cong \operatorname{Hom}_{R}(M, N)_{P}</me>
              </p>
            </statement>
          </exercise>
    
          <p>
            Localization is a very powerful tool in commutative algebra. Many important concepts localize well, in the sense that to prove that <m>R</m> or a module satisfy a certain property, it is often sufficient to show that all localizations of <m>R</m> or of that module also have that property. This is a very common and helpful technique in commutative algebra. For example, a module <m>M</m> is zero if and only if all its localizations are zero; one can even reduce to showing all localizations of <m>M</m> at a prime ideal are zero.
          </p>
    
          <p>
            One important thing to keep in mind, however, is that if <m>M</m> is a finitely generated <m>R</m> module, a localization <m>M_{W}</m> of <m>M</m> is typically not finitely generated over <m>R</m>, though it is finitely generated over <m>R_{W}</m>.
          </p>

          <exercise xml:id="exe-55">
            <statement>
              <p>
                Let <m>R</m> be a domain and let <m>f \in R</m> be a nonzero nonunit. Then <m>R_{f}</m> is not a finitely generated <m>R</m>-module.
              </p>
            </statement>
          </exercise>
    
          <p>
            To solve this exercise, however, one needs a little bit of commutative algebra that we are not covering in this course.
          </p>

        </section>

        <section xml:id="sec-hom-tensor"><title>Hom-Tensor Adjunction</title>

          <p>
            The Hom and tensor functors are closely related. 
            First, we note that <m>\operatorname{Hom}_{R}(A, B)</m> can be a module over a ring <m>S</m> when <m>A</m> or <m>B</m> have a bimodule structure.
          </p>

          <exercise xml:id="exe-56">
            <statement>
              <p>
                Let <m>R</m> and <m>S</m> be rings.
                <ul>
                  <li>
                    <p>
                      If <m>A</m> is an <m>(R, S)</m>-bimodule and <m>B</m> is a left <m>R</m>-module, then <m>\operatorname{Hom}_{R}(A, B)</m> has a left <m>S</m>-module structure via <m>(s \cdot f)(a)=f(a s)</m>.
                    </p>
                  </li>
          
                  <li>
                    <p>
                      If <m>A</m> is an <m>(R, S)</m>-bimodule and <m>B</m> is a right <m>S</m>-module, then <m>\operatorname{Hom}_{R}(A, B)</m> has a right <m>R</m>-module structure via <m>(f \cdot r)(a)=f(r a)</m>.
                    </p>
                  </li>
          
                  <li>
                    <p>
                      If <m>B</m> is an <m>(S, R)</m>-bimodule and <m>A</m> is a right <m>R</m>-module, then <m>\operatorname{Hom}_{R}(A, B)</m> has a left <m>S</m>-module structure via <m>(s \cdot f)(a)=s f(a)</m>.
                    </p>
                  </li>
          
                  <li>
                    <p>
                      If <m>B</m> is an <m>(S, R)</m>-bimodule and <m>A</m> is a left <m>S</m>-module, then <m>\operatorname{Hom}_{R}(A, B)</m> has a right <m>R</m>-module structure via <m>(f \cdot r)(a)=f(a) r</m>.
                    </p>
                  </li>
                </ul>
              </p>
            </statement>
          </exercise>
    
          <p>
            These structures can be a bit confusing at first - especially since we have left module structures written on the right and vice-versa. 
            While the exercise is not difficult, it can be extremely enlightening - we strongly recommend the reader tries their hand at the details.
          </p>
    
          <p>
            The following statements are known as Hom-tensor adjunction - and as we will see, they do encode an adjunction of functors.
          </p>

          <theorem xml:id="thm-3.58">
            <statement>
              <p>
                Let <m>R</m> and <m>S</m> be rings. 
                Assume that
              </p>
        
              <p><ul>
                <li>
                      <p>
                <m>A</m> is a right <m>R</m>-module,
              </p>
                </li>
        
                <li>
                      <p>
                <m>B</m> is an <m>(R, S)</m>-bimodule, and
              </p>
                </li>
        
                <li>
                      <p>
                <m>C</m> is a right <m>S</m>-module.
              </p>
                </li>
        
              </ul></p>
        
              <p>
                There is a natural isomorphism of abelian groups
              </p>
        
              <p>
                <me>\operatorname{Hom}_{S}\left(A \otimes_{R} B, C\right) \cong \operatorname{Hom}_{R}\left(A, \operatorname{Hom}_{S}(B, C)\right)</me>
              </p>
        
              <p>
                If <m>A</m> also has a <m>(T, R)</m>-bimodule structure, or <m>C</m> has a <m>(T, S)</m>-bimodule structure, then this is an isomorphism of (left or right, respectively) <m>T</m>-modules.
              </p>
            </statement>
          </theorem>

          <theorem xml:id="thm-3.59">
            <statement>
              <p>
                Theorem 3.59. Let <m>R</m> and <m>S</m> be rings. Assume that
              </p>
        
              <p><ul>
                <li>
                      <p>
                <m>A</m> is a left <m>R</m>-module,
              </p>
                </li>
        
                <li>
                      <p>
                <m>B</m> is an <m>(S, R)</m>-bimodule, and
              </p>
                </li>
        
                <li>
                      <p>
                <m>C</m> is a left <m>S</m>-module.
              </p>
                </li>
        
              </ul></p>
        
              <p>
                There is a natural isomorphism of abelian groups
              </p>
        
              <p>
                <me>\operatorname{Hom}_{S}\left(B \otimes_{R} A, C\right) \cong \operatorname{Hom}_{R}\left(A, \operatorname{Hom}_{S}(B, C)\right)</me>
              </p>
            </statement>
          </theorem>
    
          <p>
            We leave the details to the reader, and prove the case when the underlying rings are commutative. First, let's do the case when <m>R=S</m>.
          </p>

          <theorem xml:id="thm-3.60">
            <statement>
              <p>
                Theorem 3.60 (Hom-tensor adjunction I). Let <m>R</m> be a commutative ring and let <m>M, N</m>, and <m>P</m> be <m>R</m>-modules. There is an isomorphism of <m>R</m>-modules
              </p>
        
              <p>
                <me>\operatorname{Hom}_{R}\left(M \otimes_{R} N, P\right) \cong \operatorname{Hom}_{R}\left(M, \operatorname{Hom}_{R}(N, P)\right)</me>
              </p>
        
              <p>
                that is natural on <m>M, N</m>, and <m>P</m>.
              </p>
            </statement>

            <proof>
              <p>
                Proof. The universal property of the tensor product says that to give an <m>R</m>-module homomorphism <m>M \otimes_{R} N \longrightarrow P</m> is the same as giving an <m>R</m>-bilinear map <m>M \times N \longrightarrow P</m>. Given such a bilinear map <m>f</m>, the map <m>n \mapsto f(m \otimes n)</m> is <m>R</m>-linear for each <m>m \in M</m>, so it defines an <m>R</m>-module homomorphism <m>N \longrightarrow P</m>. Now the assignment
              </p>
        
              <p>
                <me>
                  \begin{aligned}
                  &amp; M \longrightarrow \operatorname{Hom}_{S}(N, P) \\
                  &amp; m \longrightarrow(n \mapsto f(m \otimes n))
                  \end{aligned}
                </me>
              </p>
        
              <p>
                is <m>R</m>-linear, <m>f</m> is an <m>R</m>-module homomorphism, and <m>m \mapsto m \otimes n</m> is <m>R</m>-linear on <m>m</m>.
              </p>
        
              <p>
                Conversely, given an <m>R</m>-module homomorphism <m>f \in \operatorname{Hom}_{R}\left(M, \operatorname{Hom}_{R}(N, P)\right)</m>, one can check (exercise!) that <m>(m, n) \mapsto f(m)(n)</m> is an <m>R</m>-bilinear map, so it induces an <m>R</m>-module homomorphism <m>M \otimes_{R} N \longrightarrow P</m>. Moreover, the two constructions are inverse to each other.
              </p>
        
              <p>
                So we have constructed a bijection of Hom-sets
              </p>
        
              <p>
                <me>
                  \begin{gathered}
                  \operatorname{Hom}_{R}\left(M \otimes_{R} N, P\right) \stackrel{\tau}{\longrightarrow} \operatorname{Hom}_{R}\left(M, \operatorname{Hom}_{R}(N, P)\right) . \\
                  f \longmapsto(m \mapsto(n \mapsto f(m \otimes n))) \\
                  (m \otimes n \mapsto g(m)(n)) \longleftrightarrow g
                  \end{gathered}
                </me>
              </p>
        
              <p>
                It's routine to check that both of these bijections are indeed homomorphisms of <m>R</m>-modules, so we leave it as an exercise.
              </p>
        
              <p>
                Finally, naturality means we have the following commutative diagrams:
              </p>
        
              <image source="2023_10_23_e2d6a27704be928b3deeg-106(1).jpg"/>
                
              <p>
                and
              </p>
      
              <image source="2023_10_23_e2d6a27704be928b3deeg-106.jpg"/>
                
              <p>
                We leave checking these do indeed commute as an exercise.
              </p>
            </proof>
          </theorem>

          <corollary xml:id="cor-3.61">
            <statement>
              <p>
                Corollary 3.61 (Tensor and Hom are adjoint functors). Let <m>R</m> be a commutative ring, and <m>M</m> an <m>R</m>-module. The functor <m>-\otimes_{R} M: R</m>-Mod <m>\longrightarrow R</m>-Mod is left adjoint to the functor <m>\operatorname{Hom}_{R}(M,-): R</m>-Mod <m>\longrightarrow R</m>-Mod.
              </p>
            </statement>

            <proof>
              <p>
                Proof. The adjointness translates into the fact that for all <m>R</m>-modules <m>N</m> and <m>P</m> there is a bijection
              </p>
        
              <p>
                <me>\operatorname{Hom}_{R}\left(N \otimes_{R} M, P\right) \cong \operatorname{Hom}_{R}\left(N, \operatorname{Hom}_{R}(M, P)\right)</me>
              </p>
        
              <p>
                which is natural on <m>N</m> and <m>P</m>, which is a corollary of Theorem 3.60.
              </p>
            </proof>
          </corollary>
    
          <p>
            Later, when we talk about more general abelian categories, we will see that this adjunction implies that Hom is left exact and that tensor is right exact; in fact, this is a more general fact about adjoint pairs. For now, we want to discuss a more general version of this Hom-tensor adjunction.
          </p>

          <theorem xml:id="thm-3.62">
            <statement>
              <p>
                Theorem 3.62 (Hom-tensor adjunction II). Let <m>f: R \rightarrow S</m> be a ring homomorphism of commutative rings. Let <m>M</m> be an <m>R</m>-module, and <m>P</m> and <m>N</m> be <m>S</m>-modules. There is an isomorphism of abelian groups
              </p>
        
              <p>
                <me>\operatorname{Hom}_{S}\left(M \otimes_{R} N, P\right) \cong \operatorname{Hom}_{R}\left(M, \operatorname{Hom}_{S}(N, P)\right) .</me>
              </p>
        
              <p>
                Moreover, this isomorphism is natural on <m>M, N</m>, and <m>P</m>, so it induces natural isomorphisms
              </p>
        
              <p><ul>
                <li>
                      <p>
                between <m>\operatorname{Hom}_{S}\left(-\otimes_{R} N, P\right)</m> and <m>\operatorname{Hom}_{R}\left(-, \operatorname{Hom}_{S}(N, P)\right)</m>.
              </p>
                </li>
        
                <li>
                      <p>
                between <m>\operatorname{Hom}_{S}\left(M \otimes_{R}-, P\right)</m> and <m>\operatorname{Hom}_{R}\left(M, \operatorname{Hom}_{S}(-, P)\right)</m>.
              </p>
                </li>
        
                <li>
                      <p>
                between <m>\operatorname{Hom}_{S}\left(M \otimes_{R} N,-\right)</m> and <m>\operatorname{Hom}_{R}\left(M, \operatorname{Hom}_{S}(N,-)\right)</m>.
              </p>
                </li>
        
              </ul></p>
            </statement>

            <proof>
              <p>
                Proof. Consider the map
              </p>
        
              <p>
                <me>
                  \begin{array}{r}
                  \operatorname{Hom}_{S}\left(M \otimes_{R} N, P\right) \stackrel{\tau}{\longrightarrow} \operatorname{Hom}_{R}\left(M, \operatorname{Hom}_{S}(N, P)\right) \\
                  f \longmapsto m \mapsto(n \mapsto f(m \otimes n))
                  \end{array}
                </me>
              </p>
        
              <p>
                Fix <m>f</m>. For each <m>m \in M</m>, let <m>\tau_{m}</m> be the map <m>N \longrightarrow P</m> defined by <m>\tau_{m}(n):=f(m \otimes n)</m>. Note that <m>\tau_{m}</m> is indeed a homomorphism of <m>S</m>-modules, since it is the composition of two <m>S</m>-module maps, <m>f</m> and <m>m \otimes_{R} \operatorname{id}_{N}</m>, where <m>m</m> is the constant map <m>M \longrightarrow M</m> equal to <m>m</m>.
              </p>
        
              <p>
                We should check that our proposed map <m>\tau</m> is indeed a map of abelian groups. It is immediate from the definition that <m>\tau</m> sends the 0-map to the 0-map. Moreover, given <m>S</m> module homomorphisms <m>f, g: M \otimes N \longrightarrow P</m>, and any <m>n \in N</m>, we have
              </p>
        
              <p>
                <me>
                  \begin{array}{rlr}
                  \tau_{m}(f+g)(n) &amp; =(f+g)(m \otimes n) &amp; \text { by definition } \\
                  &amp; =f(m \otimes n)+g(m \otimes n) &amp; \text { since } f \text { and } g \text { are } S \text {-module maps } \\
                  &amp; =\tau_{m}(f)(n)+\tau_{m}(g)(n) &amp; \text { by definition }
                  \end{array}
                </me>
              </p>
        
              <p>
                so <m>\tau_{m}(f+g)=\tau_{m}(f)+\tau_{m}(g)</m> for all <m>m \in M</m>, and thus <m>\tau(f+g)=\tau(f)+\tau(g)</m>.
              </p>
        
              <p>
                Suppose that <m>\tau(f)=0</m>. Then for every <m>m \in M</m> and every <m>n \in N</m>,
              </p>
        
              <p>
                <me>0=\tau(f)(m)(n)=\tau_{m}(f)(n)=f(m \otimes n)</me>
              </p>
        
              <p>
                so <m>f</m> vanishes at every simple tensor, and we must have <m>f=0</m>. On the other hand, if we are given <m>g \in \operatorname{Hom}_{R}\left(M, \operatorname{Hom}_{S}(N, P)\right)</m>, consider the map <m>M \times N \longrightarrow P</m> defined by <m>\tilde{f}(m, n)=g(m)(n)</m>. Since <m>g</m> is a homomorphism of <m>R</m>-modules, it is <m>R</m>-linear on <m>m</m>. Moreover, for each fixed <m>m, g(m)</m> is a homomorphism of <m>S</m>-modules, so in particular <m>g(m)</m> is <m>R</m>-linear. Together, these say that <m>\tilde{f}</m> is an <m>R</m>-bilinear map. Let <m>f</m> be the homomorphism of <m>R</m>-modules <m>M \otimes_{R} N \longrightarrow P</m> induced by <m>\tilde{f}</m>. By definition, <m>f(m \otimes n)=\tilde{f}(m, n)=g(m)(n)</m>, so <m>\tau(f)=g</m>. We conclude that <m>\tau</m> is a bijection.
              </p>
        
              <p>
                We leave the statements about naturality as exercises.
              </p>
            </proof>
          </theorem>

          <corollary xml:id="cor-3.63">
            <statement>
              <p>
                Corollary 3.63 (Adjointness of restriction and extension of scalars). Let <m>f R \longrightarrow S</m> be <m>a</m> ring homomorphism. The restriction of scalars functor <m>f^{*}: S</m>-Mod <m>\longrightarrow R</m>-Mod is the right adjoint of the extension of scalars functor <m>f_{*}: R</m>-Mod <m>\longrightarrow S</m>-Mod.
              </p>
            </statement>

            <proof>
              <p>
                Proof. We need to show that for every <m>R</m>-module <m>M</m> and every <m>S</m>-module <m>N</m> there are bijections
              </p>
        
              <p>
                <me>\operatorname{Hom}_{S}\left(f_{*}(M), N\right) \cong \operatorname{Hom}_{R}\left(M, f^{*}(N)\right)</me>
              </p>
        
              <p>
                which are natural on both <m>M</m> and <m>N</m>. By Theorem 3.62, we have natural bijections
              </p>
        
              <p>
                <me>\operatorname{Hom}_{S}\left(M \otimes_{R} S, N\right) \cong \operatorname{Hom}_{R}\left(M, \operatorname{Hom}_{S}(S, N)\right)</me>
              </p>
        
              <p>
                The module <m>M \otimes_{R} S</m> is precisely <m>f_{*}(M)</m>. By Exercise <m>38, \operatorname{Hom}_{S}(S, N) \cong N</m> as an <m>S</m>-module. An isomorphism of <m>S</m>-modules <m>\operatorname{Hom}_{S}(S, N) \longrightarrow N</m> is in particular an <m>R</m>-linear map, and thus also an isomorphism of <m>R</m>-modules. So <m>\operatorname{Hom}_{S}(S, N) \cong f^{*}(N)</m> as <m>R</m>-modules. Therefore, the Hom-tensor adjuntion gives us the natural bijections we were looking for.
              </p>
            </proof>
          </corollary>
    
          <p>
            The idea is that restriction of scalars and extension of scalars are the most efficient ways of making an <m>R</m>-module out of an <m>S</m>-module, and vice-versa.
          </p>
          
        </section>
        
      </chapter>

      <chapter xml:id="ch-proj-inj"><title>Projectives and Injectives</title>

        <section xml:id="sec-projective"><title>Projective Modules</title>

          <objectives>
            <ul>
              <li>
                
              </li>
            </ul>
          </objectives>

          <subsection xml:id="subsec-free-projective"><title>Definition, Free Modules are Projective</title>

            <blockquote>
              <p>
                <q>
                  I don't have time to worry about what I'm projecting to the world. I'm just busy being myself.
                </q>
              </p>
              <attribution>Demi Lovato</attribution>
            </blockquote>

            <p>
              While Hom and tensor are not exact functors in general, <m>\operatorname{Hom}_{R}(M,-), \operatorname{Hom}_{R}(-, M)</m>, and <m>M \otimes_{R}-</m> can be exact functors for carefully chosen modules <m>M</m>. 
              In this chapter, we introduce these three classes of modules (projective, injective, and flat modules) and study their properties. 
              Throughout, we consider general rings and left modules.
            </p>
  
            <definition xml:id="def-4.1"><title>Projective Module</title>
              <statement>
                <p>
                  Let <m>R</m> be a ring. 
                  An <m>R</m>-module <m>P</m> is <em>projective</em> if given any surjective <m>R</m>-module homomorphism <m>s: A \rightarrow B</m> and any <m>R</m>-module homomorphism <m>f: P \rightarrow B</m>, there exists an <m>R</m>-module homomorphism <m>g</m> such that the diagram
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-109(1).jpg" width="30%"/>
                <p>
                  commutes.
                  <idx><h>projective module</h></idx>
                </p>
              </statement>
            </definition>
  
            <remark xml:id="rem-4.2">
              <p>
                The commutativity of the diagram
              </p>
              <image source="2023_10_23_e2d6a27704be928b3deeg-109.jpg" width="30%"/>
              <p>
                says that <m>s_{*}(g)=f</m>, where <m>s_{*}</m> is the <m>\operatorname{map} \operatorname{Hom}_{R}(P, A) \longrightarrow \operatorname{Hom}_{R}(P, B)</m> induced by <m>s</m>. 
                Whenever this happens, we say that <m>g</m> is a lifting of <m>f</m>, and that <m>f</m> lifts, or that <m>f</m> factors through <m>A</m>.
                <idx><h>lift</h></idx>
              </p>
            </remark>
  
            <p>
              There are projective modules over any ring, as the next result shows; in fact, free modules are always projective.
            </p>
  
            <theorem xml:id="thm-4.3"><title>Free Modules are Projective</title>
              <statement>
                <p>
                  Free modules are projective.
                </p>
              </statement>
  
              <proof>
                <p>
                  Let <m>F</m> be a free <m>R</m>-module. 
                  Suppose we are given <m>R</m>-module homomorphisms <m>s: A \rightarrow C</m> and <m>f: F \rightarrow C</m> such that <m>s</m> is surjective. 
                  Fix a basis <m>B=\left\{b_{i}\right\}_{i}</m> for <m>F</m>. 
                  Since <m>s</m> is surjective, for each <m>i</m> we can choose <m>a_{i} \in A</m> such that <m>s\left(a_{i}\right)=f\left(b_{i}\right)</m>. 
                  Consider the function <m>u: B \longrightarrow A</m> given by <m>u\left(b_{i}\right)=a_{i}</m>. 
                  The universal property of free modules says that there exists an <m>R</m>-module homomorphism <m>g: F \longrightarrow A</m> that coincides with <m>u</m> for all basis elements. 
                  Now
                  <me>
                    s g\left(b_{i}\right)=s u\left(b_{i}\right)=s\left(a_{i}\right)=f\left(b_{i}\right)
                  </me>
                  so <m>s g</m> agrees with <m>f</m> for all basis elements. 
                  Since <m>B</m> generates <m>F</m>, we conclude that <m>s g=f</m>.
                </p>
              </proof>
            </theorem>
  
            <p>
              Projective modules are precisely those that make the covariant <m>\Hom</m> functor exact.
            </p>
  
            <theorem xml:id="thm-4.4">
              <statement>
                <p>
                  Let <m>P</m> be an <m>R</m>-module. 
                  The functor <m>\operatorname{Hom}_{R}(P,-)</m> is exact if and only if <m>P</m> is projective.
                </p>
              </statement>
  
              <proof>
                <p>
                  By <xref ref="thm-3.14"/> <m>\operatorname{Hom}_{R}(P,-)</m> is left exact. 
                  The statement is that <m>P</m> is projective if and only for any short exact sequence
                  <me>0 \longrightarrow A \stackrel{i}{\longrightarrow} B \stackrel{p}{\longrightarrow} C \longrightarrow 0</me>
                  the induced map <m>s_{*}: \operatorname{Hom}_{R}(P, B) \longrightarrow \operatorname{Hom}_{R}(P, C)</m> is surjective. Say we are given a surjective map
                  <me>B \stackrel{p}{\longrightarrow} C \longrightarrow 0</me>
                </p>
          
                <p>
                  The induced map <m>s_{*}</m> is surjective if and only if for every <m>f \in \operatorname{Hom}_{R}(P, C)</m> there exists a lifting <m>g \in \operatorname{Hom}_{R}(P, B)</m> of <m>f</m>, meaning <m>s_{*}(g)=f</m>. 
                  By <xref ref="rem-4.2"/>, the existence of such a <m>g</m> for all such surjective maps <m>s</m> is precisely the condition that <m>P</m> is projective.
                </p>
              </proof>
            </theorem>

            <aside>
              <p>
                This is really the definition of what a projective module is, but for those that have not seen category theory, the definition given is used.
              </p>
            </aside>
  
            <corollary xml:id="cor-4.5">
              <statement>
                <p>
                  For any ring <m>R, \operatorname{Hom}_{R}(R,-)</m> is exact. 
                  More generally, if <m>F</m> is any free <m>R</m>-module, then <m>\operatorname{Hom}_{R}(F,-)</m> is exact.
                </p>
              </statement>
  
              <proof>
                <p>
                  By <xref ref="thm-4.3"/>, free modules, and <m>R</m> in particular, are projective. 
                  By <xref ref="thm-4.4"/>, <m>\operatorname{Hom}_{R}(F,-)</m> must be exact for any free <m>R</m>-module <m>F</m>.
                </p>
              </proof>
            </corollary>
  
            <p>
              However, not every projective module is free. 
              But before we see such examples, we need to know a bit more about projective modules.
            </p>
            
          </subsection>

          <subsection xml:id="subsec-direct-summands"><title>Direct Summands</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>
    
            <p>
              First, we show that we can rephrase the condition that a module is projective or injective in terms of split exact sequences.
            </p>

            <theorem xml:id="thm-4.6"><title>Projective Modules and Splitting </title>
              <statement>
                <p>
                  An <m>R</m>-module <m>P</m> is projective if and only if every short exact sequence
                  <me>0 \longrightarrow A \longrightarrow B \longrightarrow P \longrightarrow 0</me>
                  splits.
                </p>
              </statement>

              <proof>
                <p>
                  <m>(\Rightarrow)</m> 
                  Consider a short exact sequence
                  <me>0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} P \longrightarrow 0 .</me>
                </p>
          
                <p>
                  If <m>P</m> is projective, the identity map on <m>P</m> lifts to a map <m>P \longrightarrow B</m>, meaning that
                </p>

                <image source="2023_10_23_e2d6a27704be928b3deeg-111(2).jpg" width="30%"/>
                  
                <p>
                  commutes. 
                  This says that our map <m>h</m>
                  <me>0 \longrightarrow A \stackrel{f}{\longrightarrow} B \underset{\nwarrow}{\stackrel{g}{\longrightarrow}} P \longrightarrow 0</me>
                  is a splitting for our short exact sequence, which must then be split, by Lemma 2.19.
                </p>
          
                <p>
                  <m>(\Leftarrow)</m> Conversely, suppose that every short exact sequence
                  <me>0 \longrightarrow A \longrightarrow B \longrightarrow P \longrightarrow 0</me>
                  splits, and consider any diagram
                </p>
          
                <image source="2023_10_23_e2d6a27704be928b3deeg-111.jpg" width="30%"/>
          
                <p>
                  Let <m>F</m> be a free module that surjects onto <m>P</m> - for example, the free module on a set of generators of <m>P</m> - and fix a surjection <m>\pi: F \rightarrow P</m>. 
                  By assumption, the short exact sequence
                  <me>0 \longrightarrow \operatorname{ker} \pi \longrightarrow \underset{\kappa_{h}^{-}}{\stackrel{\pi}{\longrightarrow}} P \longrightarrow 0</me>
                  splits, so by <xref ref="lem-2.19"/> there exists <m>h</m> such that <m>\pi h=\operatorname{id}_{P}</m>. 
                  Now since <m>F</m> is free, we can define an <m>R</m>-module map <m>\hat{g}: F \longrightarrow B</m> that such that
                </p>
          
                <image source="2023_10_23_e2d6a27704be928b3deeg-111(1).jpg" width="30%"/>
                  
                <p>
                  commutes, by sending each basis element <m>b \in F</m> to any lift of <m>f \pi(b)</m> in <m>B</m> via <m>s</m>.
                  Now set <m>g:=\hat{g} h</m>, and note that
                  <me>
                    \begin{array}{rrr}
                    s g &amp; =s \hat{g} h &amp; \text { by definition } \\
                    &amp; =f \pi h &amp; \text { by commutativity } \\
                    &amp; =f &amp; \text { since } \pi h=\mathrm{id}_{P},
                    \end{array}
                  </me>
                  so <m>g</m> is a lift of <m>s</m> by <m>f</m>.
                </p>
              </proof>
            </theorem>
      
            <p>
              We have seen that free modules are projective; what other modules are projective?
            </p>

            <definition xml:id="def-4.7"><title>Direct Summand</title>
              <statement>
                <p>
                  An <m>R</m>-module <m>M</m> is a <em>direct summand</em> of an <m>R</m>-module <m>N</m> if there exists an <m>R</m>-module <m>A</m> such that <m>A \oplus M \cong N</m>.
                  <idx><h>direct summand</h></idx>
                </p>
              </statement>
            </definition>

            <remark>
              <p>
                Remark 4.8. 
                Saying that <m>M</m> is a direct summand of <m>N</m> is equivalent to giving a splitting <m>\pi</m> of the inclusion map <m>i: M \hookrightarrow N</m>, meaning that <m>\pi i=\mathrm{id}_{N}</m>. 
                As we have argued in <xref ref="lem-2.19"/>, such a splitting <m>\pi</m> gives
                <me>N=\operatorname{im} i \oplus \operatorname{ker} \pi</me>
              </p>
        
              <p>
                Essentially repeating the argument we used in <xref ref="lem-2.19"/>, every element in <m>N</m> can be written as
                <me>n=(n-i \pi(n))+i \pi(n)</me>
                where <m>i \pi(n) \in \operatorname{im} i</m> and <m>n-i \pi(n) \in \operatorname{ker} \pi</m>, and <m>\operatorname{ker} \pi \cap \operatorname{im} i=0</m> because if <m>i(a) \in \operatorname{ker} \pi</m> then <m>a=\pi i(a)=0</m>.
              </p>
        
              <p>
                Note that when we are dealing with graded modules over a graded ring, the kernels and images of graded maps are graded modules, and the equality <m>N=\operatorname{im} i \oplus \operatorname{ker} \pi</m> is a graded direct sum of graded modules.
              </p>
            </remark>

            <theorem xml:id="thm-4.9"><title>Projective iff Direct Summand of Free Module</title>
              <statement>
                <p>
                  An <m>R</m>-module is projective <m>P</m> if and only if <m>P</m> is a direct summand of a free <m>R</m>-module. 
                  In particular, a finitely generated <m>R</m>-module <m>P</m> is projective if and only if <m>P</m> is a direct summand of <m>R^{n}</m> for some <m>n</m>.
                </p>
              </statement>

              <proof>
                <p>
                  <m>(\Rightarrow)</m> 
                  Let <m>P</m> be a projective module, and fix a free module <m>F</m> surjecting onto <m>P</m>. 
                  If <m>P</m> is finitely generated, we can take <m>F=R^{n}</m> for some <m>n</m>. 
                  The short exact sequence
                  <me>0 \longrightarrow \operatorname{ker} \pi \longrightarrow F \stackrel{\pi}{\longrightarrow} P \longrightarrow 0</me>
                  must split by <xref ref="thm-4.6"/>, so <m>P</m> is a direct summand of <m>F</m>.
                </p>
          
                <p>
                  <m>(\Leftarrow)</m> 
                  Now suppose <m>P</m> is a direct summand of a free module <m>F</m>. 
                  In particular, we have an inclusion map <m>i: P \longrightarrow F</m> that splits, so it comes together with a projection map <m>\pi: F \longrightarrow P</m> such that <m>\pi i=\operatorname{id}_{P}</m>. 
                  Given any diagram
                </p>
          
                <image source="2023_10_23_e2d6a27704be928b3deeg-112(1).jpg" width="30%"/>
                  
                <p>
                  we can define an <m>R</m>-module homomorphism <m>h</m> such that <m>s h=f \pi</m>, so that the following diagram commutes:
                </p>
          
                <image source="2023_10_23_e2d6a27704be928b3deeg-112.jpg" width="30%"/>
          
                <p>
                  Setting <m>g:=h i</m>, we do indeed obtain <m>s g=f</m>, since
                  <me>
                    \begin{array}{rlrl}
                    s g &amp; =s h i &amp; \text { by definition } \\
                    &amp; =f \pi i &amp; &amp; \text { because } s h=f \pi \\
                    &amp; =f &amp; &amp; \text { since } \pi i=\mathrm{id}_{P} \cdot \square
                    \end{array}
                  </me>
                </p>
              </proof>
            </theorem>

            <remark>
              <p>
                Remark 4.10. 
                While every module <m>M</m> is a quotient of a free module <m>F</m>, so that we always have a surjection <m>\pi: F \rightarrow M</m>, not every module embeds into a free module; 
                and even if <m>M</m> is a submodule of some free module <m>F</m>, the inclusion map <m>M \subseteq F</m> is not necessarily split. 
                On the other hand, as we showed in <xref ref="thm-4.9"/> that <m>M</m> is projective if and only if we can write it as a quotient of a free module <m>F</m>, say <m>\pi: F \rightarrow M</m>, and <m>\pi</m> splits, so that in fact <m>M</m> embeds into <m>F</m> and that map splits.
              </p>
            </remark>

            <corollary xml:id="cor-4.11">
              <statement>
                <p>
                  Let <m>R</m> be any ring.
                  <ol>
                    <li>
                      <p>
                        Every direct summand of a projective module is projective.
                      </p>
                    </li>
          
                    <li>
                      <p>
                        Every direct sum of projective modules is projective.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>

              <proof>
                <p>
                  <ol>
                    <li>
                      <p>
                        Suppose <m>M \oplus A \cong P</m> for some projective module <m>P</m>. 
                        By <xref ref="thm-4.9"/>, there exists a free <m>R</m>-module <m>F</m> and an <m>R</m>-module <m>B</m> such that <m>P \oplus B \cong F</m>. 
                        Then <m>M \oplus A \oplus B \cong P \oplus B \cong F</m>, and by <xref ref="thm-4.9"/> this implies <m>M</m> is projective.
                      </p>
                    </li>
          
                    <li>
                      <p>
                        Let <m>\left\{P_{i}\right\}_{i \in I}</m> be a family of projective modules. 
                        By <xref ref="thm-4.9"/>, there exist free modules <m>F_{i}</m> such that each <m>P_{i}</m> is a direct summand of <m>F_{i}</m>. 
                        Therefore, <m>\oplus P_{i}</m> is a direct summand of <m>\oplus_{i} F_{i}</m>, which is also free. 
                        By <xref ref="thm-4.9"/>, this implies that <m>\oplus P_{i}</m> is projective.
                      </p>
                    </li>
                  </ol>
                </p>
              </proof>
            </corollary>

            <p>
              We are finally ready to give examples showing that projective modules are not necessarily free.
            </p>

            <example><title>Projective but not Free Module</title>
              <p>
                Example 4.12. 
                The ring <m>R=\mathbb{Z} /(6)</m> can be written as a direct sum of the ideals
                <me>I=(2) \text { and } J=(3)</me>
              </p>
        
              <p>
                Indeed, <m>R=I+J</m> and <m>I \cap J=0</m>, so <m>R=I \oplus J</m>. 
                By <xref ref="cor-4.11"/>, <m>I</m> and <m>J</m> are projective <m>R</m>-modules. 
                However, <m>I</m> and <m>J</m> are not free. 
                This can be explained numerically: every finitely generated free <m>R</m>-module is of the form <m>R^{n}</m>, so it has <m>6^{n}</m> elements for some <m>n</m>, while <m>I</m> and <m>J</m> have <m>3</m> and <m>2</m> elements respectively.
              </p>
            </example>
      
            <p>
              Finally, to emphasize its importance we record here an easy result that we have used repeatedly at this point, and which will be very important later on.
            </p>

            <lemma xml:id="lem-4.13">
              <statement>
                <p>
                  For every <m>R</m>-module <m>M</m>, there exists a free module <m>F</m> surjecting onto <m>M</m>. 
                  If <m>M</m> is finitely generated, we can take <m>F</m> to be finitely generated.
                </p>
              </statement>
            </lemma>
      
            <p>
              We will often need only a weaker version of this: that every module is a quotient of a projective module.
            </p>

          </subsection>

          <outcomes>
            <ul>
              <li>
                <p>
                  Projective modules are exactly the modules that make <m>\operatorname{Hom}_{R}(P,-)</m> exact.
                </p>
              </li>

              <li>
                <p>
                  Here are other equivalent characterizations of a projective module <m>P</m>:
                  <ol>
                    <li>
                      <p>
                        Given any surjective <m>R</m>-module homomorphism <m>s: A \rightarrow B</m> and any <m>R</m>-module homomorphism <m>f: P \rightarrow B</m>, there exists an <m>R</m>-module homomorphism <m>g</m> such that the diagram
                      </p>
                      <image source="2023_10_23_e2d6a27704be928b3deeg-109(1).jpg" width="30%"/>
                      <p>
                        commutes.
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>P</m> is the direct summand of a free module
                      </p>
                    </li>

                    <li>
                      <p>
                        Every short exact sequence
                        <me>0 \longrightarrow A \longrightarrow B \longrightarrow P \longrightarrow 0</me>
                        splits.
                      </p>
                    </li>
                  </ol>
                </p>
              </li>

              <li>
                <p>
                  Free modules are projective. 
                  Projective modules are free in commutative rings that are either local or graded.
                </p>
              </li>

              <li>
                <p>
                  For every module <m>M</m>, there exists a free module <m>F</m> surjecting into <m>M</m>.
                </p>
              </li>
            </ul>
          </outcomes>

        </section>

        <section xml:id="sec-injective"><title>Injective Modules</title>

          <objectives>
            <ul>
              <li>
                
              </li>
            </ul>
          </objectives>

          <subsection xml:id="subsec-injective"><title>Definition and Baer's Criterion</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>
            
            <p>
              Injective modules are dual to projectives.
            </p>

            <definition xml:id="def-4.14"><title>Injective Module</title>
              <statement>
                <p>
                  An <m>R</m>-module <m>I</m> is <em>injective</em> if given an injective <m>R</m>-module homomorphism <m>i: A \longrightarrow B</m> and an <m>R</m>-module homomorphism <m>f: A \longrightarrow I</m>, there exist an <m>R</m>-module homomorphism <m>g</m> such that
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-114.jpg" width="30%"/>
                <p>
                  commutes.
                </p>
              </statement>
            </definition>
      
            <p>
              These are precisely the modules <m>I</m> such that <m>\operatorname{Hom}_{R}(-, I)</m> is exact.
            </p>

            <theorem xml:id="thm-4.15">
              <statement>
                <p>
                  An <m>R</m>-module <m>I</m> is injective if and only if <m>\operatorname{Hom}_{R}(-, I)</m> is exact, meaning that for every short exact sequence
                  <me>0 \longrightarrow A \stackrel{i}{\longrightarrow} B \stackrel{p}{\longrightarrow} C \longrightarrow 0</me>
                  we get an exact sequence
                  <me>0 \longrightarrow \operatorname{Hom}_{R}(C, I) \stackrel{p^{*}}{\longrightarrow} \operatorname{Hom}_{R}(B, I) \stackrel{i^{*}}{\longrightarrow} \operatorname{Hom}_{R}(A, I) \longrightarrow 0</me>
                </p>
              </statement>

              <proof>
                <p>
                  By <xref ref="thm-3.14"/>, <m>\operatorname{Hom}_{R}(-, I)</m> is left exact, so for any short exact sequence
                  <me>0 \longrightarrow A \stackrel{i}{\longrightarrow} B \stackrel{p}{\longrightarrow} C \longrightarrow 0</me>
                  we get an exact sequence
                  <me>0 \longrightarrow \operatorname{Hom}_{R}(C, I) \stackrel{p^{*}}{\longrightarrow} \operatorname{Hom}_{R}(B, I) \stackrel{i^{*}}{\longrightarrow} \operatorname{Hom}_{R}(A, I)</me>
                </p>
          
                <p>
                  So the content of the theorem is that <m>I</m> is injective if and only if for every injective <m>R</m>-module homomorphism <m>i: A \longrightarrow B</m>, the induced map <m>i^{*}</m> is surjective. 
                  Now notice that <m>i^{*}</m> is surjective if and only if every <m>f \in \operatorname{Hom}_{R}(A, I)</m> lifts to some <m>g \in \operatorname{Hom}_{R}(B, I)</m>, meaning
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-114(1).jpg" width="30%"/>    
                <p>
                  commutes. 
                  That is precisely what we want for <m>I</m> to be injective.
                </p>
              </proof>
            </theorem>
      
            <p>
              Giving examples of injective modules is much harder than giving examples of projective modules, but we will see some examples later. 
              First, we prove some properties of injective modules.
            </p>
      
            <p>
              The class of injectives modules is closed for products and finite direct sums.
            </p>

            <lemma xml:id="lem-4.16">
              <statement>
                <p>
                  Given any family <m>\left\{M_{i}\right\}_{i \in I}</m> of injective modules, <m>\prod_{i \in I} M_{i}</m> is injective.
                </p>
              </statement>

              <proof>
                <p>
                  Let <m>\pi_{j}: \prod_{i \in I} M_{i} \longrightarrow M_{j}</m> be the projection onto the <m>j</m> th factor. 
                  Given any diagram
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-115(5).jpg" width="30%"/>
                <p>
                  the fact that <m>M_{i}</m> is injective gives us <m>R</m>-module homomorphisms <m>g_{i}</m> such that
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-115(2).jpg" width="30%"/>
                <p>
                  commutes for each <m>i</m>. Now the <m>R</m>-module homomorphism
                  <me>
                    \begin{gathered}
                    B \stackrel{g}{\longrightarrow} \prod_{i \in I} M_{i} \\
                    b \longmapsto\left(g_{i}(b)\right)
                    \end{gathered}
                  </me>
                  makes the diagram
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-115(3).jpg" width="30%"/>
                <p>
                  commute, so <m>\prod_{i \in I} M_{i}</m> is injective.
                </p>
              </proof>
            </lemma>

            <lemma xml:id="lem-4.17">
              <statement>
                <p>
                  If <m>M \oplus N=E</m> is an injective <m>R</m>-module, then so are <m>M</m> and <m>N</m>.
                </p>
              </statement>

              <proof>
                <p>
                  Any diagram
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-115(4).jpg" width="30%"/>
                <p>
                  can be extended to a map <m>A \longrightarrow E</m> by composing <m>f</m> with the inclusion of the first factor. 
                  Since <m>E</m> is injective, there exists <m>h</m> such that
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-115.jpg" width="30%"/>
                <p>
                  commutes. 
                  Let <m>\pi: E \longrightarrow M</m> be the projection onto <m>M</m>, so that <m>\pi j=\mathrm{id}_{M}</m>. 
                  Now if we set <m>g:=\pi h</m>,
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-115(1).jpg" width="30%"/>
                <p>
                  <me>
                    \begin{aligned}
                    g i &amp; =\pi h i &amp; \text { by definition } \\
                    &amp; =\pi j f &amp; \text { by commutativity } \\
                    &amp; =f &amp; \text { because } \pi j=\mathrm{id}_{M}
                    \end{aligned}</me>
                </p>
              </proof>
            </lemma>

            <theorem xml:id="thm-4.18"><title>Baer Criterion</title>
              <statement>
                <p>
                  An <m>R</m>-module <m>E</m> is injective if and only if every <m>R</m>-module homomorphism <m>I \longrightarrow E</m> from an ideal <m>I</m> in <m>R</m> can be extended to the whole ring, meaning that there exists <m>g</m> making the diagram
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-116(1).jpg" width="30%"/>
                <p>
                  commute.
                </p>
              </statement>

              <proof>
                <p>
                  On the one hand, if <m>E</m> is injective then our condition is simply a special case of the definition of injective module. 
                  On the other hand, suppose that this condition holds, and consider any diagram
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-116.jpg" width="30%"/>
                <p>
                  To simplify notation, let's assume our map <m>M \longrightarrow N</m> is indeed the inclusion of the submodule <m>M</m>, so we can write <m>m \in N</m> for the image of <m>m</m> in <m>N</m>. 
                  Consider the set
                  <me>X:=\{(A, g) \mid A \text { is a submodule of } N, M \subseteq A \subseteq N \text {, and } g \text { extends } f\}</me>
                </p>
          
                <p>
                  First, notice <m>X</m> is nonempty, since <m>(M, f) \in X</m>. 
                  Moreover, we can partially order <m>X</m> by setting <m>(A, g) \leqslant(B, h)</m> if <m>A \subseteq B</m> and <m>\left.h\right|_{A}=g</m>. 
                  So we have a nonempty partially ordered set; let's show we can apply Zorn's Lemma to it.
                </p>
          
                <p>
                  Given a chain in <m>X</m>, meaning a sequence
                  <me>\left(A_{1}, g_{1}\right) \leqslant\left(A_{2}, g_{2}\right) \leqslant \cdots</me>
                  of nested submodules <m>A_{1} \subseteq A_{2} \subseteq \cdots</m> and maps <m>g_{i}</m> that extend all <m>g_{j}</m> with <m>j \leqslant i</m>, let <m>A:=\bigcup_{i} A_{i}</m>, and define
                  <me>
                    \begin{aligned}
                    &amp; A \longrightarrow g \\
                    &amp; a \longrightarrow g_{i}(a) \text { if } a \in A_{i} .
                    \end{aligned}
                  </me>
                </p>
          
                <p>
                  Since all the <m>g_{i}</m> are homomorphisms of <m>R</m>-modules, this map <m>g</m> is indeed a map of <m>R</m>-modules. 
                  Moreover, <m>g</m> is well-defined, since the <m>g_{i}(a)=g_{j}(a)</m> whenever <m>a \in A_{i} \cap A_{j}</m>. 
                  By construction, this map extends all the <m>g_{i}</m>, so we conclude that <m>(A, g)</m> is an upper bound for our chain. 
                  Moreover, <m>M \subseteq A \subseteq N</m> follows immediately from our construction, and since each <m>g_{i}</m> extends <m>f</m>, so does <m>g</m>. 
                  We conclude that <m>(A, g) \in X</m>, and more generally that any chain in <m>X</m> has an upper bound in <m>X</m>. 
                  So Zorn's Lemma applies.
                </p>
          
                <p>
                  By Zorn's Lemma, <m>X</m> has a maximal element, say <m>(A, g)</m>. 
                  We claim that <m>A=N</m>. 
                  Suppose not, and let <m>n \in N</m> be an element not in <m>A</m>. One can check that
                  <me>I:=\{r \in R \mid r n \in A\}</me>
                  is an ideal in <m>R</m>, and that
                  <me>
                    \begin{aligned}
                    &amp; I \stackrel{h}{\longrightarrow} E \\
                    &amp; r \longrightarrow g(r n)
                    \end{aligned}
                  </me>
                  is an <m>R</m>-module homomorphism.
                </p>
          
                <p>
                  By assumption, we can extend <m>h</m> to an <m>R</m>-module homomorphism <m>R \longrightarrow E</m>, which we will write as <m>h</m> as well. 
                  Now the <m>R</m>-module homomorphism
                  <me>
                    \begin{aligned}
                    &amp; A+R n \longrightarrow E \\
                    &amp; a+r n \longrightarrow g(a)+h(r)
                    \end{aligned}
                  </me>
                  is well-defined by construction, since any <m>r n \in A</m> satisfies <m>g(r n)=h(r)</m>, and if <m>r n=r^{\prime} n</m> then <m>h(r)=r n=r^{\prime} n=h\left(r^{\prime}\right)</m>. 
                  Finally, this map agrees with <m>g</m> on <m>A</m>, and thus it agrees with <m>f</m> on <m>M</m>, so <m>(A+R n, \varphi) \in X</m> and <m>(A, g) \leqslant(A+R n, \varphi)</m>. 
                  By the maximality of <m>(A, g)</m>, we conclude that <m>A+R n=A</m>, and thus <m>n \in A</m>, which is a contradiction. 
                  We conclude that <m>A=N</m>. 
                  Therefore, <m>g</m> makes the diagram
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-117(1).jpg" width="30%"/>
                <p>
                  commute.
                </p>
              </proof>
            </theorem>

          </subsection>

          <subsection xml:id="subsec-divisible"><title>Divisible Modules</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>
            
            <p>
              It is very easy to see that every <m>R</m>-module is a quotient of a free module. 
              The dual statement is true as well, but it is a little more delicate.
            </p>

            <definition xml:id="def-4.21"><title>Divisible Module</title>
              <statement>
                <p>
                  An <m>R</m>-module <m>D</m> is <em>divisible</em> if for every nonzero <m>r \in R</m> and every <m>d \in D</m> there exists <m>b \in D</m> such that <m>r b=d</m>.
                </p>
              </statement>
            </definition>

            <remark>
              <p>
                Remark 4.22. 
                Given <m>r \in R</m>, and an <m>R</m>-module <m>M</m>, the multiplication by <m>r</m> map <m>M \stackrel{\cdot r}{\longrightarrow} M</m> is an <m>R</m>-module homomorphism. 
                The module <m>M</m> is divisible if and only if multiplication by <m>r</m> is surjective for all nonzero <m>r \in R</m>.
              </p>
            </remark>

            <example><title>Divisible Modules</title>
              <statement>
                <p>
                  The set of rational numbers <m>\Q</m>, considered as a module over the ring of integers <m>\Z</m>, is a divisible module. 
                  This is because for any nonzero integer <m>n</m>, you can find a rational number <m>q = \frac 1n</m> such that <m>nq</m> is still a rational number.
                </p>
              </statement>
            </example>

            <lemma xml:id="lem-4.23"><title>Divisible Modules Closed Under Quotients</title>
              <statement>
                <p>
                  Any quotient of a divisible module is also divisible.
                </p>
              </statement>

              <proof>
                <p>
                  Let <m>D</m> be a divisible <m>R</m>-module and <m>E</m> be a submodule of <m>D</m>. 
                  Let <m>r \in R</m> and <m>d+E \in</m> <m>D / E</m>. 
                  By assumption, there exists <m>a \in D</m> such that <m>r a=d</m>. 
                  The image <m>a+E</m> of <m>a</m> in <m>D / E</m> is still a solution to <m>r(a+E)=d+D</m>, so indeed <m>E</m> is divisible.
                </p>
              </proof>
            </lemma>

            <theorem xml:id="thm-divisible-cps"><title>Closure Properties of Divisible Modules</title>
              <statement>
                <p>
                  Divisible modules are closed under taking submodules, quotients, direct sums, and localizations.
                </p>
              </statement>
            </theorem>

            <lemma xml:id="lem-4.24"><title>Injective Modules Divisible in Domains</title>
              <statement>
                <p>
                  Over a domain, every injective module is divisible.
                </p>
              </statement>

              <proof>
                <p>
                  Suppose that <m>E</m> is an injective <m>R</m>-module, where <m>R</m> is a domain. 
                  Fix <m>r \in R</m> and <m>a \in E</m>. Since <m>R</m> is a domain, we have <m>s r=s^{\prime} r \Rightarrow s=s^{\prime}</m> for any <m>s, s^{\prime}, r \in R</m>. 
                  In particular, each element in <m>(r)</m> can be written uniquely as <m>s r</m> for some <m>s \in R</m>. 
                  In particular, the map of <m>R</m>-modules
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-119.jpg" width="30%"/>
                <p>
                  is well-defined. 
                  Since <m>E</m> is injective, we can extend this to a homomorphism <m>f: R \longrightarrow E</m>. 
                  Finally, <m>f(1) \in E</m> is an element such that <m>e=f(r)=r f(1)</m>, and <m>E</m> is divisible.
                </p>
              </proof>
            </lemma>

            <p>
              This not true in general if we do not assume <m>R</m> is a domain.
            </p>

            <example><title>Injective but not Divisible Module</title>
              <p>
                Example 4.25. 
                Let <m>k</m> be a field and <m>R=k[x] /\left(x^{2}\right)</m>. 
                On the one hand, <m>R</m> is not a divisible <m>R</m>-module, since there is no <m>y \in R</m> such that <m>x y=1</m>. 
                On the other hand, <m>R</m> is actually an injective module over itself, although we do not have the tools to justify that this is indeed an injective <m>R</m>-module. <m>{ }^{1}</m>
              </p>
            </example>
      
            <p>
              The converse of <xref ref="lem-4.24"/> does not hold in general, and quotients of injective modules are not necessarily injective.
            </p>

            <exercise xml:id="exe-57"><title>Injective Modules not Closed Under Quotients</title>
              <statement>
                <p>
                  Let <m>R=k[x, y]</m>, where <m>k</m> is a field, let <m>Q=\operatorname{frac}(R)</m> be the fraction field of <m>R</m>. 
                  The <m>R</m>-module <m>M=Q / R</m> is divisible but not injective.
                </p>
              </statement>
            </exercise>
      
            <p>
              But the converse of <xref ref="lem-4.24"/> does hold for some special classes of rings.
            </p>

            <theorem xml:id="lem-4.26"><title>Injective iff Divisible in PID</title>
              <statement>
                <p>
                  Let <m>R</m> be a principal ideal domain. 
                  An <m>R</m>-module <m>E</m> is injective if and only <m>E</m> it is divisible.
                </p>
              </statement>

              <proof>
                <p>
                  Given <xref ref="lem-4.24"/>, we only need to show that divisible modules are injective. 
                  By Baer's Criterion, we only need to show that any map from an ideal to <m>E</m> can be extended to the whole ring. 
                  So let <m>E</m> be a divisible <m>R</m>-module, and consider any map <m>I \longrightarrow E</m> from an ideal <m>I</m> to <m>E</m>. 
                  If <m>I=0</m>, we could extend our map by taking the <m>0</m> map from <m>R</m> to <m>E</m>, so we might as well assume that <m>I \neq 0</m>. 
                  By assumption, <m>I=(a)</m> for some <m>a \in R</m>, and since <m>E</m> is divisible, there exists <m>e \in E</m> such that <m>f(a)=a e</m>. 
                  Now consider the multiplication by <m>r</m> map,
                  <me>
                    \begin{aligned}
                    &amp; R \longrightarrow g \\
                    &amp; r \longrightarrow r e .
                    \end{aligned}
                  </me>
                  For every <m>r \in R, g(r a)=r a e=r f(a)=f(r a)</m>, so <m>g</m> extends <m>f</m>. 
                  Therefore, by Theorem 4.18, <m>E</m> is injective.
                </p>
              </proof>
            </theorem>

            <corollary xml:id="lem-4.27"><title>Injectives Closed Under Quotients in PIDs</title>
              <statement>
                <p>
                  Over a principal ideal domain, quotients of injective modules are injective.
                </p>
              </statement>

              <proof>
                <p>
                  If <m>E</m> is injective, it is also divisible, by <xref ref="lem-4.24"/>. Given any submodule <m>D \subseteq E</m>, any <m>e \in E</m>, and a nonzero <m>r \in R</m>, there exists <m>y \in E</m> such that <m>r y=e</m>, and so this also holds in <m>E / D</m>. 
                  Then <m>E / D</m> is divisible, and thus injective by <xref ref="lem-4.26"/>.  
                  <fn>Using fancy words you might learn in Commutative Algebra II, this ring <m>R</m> is an example of a complete intersection, which is a subclass of Gorenstein rings. Moreover, <m>\operatorname{dim} R=0</m> - this is something you'd learn about in Commutative Algebra II. Now it turns out (and this is a nontrivial fact) that Gorenstein rings of dimension 0 are injective modules over themselves.</fn>
                </p>
              </proof>
            </corollary>

            <p>
              Given an injective abelian group, we can always use it to construct an injective <m>R</m>-module over our favorite ring <m>R</m>.
            </p>

            <lemma xml:id="lem-4.28">
              <statement>
                <p>
                  Given an injective abelian group <m>D</m> and a ring <m>R, \operatorname{Hom}_{\mathbb{Z}}(R, D)</m> is an injective <m>R</m>-module.
                </p>
              </statement>

              <proof>
                <p>
                  Let <m>E:=\operatorname{Hom}_{\mathbb{Z}}(R, D)</m>. 
                  This abelian group <m>E</m> is an <m>R</m>-module, via
                  <me>r \cdot f:=(a \mapsto f(r a))</me>
                </p>
          
                <p>
                  We claim that <m>E</m> is actually an injective <m>R</m>-module. 
                  By <xref ref="thm-4.15"/>, it is sufficient to prove that <m>\operatorname{Hom}_{R}\left(-, \operatorname{Hom}_{\mathbb{Z}}(R, D)\right)</m> is an exact functor. 
                  By <xref ref="cor-3.61"/>, <m>\operatorname{Hom}_{R}\left(-, \operatorname{Hom}_{\mathbb{Z}}(R, D)\right)</m> is naturally isomorphic to <m>\operatorname{Hom}_{\mathbb{Z}}\left(-\otimes_{\mathbb{Z}} R, D\right)</m>.
                  This last functor is the composition of
                  <me>\operatorname{Hom}_{\mathbb{Z}}\left(-\otimes_{\mathbb{Z}} R, D\right)=\operatorname{Hom}_{\mathbb{Z}}(-, D) \circ\left(-\otimes_{\mathbb{Z}} R\right)</me>
                </p>
          
                <p>
                  On the one hand, <m>-\otimes_{\mathbb{Z}} R</m> is naturally isomorphic to the identity on <m>R</m>-Mod, by <xref ref="lem-3.40"/>, so it is exact. 
                  On the other hand, <m>D</m> is an injective <m>\mathbb{Z}</m>-module, so <m>\operatorname{Hom}_{\mathbb{Z}}(-, D)</m> is exact by <xref ref="thm-4.15"/>. 
                  The composition of exact functors is exact, and thus <m>\operatorname{Hom}_{R}\left(-, \operatorname{Hom}_{\mathbb{Z}}(R, D)\right)</m> is exact.
                </p>
              </proof>
            </lemma>

            <example>
              <p>
                Example 4.29. 
                Since <m>\mathbb{Q}</m> is a divisible abelian group, by <xref ref="lem-4.28"/> for any ring <m>R</m> the <m>R</m>-module <m>\operatorname{Hom}_{\mathbb{Z}}(R, \mathbb{Q})</m> is injective.
              </p>
            </example>

          </subsection>

          <subsection xml:id="subsec-inject-embed"><title>Every Module Embeds into an Injective Module</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>

            <p>
              When we talked about projective modules, we showed that every module is a quotient of a projective - in fact, every module is a quotient of a free module. 
              The dual statement is true as well: that every module embeds into an injective module. 
              We will soon see that these two statements are extremely important.
            </p>
      
            <p>
              While the statement about projectives is relatively simple - it's essentially a consequence of the universal property of free modules - the fact about injectives is a lot more delicate; 
              the work we just did on divisible modules was precisely so we could show this deep and important fact.
            </p>
      
            <p>
              First, we show that every abelian group can be embedded into an injective abelian group.
            </p>

            <lemma xml:id="lem-4.30">
              <statement>
                <p>
                  Every abelian group <m>M</m> is a submodule of some injective abelian group.
                </p>
              </statement>

              <proof>
                <p>
                  On the one hand, <m>M</m> is a quotient of some free abelian group, say <m>M \cong\left(\oplus_{i} \mathbb{Z}\right) / K</m>.
                  Now <m>\mathbb{Z}</m> embeds in <m>\mathbb{Q}</m>, and thus <m>M</m> embeds into a quotient of <m>\oplus_{i} \mathbb{Q}</m>. 
                  By Example 4.20, <m>\mathbb{Q}</m> is an injective abelian group, and by Corollary <m>4.19, \oplus_{i} \mathbb{Q}</m> is an injective abelian group, since <m>\mathbb{Z}</m> is a noetherian ring. 
                  By <xref ref="lem-4.27"/>, any quotient of <m>\oplus_{i} \mathbb{Q}</m> is also injective, so we have shown that <m>M</m> embeds into an injective abelian group, say <m>D</m>.
                </p>
          
                <p>
                  In fact, the proof above can be repeated over any PID: if <m>R</m> is a PID, we can show that any <m>R</m>-module <m>M</m> embeds into an injective module, and in fact <m>M</m> embeds into some number of copies of the fraction field <m>Q</m>.
                </p>
              </proof>
            </lemma>
      
            <p>
              We can finally show that over any ring, every module can be embedded into an injective module.
            </p>

            <theorem xml:id="thm-4.31">
              <statement>
                <p>
                  Every <m>R</m>-module <m>M</m> is a submodule of some injective <m>R</m>-module.
                </p>
              </statement>

              <proof>
                <p>
                  First, by <xref ref="lem-4.30"/> we can view <m>M</m> as a subgroup of some injective abelian group <m>D</m>. 
                  Let <m>i: M \longrightarrow D</m> be the inclusion map and <m>E:=\operatorname{Hom}_{\mathbb{Z}}(R, D)</m>.
                </p>
          
                <p>
                  By <xref ref="lem-4.28"/>, <m>E</m> is an injective <m>R</m>-module. 
                  Since Hom is left exact, by <xref ref="thm-3.14"/>, <m>\operatorname{Hom}_{\mathbb{Z}}(R,-)</m> preserves the inclusion <m>I</m>, so we have an inclusion <m>\operatorname{Hom}_{\mathbb{Z}}(R, M) \subseteq \operatorname{Hom}_{\mathbb{Z}}(R, D)</m>. 
                  Now consider the map
                  <me>
                    \begin{aligned}
                    &amp; M \stackrel{\psi}{\longrightarrow} \operatorname{Hom}_{\mathbb{Z}}(R, M) \\
                    &amp; m \longrightarrow(r \mapsto r m) .
                    \end{aligned}
                  </me>
                </p>
          
                <p>
                  This is an <m>R</m>-module homomorphism:
                  <ul>
                    <li>
                      <p>
                        Given <m>a, b \in M</m>,
                        <me>\psi(a+b)(r)=r(a+b)=r a+r b=\psi(a)(r)+\psi(b)(r)</me>
                        so <m>\psi(a+b)=\psi(a)+\psi(b)</m>.
                      </p>
                    </li>
          
                    <li>
                      <p>
                        Given <m>r \in R, m \in M</m>, and <m>s \in R</m>,
                        <me>\psi(r m)(s)=s(r m)=r(s m)=r \psi(m)(s),</me>
                        so <m>\psi(r m)=r \psi(m)</m>.
                      </p>
                    </li>
                  </ul>
                </p>
          
                <p>
                  Moreover, if <m>\psi(m)=0</m> then <m>m=\psi(m)(1)=0</m>. 
                  So <m>\psi</m> is injective, and thus composing <m>\psi</m> with our previous inclusion <m>\operatorname{Hom}_{\mathbb{Z}}(R, M) \subseteq \operatorname{Hom}_{\mathbb{Z}}(R, D)</m> gives us an inclusion <m>\varphi</m> of <m>M</m> into the injective <m>R</m>-module <m>\operatorname{Hom}_{\mathbb{Z}}(R, D)</m>. 
                  However, the inclusion <m>\operatorname{Hom}_{\mathbb{Z}}(R, M) \subseteq \operatorname{Hom}_{\mathbb{Z}}(R, D)</m> is a priori only a map of abelian groups, so we should check that <m>\varphi</m> is indeed <m>R</m>-linear. 
                  In order to do this, we need to be careful (at least in the case when <m>R</m> is not commutative) with how we defined the left <m>R</m>-module structure on <m>\operatorname{Hom}_{\mathbb{Z}}(R, D)</m> in Exercise 56: 
                  this is a situation where we view <m>R</m> as a <m>(\mathbb{Z}, R)</m>-bimodule and <m>D</m> as a left <m>\mathbb{Z}</m>-module, so <m>\operatorname{Hom}_{\mathbb{Z}}(R, D)</m> is a left <m>R</m>-module via
                  <me>r \cdot f \text { is the } R \text {-map given by }(r \cdot f)(a)=f(a r) \text {. }</me>
                </p>
          
                <p>
                  The map we need to show is <m>R</m>-linear is
                  <me>
                    \begin{aligned}
                    &amp; M \stackrel{\varphi}{\longrightarrow} \operatorname{Hom}_{\mathbb{Z}}(R, D) \\
                    &amp; m \longmapsto \varphi_{m}=(r \mapsto i(r m)) .
                    \end{aligned}
                  </me>
                  Regarding <m>i</m> as a simple inclusion, <m>i(m)</m> simply views the element <m>m</m> as an element of <m>D</m>; 
                  to simplify notation, we drop the <m>i</m> : so for each <m>m \in M, \varphi(m)</m> is the map <m>\varphi_{m}: R \longrightarrow D</m> given by
                  <me>\varphi_{m}(r)=r m</me>
                  For every <m>r \in R, m \in M</m>, and <m>s \in R</m>,
                </p>
          
                <p>
                  <me>
                    \begin{array}{rrr}
                    \varphi_{r m}(s) &amp; =s(r m) &amp; \text { by definition } \\
                    &amp; =(s r) m &amp; \\
                    &amp; =\varphi_{m}(s r) &amp; \text { using the module axioms } \\
                    &amp; =r \varphi_{m}(s) &amp; \text { by definition } \\
                    &amp; &amp; \text { by defition of the left } R \text {-module structure on } \operatorname{Hom}_{\mathbb{Z}}(R, D)
                    \end{array}
                  </me>
                  so <m>\varphi(r m)=r \varphi(m)</m>. 
                  This shows that <m>\varphi</m> is an inclusion of <m>R</m>-modules.
                </p>
              </proof>
            </theorem>

            <p>
              And finally, just like we did for projectives, we can characterize injectives in terms of split short exact sequences.
            </p>

            <theorem xml:id="thm-4.32">
              <statement>
                <p>
                  An <m>R</m>-module <m>I</m> is injective if and only if every short exact sequence
                  <me>0 \longrightarrow I \longrightarrow B \longrightarrow C \longrightarrow 0</me>
                  splits.
                </p>
              </statement>

              <proof>
                <p>
                  Let <m>I</m> be an injective <m>R</m>-module, and consider any short exact sequence
                  <me>0 \longrightarrow I \stackrel{i}{\longrightarrow} B \stackrel{p}{\longrightarrow} C \longrightarrow 0</me>
                  Since <m>I</m> is injective, there exists a map <m>g</m> making
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-122(1).jpg" width="30%"/>
                <p>
                  commute, and such a <m>g</m> gives a splitting for our short exact sequence.
                </p>
          
                <p>
                  Conversely, suppose that every short exact sequence <m>0 \longrightarrow I \longrightarrow B \longrightarrow C \longrightarrow 0</m> splits, and consider a diagram
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-122.jpg" width="30%"/>
                <p>
                  By <xref ref="thm-4.31"/>, <m>I</m> embeds into some injective <m>R</m>-module <m>E</m>, say by the inclusion <m>j</m>. 
                  By assumption, the short exact sequence
                  <me>0 \longrightarrow I \stackrel{j}{\longrightarrow} E \longrightarrow \text { coker } j \longrightarrow 0</me>
                  splits, so there exists a map <m>q: E \longrightarrow I</m> such that <m>q i=\mathrm{id}_{I}</m>. 
                  Since <m>E</m> is injective, we can lift <m>i</m> through <m>j f</m>, obtaining an <m>R</m>-module homomorphism <m>\ell</m> such that
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-122(2).jpg" width="30%"/>
                <p>
                  commutes. Now <m>g:=q \ell</m> satisfies
                  <me>
                    \begin{array}{rlr}
                    g i &amp; =q \ell i &amp; \text { by definition } \\
                    &amp; =q j f &amp; \text { by commutativity } \\
                    &amp; =f &amp; \text { since } q j=\mathrm{id}_{I},
                    \end{array}
                  </me>
                </p>
                <image source="2023_10_23_e2d6a27704be928b3deeg-123.jpg" width="30%"/>
                <p>
                  commutes.
                </p>
              </proof>
            </theorem>

            <p>
              Before we move on from injective modules, let us say a word about how the story continues. 
              The next chapter is quite beautiful, and it is a shame we have no time to discuss it in detail this semester.
            </p>
      
            <p>
              We proved above that every module <m>M</m> is a submodule of some injective module. 
              One can even do better and talk about the smallest injective module that <m>M</m> embeds in; 
              this is called the injective hull <m>E(M)</m> of <m>M</m>. 
              One could describe <m>E(M)</m> by saying that it is the intersection of all the injective modules that contain <m>M</m>, but this is not a very practical description. 
              Injective hulls can also be described through the theory of essential extensions, a topic which we do not have time to discuss this semester. 
              We leave the definition here just for fun, but we do not have the time to talk about it at length.
            </p>

            <definition xml:id="def-4.33">
              <statement>
                <p>
                  Let <m>M \subseteq E</m>. We say <m>E</m> is an <em>essential extension</em> of <m>M</m> if every nonzero submodule <m>N \subseteq E</m> intersects <m>M</m> nontrivially, meaning <m>E \cap M \neq 0</m>. 
                  More generally, an injective map <m>\alpha: M \longrightarrow E</m> is an essential extension if <m>\alpha(M) \subseteq E</m> is an essential extension in the sense above.
                </p>
              </statement>
            </definition>
      
            <p>
              One then shows that an <m>R</m>-module <m>M</m> is injective if and only if it has no proper essential extensions <m>E \supseteq M</m>. 
              This proves that a maximal essential extension <m>E</m> of <m>M</m> is injective, and that there are no other injective modules <m>I</m> with of <m>M \subseteq I \subseteq E</m>. 
              Moreover, one can show that any two maximal essential extension of <m>M</m> are isomorphic - and thus we can talk about the maximal essential extension of <m>M</m>, up to isomorphism, which is
            </p>
      
            <p>
              But the theory of injectives, and injective hulls in particular, is much more complicated than the theory of projectives. 
              When <m>M</m> is a finitely generated module, we can always find a finitely generated projective (even free!) module surjecting onto <m>M</m>; 
              in contrast, the injective hull <m>E(M)</m> might not be finitely generated - in fact, <m>E(M)</m> is typically not finitely generated even when <m>M</m> is cyclic.
            </p>
      
            <p>
              The story of the structure of injective modules then continues in a beautiful way. 
              Over a noetherian ring, it turns out that every injective module can be decomposed into a direct sum of injective modules of the form <m>E(R / P)</m>, where <m>P</m> is a prime ideal in <m>R</m>. 
              Moreover, the injective modules <m>E(R / P)</m> are the indecomposable injective modules, so the basic building blocks of injective modules. 
              One can in fact compute the injective hull of any finitely generated <m>R</m>-module very explicitly. 
              A lot of this was proved in Eben Matlis' beautiful PhD thesis [Mat58], but sadly we do not have time for the details this semester. 
              The details, however, are very important, for example to develop the theory of local cohomology - a topic which we will briefly mention later on.
            </p>

          </subsection>

          <outcomes>
            <ul>
              <li>
                <p>
                  Injective modules make <m>\operatorname{Hom}_{R}(-, I)</m> exact. 
                </p>
              </li>

              <li>
                <p>
                  The Baer Criterion tells us that a module <m>E</m> is injective if and only if a map from an ideal to <m>E</m> can be extended to all of <m>R</m>.
                </p>
              </li>

              <li>
                <p>
                  In a domain injective modules are divisible and in a PID divisible modules are injective.
                </p>
              </li>

              <li>
                <p>
                  Every <m>R</m>-module is a submodule of an injective module.
                </p>
              </li>
            </ul>
          </outcomes>
          
        </section>

        <section xml:id="sec-flat"><title>Flat Modules</title>

          <objectives>
            <ul>
              <li>
                
              </li>
            </ul>
          </objectives>

          <subsection xml:id="subsec-flat"><title>Definition</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>
          
            <p>
              Finally, we turn to the modules that make the tensor product exact.
            </p>

            <definition xml:id="def-4.34"><title>Flat Module</title>
              <statement>
                <p>
                  An <m>R</m>-module <m>M</m> is said to be <em>flat</em> if <m>M \otimes_{R}-</m> is an exact functor.
                </p>
              </statement>
            </definition>

            <remark>
              <p>
                Remark 4.35. 
                By <xref ref="thm-3.47"/>, <m>M \otimes_{R}</m> - is right exact. 
                Therefore, <m>M</m> is flat if and only if for every injective <m>R</m>-module map <m>i: A \longrightarrow B</m>,
                <me>M \otimes_{R} A \stackrel{1 \otimes i}{\longrightarrow} M \otimes_{R} B \quad \text { is injective. }</me>
              </p>
            </remark>

            <lemma xml:id="lem-4.36"><title>Direct Summands of Flat Modules are Flat</title>
              <statement>
                <p>
                  Given a family of <m>R</m>-modules <m>\left\{M_{i}\right\}_{i \in I}</m>, the direct sum <m>\oplus_{i} M_{i}</m> is flat if and only if every <m>M_{i}</m> is flat. 
                  In particular, direct summands of flat modules are flat.
                </p>
              </statement>

              <proof>
                <p>
                  Given a family of <m>R</m>-module homomorphisms <m>f_{i}: M_{i} \longrightarrow N_{i}</m>, there is an <m>R</m>-module homomorphism
                  <me>
                    \begin{array}{r}
                    \bigoplus_{i \in I} M_{i} \stackrel{\left(f_{i}\right)_{i \in I}}{\longmapsto} \bigoplus_{i \in I} N_{i} \\
                    \quad\left(m_{i}\right) \longmapsto
                    \end{array}
                  </me>
                  which is injective if and only if every <m>f_{i}</m> is injective.
                </p>
          
                <p>
                  Let <m>f: A \longrightarrow B</m> be an injective <m>R</m>-module homomorphism. 
                  There is a commutative diagram
                  <me>
                    \begin{aligned}
                    &amp; \left(\bigoplus_{i \in I} M_{i}\right) \otimes_{R} A \stackrel{\cong}{\longrightarrow} \bigoplus_{i \in I} M_{i} \otimes_{R} A \\
                    &amp; \varphi:=1 \otimes f \downarrow \\
                    &amp; \left(\bigoplus_{i \in I} M_{i}\right) \otimes_{R} B \stackrel{\downarrow}{\cong} \cong \bigoplus_{i \in I} M_{i} \otimes_{R} B
                    \end{aligned}
                  </me>
                  where the horizontal maps are the isomorphisms from <xref ref="thm-3.41"/>. 
                  In particular, <m>\varphi</m> is injective if and only if <m>\psi</m> is injective. 
                  Moreover, <m>\psi</m> is injective if and only if each component is injective, meaning <m>1 \otimes f: M_{i} \otimes A \longrightarrow M_{i} \otimes B</m> is injective for all <m>i</m>.
                </p>
          
                <p>
                  On the one hand, <m>\bigoplus_{i \in I} M_{i}</m> is flat if and only if for every injective map <m>f</m>, the corresponding <m>\phi</m> is injective. 
                  On the other hand, all the <m>M_{i}</m> are flat if and only if for every injective map <m>f, 1 \otimes f: M_{i} \otimes A \longrightarrow M_{i} \otimes B</m> is injective for all <m>i</m>, or equivalently, as explained above, if <m>\psi</m> is injective for any given injective map <m>f</m>. 
                  This translates into the equivalence we want to show.
                </p>
              </proof>
            </lemma>
      
            <p>
              All projectives are flat.
            </p>
      
            <theorem xml:id="thm-4.37"><title>Every Projective Module is Flat</title>
              <statement>
                <p>
                  Let <m>R</m> be any ring. Every projective <m>R</m>-module is flat.
                </p>
              </statement>

              <proof>
                <p>
                  First, recall that <m>R \otimes_{R}-</m> is naturally isomorphic to the identity functor, by Lemma 3.40, and thus exact (see Remark 3.11). 
                  This shows that <m>R</m> is flat, and thus any free module, being a direct sum of copies of <m>R</m>, must also be flat by <xref ref="lem-4.36"/>. 
                  Finally, every projective module is a direct summand of a free module, by <xref ref="thm-4.9"/>. 
                  Direct summands of flat modules are flat, by <xref ref="lem-4.36"/>, so every projective module is flat.
                </p>
              </proof>
            </theorem>
      
            <p>
              We can test whether a given module if flat by looking at the finitely generated submodules.
            </p>

            <theorem xml:id="thm-4.38"><title>Flatness and Finitely Generated Submodules</title>
              <statement>
                <p>
                  If every finitely generated submodule of <m>M</m> is flat, then <m>M</m> is flat.
                </p>
              </statement>

              <proof>
                <p>
                  Let <m>i: A \longrightarrow B</m> be an injective map of <m>R</m>-modules. 
                  We want to show that
                  <me>M \otimes_{R} A \stackrel{1 \otimes i}{\longrightarrow} M \otimes_{R} B</me>
                  is injective. 
                  Suppose that <m>u \in \operatorname{ker}\left(1_{M} \otimes i\right)</m>. 
                  We are going to construct a finitely generated submodule <m>N \subseteq M</m>, with <m>j: N \rightarrow M</m> the inclusion, and an element <m>v \in N \otimes_{R} A</m> such that <m>v \in \operatorname{ker}\left(1_{N} \otimes i\right)</m> and <m>u=\left(j \otimes 1_{A}\right)(v)</m>. 
                  Once we do that, our submodule <m>N</m> is finitely generated, and thus flat by assumption, so <m>1_{N} \otimes i</m> is injective; therefore, <m>v=0</m> and thus we must have <m>u=0</m>. 
                  Therefore, <m>1_{M} \otimes i</m> is injective, and we conclude that <m>M</m> is flat.
                </p>
          
                <p>
                  Let's say that <m>u=m_{1} \otimes a_{1}+\cdots+m_{n} \otimes a_{n}</m>.
                  In <xref ref="thm-3.22"/>, we constructed the tensor product <m>M \otimes_{R} B</m> as a quotient of the free module <m>F</m> on <m>M \times B</m> by the submodule <m>S</m> with all the necessary relations we need to impose. 
                  This gives us a short exact sequence
                  <me>0 \longrightarrow S \longrightarrow F \stackrel{\pi}{\longrightarrow} M \otimes_{R} B \longrightarrow 0</me>
                  The fact that <m>m_{1} \otimes i\left(a_{1}\right)+\cdots+m_{n} \otimes i\left(a_{n}\right)=0</m> means we can rewrite this element as <m>\pi(s)</m> for some <m>s \in S</m>. 
                  This element <m>s</m> is a linear combination of elements of finitely many <m>(m, b) \in M \times B</m>. 
                  Let <m>c_{1}, \ldots, c_{t}</m> be all the <m>M</m>-coordinates of those elements.
                </p>
          
                <p>
                  Now we take <m>N</m> to be the finitely generated submodule of <m>M</m> generated by <m>m_{1}, \ldots, m_{n}</m> and <m>c_{1}, \ldots, c_{t}</m>, and <m>v=m_{1} \otimes a_{1}+\cdots+m_{n} \otimes a_{n} \in N \otimes A</m>. 
                  Now
                  <me>\left(j \otimes 1_{A}\right)(v)=\left(j \otimes 1_{A}\right)\left(m_{1} \otimes a_{1}+\cdots+m_{n} \otimes a_{n}\right)=m_{1} \otimes a_{1}+\cdots+m_{n} \otimes a_{n} \in M \otimes_{R} A,</me>
                  and
                  <me>\left(1_{N} \otimes i\right)(v)=\left(1_{N} \otimes i\right)\left(m_{1} \otimes a_{1}+\cdots+m_{n} \otimes a_{n}\right)=m_{1} \otimes i\left(a_{1}\right)+\cdots+m_{n} \otimes i\left(a_{n}\right)=0</me>
                  as desired.
                </p>
              </proof>
            </theorem>

            <p>
              The reason we needed to add in these extra elements <m>n_{i}</m> is that a priori <m>N \otimes B</m> is not necessarily a submodule of <m>M \otimes B</m>, so we do not necessarily have <m>m_{1} \otimes i\left(a_{1}\right)+\cdots+m_{n} \otimes i\left(a_{n}\right)=0</m> in <m>\left(R m_{1}+\cdots+R m_{n}\right) \otimes B</m> without adding in all relations that make it true.
            </p>

          </subsection>

          <subsection xml:id="subsec-torsion"><title>Torsion Submodules</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>

            <definition xml:id="def-4.39"><title>Torsion Submodule</title>
              <statement>
                <p>
                  Let <m>R</m> be a domain and <m>M</m> be an <m>R</m>-module. 
                  The <em>torsion submodule</em> of <m>M</m> is
                  <me>T(M):=\{m \in M \mid r m=0 \text { for some regular element } r \in R\}</me>
                  The elements of <m>T(M)</m> are called <em>torsion elements</em>, and we say that <m>M</m> is <em>torsion</em> if <m>T(M)=M</m>. 
                  Finally, <m>M</m> is <em>torsion free</em> if <m>T(M)=0</m>.
                </p>
              </statement>
            </definition>

            <theorem xml:id="thm-torsion-free-cps"><title>Closure Properties of Torsion Free Modules</title>
              <statement>
                <p>
                  Torsion free modules are closed under taking submodules, quotients, direct sums, and localizations.
                </p>
              </statement>
            </theorem>
            
            <lemma xml:id="lem-4.40"><title>Flat Implies Torision Free in Domains</title>
              <statement>
                <p>
                  If <m>R</m> is a domain and <m>M</m> is a flat <m>R</m>-module, then <m>M</m> is torsion free.
                </p>
              </statement>

              <proof>
                <p>
                  Let <m>Q=\operatorname{frac}(R)</m> be the fraction field of <m>R</m>, which is a torsion free <m>R</m>-module.
                  Now <m>M \otimes_{R} Q</m> is a <m>Q</m>-vector space, so isomorphic to a direct sum of copies of <m>Q</m>. 
                  In particular, <m>M \otimes_{R} Q</m> is torsion free as an <m>R</m>-module. 
                  Since <m>M</m> is flat, the inclusion <m>R \subseteq Q</m> induces an injective <m>R</m>-module map
                  <me>0 \longrightarrow M \otimes_{R} R \longrightarrow M \otimes_{R} Q</me>
                  and since <m>M \cong M \otimes_{R} R</m>, by <xref ref="lem-3.40"/>, we conclude that <m>M</m> is isomorphic to a submodule of <m>M \otimes_{R} Q</m>. 
                  By <xref ref="thm-torsion-free-cps"/>, submodules of torsion free modules are also torsion free, so <m>M</m> is torsion free.
                </p>
              </proof>
            </lemma>

            <p>
              In general, the converse does not hold.
            </p>

            <example><title>Torsion Free but not Flat Module</title>
              <p>
                Example 4.41. 
                Let <m>k</m> be a field and <m>R=k[x, y]</m>. 
                Consider the ideal <m>\mathfrak{m}=(x, y)</m>. 
                This is a submodule of the torsion free module <m>R</m>, and thus torsion free by <xref ref="thm-torsion-free-cps"/>. 
                However, it is not flat. 
                For example, when we apply <m>R / \mathfrak{m} \otimes_{R}-</m> to the inclusion <m>\mathfrak{m} \subseteq R</m> we obtain a map of <m>R / \mathfrak{m}</m>-vector spaces
                <me>\mathfrak{m} / \mathfrak{m}^{2} \longrightarrow R / \mathfrak{m}</me>
              </p>
        
              <p>
                This map cannot possibly be injective: <m>\mathfrak{m} / \mathfrak{m}^{2}</m> is a <m>2</m>-dimensional <m>R / \mathfrak{m}</m>-vector space, while <m>R / \mathfrak{m}</m> is <m>1</m>-dimensional.
              </p>
            </example>
      
            <p>
              The converse does hold over a PID.
            </p>

            <theorem xml:id="lem-4.42"><title>Flat iff Torsion Free in PID</title>
              <statement>
                <p>
                  If <m>R</m> is a principal ideal domain, an <m>R</m>-module <m>M</m> is flat if and only if it is torsion free.
                </p>
              </statement>

              <proof>
                <p>
                  <m>(\Rightarrow)</m> This is just a special case of <xref ref="lem-4.40"/>.
                </p>
          
                <p>
                  <m>(\Leftarrow)</m> Suppose <m>M</m> is a torsion free finitely generated <m>R</m>-module. 
                  The structure theorem for PIDs says that <m>M</m> must be isomorphic to a direct sum of copies of cyclic modules. 
                  The cyclic module <m>R / I</m> has torsion (all the elements are killed by <m>I</m> ) unless <m>I=0</m>. 
                  Therefore, <m>M</m> must be isomorphic to a direct sum of copies of <m>R</m>, and thus free. 
                  By <xref ref="thm-4.3"/>, <m>M</m> is projective, and by <xref ref="thm-4.37"/> projectives are flat, so <m>M</m> is flat.
                </p>
          
                <p>
                  Now let <m>M</m> be any torsion free <m>R</m>-module. 
                  All of the finitely generated submodules of <m>R</m> are also torsion free by <xref ref="thm-torsion-free-cps"/>, and thus flat by what we have shown so far. 
                  By <xref ref="thm-4.38"/>, <m>M</m> must be flat.
                </p>
              </proof>
            </theorem>

            <p>
              Not all flat modules are projective.
            </p>

            <example><title>Flat but not Projective Module</title>
              <p>
                Example 4.43. 
                The <m>\mathbb{Z}</m>-module <m>\mathbb{Q}</m> is torsion free and thus flat, by <xref ref="lem-4.42"/>. 
                However, <m>\mathbb{Q}</m> is not a projective <m>\mathbb{Z}</m>-module. 
                Suppose by contradiction, that <m>\mathbb{Q}</m> is a projective <m>\mathbb{Z}</m>-module. 
                By <xref ref="thm-4.9"/>, <m>\mathbb{Q}</m> must be a direct summand of a free module, say <m>F=\bigoplus_{I} \mathbb{Z}</m>. 
                Consider the inclusion <m>\iota: \mathbb{Q} \hookrightarrow F</m>, and pick <m>i \in I</m> such that the image of <m>\mathbb{Q}</m> contains some element with a nonzero entry in the <m>i</m> component. 
                Now consider the projection <m>\pi: F \longrightarrow \mathbb{Z}</m> onto the <m>i</m> th factor. 
                By assumption, the composition <m>\pi i: \mathbb{Q} \longrightarrow \mathbb{Z}</m> is nonzero. 
                However, there are no nontrivial abelian group homomorphisms <m>\mathbb{Q} \longrightarrow \mathbb{Z}</m>, contradicting the fact that <m>\pi i</m> is nonzero. 
                We conclude that <m>\mathbb{Q}</m> is not projective.
              </p>
            </example>

            <p>
              However, for finitely generated modules over a commutative noetherian local ring, every flat module is free, and thus flat, projective, and free all coincide. 
              However, to prove that we need a little bit of commutative algebra, which we introduce in the next section.
            </p>
    
            <p>
              Finally, here is a very important example: localization is flat.
            </p>

            <theorem xml:id="thm-4.44"><title>Flatness of Localization</title>
              <statement>
                <p>
                  Let <m>R</m> be a commutative ring, and <m>W \ni 1</m> a multiplicative subset of <m>R</m>. 
                  Then <m>W^{-1} R</m> is flat over <m>R</m>.
                </p>
              </statement>

              <proof>
                <p>
                  By <xref ref="thm-3.57"/>, tensoring with <m>W^{-1} R</m> is localizing at <m>W</m>. 
                  But localization is exact, so tensoring with <m>W^{-1} R</m> is exact, and thus <m>W^{-1} R</m> is a flat <m>R</m>-module.
                </p>
              </proof>
            </theorem>

            <example>
              <p>
                If <m>R</m> is a domain then its fraction field <m>Q</m> is a flat module.
              </p>
            </example>

          </subsection>

          <outcomes>
            <ul>
              <li>
                <p>

                </p>
              </li>
            </ul>
          </outcomes>
    
        </section>
    
        <section xml:id="commutative-local-rings"><title>Commutative Local Rings</title>
    
          <p>
            We have shown that
            <me>\text { Free } \Longrightarrow \text { projective } \Longrightarrow \text { flat. }</me>
          </p>
    
          <p>
            Over a local ring, these three notions actually coincide. 
            To show this, we need a little bit of commutative algebra. 
            First, some notation: when <m>R</m> is a local ring, meaning <m>R</m> has a unique maximal ideal <m>\mathfrak{m}</m>, we write <m>(R, \mathfrak{m})</m> to denote the ring <m>R</m> and its maximal ideal. 
            Now note that for any <m>R</m>-module <m>M</m>, the module <m>M / \mathfrak{m} M</m> is annihilated by <m>\mathfrak{m}</m>, so it is also a module over a ring <m>R / \mathfrak{m}</m>, which is a field.
          </p>
    
          <p>
            The following is a classical result in commutative algebra, known by some as Nakayama's Lemma. 
            As noted in [Mat89, page 8], Nakayama himself claimed that this should be attributed to Krull and Azumaya, but it's not clear which of the three actually had the commutative ring statement first. 
            So some authors (eg, Matsumura) prefer to refer to it as NAK. 
            There are actually a range of statements, rather than just one, that go under the banner of Nakayama's Lemma a.k.a. NAK.
          </p>
    
          <p>
            Theorem <m>4.45(\mathrm{NAK})</m>. Let <m>(R, \mathfrak{m}, k)</m> be a local ring, and <m>M</m> be a finitely generated module. If <m>M=\mathfrak{m} M</m>, then <m>M=0</m>.
          </p>
    
          <p>
            The theorem above is the theorem most commonly referred to as NAK. 
            The proof involves only elementary tools, and a fun linear algebra-inspired trick called the Determinantal Trick. 
            While we will not include the details here, they can be found in any standard Commutative Algebra book. 
            We will however use this result to prove another statement that is also commonly referred to as NAK, which allows us to talk about minimal generating sets for finitely generated modules over local rings.
          </p>
    
          <p>
            Remark 4.46. 
            Let <m>R</m> be any commutative ring, and consider an <m>R</m>-module <m>M</m> and an ideal <m>I</m>. 
            If <m>I M=0</m>, meaning that <m>a m=0</m> for all <m>a \in I</m> and all <m>m \in M</m>, then <m>M</m> can be given the structure of an <m>R / I</m>-module, as follows: 
            for any <m>m \in M</m> and any <m>r \in R</m>,
            <me>(r+I) m=r m</me>
            The fact that <m>I</m> kills <m>M</m> is what makes this action well-defined. 
            The fact that <m>M</m> is actually an <m>R</m>-module under this action is a consequence of the fact that <m>M</m> is an <m>R</m>-module; 
            checking these details is routine, and we leave them as an exercise.
          </p>
    
          <p>
            Notice that the structure of <m>M</m> as an <m>R / I</m>-module is essentially the same as its structure as an <m>R</m>-module. 
            There are many properties of <m>M</m> as an <m>R</m>-module that pass onto its <m>R / I-</m> module structure, and typically such results are easy to check.
          </p>
    
          <p>
            Here is a special case of this: if <m>(R, \mathfrak{m})</m> is a commutative local ring, and <m>M</m> is an <m>R</m>-module, then the module <m>M / \mathfrak{m} M</m> is killed by <m>\mathfrak{m}</m>, and thus it is also a module over <m>R / \mathfrak{m}</m>. 
            Now notice that <m>R / \mathfrak{m}</m> is a field, so <m>M / \mathfrak{m} M</m> is actually a vector space over the field <m>R / \mathfrak{m}</m>.
          </p>
    
          <p>
            Theorem 4.47. 
            Let <m>(R, \mathfrak{m})</m> be a commutative local ring, and <m>M</m> be a finitely generated module. 
            For <m>m_{1}, \ldots, m_{s} \in M</m>,
            <me>m_{1}, \ldots, m_{s} \text { generate } M \Longleftrightarrow \overline{m_{1}}, \ldots, \overline{m_{s}} \text { generate } M / \mathfrak{m} M</me>
            Thus, any generating set for <m>M</m> consists of at least <m>\operatorname{dim}_{k}(M / \mathfrak{m} M)</m> elements.
          </p>
    
          <p>
            Proof. The implication <m>(\Rightarrow)</m> is clear. For <m>(\Leftarrow)</m>, given <m>m_{1}, \ldots, m_{s} \in M</m> such that <m>\overline{m_{1}}, \ldots, \overline{m_{s}}</m> generate <m>M / \mathfrak{m} M</m>, consider
          </p>
    
          <p>
            <me>N:=R m_{1}+\cdots+R m_{s} \subseteq M</me>
          </p>
    
          <p>
            Since <m>M / \mathfrak{m} M</m> is generated by the image of <m>N</m>, we have <m>M=N+\mathfrak{m} M</m>. By taking the quotient by <m>N</m>, we see that
          </p>
    
          <p>
            <me>M / N=(N+\mathfrak{m} M) / N=\mathfrak{m}(M / N)</me>
          </p>
    
          <p>
            By Theorem 4.45, <m>M / N=0</m> and thus <m>M=N</m>.
          </p>
    
          <p>
            As we mentioned above, this allows us to talk about minimal generating sets.
          </p>
    
          <p>
            Definition 4.48. Let <m>(R, \mathfrak{m})</m> be a local ring, and <m>M</m> a finitely generated module. A set of elements <m>\left\{m_{1}, \ldots, m_{t}\right\}</m> is a minimal generating set of <m>M</m> if the images of <m>m_{1}, \ldots, m_{t}</m> form a basis for the <m>R / \mathfrak{m}</m> vector space <m>M / \mathfrak{m} M</m>.
          </p>
    
          <p>
            Note that every finitely generated module over a local ring has a minimal generating set, that every minimal generating set has the same number of elements, and that any set of generators for <m>M</m> contains a minimal generating set, all thanks to plain old linear algebra. In particular, we can now define the following:
          </p>
    
          <p>
            Definition 4.49. Let <m>M</m> be a finitely generated module over a commutative local ring <m>(R, \mathfrak{m})</m>. The minimal number of generators of <m>M</m>, denoted <m>\mu(M)</m>,, is the number of elements in any minimal generating set for <m>M</m>.
          </p>
    
          <p>
            We now have all the key commutative algebra ingredients needed to show that for finitely generated modules over a noetherian local ring, projective <m>=</m> free. However, the proof follows more easily with one more homological tool we haven't developed yet, so we will hold off on proving this for now - in fact, you will soon be able to prove it easily, so this will be in the next problem set.
          </p>
    
          <p>
            Exercise 58. Let <m>(R, \mathfrak{m})</m> be a commutative local ring, and let <m>M</m> be a finitely presented module. Then
          </p>
    
          <p>
            <me>M \text { is flat } \Longleftrightarrow M \text { is projective } \Longleftrightarrow M \text { is free. }</me>
          </p>
    
          <p>
            Kaplansky [Kap58] showed that this holds even for modules that are not necessarily finitely presented, but generated by countably many elements.
          </p>
    
          <p>
            Definition 4.50. An <m>R</m>-module <m>M</m> is locally free if <m>M_{P}</m> is free for every prime ideal <m>P</m>.
          </p>
    
          <p>
            Exercise 59. Let <m>R</m> be a commutative ring, <m>M</m> and <m>N</m> be <m>R</m>-modules, and <m>P</m> be a prime ideal. Show that
          </p>
    
          <p>
            <me>\left(M \otimes_{R} N\right)_{P} \cong M_{P} \otimes_{R_{P}} N_{P}</me>
          </p>
    
          <p>
            Exercise 60. Let <m>R</m> be a commutative ring, <m>P</m> be a prime ideal, and <m>M</m> be an <m>R_{P}</m>-module. Let <m>N</m> be <m>M</m> as an <m>R</m>-module via restriction of scalars. Then as <m>R_{P}</m>-modules, we have an isomorphism
          </p>
    
          <p>
            <me>N_{P} \cong M</me>
          </p>
    
          <p>
            Exercise 61. Let <m>R</m> be a commutative ring. Show that a homomorphism of <m>R</m>-modules <m>f: M \rightarrow N</m> is surjective if and only if <m>f_{P}</m> is surjective for all primes <m>P</m>.
          </p>

          <exercise xml:id="exe-62">
            <statement>
              <p>
                Let <m>R</m> be a noetherian ring, <m>W</m> be a multiplicative set, <m>M</m> be a finitely generated <m>R</m>-module, and <m>N</m> an arbitrary <m>R</m>-module. Show that
              </p>
        
              <p>
                <me>\operatorname{Hom}_{W^{-1} R}\left(W^{-1} M, W^{-1} N\right) \cong W^{-1} \operatorname{Hom}_{R}(M, N) \text {. }</me>
              </p>
        
              <p>
                In particular, if <m>P</m> is prime,
              </p>
        
              <p>
                <me>\operatorname{Hom}_{R_{P}}\left(M_{P}, N_{P}\right) \cong \operatorname{Hom}_{R}(M, N)_{P}</me>
              </p>
            </statement>
          </exercise>
    
          <p>
            Theorem 4.51. Let <m>R</m> be a commutative noetherian ring and let <m>M</m> be a finitely presented <m>R</m>-module. Then
          </p>
    
          <p>
            <me>M \text { is projective } \Longleftrightarrow M \text { is flat } \Longleftrightarrow M \text { is locally free. }</me>
          </p>
    
          <p>
            Proof. We already know that projectives are flat, by Theorem 4.37.
          </p>
    
          <p>
            Suppose <m>M</m> is flat. We claim that <m>M_{P}</m> is flat for every prime ideal <m>P</m>. First, note that <m>M_{P} \cong R_{P} \otimes_{R} M</m>, by Theorem 3.57; moreover, <m>R_{P}</m> is a flat <m>R</m>-module by Exercise 53 . Note moreover that any <m>R_{P}</m>-module can also be viewed as an <m>R</m>-module by extension of scalars along the canonical localization map. Now given any short exact sequence of <m>R_{P}</m>-modules, say
          </p>
    
          <p>
            <me>0 \longrightarrow A \longrightarrow B \longrightarrow C \longrightarrow 0</me>
          </p>
    
          <p>
            tensoring with <m>M_{P}</m> over <m>R_{P}</m> can be done in two steps: first we view this as a short exact sequence of <m>R</m>-modules, and tensor with <m>M</m>, but <m>M</m> is a flat <m>R</m>-module, so
          </p>
    
          <p>
            <me>0 \longrightarrow A \otimes_{R} M \longrightarrow B \otimes_{R} M \longrightarrow C \otimes_{R} M \longrightarrow 0</me>
          </p>
    
          <p>
            is exact. Then we tensor with <m>R_{P}</m>, but this is also flat <m>R</m>-module, so we get a short exact sequence again:
          </p>
    
          <p>
            <me>0 \longrightarrow\left(A \otimes_{R} M\right) \otimes_{R} R_{P} \longrightarrow\left(B \otimes_{R} M\right) \otimes_{R} R_{P} \longrightarrow\left(C \otimes_{R} M\right) \otimes_{R} R_{P} \longrightarrow 0</me>
          </p>
    
          <p>
            By Theorem 3.57 and Exercise 59, for each <m>R_{P}</m>-module <m>X</m> we have
          </p>
    
          <p>
            <me>\left(X \otimes_{R} M\right) \otimes_{R} R_{P} \cong\left(X \otimes_{R} M\right)_{P} \cong X_{P} \otimes_{R_{P}} M_{P}</me>
          </p>
    
          <p>
            But <m>X_{P} \cong X</m>, by ??, so we conclude that
          </p>
    
          <p>
            <me>\left(X \otimes_{R} M\right) \otimes_{R} R_{P} \cong X \otimes_{R_{P}} M_{P}</me>
          </p>
    
          <p>
            Thus
          </p>
    
          <p>
            <me>0 \longrightarrow A \otimes_{R_{P}} M_{P} \longrightarrow B \otimes_{R_{P}} M_{P} \longrightarrow C \otimes_{R_{P}} M_{P} \longrightarrow 0</me>
          </p>
    
          <p>
            is exact, and <m>M_{P}</m> is a flat <m>R_{P}</m>-module.
          </p>
    
          <p>
            So whenever <m>M</m> is flat, <m>M_{P}</m> is a flat <m>R_{P}</m>-module for all primes <m>P</m>. By Exercise <m>58, M_{P}</m> must be free over <m>R_{P}</m> for all primes <m>P</m>, that is, <m>M</m> is locally free.
          </p>
    
          <p>
            Finally, suppose that <m>M</m> is locally free. We want to show that <m>M</m> is projective. So by Theorem 4.4, we need to show that for all surjective <m>R</m>-module maps <m>f: A \rightarrow B</m>, the map <m>f_{*}: \operatorname{Hom}_{R}(M, A) \rightarrow \operatorname{Hom}_{R}(M, B)</m> is surjective. By Exercise 61 , it is enough to show that <m>f_{P}</m> is surjective for all primes <m>P</m>. By Exercise 62,
          </p>
    
          <p>
            <me>\operatorname{Hom}_{R_{P}}\left(M_{P}, A_{P}\right) \cong \operatorname{Hom}_{R}(M, A)_{P} \quad \text { and } \quad \operatorname{Hom}_{R_{P}}\left(M_{P}, B_{P}\right) \cong \operatorname{Hom}_{R}(M, B)_{P}</me>
          </p>
    
          <p>
            and
          </p>
    
          <p>
            <me>\left(f_{*}\right)_{P}=\left(f_{P}\right)_{*}: \operatorname{Hom}_{R_{P}}\left(M_{P}, A_{P}\right) \rightarrow \operatorname{Hom}_{R_{P}}\left(M_{P}, B_{P}\right) .</me>
          </p>
    
          <p>
            But <m>M_{P}</m> i free, and thus projective by Theorem 4.3, so <m>\left(f_{P}\right)_{*}</m> is surjective. Since this holds for all <m>P</m>, by Exercise 61 we conclude that <m>f_{*}</m> is surjective, and thus <m>M</m> is projective.
          </p>
    
          <p>
            Note that the noetherianity assumption is just so that finitely generated implies finitely presented; the statement is also true for a general commutative ring if instead of finitely generated modules we take finitely presented.
          </p>

          <outcomes>
            <ul>
              <li>
                <p>

                </p>
              </li>

              <li>
                <p>
                 
                </p>
              </li>

              <li>
                <p>

                </p>
              </li>

              <li>
                <p>

                </p>
              </li>
            </ul>
          </outcomes>

        </section>
        
      </chapter>

      <chapter xml:id="ch-resolutions"><title>Resolutions</title>

        <section xml:id="sec-proj-res"><title>Projective Resolutions</title>

          <objectives>
            <ul>
              <li>
                
              </li>
            </ul>
          </objectives>

          <subsection xml:id="subsec-proj-res-def"><title>Definition, Existence, Examples</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>
            
            <p>
              To describe an <m>R</m>-module <m>M</m>, we need to know a set of generators and the relations among those generators. 
              If we continue that process, and ask for relations among the relations (treating the relations as generators for the module of relations), and relations among the relations among the relations, and so on, we construct what is known as a free resolution for <m>M</m>. 
              Free resolutions play a key role in many important constructions, and encode a lot of interesting information about our module. 
              For example, if the module came from some geometric setting, geometric information about the module gets reflected in the free resolution. 
              Studying the resolutions of all finitely generated modules over a ring <m>R</m> also tells us important information about the ring itself, and its singularities.
            </p>
        
            <p>
              In this chapter we will introduce free resolutions, and more generally projective resolutions, as well as their injective counterpart. 
              We will also study free resolutions in a bit more detail over commutative local noetherian rings, and the graded analogue. 
              For more details on the basics of graded free resolutions, we recommend Irena Peeva's excellent book [Pee11].
            </p>

            <definition xml:id="def-5.1"><title>Projective Resolution</title>
              <statement>
                <p>
                  Let <m>M</m> be an <m>R</m>-module. 
                  A <em>projective resolution</em> is a complex
                </p>
          
                <image source="2023_11_20_24b20e755a5fa2ec338dg-01.jpg"/>
                  
                <p>
                  where all the <m>P_{i}</m> are projective, <m>\mathrm{H}_{0}(C)=M</m>, and <m>\mathrm{H}_{i}(C)=0</m> for all <m>i \neq 0</m>. 
                  We may also write a projective resolution for <m>M</m> as an exact sequence
                  <me>\cdots \underset{\substack{\mathrm{n} \\ \cdots}}{\longrightarrow} \longrightarrow \underset{\substack{1 \\ 1}}{\longrightarrow} P_{0} \longrightarrow M \longrightarrow 0</me>
                  where all the modules <m>P_{i}</m> are projective. 
                  The resolution is <em>free</em> if all the <m>P_{i}</m> are free.
                </p>
              </statement>
            </definition>

            <p>
              You will find both these definitions in the literature, often indicating the second option as an abuse of notation. 
              We will be a bit sloppy and consider both equivalently, since at the end of the day they contain the same information. 
              One often uses the word acyclic to refer to a complex that is exact everywhere except at homological degree <m>0</m>; 
              but we caution the reader that some authors use the word acyclic to refer to exact complexes. 
              For that reason, we will avoid the word acyclic altogether.
            </p>

            <theorem xml:id="thm-5.2"><title>Every Module has a Free Resolution</title>
              <statement>
                <p>
                  Every <m>R</m>-module has a free resolution, and thus it has a projective resolution.
                </p>
              </statement>

              <proof>
                <p>
                  Let <m>M</m> be an <m>R</m>-module. 
                  We are going to construct a projective resolution quite explicitly. 
                  The first step is to find a projective module <m>P_{0}</m> that surjects onto <m>M</m>. 
                  In fact, we can find a free module surjecting onto <m>M</m>, by <xref ref="lem-4.13"/>.
                  Now consider the kernel of that projection, say
                  <me>0 \longrightarrow K_{0} \stackrel{i_{0}}{\longrightarrow} P_{0} \stackrel{\pi_{0}}{\longrightarrow} M \longrightarrow 0</me>
                  Set <m>\partial_{0}:=\pi_{0}</m>. 
                  There exists a free module <m>P_{1}</m> surjecting onto <m>K_{0}</m>, again by <xref ref="lem-4.13"/>.
                  Now the map <m>\partial_{1}=i_{0} \pi_{1}</m> satisfies <m>\operatorname{im} \partial_{1}=K_{0}=\operatorname{ker} \partial_{0}</m>.
                </p>

                <image source="2023_11_20_24b20e755a5fa2ec338dg-02.jpg"/>

                <p>
                  Now the process continues analougously. 
                  We find a free module <m>P_{2}</m> surjecting onto <m>K_{1}:=</m> ker <m>\partial_{1}</m>, and set
                </p>

                <image source="2023_11_20_24b20e755a5fa2ec338dg-02(1).jpg"/>

                <p>
                  At each stage, <m>\pi_{i}: P_{i} \rightarrow K_{i} 1</m> is a surjective map, <m>K_{i}:=</m> ker <m>\partial_{i}, i_{i}</m> is the inclusion of the kernel of <m>\partial_{i}</m> into <m>P_{i}</m>, and we get short exact sequences
                  <me>0 \longrightarrow K_{n+1} \stackrel{i_{n} \quad 1}{\longrightarrow} P_{n+1} \stackrel{\pi_{n} \stackrel{1}{\longrightarrow}}{\longrightarrow} K_{n} \longrightarrow 0</me>
                  In fact, <m>\operatorname{im}\left(i_{n+1}\right)=\operatorname{ker} \partial_{n+1}=\operatorname{ker}\left(i_{n} \pi_{n+1}\right)=\operatorname{ker} \pi_{n+1}</m>. 
                  We can continue this process for as long as <m>P_{n} \neq 0</m>, and the resulting sequence will be a projective resolution for <m>M</m>.
                </p>
              </proof>
            </theorem>
      
            <p>
              A free resolution
              <me>\cdots \longrightarrow F_{2} \longrightarrow F_{1} \longrightarrow F_{0} \longrightarrow M</me>
              gives us a detailed description of our module <m>M</m>:

              <ul>
                <li>
                  <p>
                    <m>F_{0}</m> gives us generators for <m>M</m>.
                  </p>
                </li>

                <li>
                  <p>
                    <m>F_{1}</m> gives us generators for all the relations among our generators for <m>M</m>.
                  </p>
                </li>

                <li>
                  <p>
                    The next module describes the relations among the relations among our generators. And so on.
                  </p>
                </li>
              </ul>
            </p>

            <definition xml:id="def-5.3"><title>Length of Projective Resolution</title>
              <statement>
                <p>
                  If <m>P</m> is a projective resolution of <m>M</m>, we say that <m>P</m> has length <m>d</m> if <m>P_{n}=0</m> for all <m>n&gt;d</m> and <m>P_{d} \neq 0</m>. 
                  If no such <m>d</m> exists, we say that <m>P</m> has infinite length. 
                  If <m>M</m> has no finite projective resolution, we say that <m>M</m> has infinite projective dimension; otherwise, the projective dimension of <m>M</m> is the smallest length of a projective resolution.
                </p>
              </statement>
            </definition>

            <remark xml:id="rem-5.4"><title>Projective Dimension <m>0</m> iff Projective</title>
              <p>
                A module <m>M</m> has <m>\operatorname{pdim}(M)=0</m> if and only <m>M</m> is projective. 
                Indeed, note that if <m>M</m> is projective, then
                <me>
                  0 \underset{0}{M} M \longrightarrow M \longrightarrow 0
                </me>
                is a projective resolution of <m>M</m>. On the other hand, if <m>M</m> has a projective resolution
                <me>
                  0 \longrightarrow \underset{0}{P} P \longrightarrow M \longrightarrow 0
                </me>
                then exactness tells us that <m>P \cong M</m>.
              </p>
            </remark>

            <example xml:id="ex-5.5"><title>Projective Resolution for <m>\mathbb{Z} / 2</m> over <m>\mathbb{Z}</m></title>
              <p>
                Let us construct a free resolution for <m>\mathbb{Z} / 2</m> over <m>\mathbb{Z}</m>. 
                First, since <m>\mathbb{Z} / 2</m> has only one generator, we can start with the canonical surjection <m>\pi: \mathbb{Z} \rightarrow \mathbb{Z} / 2</m>.
                Note that <m>\operatorname{ker} \pi=(2)</m> is generated by just one element again, so we can take
                <me>
                  \mathbb{Z} \stackrel{2}{\longrightarrow} \mathbb{Z} \stackrel{\pi}{\longrightarrow} \mathbb{Z} / 2
                </me>
                But now the map <m>\mathbb{Z} \stackrel{2}{\rightarrow} \mathbb{Z}</m> is injective, so we are done, and
                <me>
                  0 \longrightarrow \mathbb{Z} \stackrel{2}{\longrightarrow} \mathbb{Z} \longrightarrow \mathbb{Z} / 2 \longrightarrow 0
                </me>
                is a free resolution for <m>\mathbb{Z} / 2</m>. 
                This shows that <m>\operatorname{pdim}(\mathbb{Z} / 2) \leqslant 1</m>. 
                Also, <m>\mathbb{Z} / 2</m> is not projective: we showed in <xref ref="ex-3.15"/> that <m>\operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z} / 2, \quad)</m> is not exact. 
                Thus <m>\operatorname{pdim}(\mathbb{Z} / 2)=1</m>.
              </p>
            </example>

            <example xml:id="ex-5.6"><title>Projective Resolution for <m>k</m> over <m>k[x] /\left(x^{3}\right)</m></title>
              <p>
                Consider a field <m>k</m> and <m>R=k[x] /\left(x^{3}\right)</m>. 
                Let us construct a free resolution for <m>M=R /(x)</m>. 
                We can start with the canonical surjection <m>R \rightarrow M</m>; 
                the kernel is <m>(x)</m>, which is cyclic, so our resolution begins with
                <me>
                  R \stackrel{x}{\longrightarrow} R \longrightarrow M
                </me>
                Now the kernel of <m>R \stackrel{x}{\rightarrow} R</m> is <m>\left(x^{2}\right)</m>, which is again cyclic. 
                Our resolution continues with
                <me>
                  R \stackrel{x^{2}}{\longrightarrow} R \stackrel{x}{\longrightarrow} R \longrightarrow M
                </me>
                Next, we need to compute the kernel of multiplication by <m>x^{2}</m>; 
                but that is <m>(x)</m>, a cyclic module, and the next step in the resolution is
                <me>
                  R \stackrel{x}{\longrightarrow} R \stackrel{x^{2}}{\longrightarrow} R \stackrel{x}{\longrightarrow} R \longrightarrow M .
                </me>
                But now we have a repeating pattern! Our two-periodic resolution goes on forever:
                <me>
                  \cdots \longrightarrow R \stackrel{x^{2}}{\longrightarrow} R \stackrel{x}{\longrightarrow} R \stackrel{x^{2}}{\longrightarrow} R \stackrel{x}{\longrightarrow} R \longrightarrow M
                </me>
                In fact, it turns out that <m>\operatorname{pdim}(M)=\infty</m>. 
                But to really justify that, we need to understand that this is a <em>minimal</em> free resolution.
              </p>
            </example>

          </subsection>

          <subsection xml:id="subsec-grading"><title>A Brief Introduction to Graded Modules</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>

            <p>
              To talk about minimal free resolutions we need some reasonable conditions to hold. 
              For the rest of the section, all rings will be commutative, and in fact we will be focusing on two types of rings: 
              commutative local rings or <m>\mathbb{N}</m>-graded algebras over fields.
            </p>

            <example xml:id="ex-grading">
              <statement>
                <p>
                  When <m>k</m> is a field, the polynomial ring <m>R=k\left[x_{1}, \ldots, x_{n}\right]</m> can be given an <m>\mathbb{N}</m>-grading by setting <m>\operatorname{deg}\left(x_{i}\right)=d_{i}</m> for some <m>d_{i} \in \mathbb{N}</m>. 
                  The most common <m>\mathbb{N}</m>-grading, also known as the standard grading, is the one where we declare <m>\operatorname{deg}\left(x_{i}\right)=1</m> for all <m>i</m>. 
                  Once we declare the degrees of the variables, we can extend that grading to all monomials as follows:
                  <me> 
                    \operatorname{deg}\left(x_{1}^{a_{1}} \cdots x_{n}^{a_{n}}\right)=a_{1} d_{1}+\cdots+a_{n} d_{n}
                  </me>
                </p>
              </statement>
            </example>

            <definition xml:id="def-homogeneous-elements">
              <statement>
                <p>
                  A homogeneous element in <m>R</m> is any <m>k</m>-linear combination of monomials of the same degree. 
                  We write <m>R_{i}</m> for the set of all homogeneous elements of degree <m>i</m>, which is an abelian group under addition, and note that
                  <me>
                    R=\bigoplus_{i} R_{i}
                  </me>
                  Note also that <m>R_{i} R_{j} \subseteq R_{i+j}</m> for all <m>i</m> and <m>j</m>. 
                </p>
              </statement>
            </definition>
      
            <p>
              More generally, a <em>graded ring</em> is any ring that can be decomposed in pieces of this form, meaning that
              <me>
                R=\bigoplus_{i} R_{i} \quad \text { and } \quad R_{i} R_{j}=R_{i+j}
              </me>
              The elements in <m>R_{i}</m> are called homogeneous elements of degree <m>i</m>. 
              Similarly, a <em>graded</em> <m>R</m>-<em>module</em> is a module such that
              <me>
                M=\bigoplus_{i} M_{i} \quad \text { and } \quad R_{i} M_{j}=M_{i+j}
              </me>
            </p>
      
            <p>
              A homomorphism of graded <m>R</m>-modules <m>\varphi: M \rightarrow N</m> that such that <m>\varphi\left(M_{i}\right) \subseteq N_{i+d}</m> for all <m>i</m> is a <em>graded map</em> of degree <m>d</m>. 
              Any graded map can be thought of as a map of degree <m>0</m> by shifting degrees. 
              We write <m>M(d)</m> for the graded <m>R</m>-module with <m>M(d)_{i}=M_{i} d</m>.
            </p>
      
            <p>
              When <m>R=k\left[x_{1}, \ldots, x_{n}\right]</m> is standard graded,
              <me>
                R_{i}=\bigoplus_{a_{1}+\cdots+a_{n}=i} x_{1}^{a_{1}} \cdots x_{n}^{a_{n}}
              </me>
            </p>
      
            <p>
              Note here that <m>0</m> can be though of as a homogeneous element of any degree; one sometimes declares <m>\operatorname{deg}(0)=\infty</m>. 
              An ideal <m>I</m> in <m>R</m> is a <em>homogeneous ideal</em> if it can be generated by homogeneous elements; 
              one can show that this is equivalent to
              <me>I=\bigoplus_{i}\left(I \cap R_{i}\right)</me>
            </p>
      
            <p>
              Finally, whenever <m>I</m> itself is homogeneous, the grading on <m>R</m> passes onto <m>R / I</m>, with
              <me>(R / I)_{i}=R_{i} / I_{i}</me>
            </p>
      
            <p>
              We will be concerned with finitely generated <m>\mathbb{N}</m>-graded <m>k</m>-algebras <m>R</m> with <m>R_{0}=k</m>, which are of the form <m>R=k\left[x_{1}, \ldots, x_{n}\right] / I</m> for some homogeneous ideal <m>I</m>. One nice feature of such rings is that while there might be many maximal ideals, there is only one homogeneous maximal ideal, which is given by
            </p>
      
            <p>
              <me>R_{+}:=\bigoplus_{i&gt;0} R_{i}</me>
            </p>
      
            <p>
              In many ways, the behavior of such a graded ring and its unique homogeneous maximal ideal <m>R_{+}</m>is an analogue to the behavior of a local ring <m>R</m> and its unique maximal ideal ideal , though one always needs to provide a separate proof for the graded and local versions.
            </p>

          </subsection>

          <subsection xml:id="subsec-unique-minimal"><title>Uniqueness of Minimal Projective Resolutions</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>

            <definition xml:id="def-5.7"><title>Minimal Complex</title>
              <statement>
                <p>
                  Let <m>(R, \fm)</m> be either a commutative local ring or a commutative <m>\mathbb{N}</m>-graded <m>k</m>-algebra with <m>R_{0}=k</m> and homogeneous maximal ideal <m>\fm=R_{+}</m>. 
                  A complex
                  <me>\cdots \longrightarrow F_{2} \stackrel{\partial_{2}}{\longrightarrow} F_{1} \stackrel{\partial_{1}}{\longrightarrow} F_{0} \longrightarrow \cdots</me>
                  is minimal if  <m>\im\partial_{n+1} \subseteq \fm F_{n}</m> for all <m>n</m>.
                </p>
              </statement>
            </definition>

            <remark xml:id="rem-5.8">
              <p>
                Remark 5.8. 
                A complex <m>(F, \partial)</m> is minimal if and only if the differentials in the complex <m>F \otimes_{R} R /\fm</m> are all identically <m>0</m>. 
                If all the <m>F_{i}</m> are free, fix a basis for each <m>F_{i}</m>. 
                The differentials <m>\partial_{i}</m> can be represented by matrices, though possibly infinite. 
                We will be primarily interested in the case of finitely generated modules over noetherian rings, which are finitely presented, so all the <m>F_{i}</m> are finitely generated as well, and each <m>\partial_{i}</m> corresponds to some finite matrix. 
                In this case, our complex is minimal if and only if all the entries in the matrices representing <m>\partial_{i}</m> are in <m>\fm</m>, whatever our chosen bases are.
              </p>
            </remark>

            <lemma xml:id="lem-5.9">
              <statement>
                <p>
                  Let <m>R</m> be a commutative ring. 
                  Suppose <m>(R, \quad)</m> is either a local ring or an <m>\mathbb{N}</m> graded <m>k</m>-algebra with <m>R_{0}=k</m> and homogeneous maximal ideal <m>=R_{+}</m>. Let <m>M</m> be a finitely generated (graded) <m>R</m>-module. 
                  A free resolution
                  <me>
                    F=\cdots \longrightarrow F_{2} \stackrel{\partial_{2}}{\longrightarrow} F_{1} \stackrel{\partial_{1}}{\longrightarrow} F_{0}
                  </me>
                  for <m>M</m> is a minimal complex if and only if for all <m>n</m> the module <m>F_{n}</m> is the free module on a minimal set of generators for  <m>\ker\partial_{n} 1</m>, which in the graded case must be homogeneous.
                </p>
              </statement>

              <proof>
                <p>
                  Suppose there exists an <m>n</m> such that <m>F_{n}</m> is the free module on some non-minimal set of generators <m>m_{1}, \ldots, m_{s}</m> for <m>K_{n} 1:=\operatorname{ker} \partial_{n}{ }_{1}</m>; 
                  so there is a basis <m>e_{1}, \ldots, e_{s}</m> for <m>F_{n}</m> such that <m>\partial_{n}\left(e_{i}\right)=m_{i}</m>, and the images of <m>m_{1}, \ldots, m_{s}</m> in the vector space <m>K_{n} 1 / \fm K_{n} 1</m> are linearly dependent. 
                  Then there exists <m>r_{1}, \ldots, r_{s} \in R</m>, not all in <m>\fm</m>, such that <m>r_{1} m_{1}+\cdots+r_{s} m_{s}=0</m> in <m>R</m>. In the graded case, we can take all these coefficients <m>r_{i}</m> to be homogeneous. 
                  At least one of these coefficients is not in <m>\fm</m>, and thus it must be invertible, 
                  <fn>In the graded case, homogeneous elements not in <m>\fm</m> are nonzero elements in <m>R=k</m>, and thus invertible.</fn>
                  so we can multiply by its inverse. 
                  So perhaps after reordering our elements, we get
                  <me>
                    m_{s}=r_{1} m_{1}+\cdots+r_{s}{ }_{1} m_{s} 1.
                  </me>
                </p>
          
                <p>
                  Then
                  <me>
                    e_{s} \quad r_{1} e_{1} \quad \cdots \quad r_{s \quad 1} e_{s}{ }_{1} \in \operatorname{ker} \partial_{n}=\operatorname{im} \partial_{n+1}
                  </me>
                  is not in <m>\fm F_{n}</m>, so <m>\im \partial_{n+1}\not\in\fm F_{n}</m>.
                </p>
          
                <p>
                  Now suppose that im <m>\partial_{n+1}\not\in\fm F_{n}</m> for some <m>n</m>. 
                  Let <m>e_{1}, \ldots, e_{s}</m> be a basis for <m>F_{n}</m>, so that <m>\partial_{n}\left(e_{1}\right), \ldots, \partial\left(e_{s}\right)</m> form a generating set for <m>K_{n} \quad 1:=\operatorname{ker} \partial_{n} \quad</m>. 
                  By assumption, <m>\operatorname{ker} \partial_{n}=\operatorname{im} \partial_{n+1}</m> contains some (homogeneous, in the graded case) element that is not in <m>\fm F_{n}</m>. 
                  So there is an element <m>r_{1} e_{1}+\cdots+r_{s} e_{s} \in \operatorname{ker} \partial_{n}</m> not in <m>\fm F_{n}</m>. 
                  In particular, some <m>r_{i} \notin \fm</m>, which we can assume without loss of generality to be <m>r_{1}</m>. 
                  Multiplying by the inverse of <m>r_{1}</m>, we get some <m>c_{i} \in R</m> such that
                  <me>
                    e_{1} \quad c_{2} e_{2} \quad \cdots \quad c_{s} e_{s} \in \operatorname{ker} \partial_{n}
                  </me>
                  so
                  <me>
                    \partial_{n}\left(e_{1}\right)=c_{2} \partial_{n}\left(e_{2}\right)+\cdots+c_{s} \partial_{n}\left(e_{s}\right).
                  </me>
                  This is a nontrivial relation among our chosen set of generators of <m>K_{n}</m>, which must then be non-minimal.
                </p>
              </proof>
            </lemma>      
      
            <p>
              So to construct a minimal free resolution of <m>M</m>, we simply take as few generators as possible in each step. 
              Ultimately, we can talk about <em>the</em> minimal free resolution of <m>M</m>. 
              To show that, we need some definitions and a lemma.
            </p>

            <definition xml:id="def-5.10"><title>Direct Sum of Complexes</title>
              <statement>
                <p>
                  Let <m>(F, \partial)</m> and <m>(G, \delta)</m> be complexes of <m>R</m>-modules. 
                  The <em>direct sum</em> of <m>F</m> and <m>G</m> is the complex of <m>R</m>-modules <m>F \oplus G</m> that has <m>(F \oplus G)_{n}=F_{n} \oplus G_{n}</m>, with differentials given by
                  <me>\begin{gathered}
                  F_{n+1} \stackrel{\partial_{n 1}}{\longrightarrow} F_{n} \\
                  \oplus \\
                  G_{n+1} \underset{\delta_{n 1}}{\longrightarrow} G_{n}
                  \end{gathered}</me>
                </p>
          
                <p>
                  together with the complex maps <m>F \rightarrow F \oplus G</m> and <m>G \rightarrow F \oplus G</m> given by the corresponding inclusion in each homological degree.
                </p>
              </statement>
            </definition>

            <exercise xml:id="exe-67">
              <statement>
                <p>
                  Show that the direct sum of complexes is the coproduct in the category <m>\mathrm{Ch}(R)</m>.
                </p>
              </statement>
            </exercise>

            <proposition xml:id="rem-5.11">
              <statement>
                <p>
                  The homology of a direct sum is the direct sum of the homologies.
                </p>
              </statement>

              <proof>
                <p>
                  Notice 
                  <me>
                    \left(\partial_{n}, \delta_{n}\right)(a, b)=(0,0) \Longleftrightarrow \partial_{n}(a)=0 \text { and } \delta_{n}(b)=0 \text {, }
                  </me>
                  and
                  <me>
                    (a, b) \in \operatorname{im}\left(\partial_{n}, \delta_{n}\right) \text { if and only if } a \in \operatorname{im} \partial_{n} \text { and } b \in \operatorname{im} \partial_{n}
                  </me>
                  Thus
                  <me>
                    \mathrm{H}_{n}(F \oplus G)=\frac{\operatorname{ker}\left(\partial_{n}, \delta_{n}\right)}{\operatorname{im}\left(\partial_{n+1}, \delta_{n+1}\right)}=\frac{\operatorname{ker} \partial_{n}}{\operatorname{im} \partial_{n+1}} \oplus \frac{\operatorname{ker} \delta_{n}}{\operatorname{im} \delta_{n+1}}=\mathrm{H}_{n}(F) \oplus \mathrm{H}_{n}(G)
                  </me>
                </p>
              </proof>
            </proposition>

            <remark>
              <p>
                More generally, this is true because <em>Ch(R)</em> is an abelian category, where all additive functors preserve direct sums.
              </p>
            </remark>

            <remark xml:id="rem-5.12"><title>Direct Summands in <m>Ch(R)</m></title>
              <p>
                Suppose that <m>C</m> is a subcomplex of <m>D</m>, and that we know that each <m>C_{n}</m> is a direct summand of <m>D_{n}</m>, say by <m>D_{n}=C_{n} \oplus B_{n}</m>. 
                In order for <m>C</m> to be a free summand of <m>D</m>, we also need that the differentials of <m>D</m> behave well with <m>C</m>: 
                for each <m>n</m>, we need to check that <m>\partial_{n}\left(B_{n}\right) \subseteq B_{n} \quad 1</m> and <m>\partial_{n}\left(C_{n}\right) \subseteq C_{n} 1</m>. 
                This does not always hold.
              </p>
            </remark>

            <definition xml:id="def-5.13"><title>Trivial Complex</title>
              <statement>
                <p>
                  A complex <m>C</m> of <m>R</m>-modules is <em>trivial</em> if it is a direct sum of complexes of the form
                  <me>
                    \cdots \longrightarrow 0 \longrightarrow R \stackrel{1}{\longrightarrow} R \longrightarrow 0 \longrightarrow \cdots
                  </me>
                </p>
              </statement>
            </definition>

            <example xml:id="ex-5.14"><title>Trival Complex</title>
              <p>
                The complex
                <me>
                  0 \longrightarrow R \stackrel{\left(\begin{array}{l}
                  1 \\
                  0
                  \end{array}\right)}{\longrightarrow} R^{2} \stackrel{0 \quad 1}{\longrightarrow} R \longrightarrow 0 \quad \begin{array}{r}
                  0 \longrightarrow R \stackrel{1}{\longrightarrow} R \longrightarrow 0 \\
                  0 \longrightarrow R \stackrel{1}{\longrightarrow} R \longrightarrow 0
                  \end{array}
                </me>
                is trivial.
              </p>
            </example>

            <remark xml:id="rem-5.15"><title>Trivial Complexes are Exact</title>
              <p>
                Trivial complexes are exact: they are the direct sums of exact complexes, and by <xref ref="rem-5.11"/> taking homology commutes with direct sums.
              </p>  
            </remark>
      
            <lemma xml:id="lem-5.16">
              <statement>
                <p>
                  Let <m>(R, \fm)</m> be either a commutative local ring or a commutative <m>\mathbb{N}</m>-graded <m>k</m>-algebra with <m>R_{0}=k</m> and homogeneous maximal ideal <m>\fm=R_{+}</m>. 
                  Every (graded) complex
                  <me>
                    \cdots \longrightarrow T_{2} \stackrel{\partial_{2}}{\longrightarrow} T_{1} \stackrel{\partial_{1}}{\longrightarrow} T_{0} \longrightarrow 0
                  </me>
                  of finitely generated (graded) free <m>R</m>-modules that is exact everywhere must be trivial.
                </p>
              </statement>

              <proof>
                <p>
                  Since <m>T_{0}</m> is projective, <xref ref="thm-4.6"/> says that the short exact sequence
                  <me>
                    0 \longrightarrow \operatorname{ker} \partial_{1} \longrightarrow T_{1} \stackrel{\partial_{1}}{\longrightarrow} T_{0} \longrightarrow 0
                  </me>
                  splits, so <m>T_{1} \cong \operatorname{ker} \partial_{1} \oplus T_{0}</m>. 
                  In fact, <m>\partial_{1}</m> is the canonical projection map <m>T_{0} \oplus \operatorname{ker} \partial_{1} \rightarrow T_{0}</m>, and our original exact sequence breaks off as
                  <me>
                    \begin{aligned}
                      \cdots \longrightarrow 
                      &amp; T_{2} \stackrel{\partial_{2}}{\longrightarrow} \operatorname{ker} \partial_{1} \longrightarrow 0 \\
                      &amp; \oplus \\
                      0 \longrightarrow 
                      &amp; T_{0} \stackrel{1}{\longrightarrow} T_{0} \longrightarrow 0
                    \end{aligned}
                  </me>
                </p>
          
                <p>
                  In particular, since <m>0 \longrightarrow T_{0} \stackrel{1}{\longrightarrow} T_{0} \longrightarrow 0</m> is trivial and homology commutes with taking direct sums of complexes, by <xref ref="rem-5.11"/>, we conclude that
                  <me>
                    \cdots \longrightarrow T_{2} \stackrel{\partial_{2}}{\longrightarrow} \operatorname{ker} \partial_{1} \longrightarrow 0
                  </me>
                  is also exact everywhere. 
                  In particular, we have also shown that ker <m>\partial_{1}</m> is a (graded) direct summand of the (graded) free <m>R</m>-module <m>T_{1}</m>. 
                  In the local case, <m>\ker\partial_{1}</m> is a projective by <xref ref="thm-4.9"/>, and thus free by <xref ref="exe-62"/>. 
                </p>

                  <p>
                  In the graded setting, ?? says that ker <m>\partial_{1}</m> is free. 
                  So we are back at our original situation, and we can repeat the same argument repeatedly to show that our complex breaks off as the direct sum of the trivial complexes
                  <me>
                    0 \longrightarrow \operatorname{ker} \partial_{n} \stackrel{1}{\longrightarrow} \operatorname{ker} \partial_{n} \longrightarrow 0
                  </me>
                  and must therefore be trivial.
                </p>
              </proof>
            </lemma>

            <theorem xml:id="thm-5.17">
              <statement>
                <p>
                  Let
                  <me>
                    P=\cdots \longrightarrow P_{n} \longrightarrow \cdots P_{1} \stackrel{\partial_{1}}{\longrightarrow} P_{0} \stackrel{\partial_{0}}{\longrightarrow} M \longrightarrow 0
                  </me>
                  be a complex of projective <m>R</m>-modules, and let
                  <me>
                    C=\cdots \longrightarrow C_{n} \longrightarrow \cdots C_{1} \stackrel{\delta_{1}}{\longrightarrow} C_{0} \stackrel{\delta_{0}}{\longrightarrow} N \longrightarrow 0
                  </me>
                  be an exact complex. 
                  Every <m>R</m>-module map <m>f: M \rightarrow N</m> lifts to a map of complexes <m>\varphi: P \rightarrow C</m>, and any two such lifts are homotopic.
                </p>
          
                <p>
                  Moreover, if <m>R</m> is a commutative graded <m>k</m>-algebra, <m>M</m> and <m>N</m> are finitely generated graded <m>R</m>-modules, <m>P_{n}</m> and <m>C_{n}</m> are finitely generated graded <m>R</m>-modules, and <m>f</m> is a degree-preserving homomorphism, then the induced map of complexes is made out of degree-preserving <m>R</m> module maps.
                </p>
              </statement>

              <proof>
                <p>
                  Since <m>P_{0}</m> is projective and <m>\delta_{0}</m> is surjective, there exists an <m>R</m>-module homomorphism <m>\varphi_{0}</m> such that
                </p>
        
                <image source="2023_11_20_24b20e755a5fa2ec338dg-08.jpg"/>
          
                <p>
                  commutes. 
                  Notice in fact that
                  <me>
                    \begin{aligned}
                      \delta_{0} \varphi_{0}\left(\operatorname{im} \partial_{1}\right) &amp; \subseteq \delta_{0} \varphi_{0}\left(\operatorname{ker} \partial_{0}\right) &amp; &amp; \text { because } P \text { is a complex } \\
                      &amp; =f \partial_{0}\left(\operatorname{ker} \partial_{0}\right) &amp; &amp; \text { by commutativity of the square above } \\
                      &amp; =0, &amp; &amp;
                    \end{aligned}
                  </me>
                  so <m>\varphi_{0}\left(\operatorname{im} \partial_{1}\right) \subseteq \operatorname{ker} \delta_{0}=\operatorname{im} \delta_{1}</m>. 
                  In the graded case, note that we can define <m>\varphi_{0}</m> by sending the elements <m>b_{i}</m> in a homogeneous basis of <m>P_{0}</m> to homogeneous <m>c_{i} \in C_{0}</m> such that <m>\delta_{0}\left(c_{i}\right)=f \partial_{0}\left(b_{i}\right)</m>.
                </p>
          
                <p>
                  We now proceed by induction. 
                  Suppose we have constructed <m>P_{n}{ }_{1} \stackrel{\varphi_{n}}{\rightarrow} \rightarrow C_{n}{ }_{1}</m> such that <m>\varphi_{n} \quad\left(\operatorname{im} \partial_{n}\right) \subseteq \operatorname{im} \delta_{n}</m>. 
                  Since <m>P_{n}</m> is projective, there exists a map <m>\varphi_{n}</m> such that
                </p>
          
                <image source="2023_11_20_24b20e755a5fa2ec338dg-08(1).jpg"/>
                  
                <p>
                  commutes. 
                  And again,
                </p>
          
                <p>
                  <me>
                    \begin{array}{rlr}
                      \delta_{n} \varphi_{n}\left(\operatorname{im} \partial_{n+1}\right) &amp; \subseteq \delta_{n} \varphi_{n}\left(\operatorname{ker} \partial_{n}\right) \\
                      &amp; =\varphi_{n}{ }_{1} \partial_{n}\left(\operatorname{ker} \partial_{n}\right) \\
                      &amp; =0,
                    \end{array} \quad \text { by commutativity of the square above }
                  </me>
                  so <m>\varphi_{n}\left(\operatorname{im} \partial_{n+1}\right) \subseteq \operatorname{ker} \delta_{n}=\operatorname{im} \delta_{n+1}</m>.
                </p>
          
                <p>
                  We can now inductively construct our map of complexes <m>\varphi</m> lifting <m>f</m>.
                </p>
          
                <p>
                  Now suppose we are given two such maps of complexes <m>P \rightarrow C</m> lifting <m>f</m>, say <m>\varphi</m> and <m>\psi</m>. 
                  Note that <m>\varphi \quad \psi</m> and 0 are two liftings of the zero map. 
                  We are going to show that any map lifting the zero map <m>M \rightarrow N</m> must be nullhomotopic, which will then imply that <m>\varphi</m> and <m>\psi</m> are homotopic as well (essentially via the same homotopy!).
                </p>
          
                <p>
                  So let <m>\varphi: P \rightarrow C</m> be a map of complexes lifting the zero map <m>M \rightarrow N</m>, so that the following commutes:
                </p>
          
                <image source="2023_11_20_24b20e755a5fa2ec338dg-09(2).jpg"/>
                  
                <p>
                  We will explicitly construct a nullhomotopy for <m>\varphi</m> by induction. 
                  First, set <m>h_{n}=0</m> for all <m>n&lt;0</m>. The commutativity of the rightmost square tells us that <m>\delta_{0} \varphi_{0}=0</m>, so
                  <me>
                    \operatorname{im} \varphi_{0} \subseteq \operatorname{ker} \delta_{0}=\operatorname{im} \delta_{1}
                  </me>
                </p>
          
                <p>
                  Since <m>P_{0}</m> is projective, there exists an <m>R</m>-module homomorphism <m>h_{0}</m> such that
                </p>
          
                <image source="2023_11_20_24b20e755a5fa2ec338dg-09(1).jpg"/>
                  
                <p>
                  commutes, and thus <m>\varphi_{0}=\delta_{1} h_{0}=\delta_{1} h_{0}+h_{1} \partial_{0}</m>. Notice also that
                  <me>
                    \begin{aligned}
                      &amp; \delta_{1}\left(\varphi_{1} \quad h_{0} \partial_{1}\right)=\varphi_{0} \partial_{1} \quad \delta_{1} h_{0} \partial_{1} \quad \text { because } \varphi \text { is a map of complexes } \\
                      &amp; =\left(\begin{array}{lll}
                      \varphi_{0} &amp; \delta_{1} h_{0}
                      \end{array}\right) \partial_{1} \quad \text { factoring } \\
                      &amp; =0 \quad \text { since } \varphi_{0}=\delta_{1} h_{0},
                    \end{aligned}
                  </me>
                  so <m>\operatorname{im}\left(\varphi_{1} \quad h_{0} \partial_{1}\right) \subseteq \operatorname{ker} \delta_{1}=\operatorname{im} \delta_{2}</m>.
                </p>
          
                <p>
                  Now assume that we have constructed maps <m>h_{0}, \ldots, h_{n}</m> such that <m>\varphi_{n}=h_{n}{ }_{1} \partial_{n}+\delta_{n+1} h_{n}</m> and <m>\operatorname{im}\left(\varphi_{n+1} \quad h_{n} \partial_{n+1}\right) \subseteq \operatorname{im} \delta_{n+2}</m>. 
                  Since <m>P_{n+1}</m> is projective, we can find a map <m>h_{n+1}</m> such that
                </p>
          
                <image source="2023_11_20_24b20e755a5fa2ec338dg-09.jpg"/>   
          
                <p>
                  commutes, so <m>\varphi_{n+1}=\delta_{n+2} h_{n+1}+h_{n} \partial_{n+1}</m>. 
                  Now
                  <me>
                    \begin{aligned}
                      &amp; \delta_{n+2}\left(\varphi_{n+2} \quad h_{n+1} \partial_{n+2}\right)=\varphi_{n+1} \partial_{n+2} \quad \delta_{n+2} h_{n+1} \partial_{n+2} \quad \text { since } \varphi \text { is a map of complexes } \\
                      &amp; =\left(\varphi_{n+1} \quad \delta_{n+2} h_{n+1}\right) \partial_{n+2} \\
                      &amp; =h_{n} \partial_{n+1} \partial_{n+2} \quad \text { by commutativity of the triangle above } \\
                      &amp; =0 \quad \text { since } \partial_{n+1} \partial_{n+2}=0 \text {. }
                    \end{aligned}
                  </me>
                </p>
          
                <p>
                  So we again obtain <m>\operatorname{im}\left(\varphi_{n+2} \quad h_{n+1} \partial_{n+2}\right) \subseteq \operatorname{ker} \delta_{n+1}=\operatorname{im} \delta_{n+2}</m>. 
                  By induction, this process allows us to construct our homotopy <m>h</m>.
                </p>
              </proof>
            </theorem>

            <theorem xml:id="thm-5.18"><title>Uniqueness of Minimal Free Resolutions</title>
              <statement>
                <p>
                  Let <m>(R, \fm)</m> be a commutative ring, either a local ring or a <m>\mathbb{N}</m>-graded graded <m>k</m>-algebra with <m>R_{0}=k</m> and homogeneous maximal ideal <m>\fm=R_{+}</m>. 
                  If <m>F</m> is a minimal free resolution of <m>M</m>, then any free resolution for <m>M</m> is isomorphic to a direct sum of <m>F</m> with a trivial complex. 
                  In particular, the minimal free resolution of <m>M</m> is unique up to isomorphism.
                </p>
              </statement>

              <proof>
                <p>
                  Suppose that <m>G</m> is another free resolution of <m>M</m>. 
                  By <xref ref="thm-5.17"/>, there are complex maps <m>\psi: G \rightarrow F</m> and <m>\varphi: F \rightarrow G</m> that lift the identity map on <m>M</m>. 
                  Then <m>\psi \varphi: F \rightarrow F</m> is a map of complexes that lifts the identity on <m>M</m>, and thus by <xref ref="thm-5.17"/> <m>\varphi \psi</m> must be homotopic to the identity on <m>F</m>. 
                  Let <m>h</m> be a homotopy between <m>\psi \varphi</m> and the identity, so that for all <m>n</m>,
                  <me>\text { id } \quad \psi_{n} \varphi_{n}=\partial_{n+1} h_{n}+h_{n}{ }_{1} \partial_{n}</me>
                  Since <m>F</m> is minimal, we have <m>\operatorname{im} \partial_{n} \subseteq \fm F_{n}</m> and <m>\operatorname{im} \partial_{n+1} \subseteq \fm F_{n}</m>, so <m>\operatorname{im}\left(\mathrm{id} \quad \psi_{n} \varphi_{n}\right) \subseteq \fm F_{n}</m> for all <m>n</m>. 
                  Our first goal will be to show that <m>\psi \varphi</m> is an isomorphism.
                </p>
          
                <p>
                  First we do the local case. 
                  Let <m>A</m> be the matrix representing <m>\psi_{n} \varphi_{n}</m> in some fixed basis for <m>F_{n}</m>, and note that  <m>\id\psi_{n} \varphi_{n}</m> is represented by <m>\Id-A</m>, so all the entries in  <m>\Id-A</m> must be in <m>\fm</m>. 
                  Our matrix <m>A</m> can be written as
                  <me>
                    A=\left(\begin{array}{cccc}
                      1+a_{11} &amp; a_{12} &amp; \ldots &amp; a_{1 s} \\
                      a_{21} &amp; 1+a_{22} &amp; \cdots &amp; a_{2 s} \\
                      &amp; \ddots &amp; &amp; \\
                      a_{s 1} &amp; \cdots &amp; a_{s s} 1 &amp; 1+a_{s s}
                    \end{array}\right)
                  </me>
                  for some <m>a_{i j} \in</m>, so that <m>\operatorname{det}(A)=1+a</m> for some <m>a \in</m>. 
                  In particular, <m>\operatorname{det}(A)</m> is invertible, and <m>\psi_{n} \varphi_{n}</m> is an isomorphism.
                </p>
          
                <p>
                  In the graded case, we have to be a bit more careful: not all elements that are not in are invertible, this is only true for homogeneous elements. 
                  First, we fix a basis of homogeneous elements <m>f_{1}, \ldots, f_{s}</m> for <m>F_{n}</m> with <m>\operatorname{deg}\left(f_{1}\right) \leqslant \operatorname{deg}\left(f_{2}\right) \leqslant \cdots \leqslant \operatorname{deg}\left(f_{s}\right)</m>, and set <m>\Phi:=</m> id <m>\psi_{n} \varphi_{n}</m>. 
                  Since our map <m>\Phi</m> is degree-preserving, <m>\Phi\left(f_{i}\right)</m> is homogeneous for each <m>i</m>, and so we can write <m>\Phi\left(f_{i}\right)</m> as a linear combination of our basis elements <m>f_{1}, \ldots, f_{s}</m> using only pieces of degree <m>\operatorname{deg}\left(\Phi\left(f_{i}\right)\right)</m>. 
                  We obtain a matrix <m>C=\left(c_{i j}\right)</m> such that <m>c_{i j} \neq 0 \Longrightarrow \operatorname{deg}\left(c_{i j}\right)=\operatorname{deg}\left(f_{j}\right) \operatorname{deg}\left(f_{i}\right)</m>, and <m>C</m> represents <m>\Phi</m>, meaning <m>\Phi\left(f_{i}\right)=c_{i 1} f_{1}+\cdots+c_{i s} f_{s}</m> for all <m>i</m>. 
                  Now all the entries of <m>C=\mathrm{Id} \quad A</m> must be in, so in particular we must have <m>a_{i i}=1</m> for all <m>i</m>. 
                  Moreover, since we chose our basis to have increasing degrees, <m>\operatorname{deg}\left(c_{i j}\right)=0</m> whenever <m>i&lt;j</m>. 
                  Since we must also have <m>c_{i j} \in \fm</m> whenever <m>i \neq j</m>, we conclude that <m>c_{i j}=0</m> for <m>i&lt;j</m>. 
                  We conclude that <m>A</m> is an upper triangular matrix. 
                  Finally, <m>\operatorname{det}(A)=a_{11} \cdots a_{s s}=1</m>, and <m>A</m> is invertible.
                </p>
          
                <p>
                  So we have shown in both cases that <m>\psi_{n} \varphi_{n}</m> is an isomorphism for all <m>n</m>. 
                  By <xref ref="exe-25"/>, <m>\psi \varphi</m> is in fact an isomorphism of complexes, so let <m>\xi: F \rightarrow F</m> be its inverse. 
                  Now we want to claim that <m>\varphi</m> splits as a map of complexes. 
                  Notice that
                  <me>
                    (\xi \psi) \varphi=\xi(\psi \varphi)=\mathrm{id}_{F}
                  </me>
                  so let us take <m>\xi \psi</m> to be our proposed splitting for <m>\varphi</m>.
                  Note that <m>(\xi \psi)_{n} \varphi_{n}=\operatorname{id}_{n}</m> implies that our map <m>\xi \psi</m> provides splittings for the <m>R</m>-module maps in each degree, by <xref ref="lem-2.19"/>, so <m>G_{n}=\varphi_{n}\left(F_{n}\right) \oplus \operatorname{ker}\left(\xi_{n} \psi_{n}\right)</m>. 
                  We just need to prove that this splitting holds as complexes, that is, that <m>G=\varphi(F) \oplus \operatorname{ker}(\xi \psi)</m> as complexes. 
                  So let <m>K:=\operatorname{ker}(\xi \psi)</m>, and denote the differential in <m>G</m> by <m>\delta</m>.
                  We need to check that <m>\delta(\varphi(F)) \subseteq \varphi(F)</m> and <m>\delta(K) \subseteq K</m>.
                </p>
          
                <p>
                  Since <m>\varphi</m> is a map of complexes, <m>\delta \varphi=\varphi \partial</m>, so we do get <m>\delta(\varphi(F)) \subseteq \varphi(F)</m>. 
                  Given <m>a \in K_{n+1}</m>, we can write <m>\delta_{n+1}(a)=\varphi(b)+c</m> for some <m>b \in F_{n}</m> and <m>K_{n}</m>, since <m>G_{n}=\varphi\left(F_{n}\right) \oplus K_{n}</m>. 
                  Then
                  <me>
                    \begin{aligned}
                      b &amp; =\operatorname{id}(b) \\
                      &amp; =\xi_{n} \psi_{n} \varphi_{n}(b) \\
                      &amp; =\xi_{n} \psi_{n}\left(\varphi_{n}(b)+c\right) \\
                      &amp; =\xi_{n} \psi_{n} \delta_{n+1}(a) \\
                      &amp; =\xi_{n} \delta_{n+1} \psi_{n}(a) \\
                      &amp; =\delta_{n+1}\left(\xi_{n} \psi_{n}\right)(a) \\
                      &amp; =0
                    \end{aligned}
                  </me>
                  since <m>\xi_{n} \psi_{n}</m> is a splitting for <m>\varphi_{n}</m> since <m>c \in K_{n}</m> by assumption since <m>\psi</m> is a map of complexes since <m>\xi</m> is a map of complexes since <m>a \in K_{n}</m>.
                </p>
          
                <p>
                  We conclude that <m>\delta_{n+1}(a) \in K_{n}</m>, and <m>\delta(K) \subseteq K</m>.
                  We have now shown that <m>G \cong F \oplus K</m>.
                </p>
          
                <p>
                  Finally, we are going to show that <m>K</m> is a trivial complex. 
                  First, we claim that <m>K_{n}</m> is free for all <m>n</m>. 
                  We have already shown that <m>K_{n}</m> is a (graded) direct summand of a (graded) free module. 
                  In the local case, <xref ref="thm-4.9"/> says that <m>K_{n}</m> is projective, and then <xref ref="exe-62"/> says that <m>K_{n}</m> must in fact be free. 
                  In the graded setting, one can show that any graded module which is a direct sum of a finitely generated graded <m>R</m>-module is a graded free module. 
                  In both cases, <m>K_{n}</m> is free.
                </p>
          
                <p>
                  Since <m>G \cong F \oplus K</m>, we have <m>\mathrm{H}_{n}(G) \cong \mathrm{H}_{n}(F) \oplus \mathrm{H}_{n}(K)</m>. 
                  Since <m>F</m> and <m>G</m> are both (graded) free resolutions for <m>M</m>, they have the same homology: <m>\mathrm{H}_{n}(F)=\mathrm{H}_{n}(G)=0</m> for all <m>n \neq 0</m>, and <m>\mathrm{H}_{0}(F)=\mathrm{H}_{0}(G)=M</m>. 
                  We conclude that <m>K</m> is exact everywhere. 
                  Finally, <xref ref="lem-5.16"/> shows that <m>K</m> is trivial.
                </p>
              </proof>
            </theorem>

            <theorem xml:id="thm-5.19"><title>Horseshoe Lemma</title>
              <statement>
                <p>
                  Consider a short exact sequence of modules
                  <me>
                    0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0
                  </me>
                  Let <m>P</m> be a projective resolution of <m>A</m>, and <m>R</m> be a projective resolution of <m>C</m>. 
                  There exists a projective resolution <m>Q</m> of <m>B</m> and maps of complexes <m>F</m> and <m>G</m> lifting <m>f</m> and <m>g</m> such that
                  <me>
                    0 \longrightarrow P \stackrel{F}{\longrightarrow} Q \stackrel{G}{\longrightarrow} R \longrightarrow 0
                  </me>
                  is a short exact sequence of complexes.
                </p>
              </statement>

              <proof>
                <p>
                  First, we need to introduce some general notation: given homomorphisms <m>f: M \rightarrow L</m> and <m>g: N \rightarrow L</m> with the same target, we will write <m>f \oplus g</m> for the homomorphism <m>M \oplus N \rightarrow L</m> given by <m>(f \oplus g)(m, n)=f(m)+g(n)</m>. 
                  Moreover, we will denote the differential of <m>P</m> by <m>\partial^{P}</m>, and the differential of <m>R</m> by <m>\partial^{R}</m>.
                </p>
          
                <p>
                  For each <m>n \geqslant 0</m>, set <m>Q_{n}:=P_{n} \oplus R_{n}</m>, and let <m>F_{n}: P_{n} \rightarrow Q_{n}</m> and <m>G_{n}: Q_{n} \rightarrow R_{n}</m> be the canonical projections. 
                  By <xref ref="cor-4.11"/>, <m>Q_{n}</m> is projective for all <m>n</m>. 
                  Moreover, we get short exact sequences
                  <me>
                    0 \longrightarrow P_{n} \stackrel{F_{n}}{\longrightarrow} Q_{n} \stackrel{G_{n}}{\longrightarrow} R_{n} \longrightarrow 0
                  </me>
                  for all <m>n</m>. 
                  We will construct the missing differentials <m>\partial^{Q}</m> inductively.
                </p>
          
                <p>
                  Since <m>R_{0}</m> is projective and <m>g</m> is surjective, there exists <m>\gamma</m> such that
                </p>
          
                <image source="2023_11_20_24b20e755a5fa2ec338dg-12(2).jpg"/>
          
                <p>
                  commutes. 
                  Set <m>\partial_{0}^{Q}:=\left(f \partial_{0}^{P}\right) \oplus \gamma</m>. 
                  The universal property of the coproduct guarantees that
                </p>
          
                <image source="2023_11_20_24b20e755a5fa2ec338dg-12.jpg"/>
                  
                <p>
                  commutes. 
                  By the <xref text="title" ref="five-lemma"/>, <m>\partial_{0}^{Q}</m> is surjective. 
                  By the <xref text="title" ref="thm-2.26"/>,
                  <me>
                    \operatorname{ker} \partial_{0}^{P} \longrightarrow \operatorname{ker} \partial_{0}^{Q} \longrightarrow \operatorname{ker} \partial_{0}^{R}
                  </me>
                  is exact. 
                  We then proceed by induction, and at each step we apply the base case to
                </p>
          
                <image source="2023_11_20_24b20e755a5fa2ec338dg-12(1).jpg"/>
                  
                <p>
                  where the vertical arrows are surjective because <m>P</m> and <m>R</m> are projective resolutions and thus exact. 
                  Notice that by construction, the image of <m>\partial_{n+1}^{Q}</m> is contained in <m>\operatorname{ker} \partial_{n}^{Q}</m>, which guarantees that <m>\partial</m> is a differential.
                </p>
          
                <p>
                  This inductive process allows us to build a complex of projectives <m>Q</m> and a short exact sequence of complexes
                  <me>
                    0 \longrightarrow P \stackrel{F}{\longrightarrow} Q \stackrel{G}{\longrightarrow} R \longrightarrow 0 .
                  </me>
                  Applying the <xref text="title" ref="thm-2.28"/>, we get exact sequences
                  <me>
                    0=\mathrm{H}_{n}(P) \rightarrow \mathrm{H}_{n}(Q) \longrightarrow \mathrm{H}_{n}(R)=0
                  </me>
                  for all <m>n \geqslant 1</m>, and thus <m>\mathrm{H}_{n}(Q)=0</m>. 
                  Moreover, we constructed <m>\delta_{0}^{Q}</m> so that
                  <me>
                    Q_{1} \stackrel{\delta_{1}}{\longrightarrow} Q_{0} \longrightarrow B
                  </me>
                  is exact, and thus <m>\mathrm{H}_{0}(Q)=B</m>. We conclude that <m>Q</m> is a projective resolution of <m>B</m>.
                </p>
              </proof>
            </theorem>

            <remark>
              <p>
                why its called that
              </p>
            </remark>

          </subsection>

          <subsection xml:id="subsec-syzygy-betti"><title>Syzygys and Betti Numbers</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>
            
            <p>
              Now that we know that minimal free resolutions exist and are unique (in the local and graded settings), we will take the rest of this section to briefly discuss how minimal free resolutions contain a lot of important information about our modules. For example, we want to keep track of the kernels of the differentials in a minimal free resolution.
            </p>

            <definition xml:id="def-5.20"><title>Syzygy</title>
              <statement>
                <p>
                  Let <m>(R, \fm)</m> be a commutative ring, either a local ring or an <m>\mathbb{N}</m>-graded <m>k</m>-algebra with <m>R_{0}=k</m> and homogeneous maximal ideal <m>\fm=R_{+}</m>. 
                  Let <m>F</m> be a minimal free resolution for the finitely generated (graded) <m>R</m>-module <m>M</m>. 
                  For each <m>n \geqslant 1</m>, the submodule
                  <me>
                    \Omega_{n}(M):=\operatorname{im} \partial_{n}=\operatorname{ker} \partial_{n} 1
                  </me>
                  is the <m>n</m>th <em>syzygy</em> of <m>M</m>.
                </p>
              </statement>
            </definition>

            <remark xml:id="rem-5.21">
              <p>
                For each <m>n</m>, we have a short exact sequence
                <me>
                  0 \longrightarrow \operatorname{ker} \partial_{n} \longrightarrow F_{n} \longrightarrow \operatorname{im} \partial_{n} \longrightarrow 0
                </me>
                But <m>\ker\partial_{n}=\Omega_{n}(M)</m> and <m>\operatorname{im} \partial_{n}=\Omega_{n}{ }_{1}(M)</m>, so we get a short exact sequence
                <me>
                  0 \longrightarrow \Omega_{n}(M) \longrightarrow F_{n} \longrightarrow \Omega_{n}{ }_{1}(M) \longrightarrow 0
                </me>
              </p>
            </remark>

            <p>
              Syzygies are indeed well-defined up to isomorphism.
            </p>

            <proposition xml:id="rem-5.22"><title>Syzygy's Are Well-Defined</title>
              <statement>
                <p>
                  Syzygies are indeed well-defined up to isomorphism.
                </p>
              </statement>
              <proof>
                <p>
                  Suppose that <m>F</m> and <m>G</m> are two minimal free resolutions for <m>M</m>. 
                  By <xref ref="thm-5.18"/>, there exists an isomorphism between <m>F</m> and <m>G</m>, say <m>\varphi</m>. 
                  Since <m>\varphi</m> is a map of complexes, <m>\varphi \partial^{F}=\partial^{G} \varphi</m>, and thus <m>\varphi</m> must send elements in ker <m>\partial^{F}</m> into elements in <m>\ker\partial^{G}</m>. 
                  Similarly, an inverse <m>\psi</m> to <m>\varphi</m> sends ker <m>\partial^{G}</m> into ker <m>\partial^{F}</m>. 
                  In each homological degree, the induced maps <m>\operatorname{ker} \partial_{n}^{F} \rightarrow \operatorname{ker} \partial_{n}^{G}</m> and <m>\operatorname{ker} \partial_{n}^{F} \rightarrow \operatorname{ker} \partial_{n}^{G}</m> are inverse, and thus isomorphisms. 
                  In the graded case, one can show that we obtain graded isomorphisms, so that the graded syzygies are also well-defined up to isomorphism.
                </p>
              </proof>
            </proposition>
      
            <p>
              The number of generators in each homological degree is also an important invariant.
            </p>

            <definition xml:id="def-5.23"><title>Betti Number</title>
              <statement>
                <p>
                  Let <m>(R, \fm)</m> be a commutative ring, either a local ring or an <m>\mathbb{N}</m>-graded <m>k</m>-algebra with <m>R_{0}=k</m> and homogeneous maximal ideal <m>\fm=R_{+}</m>. 
                  Let <m>F</m> be a minimal free resolution for the finitely generated (graded) <m>R</m>-module <m>M</m>. 
                  The <m>n</m>th betti number of <m>M</m> is
                  <me>
                    \beta_{i}(M):=\operatorname{rank} F_{i}=\mu\left(F_{i}\right)
                  </me>
                </p>
              </statement>
            </definition>
      
            <p>
              In the graded case, we can also talk about <em>graded</em> betti numbers.
               When <m>M</m> is a graded module, we can write a resolution that keeps track of the grading.
            </p>

            <definition xml:id="def-5.24"><title>Betti Table</title>
              <statement>
                <p>
                  Let <m>R</m> be a commutative <m>\mathbb{N}</m>-graded graded <m>k</m>-algebra with <m>R_{0}=k</m> and homogeneous maximal ideal <m>=R_{+}</m>. 
                  Let <m>M</m> be a graded <m>R</m>-module. The <m>(i, j)</m> th betti number of <m>M, \beta_{i j}(M)</m>, counts the number of generators of <m>F_{i}</m> in degree <m>j</m>. 
                  We often collect the betti numbers of a module in its <em>betti table</em>:
                </p>
          
                  <tabular>
                  <row header="yes">
                    <cell halign="right"><m>\beta(M)</m></cell>
                    <cell halign="center">0</cell>
                    <cell halign="center">1</cell>
                    <cell halign="center">2</cell>
                    <cell halign="center"><m>\cdots</m></cell>
                  </row>
                  <row>
                    <cell halign="right">0</cell>
                    <cell halign="center"><m>\beta_{00}(M)</m></cell>
                    <cell halign="center"><m>\beta_{01}(M)</m></cell>
                    <cell halign="center"><m>\beta_{02}(M)</m></cell>
                    <cell halign="center"></cell>
                  </row>
                  <row>
                    <cell halign="right">1</cell>
                    <cell halign="center"><m>\beta_{11}(M)</m></cell>
                    <cell halign="center"><m>\beta_{12}(M)</m></cell>
                    <cell halign="center"><m>\beta_{13}(M)</m></cell>
                    <cell halign="center"></cell>
                  </row>
                  <row>
                    <cell halign="right">2</cell>
                    <cell halign="center"><m>\beta_{22}(M)</m></cell>
                    <cell halign="center"><m>\beta_{23}(M)</m></cell>
                    <cell halign="center"></cell>
                    <cell halign="center"></cell>
                  </row>
                  <row>
                    <cell halign="right"><m>\vdots</m></cell>
                    <cell halign="center"></cell>
                    <cell halign="center"></cell>
                    <cell halign="center"><m>\ddots</m></cell>
                    <cell halign="center"></cell>
                  </row>
                  </tabular>
            
              </statement>
            </definition>
      
            <p>
              By convention, the entry corresponding to <m>(i, j)</m> in the betti table of <m>M</m> contains <m>\beta_{i, i+j}(M)</m>, and <m>\operatorname{not} \beta_{i j}(M)</m>. 
              This is how Macaulay2 displays betti tables.
            </p>

            <example xml:id="ex-5.25">
              <p>
                Let <m>R=k[x, y, z]</m> and <m>M=R /(x y, x z, y z)</m>. 
                The minimal free resolution for <m>M</m> is
                <me>
                  \left.0 \longrightarrow R^{2} \stackrel{\left(\begin{array}{cc}
                z &amp; 0 \\
                y &amp; y \\
                0 &amp; x
                \end{array}\right)}{\longrightarrow} R^{3} \longrightarrow x y \quad x z \quad y z\right) \quad R \longrightarrow M \text {. }
              </me>
              </p>
        
              <p>
                From this minimal resolution, we can read the betti numbers of <m>M</m> :
                <ul>
                  <li>
                    <p>
                      <m>\beta_{0}(M)=1</m>, since <m>M</m> is a cyclic module;
                    </p>
                  </li>

                  <li>
                    <p>
                      <m>\beta_{1}(M)=3</m>, and these three quadratic generators live in degree 2;
                    </p>
                  </li>

                  <li>
                    <p>
                      <m>\beta_{2}(M)=2</m>, and these represent linear syzygies on quadrics, and thus live in degree 3 .
                    </p>
                  </li>
                </ul>
              </p>
        
              <p>
                To write a graded free resolution for <m>M</m>, we choose all maps to have degree <m>0</m>, so that the graded free modules in each degree are sums of copies of shifts of <m>R</m>. 
                Here is the graded free resolution of <m>M</m>:
                <me>
                  0 \longrightarrow R(3)^{2} \stackrel{\left(\begin{array}{cc}
                  z &amp; 0 \\
                  y &amp; y \\
                  0 &amp; x
                  \end{array}\right)}{\longrightarrow} R(2)^{3} \longrightarrow x \longrightarrow \text {. }
                </me>
              </p>
        
              <p>
                Notice that the graded shifts in lower homological degrees affect all the higher homological degrees as well. 
                For example, when we write the map in degree <m>2</m>, we only need to shift the degree of each generator by <m>1</m>, but since our map now lands on <m>R(2)^{3}</m>, we have to bump up degrees from <m>2</m> to <m>3</m>, and write <m>R(3)^{2}</m>. 
                The graded betti number <m>\beta_{i j}(M)</m> of <m>M</m> counts the number of copies of <m>R(j)</m> in homological degree <m>i</m> in our resolution. 
                So we have
                <me>
                  \beta_{00}=1, \beta_{12}=3 \text {, and } \beta_{23}=2 \text {. }
                </me>
              </p>
        
              <p>
                We can collect the graded betti numbers of <m>M</m> in its betti table:
              </p>
                    
                <tabular>
                <row header="yes">
                  <cell halign="right"><m>\beta(M)</m></cell>
                  <cell halign="left">0</cell>
                  <cell halign="left">1</cell>
                  <cell halign="left">2</cell>
                  <cell halign="left"></cell>
                </row>
                <row>
                  <cell halign="right">0</cell>
                  <cell halign="left">1</cell>
                  <cell halign="left"></cell>
                  <cell halign="left"></cell>
                  <cell halign="left"></cell>
                </row>
                <row>
                  <cell halign="right">1</cell>
                  <cell halign="left"></cell>
                  <cell halign="left">3</cell>
                  <cell halign="left">2</cell>
                  <cell halign="left"></cell>
                </row>
                </tabular>
              
            </example>

            <example xml:id="ex-5.26">
              <p>
                Let <m>k</m> be a field, <m>R=k[x, y]</m>, and consider the ideal
                <me>
                  I=\left(x^{2}, x y, y^{3}\right)
                </me>
                which has two generators of degree <m>2</m> and one of degree <m>3</m>, so there are graded betti numbers <m>\beta_{12}</m> and <m>\beta_{13}</m>. 
                The minimal free resolution for <m>R / I</m> is
                <me>
                  \begin{aligned}
                  &amp; 0 \longrightarrow \underset{R()^{1}}{R} \stackrel{(3)^{1}}{\left(\begin{array}{cc}
                  y &amp; 0 \\
                  x &amp; y^{2} \\
                  0 &amp; x
                  \end{array}\right)} \underset{\bigoplus^{2}}{\longrightarrow} \stackrel{\left.x^{2} \quad x y y^{3}\right)}{\longrightarrow} R \longrightarrow R / I . \\
                  &amp; R(3)^{1} \\
                  &amp; \beta_{23}(R / I)=1 \beta_{12}(R / I)=2 \\
                  &amp; \beta_{24}(R / I)=1 \beta_{13}(R / I)=1
                  \end{aligned}
                </me>
              </p>
        
              <p>
                So the betti table of <m>R / I</m> is
              </p>
            </example>
      
            <p>
              In fact, even if all we know is the betti numbers of <m>M</m>, there is lots of information to we can extract about <m>M</m>. 
              For more about the beautiful theory of free resolutions and syzygies, see [Eis05]. 
              For a detailed treatment of graded free resolutions, see [Pee11].
            </p>

          </subsection>

          <outcomes>
            <ul>
              <li>
                <p>

                </p>
              </li>
            </ul>
          </outcomes>
          
        </section>

        <section xml:id="sec-inj-res"><title>Injective Resolutions</title>

          <p>
            Injective resolutions are analogous to projective resolutions, but now we want to approximate our module <m>M</m> by injectives.
          </p>

          <definition xml:id="def-5.27"><title>Injective Resolution</title>
            <statement>
              <p>
                Let <m>M</m> be an <m>R</m>-module. 
                An <em>injective resolution</em> of <m>M</m> is a complex
                <me>
                  E=0 \longrightarrow E_{0} \longrightarrow E_{1} \longrightarrow E_{2} \longrightarrow \cdots
                </me>
                with <m>\mathrm{H}_{0}(E)=M</m> and <m>\mathrm{H}_{n}(E)=0</m> for all <m>n \neq 0</m>. 
                We may abuse notation and instead say that an injective resolution of <m>M</m> is an exact sequence
                <me>
                  0 \longrightarrow M \longrightarrow E_{0} \longrightarrow E_{1} \longrightarrow E_{2} \longrightarrow \cdots .
                </me>
              </p>
            </statement>
          </definition>

          <remark xml:id="rem-5.28">
            <p>
              This is the first example we have encountered where we have a <em>cocomplex</em> rather than a complex. 
              Its homology should technically be referred to as <em>cohomology</em>, and written with superscripts:
            </p>
          </remark>

          <p>
            We can construct injective resolutions in a similar fashion to how we constructed projective resolutions.
          </p>

          <theorem xml:id="thm-5.29"><title>Every Module has an Injective Resolution</title>
            <statement>
              <p>
                Every <m>R</m>-module <m>M</m> has an injective resolution.
              </p>
            </statement>

            <proof>
              <p>
                By <xref ref="thm-4.31"/>, every <m>R</m>-module embeds into an injective module. 
                So we start by taking an injective <m>R</m>-module <m>E_{0}</m> containing <m>M</m>, and look at the cokernel of the inclusion:
                <me>
                  0 \longrightarrow M \stackrel{i_{0}}{\longrightarrow} E_{0} \stackrel{\pi_{0}}{\longrightarrow} \text { coker } i_{0} \longrightarrow 0 \text {. }
                </me>
                Now coker <m>i_{0}</m> includes in some other injective module <m>E_{1}</m>.
              </p>

              <image source="2023_11_20_24b20e755a5fa2ec338dg-15.jpg"/>
              <p>

                Take <m>\partial_{0}:=i_{1} \pi_{0}</m>. 
                Since <m>i_{1}</m> is injective,
              </p>
        
              <p>
                <me>
                  \operatorname{ker} \partial_{0}=\operatorname{ker}\left(i_{1} \pi_{0}\right)=\operatorname{ker} \pi_{0}=\operatorname{im} i_{0}
                </me>
              </p>
        
              <p>
                Notice also that coker <m>i_{0}=\operatorname{im} \partial_{0}=\operatorname{ker}\left(E_{1} \rightarrow \operatorname{coker} \partial_{0}\right)</m>. 
                So we can now we continue in a similar fashion, by finding an injective module <m>E_{2}</m> that coker <m>\partial_{0}</m> embeds into.
              </p>
        
              <image source="2023_11_20_24b20e755a5fa2ec338dg-16.jpg"/>
                
              <p>
                By construction and since <m>i_{2}</m> is injective, <m>\operatorname{ker} \partial_{1}=\operatorname{im} \partial_{0}</m>, and our complex is exact at <m>E_{1}</m>. 
                The process continues analogously.
              </p>
            </proof>
          </theorem>
          
          <p>
            We can again define a minimal injective resolution for <m>M</m> as one where at each step we take the smallest injective module that coker <m>i_{n}</m> embeds into; 
            this is called the <em>injective hull</em> of <m>M</m>. 
            Perhaps unsurprisingly, one can show that the minimal injective resolution of a finitely generated module over a local ring is unique up to isomorphism. 
            The analogues to the betti numbers are called <em>Bass numbers</em>, although now there are some major differences. 
            When we construct a minimal free resolution, we have only to count copies of <m>R</m> in each homological degree, while there are many different building clocks for injective modules - the injective hulls of <m>R / P</m>, where <m>P</m> ranges over the prime ideals in <m>R</m>. 
            So for each homological degree <m>i</m>, we get one bass number for each prime ideal <m>P</m>.
          </p>

          <example xml:id="ex-5.30">
            <p>
              Let's construct a minimal free resolution for the abelian group <m>\mathbb{Z}</m>. 
              We start by including <m>\mathbb{Z}</m> in <m>\mathbb{Q}</m>, and then note that the cokernel <m>\mathbb{Q} / \mathbb{Z}</m> is actually injective, by <xref ref="lem-4.26"/> and <xref ref="lem-4.23"/>. 
              So <m>\mathbb{Q} / \mathbb{Z}</m> embeds in itself, and our resolution stops there. So the short exact sequence
              <me>
                0 \longrightarrow \mathbb{Z} \longrightarrow \mathbb{Q} \longrightarrow \mathbb{Q} / \mathbb{Z} \longrightarrow 0
              </me>
              is in fact a minimal injective resolution for <m>\mathbb{Z}</m>.
            </p>
          </example>
          
        </section>
        
      </chapter>

      <chapter xml:id="ch-derived-functors"><title>Derived Functors</title>

        <section xml:id="sec-construction"><title>The General Construction</title>

          <objectives>
            <ul>
              <li>
                
              </li>
            </ul>
          </objectives>

          <subsection xml:id="subsec-derived"><title>Making Sure Derived Functors Make Sense</title>

            <blockquote>
              <p>
                <q>
                  All things make sense; you just have to fathom how they make sense.
                </q>
              </p>
              <attribution>Piers Anthony</attribution>
            </blockquote>
            
            <p>
              While <m>\Hom</m> and tensor are not exact functors, we can measure their lack of exactness using their derived functors <m>\Ext</m> and <m>\Tor</m>. 
              These are the poster child examples of what are called derived functors, which can be constructed over any abelian category provided we have enough projective or injective objects. 
              In this chapter, we will construct derived functors over <m>R\Mod</m> (which does have enough injectives and enough projectives), and then later we will discuss the general construction.
            </p>
  
            <p>
              We start with the general construction of derived functors, although we will soon focus on concrete examples, most importantly <m>\Ext</m> and <m>\Tor</m>, the derived functors of <m>\Hom</m> and tensor.
            </p>
  
            <definition xml:id="def-6.1"><title>Derived functors</title>
              <statement>
                <p>
                  Let <m>F: R</m>-Mod <m>\rightarrow S</m>-Mod be a covariant right exact functor. 
                  The left derived functors of <m>F</m> are a sequence of functors
                  <me>L_{i} F: R \text {-Mod } \rightarrow S \text {-Mod, for } i \geqslant 0</me>
                  defined as follows:
                </p>
          
                <p>
                  For each <m>R</m>-module <m>A</m>, fix a projective resolution <m>P</m> of <m>A</m>, and set
                  <me>L_{i} F(A):=\mathrm{H}_{i}(F(P))</me>
                  Given a <m>R</m>-module homomorphism <m>f: A \rightarrow B</m>, fix projective resolutions <m>P</m> of <m>A</m> and <m>Q</m> of <m>B</m>, and a map of complexes <m>\varphi: P \rightarrow Q</m> lifting <m>f</m>. 
                  Then
                  <me>L_{i} F(f):=\mathrm{H}_{i}(F(\varphi))</me>
                </p>
          
                <p>
                  Let <m>F: R</m>-Mod <m>\rightarrow S</m>-Mod be a covariant left exact functor. 
                  The right derived functors of <m>F</m> are a sequence of functors
                  <me>R^{i} F: R \text {-Mod } \rightarrow S \text {-Mod, for } i \geqslant 0</me>
                  defined as follows:
                </p>
          
                <p>
                  For each <m>R</m>-module <m>A</m>, fix an injective resolution <m>E</m> of <m>A</m>, and set
                  <me>R^{i} F(A):=\mathrm{H}^{i}(F(E))</me>
                  Given an <m>R</m>-module homomorphism <m>f: A \rightarrow B</m>, fix injective resolutions <m>E</m> of <m>A</m> and <m>I</m> of <m>B</m>, and a map of complexes <m>\varphi: P \rightarrow Q</m> extending <m>f</m>.
                  Then
                  <me>R^{i} F(f):=\mathrm{H}^{i}(F(\varphi))</me>
                </p>
          
                <p>
                  Let <m>F: R</m>-Mod <m>\rightarrow S</m>-Mod be a contravariant left exact functor. 
                  The right derived functors of <m>F</m> are a sequence of functors
                  <me>R^{i} F: R \text {-Mod } \rightarrow S \text {-Mod, for } i \geqslant 0</me>
                  defined as follows:
                </p>
          
                <p>
                  For each <m>R</m>-module <m>A</m>, fix a projective resolution <m>P</m> of <m>A</m>, and set
                  <me>R^{i} F(A):=\mathrm{H}^{i}(F(P))</me>
                  Given an <m>R</m>-module homomorphism <m>f: A \rightarrow B</m>, fix projective resolutions <m>P</m> for <m>A</m> and <m>Q</m> for <m>B</m>, and a map of complexes <m>\varphi: P \rightarrow Q</m> extending <m>f</m>. 
                  Then
                  <me>R^{i} F(f):=\mathrm{H}^{i}(F(\varphi))</me>
                </p>
          
                <p>
                  Finally, let <m>F: R</m>-Mod <m>\rightarrow S</m>-Mod be a contravariant right exact functor. 
                  The left derived functors of <m>F</m> are a sequence of functors
                  <me>L_{i} F: R \text {-Mod } \rightarrow S \text {-Mod, for } i \geqslant 0</me>
                  defined as follows:
                </p>
          
                <p>
                  For each object <m>A</m> in <m>\mathcal{A}</m>, fix an injective resolution <m>E</m> of <m>A</m>, and set
                  <me>L_{i} F(A):=\mathrm{H}_{i}(F(E))</me>
                  Given an arrow <m>A \stackrel{f}{\rightarrow} B</m>, fix injective resolutions <m>A \rightarrow E</m> and <m>B \rightarrow I</m>, and a map of complexes <m>E \stackrel{\varphi}{\rightarrow} I</m> extending <m>f</m>. 
                  Then
                  <me>L_{i} F(f):=\mathrm{H}_{i}(F(\varphi))</me>
                </p>
              </statement>
            </definition>
      
            <p>
              It is not clear a priori that this construction is well-defined, but we will soon show that is indeed the case.
            </p>
  
            <remark xml:id="rem-6.2"><title></title>
              <p>
                If <m>F</m> is exact, then <m>\mathrm{H}_{i}(F(C))=F\left(\mathrm{H}_{i}(C)\right)</m>, so <m>L_{i} F=0</m> for all <m>i&gt;0</m>.
              </p>
            </remark>
  
            <remark xml:id="rem-6.3"><title></title>
              <p>
                If <m>P</m> is projective, then <m>0 \rightarrow P \rightarrow 0</m> is a projective resolution of <m>P</m>, and thus <m>L_{i} F(P)=0</m> for all <m>i&gt;0</m>.
                Similarly, if <m>E</m> is injective then <m>R^{i} F(E)=0</m>.
              </p>
            </remark>
  
            <proposition xml:id="prop-6.4"><title></title>
              <statement>
                <p>
                  Let <m>F: R \operatorname{Mod} \rightarrow S\Mod</m> be a covariant right exact functor.
                  <ol>
                    <li>
                      <p>
                        <m>L_{i} F(A)</m> is well-de ned up to isomorphism for every object <m>A</m>.
                      </p>
                    </li>
  
                    <li>
                      <p>
                        <m>L_{i} F(f)</m> is well-de ned for every arrow <m>f</m>.
                      </p>
                    </li>
  
                    <li>
                      <p>
                        <m>L_{i} F</m> is an additive functor for each <m>i</m>.
                      </p>
                    </li>
  
                    <li>
                      <p>
                        <m>L_{0} F=F</m>.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
  
              <proof>
                <p>
                  <ol>
                    <li>
                      <p>
                        Let <m>P</m> and <m>Q</m> be projective resolutions of <m>A</m>. 
                        <xref ref="thm-5.17"/> gives us maps of complexes <m>\varphi: P \rightarrow Q</m> and <m>\psi: Q \rightarrow P</m> such that <m>\varphi \psi</m> is homotopic to <m>1_{Q}</m> and <m>\psi \varphi</m> is homotopic to <m>1_{P}</m>. 
                        Additive functors preserve homotopies, by Remark 7.35, so <m>F(\varphi) F(\psi)</m> and <m>F(\psi) F(\varphi)</m> are homotopic to the corresponding identity maps. 
                        Homotopic maps induce the same map in homology, by <xref ref="lem-2.9"/>. 
                        Therefore, <m>F(\varphi)</m> and <m>F(\psi)</m> induce isomorphisms in homology.
                      </p>
                    </li>
  
                    <li>
                      <p>
                        Fix projective resolutions <m>P</m> and <m>Q</m> of <m>M</m> and <m>N</m>. 
                        Any two lifts <m>\varphi</m> and <m>\psi</m> of <m>f: M \rightarrow N</m> to <m>P \rightarrow Q</m> are homotopic, by <xref ref="thm-5.17"/>. 
                        Additive functors preserve homotopies, by Remark 7.35, so <m>F(\varphi)</m> and <m>F(\psi)</m> are homotopic. 
                        Homotopic maps induce the same map in homology, by <xref ref="lem-2.9"/>, so <m>L_{i} F(\varphi)=L_{i} F(\psi)</m> for each <m>i</m>.
                      </p>
                    </li>
  
                    <li>
                      <p>
                        Given an arrow <m>f</m>, fix a lift <m>\varphi</m> of <m>f</m> to projective resolutions of the source and target, which exists by <xref ref="thm-5.17"/>.
                        Since <m>F</m> is an additive functor, <m>\mathrm{H}_{i}(F(\varphi))</m> is a homomorphism for each <m>i</m>, and thus <m>L_{i} F(f)</m> is a homomorphism between the corresponding Hom-groups, which as we have seen is independent of our choice of <m>\varphi</m>.
                      </p>
                    </li>
  
                    <li>
                      <p>
                        Let <m>A</m> be any <m>R</m>-module and <m>P</m> be a projective resolution of <m>A</m>. 
                        Since <m>P</m> is right exact, and
                        <me>P_{1} \longrightarrow P_{0} \longrightarrow A \longrightarrow 0</me>
                        is exact, then so is
                        <me>F\left(P_{1}\right) \longrightarrow F\left(P_{0}\right) \longrightarrow F(A) \longrightarrow 0</me>
                      </p>
                
                      <p>
                        We claim that <m>\mathrm{H}_{0}(F(P))=F(A)</m>. 
                        The last sequence above says that
                        <me>F(A)=\operatorname{coker}\left(F\left(P_{1}\right) \rightarrow F\left(P_{0}\right)\right),</me>
                        and <m>\mathrm{H}_{0}(F(P))=F\left(P_{0}\right) / \operatorname{im}\left(F\left(P_{1}\right) \rightarrow F\left(P_{0}\right)\right)=\operatorname{coker}\left(F\left(P_{1}\right) \rightarrow F\left(P_{0}\right)\right)</m>.
                      </p>
                    </li>
                  </ol>
                </p>
              </proof>
            </proposition>
  
            <exercise xml:id="exe-68">
              <statement>
                <p>
                  Show that the following holds for every covariant left exact functor <m>F</m> :
                  <ol>
                    <li>
                      <p>
                        <m>R^{i} F(A)</m> is well-defined up to isomorphism.
                      </p>
                    </li>
    
                    <li>
                      <p>
                        <m>R^{i} F(f)</m> is well-defined for every arrow <m>f</m>.
                      </p>
                    </li>
    
                    <li>
                      <p>
                        <m>R^{i} F(f)</m> is an additive functor for every <m>i</m>.
                      </p>
                    </li>
    
                    <li>
                      <p>
                        <m>R^{0} F=F</m>.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
            </exercise>

          </subsection>

          <subsection xml:id="subsec-forcing-exactness"><title>Forcing Exactness</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>

            <p>
              And now we are ready to prove the most important result about derived functors: they fix the lack of exactness of the functor we are deriving, by inducing a long exact sequence in homology from any given short exact sequence.
            </p>
  
            <theorem xml:id="thm-6.5">
              <statement>
                <p>
                  Let <m>F</m> a right exact covariant functor. 
                  Any short exact sequence
                  <me>0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0</me>
                  induces a natural long exact sequence
                  <me>\cdots \longrightarrow L_{2} F(C) \longrightarrow L_{1} F(A) \longrightarrow L_{1} F(B) \longrightarrow L_{1} F(C) \longrightarrow F(A) \longrightarrow F(B) \longrightarrow F(C) \longrightarrow 0</me>
                </p>
          
                <p>
                  Similarly, if <m>F</m> is a left exact covariant functor, we obtain a long exact sequence
                  <me>0 \longrightarrow F(A) \longrightarrow F(B) \longrightarrow F(C) \longrightarrow R^{1} F(A) \longrightarrow R^{1} F(B) \longrightarrow R^{1} F(C) \longrightarrow R^{2} F(A) \longrightarrow \cdots</me>
                </p>
          
                <p>
                  If <m>F</m> is a contravariant left exact functor, we obtain a natural long exact sequence
                  <me>0 \longrightarrow F(C) \longrightarrow F(B) \longrightarrow F(A) \longrightarrow R^{1} F(C) \longrightarrow R^{1} F(B) \longrightarrow R^{1} F(A) \longrightarrow R^{2} F(C) \longrightarrow \cdots</me>
                </p>
              </statement>
  
              <proof>
                <p>
                  We give a proof for the case of right exact functors, and the remaining cases follow by duality. 
                  We start by fixing projective resolutions <m>P</m> of <m>A</m> and <m>R</m> of <m>C</m>.
                  By Theorem 7.58, we can choose a projective resolution <m>Q</m> of <m>B</m> and lifts of <m>f</m> and <m>g</m> such that
                  <me>0 \longrightarrow P \longrightarrow Q \longrightarrow R \longrightarrow 0</me>
                  is a short exact sequence of complexes. 
                  By <xref ref="prop-6.4"/>, <m>L_{i} F</m> does not depend on the choice of resolution, so we can compute <m>L_{i} F(A), L_{i} F(B)</m>, and <m>L_{i} F(C)</m> from <m>P, Q</m>, and <m>R</m>. 
                  Now notice that for each <m>n, R_{n}</m> is projective, so
                  <me>0 \longrightarrow P_{n} \longrightarrow Q_{n} \longrightarrow R_{n} \longrightarrow 0</me>
                  is a split short exact sequence. 
                  Now additive functors preserve split short exact sequences, by <xref ref="exe-94"/>, so
                  <me>0 \longrightarrow F\left(P_{n}\right) \longrightarrow F\left(Q_{n}\right) \longrightarrow F\left(R_{n}\right) \longrightarrow 0</me>
                  is a short exact sequence for all <m>n</m>. 
                  Then
                  <me>0 \longrightarrow F(P) \longrightarrow F(Q) \longrightarrow F(R) \longrightarrow 0</me>
                  is a short exact sequence of complexes. 
                  Note, however, that this sequence is not necessarily split anymore, since the splittings at each level do not necessarily assemble into a map of complexes. 
                  The Long Exact Sequence in homology now gives us the long exact sequence we desire.
                </p>
          
                <p>
                  There were many choices along the way. 
                  First, we chose resolutions <m>P, Q</m>, and <m>R</m>, and lifts of <m>f</m> and <m>g</m>. 
                  We have shown our computations of <m>L_{i} F(\quad)</m> are independent of these choices. 
                  We should check, however, that the resulting connecting arrows are natural transformations that do not depend on our choice of lifts.
                  Once a lift is fixed, we know we already have naturality from the Snake Lemma or the Long Exact Sequence in homology.
                  It remains to check naturality. 
                  What is left to check is that given a commutative diagram with exact rows
                </p>
        
                <image source="2023_11_27_3974d73438430121205eg-05(2).jpg" width="20%"/>
                  
                <p>
                  and chosen lifts of the original short exact sequences to projective resolutions, there are maps of complexes such that
                </p>
          
                <image source="2023_11_27_3974d73438430121205eg-05.jpg" width="20%"/>
          
                <p>
                  commutes. 
                  Our derived functors <m>L_{i} F</m> will preserve these maps of complexes and the commutativity of the diagram above, so we get commutative diagrams
                </p>
          
                <image source="2023_11_27_3974d73438430121205eg-05(3).jpg" width="20%"/>
          
                <p>
                  for each <m>i</m>. 
                  First, notice that we know that <m>a, b</m>, and <m>c</m> can be lifted to maps of complexes by <xref ref="thm-5.17"/>, and that any two lifts of each <m>a, b</m>, or <m>c</m> are unique up to homotopy. 
                  So let's start by fixing lifts of <m>a</m> and <m>\gamma</m> of <m>c</m>, and we will construct an appropriate lift <m>\beta</m> of <m>b</m>. 
                  Since the short exact sequences
                  <me>0 \longrightarrow P_{n} \longrightarrow Q_{n} \longrightarrow R_{n} \longrightarrow 0</me>
                </p>
          
                <p>
                  split for each <m>n</m>, we might as well assume that <m>Q_{n}=P_{n} \oplus R_{n}</m> and that the arrows <m>P \rightarrow Q</m> and <m>Q \rightarrow R</m> are given by the canonical arrows to and from the product <m>\equiv</m> coproduct in each homological degree. 
                  We cannot, however, assume <m>Q=P \oplus R</m> as complexes, only that <m>Q_{n}=P_{n} \oplus R_{n}</m> in each homological degree <m>n</m>. 
                  The commutativity of
                </p>
        
                <image source="2023_11_27_3974d73438430121205eg-05(1).jpg" width="20%"/>
                  
                <p>
                  does imply that <m>\partial^{Q}(P) \subseteq P</m>, so we can say that <m>\partial^{Q}</m> is of the form
                  <me>
                    \partial_{n}^{Q}=\left(\begin{array}{cc}
                    \partial_{n}^{P} &amp; \mu_{n} \\
                    0 &amp; \partial_{n}^{R}
                    \end{array}\right)
                  </me>
                  for each <m>n</m>. 
                  Since this is a differential, we have
                  <me>\left(\partial_{n}^{Q}\right)^{2}=0 \Longrightarrow \partial_{n}^{P}{ }_{1} \mu_{n}+\mu_{n}{ }_{1} \partial_{n}^{R}=0</me>
                </p>
          
                <p>
                  Similarly, all this applies to <m>\partial_{n}^{Q^{\prime}}</m>, which must be of the form
                  <me>
                    \partial_{n}^{Q^{\prime}}=\left(\begin{array}{cc}
                    \partial_{n}^{P^{\prime}} &amp; \mu_{n}^{\prime} \\
                    0 &amp; \partial_{n}^{R^{\prime}}
                    \end{array}\right)
                  </me>
                </p>
          
                <p>
                  We claim that we can define <m>\beta_{n}=\left(\begin{array}{cc}n &amp; \nu_{n} \\ 0 &amp; \gamma_{n}\end{array}\right)</m> for each <m>n</m> such that <m>\beta</m> is a map of complexes, meaning
                  <me>\partial_{n}^{Q^{\prime}} \beta_{n}=\beta_{n \quad 1} \partial_{n}^{Q}</me>
                </p>
          
                <p>
                  Writing the corresponding products of matrices, we must have
                </p>
          
                <image source="2023_11_27_3974d73438430121205eg-06(1).jpg" width="20%"/>
                  
                <p>
                  The only nontrivial statement we want to guarantee is that <m>\partial_{n}^{P^{\prime}} \nu_{n}+\mu_{n}^{\prime} \gamma_{n}={ }_{n}{ }_{1} \mu_{n}+\nu_{n}{ }_{1} \partial_{n}^{R}</m>. 
                  We can solve this inductively for each <m>n</m>, and construct an appropriate <m>\nu_{n}</m> inductively. 
                  Given <m>\nu_{n}</m>, set
                  <me>{ }_{n}:={ }_{n}{ }_{1} \mu_{n}+\nu_{n}{ }_{1} \partial_{n}^{R} \quad \mu_{n}^{\prime} \gamma_{n}</me>
                </p>
          
                <p>
                  We want to construct <m>\nu_{n}</m> such that <m>R_{n} \stackrel{\nu_{n}}{\longrightarrow} P_{n}^{\prime} \quad</m> commutes, assuming we have constructed
                </p>
          
                <p>
                  <m>\nu_{n}</m> 1. First, we claim that <m>\partial_{n}^{P^{\prime}}{ }_{1}{ }_{n}=0</m>.
                </p>
          
                <image source="2023_11_27_3974d73438430121205eg-06(2).jpg" width="20%"/>
                  
                <image source="2023_11_27_3974d73438430121205eg-06(3).jpg" width="20%"/>
                  
                <p>
                  By induction,
                  <me>\partial_{n}^{P_{1} \nu_{n}{ }_{1}}+\mu_{n{ }_{1}}^{\prime} \gamma_{n}{ }_{1}={ }_{n}{ }_{2} \mu_{n \quad 1}+\nu_{n}{ }_{2} \partial_{n}^{R}{ }_{1}^{R} \text {. }</me>
                </p>
          
                <p>
                  Using this to replace <m>\partial_{n}^{P^{\prime}}{ }_{1} \nu_{n}{ }_{1}</m> in the equation above, we get
                </p>
          
                <image source="2023_11_27_3974d73438430121205eg-06.jpg" width="20%"/>
          
                <p>
                  <me>
                    \begin{aligned}
                    &amp; ={ }_{n}{ }_{2}{ }_{2} \mu_{n}{ }_{1} \partial_{n}^{R}+\partial_{n}^{P^{\prime}{ }_{1}}{ }_{n}{ }_{1}{ }_{1} \mu_{n}+\nu_{n}{ }_{2} \partial_{n}{ }_{1}^{R} \partial_{n}^{R} \quad \mu_{n}^{\prime}{ }_{1}\left(\partial_{n}^{P^{\prime}} \gamma_{n}+\gamma_{n}{ }_{1} \partial_{n}^{R}\right) \\
                    &amp; ={ }_{n}{ }_{2} \partial_{n}{ }_{1}{ }_{1} \mu_{n}+\partial_{n}^{P^{\prime}{ }_{1}}{ }_{n}{ }_{1}{ }_{1} \mu_{n}+\nu_{n}{ }_{2} \partial_{n}{ }_{1}{ }_{1} \partial_{n}^{R} \quad \mu_{n}^{\prime}{ }_{1}\left(\partial_{n}^{P^{\prime}} \gamma_{n}+\gamma_{n}{ }_{1} \partial_{n}^{R}\right)
                    \end{aligned}
                  </me>
                </p>
          
                <p>
                  We showed above that <m>\partial_{n}^{P^{\prime}} \gamma_{n}+\gamma_{n}{ }_{1} \partial_{n}^{R}=0</m>. 
                  Moreover, <m>\partial_{n}^{R}{ }_{1} \partial_{n}^{R}=0</m>. 
                  We conclude that
                  <me>
                    \begin{array}{rlr}
                    \partial_{n{ }_{1}{ }_{n}}^{P^{\prime}} &amp; ={ }_{n}{ }_{2} \partial_{n}^{P}{ }_{1} \mu_{n}+\partial_{n}^{P_{1}}{ }_{1}{ }_{n}{ }_{1} \mu_{n} &amp; \\
                    &amp; ={ }_{n}{ }_{2} \partial_{n}^{P}{ }_{1} \mu_{n}+{ }_{n}{ }_{2} \partial_{n}^{P^{\prime}} \mu_{n} &amp; \text { since } \quad \text { is a map of complexes } \\
                    &amp; ={ }_{n}{ }_{2}\left(\partial_{n}^{P}{ }_{1} \mu_{n}+\partial_{n}^{P^{\prime}} \mu_{n}\right) &amp; \\
                    &amp; =0 &amp; \text { since } \partial_{n}^{P}{ }_{1} \mu_{n}+\partial_{n}^{P^{\prime}} \mu_{n}=0 .
                    \end{array}
                  </me>
                </p>
          
                <p>
                  So this concludes the proof that <m>\partial_{n}^{P^{\prime}}{ }_{1}{ }_{n}=0</m>. 
                  Therefore, <m>{ }_{n}</m> must factor through the <m>\operatorname{ker} \partial_{n}^{P^{\prime}}{ }_{1}</m> :
                </p>
          
                <image source="2023_11_27_3974d73438430121205eg-07(2).jpg" width="20%"/>
          
                <p>
                  On the other hand, <m>P^{\prime}</m> is a resolution and thus exact, so <m>\operatorname{im} \partial_{n}=\operatorname{ker} \partial_{n} 1</m>, and <m>\partial_{n}</m> factors through <m>\operatorname{ker} \partial_{n}{ }_{1}</m> as
                </p>
          
                <image source="2023_11_27_3974d73438430121205eg-07(1).jpg" width="20%"/>
                  
                <p>
                  via some epi <m>\varphi_{n}</m>. 
                  Finally, <m>R_{n}</m> is projective, so there exists <m>\nu_{n}</m> such that
                </p>
          
                <image source="2023_11_27_3974d73438430121205eg-07.jpg" width="20%"/>
                  
                <p>
                  commutes - this was the <m>\nu_{n}</m> we were searching for.
                </p>
              </proof>
            </theorem>
  
            <theorem xml:id="thm-6.6">
              <statement>
                <p>
                  Let <m>T_{i}: R \operatorname{Mod} \rightarrow S</m> Mod be a sequence of additive covariant functors, and <m>F: R \operatorname{Mod} \rightarrow S</m> Mod a right exact functor. 
                  Suppose that the following hold:
                  <ol>
                    <li>
                      <p>
                        For every short exact sequence <m>0 \longrightarrow A \longrightarrow B \longrightarrow C \longrightarrow 0</m> in <m>R</m> Mod, we get a natural long exact sequence
                        <me>\cdots \longrightarrow T_{2}(C) \longrightarrow T_{1}(A) \longrightarrow T_{1}(B) \longrightarrow T_{1}(C) \longrightarrow T_{0}(A) \longrightarrow T_{0}(B) \longrightarrow T_{0}(C) \longrightarrow 0</me>
                      </p>
                    </li>
  
                    <li>
                      <p>
                        <m>T_{0}</m> is naturally isomorphic to <m>F</m>.
                      </p>
                    </li>
  
                    <li>
                      <p>
                        <m>T_{n}(P)=0</m> for every projective <m>P</m> and all <m>n \geqslant 1</m>.
                      </p>
                    </li>
                  </ol>
                  Then <m>T_{n}</m> is naturally isomorphic to <m>L_{n} F</m> for all <m>n \geqslant 0</m>.
                </p>
              </statement>
  
              <proof>
                <p>
                  We are going to show that <m>T_{n}</m> is naturally isomorphic to <m>L_{n} F</m> by all <m>n</m>. 
                  The statement for <m>n=0</m> is one of our assumptions. 
                  When <m>n=1</m>, fix an <m>R</m>-module <m>M</m>, and consider a short exact sequence
                  <me>0 \longrightarrow K \stackrel{f}{\longrightarrow} P \longrightarrow M \longrightarrow 0</me>
                  with <m>P</m> projective. 
                  By assumption (1), we get a long exact sequence on the <m>T_{i}</m>, and by (2), there exist isomorphisms <m>\tau_{0}</m> such that the following is a commutative diagram:
                </p>
          
                <image source="2023_11_27_3974d73438430121205eg-07(3).jpg" width="20%"/>
          
                <p>
                  By <m>(3), T_{1}(P)=0</m>, and <m>L_{1} F(P)=0</m> by construction. 
                  The exactness of each row now implies that <m>\Delta_{1}</m> and <m>\delta_{1}</m> are both injective. 
                  Moreover,
                  <me>
                    \begin{array}{rlr}
                    F(f) \tau_{0}(K) \Delta_{1} &amp; =\tau_{0}(P) T_{0}(f) \Delta_{1} &amp; \text { by commutativity of the diagram } \\
                    &amp; =0 &amp; \text { since } T_{0}(f) \Delta_{1}=0 .
                    \end{array}
                  </me>
                  so the image of <m>\tau(k) \Delta_{1}</m> is contained in <m>\operatorname{ker} F(f)=\operatorname{im} \delta_{1}</m>. 
                  Define <m>\tau_{1}(M): T_{1}(M) \rightarrow L_{1} F(M)</m> as follows: 
                  we send each <m>a \in T_{1}(M)</m> to the unique <m>b \in L_{1} F(M)</m> such that <m>\delta_{1}(b)=\tau_{0}(K) \Delta_{1}(a)</m>. 
                  This is a homomorphism of <m>R</m>-modules because so are <m>\delta_{1}, \tau_{0}(K)</m>, and <m>\Delta_{1}</m>. 
                  Moreover, since <m>\tau_{0}(K)</m> is an isomorphism and <m>\Delta_{1}</m> is injective, the composition <m>\tau_{0}(K) \Delta_{1}</m> is injective. 
                  As a consequence, <m>\tau_{1}(M)</m> is injective. 
                  On the other hand, we claim that <m>\tau_{1}(M)</m> is also surjective. 
                  Given any <m>b \in L_{1} F(M)</m>, since <m>\tau_{0}(K)</m> is an isomorphism there exists <m>c \in T_{0}(K)</m> such that <m>\tau_{0}(K)(c)=\delta_{1}(b)</m>. 
                  Thus
                  <me>
                    \begin{array}{rlr}
                    \tau_{0}(P) T_{0}(f)(c) &amp; =F(f) \tau_{0}(K)(c) &amp; \text { by commutativity } \\
                    &amp; =F(f) \delta_{1}(b) &amp; \text { since } \tau_{0}(K)(c)=\delta_{1}(b) \\
                    &amp; =0 &amp; \text { since the bottom row is a complex }
                    \end{array}
                  </me>
                </p>
          
                <p>
                  Since <m>\tau_{0}(P)</m> is an iso, we must have <m>c \in \operatorname{ker}\left(T_{0}(f)\right)=\operatorname{im} \Delta_{1}</m>. 
                  Thus we can choose <m>a \in T_{1}(M)</m> such that <m>\Delta_{1}(a)=c</m>, which implies that <m>\tau_{1}(M)(a)=b</m>. 
                  Therefore, <m>\tau_{1}(M)</m> is an isomorphism.
                </p>
          
                <p>
                  This shows that <m>T_{1}(M) \cong L_{1} F(M)</m>. 
                  Now let <m>n \geqslant 1</m>, and consider the diagram with exact rows
                  <me>
                    \begin{gathered}
                    T_{n+1}(P) \longrightarrow T_{n+1}(M) \stackrel{\Delta_{n} 1}{\longrightarrow} T_{n}(K) \longrightarrow T_{n}(P) \\
                    L_{n+1} F(P) \longrightarrow L_{n+1} F(M) \underset{\delta_{n \quad 1}}{\longrightarrow} L_{n} F(K) \longrightarrow L_{n} F(P)
                    \end{gathered}
                  </me>
                </p>
          
                <p>
                  By (3), <m>T_{n+1}(P)=0=T_{n}(P)</m>, and by construction <m>L_{n+1} F(P)=0=L_{n} F(P)</m>. 
                  Therefore, <m>\Delta_{n+1}</m> and <m>\delta_{n+1}</m> are isomorphisms. 
                  Since <m>\tau_{n}(K)</m> is also an isomorphism, we conclude that <m>T_{n+1}(M) \cong L_{n+1} F(M)</m>. 
                  Therefore, <m>T_{n}(M) \cong L_{n} F(M)</m> for all <m>n</m>.
                </p>
          
                <p>
                  It remains to show that these isomorphisms are natural, that is, that any <m>R</m>-module map <m>f: M \rightarrow N</m> gives rise to commutative diagrams
                </p>
          
                <image source="2023_11_27_3974d73438430121205eg-08.jpg" width="20%"/>
                  
                <p>
                  We will prove this by induction on <m>i</m>. 
                  First, note that the commutativity of the square holds for <m>i=0</m> by (2). 
                  Let <m>i \geqslant 1</m>. 
                  Fix projectives <m>P</m> and <m>Q</m> and short exact sequences
                  <me>0 \longrightarrow K \longrightarrow P \longrightarrow M \longrightarrow 0 \quad \text { and } \quad 0 \longrightarrow C \longrightarrow Q \longrightarrow N \longrightarrow</me>
                </p>
          
                <p>
                  Since <m>Q</m> is projective and <m>Q \rightarrow N</m> is surjective, <m>f</m> lifts to a map <m>g: P \rightarrow Q</m>.
                  Moreover, an argument similar to the one we used above shows that we can define a map <m>h</m> giving a commutative diagram
                </p>
          
                <image source="2023_11_27_3974d73438430121205eg-09.jpg" width="20%"/>
                  
                <p>
                  Now consider the following diagram:
                </p>
          
                <image source="2023_11_27_3974d73438430121205eg-09(1).jpg" width="20%"/>
                  
                <p>
                  The big square and (1) commute by definition of <m>\tau_{i}</m>.
                </p>
          
                <p>
                  The square (3) commutes because we assumed in (1) that <m>T_{i}</m> gives rise to long exact sequences which are natural.
                </p>
          
                <p>
                  The square (5) commutes because <m>L_{i} F</m> gives rise to natural long exact sequences, by <xref ref="thm-6.5"/>.
                </p>
          
                <p>
                  The square (4) commutes by induction hypothesis.
                </p>
          
                <p>
                  Our goal is to show that (2) commutes. 
                  First, we claim that
                  <me>\delta_{i} \circ \tau_{i}(N) \circ T_{i}(f)=\delta_{i} \circ L_{i} F(f) \circ \tau_{i}(M)</me>
                  Indeed, using the commutativity of the various other parts of the diagram, we get
                  <me>
                    \begin{array}{rlr}
                    \delta_{i} \circ \tau_{i}(N) \circ T_{i}(f) &amp; =\tau_{i}{ }_{1}(C) \circ \Delta_{i} \circ T_{i}(f) &amp; \text { by commutativity of (1) } \\
                    &amp; =\tau_{i}{ }_{1}(C) \circ T_{i}{ }_{1}(h) \circ \Delta_{i} &amp; \text { by commutativity of (3) } \\
                    &amp; =L_{i}{ }_{1} F(h) \circ \tau_{i}{ }_{1}(K) \circ \Delta_{i} &amp; \text { by commutativity of (4) } \\
                    &amp; =L_{i}{ }_{1} F(h) \circ \delta_{i} \circ \tau_{i}(M) &amp; \text { by commutativity of the big square } \\
                    &amp; =\delta_{i} \circ L_{i} F(f) \circ \tau_{i}(M) &amp; \text { by commutativity of (5). }
                    \end{array}
                  </me>
                </p>
          
                <p>
                  On the other hand, the long exact sequence for <m>L_{i} F</m> from <xref ref="thm-6.5"/> says that
                  <me>L_{i} F(Q) \longrightarrow L_{i} F(N) \stackrel{\delta_{i}}{\longrightarrow} L_{i}{ }_{1} F(C)</me>
                  is exact, but since <m>i \geqslant 1</m> and <m>Q</m> is projective we have <m>L_{i} F(Q)=0</m> by <xref ref="rem-6.3"/>. 
                  But the exactness of
                  <me>0 \longrightarrow L_{i} F(N) \stackrel{\delta_{i}}{\longrightarrow} L_{i}{ }_{1} F(C)</me>
                  says that <m>\delta_{i}</m> is injective. 
                  Therefore,
                  <me>\delta_{i} \circ \tau_{i}(N) \circ T_{i}(f)=\delta_{i} \circ L_{i} F(f) \circ \tau_{i}(M) \Longrightarrow \tau_{i}(N) \circ T_{i}(f)=L_{i} F(f) \circ \tau_{i}(M),</me>
                  and 2 commutes, as desired.
                </p>
              </proof>
            </theorem>
  
            <p>
              There are versions of this theorem for the three remaining cases as well; we record one of them here:
            </p>
  
            <theorem xml:id="thm-6.7">
              <statement>
                <p>
                  Suppose <m>T_{i}: R \operatorname{Mod} \rightarrow S</m> Mod is a sequence of additive covariant functors and <m>F: R \operatorname{Mod} \rightarrow S</m> Mod a left exact functor such that
                  <ol>
                    <li>
                      <p>
                        For every short exact sequence <m>0 \longrightarrow A \longrightarrow B \longrightarrow C \longrightarrow</m> in <m>R</m> Mod, we get a long exact sequence
                        <me>0 \longrightarrow T_{0}(A) \longrightarrow T_{0}(B) \longrightarrow T_{0}(C) \longrightarrow T_{1}(A) \longrightarrow T_{1}(B) \longrightarrow T_{1}(C) \longrightarrow \cdots</me>
                      </p>
                    </li>
  
                    <li>
                      <p>
                        <m>T_{0}</m> is naturally isomorphic to <m>F</m>.
                      </p>
                    </li>
  
                    <li>
                      <p>
                        <m>T_{n}(E)=0</m> for every injective <m>E</m> and all <m>n \geqslant 1</m>.
                      </p>
                    </li>
                  </ol>
                  Then <m>T_{n}</m> is naturally isomorphic to <m>R^{n} F</m> for all <m>n</m>.
                </p>
              </statement>
            </theorem>
  
            <p>
              We leave the proof of this and the other two cases as an exercise.
            </p>
            
          </subsection>

          <outcomes>
            <ul>
              <li>
                <p>

                </p>
              </li>
            </ul>
          </outcomes>
          
        </section>

        <section xml:id="sec-ext-tor"><title>A First Look at <m>\Ext</m> and <m>\Tor</m></title>

          <objectives>
            <ul>
              <li>
                
              </li>
            </ul>
          </objectives>

          <subsection xml:id="subsec-double-complexes"><title>Double Complexes</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>

            <p>
              It's time to return to study some concrete examples of derived functors: Ext, the derived functor of Hom, and Tor, the derived functor of tensor. 
              Given two modules <m>M</m> and <m>N</m>, we may consider the derived functors of <m>M \otimes_{R}</m>, and then plug in <m>N</m>, or we may consider the derived functors of <m>\otimes_{R} N</m>, and plug in <m>M</m>; 
              it turns out that the two are naturally isomorphic, and this is the Tor functor:
              <me>\operatorname{Tor}_{i}^{R}(M, N):=L_{i}\left(M \otimes_{R}\right)(N) \cong L_{i}\left(\otimes_{R} N\right)(M)</me>
            </p>
      
            <p>
              More precisely, if <m>P</m> is a projective resolution of <m>M</m>, and <m>Q</m> is a projective resolution of <m>N</m>,
              <me>\operatorname{Tor}_{i}^{R}(M, N):=\mathrm{H}_{i}\left(P \otimes_{R} N\right) \cong \mathrm{H}_{i}\left(M \otimes_{R} Q\right) .</me>
            </p>
      
            <p>
              There are two Hom functors, each with its own derived functor: given <m>R</m>-modules <m>M</m> and <m>N</m>, we may take a projective resolution <m>P</m> of <m>M</m>, and compute <m>\mathrm{H}^{i}\left(\operatorname{Hom}_{R}(P, N)\right)</m>, or we could take an injective resolution <m>E</m> of <m>N</m>, and compute <m>\mathrm{H}^{i}\left(\operatorname{Hom}_{R}(M, E)\right)</m>. 
              It turns out these two completely different sounding constructions give us isomorphic <m>R</m>-modules:
              <me>
                \begin{aligned}
                \operatorname{Ext}_{R}^{i}(M, N) &amp; :=R^{i}\left(\operatorname { H o m } _ { R } ( M , \quad ) ( N ) \cong R ^ { i } \left(\operatorname{Hom}_{R}(, N)(M)\right.\right. \\
                &amp; \cong \mathrm{H}^{i}\left(\operatorname{Hom}_{R}(P, N)\right) \cong \mathrm{H}^{i}\left(\operatorname{Hom}_{R}(M, E)\right)
                \end{aligned}
              </me>
            </p>
      
            <p>
              To show that for each of Ext and Tor these two seemingly unrelated definitions agree, we will need some more tools.
            </p>
  
            <definition xml:id="def-6.8"><title>Suspension</title>
              <statement>
                <p>
                  The <em>suspension</em> or <em>shift</em> of a complex <m>C</m> is the complex <m>\Sigma C:=C[1]</m> with
                  <me>(\Sigma C)_{n}=C_{n} \quad \text { and } \quad \partial^{\Sigma C}=\partial^{C} \text {. }</me>
                </p>
          
                <p>
                  Given an integer <m>k</m>, the <m>k</m> th suspension of <m>C</m> is the complex
                  <me>\Sigma^{k} C:=\underbrace{\sum \cdots \Sigma}_{k \text { times }} C \quad \text { with } \partial^{\Sigma^{k} C}=(1)^{k} \partial^{C}</me>
                </p>
              </statement>
            </definition>
      
            <p>
              Note that there are two conventions in the literature, the other one being <m>(\Sigma C)_{n}=C_{n+1}</m>.
            </p>
  
            <definition xml:id="def-6.9"><title>Double Complex</title>
              <statement>
                <p>
                  A (homological) <em>double complex</em> over the ring <m>R</m> is a family of <m>R</m>-modules <m>\left\{C_{p, q}\right\}_{p, q \in \mathbb{Z}}</m> together with homomorphisms of <m>R</m>-modules <m>d^{h}: C_{p, q} \rightarrow C_{p} \quad{ }_{1, q}</m> and <m>d^{v}: C_{p, q} \rightarrow</m> <m>C_{p, q} 1</m> satisfying
                </p>
          
                <image source="2023_11_27_3974d73438430121205eg-11.jpg"/>
                  
                <p>
                  <me>d^{h} d^{h}=0 \quad d^{v} d^{v}=0 \quad d^{h} d^{v}+d^{v} d^{h}=0</me>
                </p>
              </statement>
            </definition>
  
            <remark xml:id="rem-6.10">
              <p>
                Note that if <m>C</m> is a double complex, then each row and each column is a complex: 
                if we fix <m>p, C_{p, \bullet}</m> is a complex with differential <m>d^{v}</m>; 
                if we fix <m>q, C_{\bullet, q}</m> is a complex with differential <m>d^{h}</m>.
              </p>
            </remark>
  
            <p>
              What we defined above is a homological double complex. 
              A cohomological double complex would have vertical and horizontal maps that go up in index, and we instead write <m>C^{p, q}</m> for the module in position <m>(p, q)</m>. Also, please note that there are different conventions in the literature for whether <m>p</m> refers to the row or column.
            </p>
  
            <definition xml:id="def-6.11"><title>Total Complex</title>
              <statement>
                <p>
                  Given a double complex <m>C</m>, its <em>total complex</em> is the complex given by
                  <me>\operatorname{Tot}^{\oplus}(C)_{n}:=\bigoplus_{p+q=n} C_{p, q} \quad \text { with differential } d=d^{h}+d^{v}</me>
                </p>
          
                <p>
                  Similarly, the product total complex of <m>C</m> is given by
                  <me>\operatorname{Tot}^{\Pi}(C)_{n}:=\prod_{p+q=n} C_{p, q} \quad \text { with differential } d=d^{h}+d^{v}</me>
                </p>
              </statement>
            </definition>
  
            <remark xml:id="rem-6.12">
              <p>
                Let <m>C</m> be a double complex with differentials <m>d^{v}</m> and <m>d^{h}</m>. Then
              </p>
        
              <p>
                <me>\left(d^{h}+d^{v}\right)\left(d^{h}+d^{v}\right)=\underbrace{d^{h} d^{h}}_{0}+\underbrace{d^{h} d^{v}+d^{v} d^{h}}_{0}+\underbrace{d^{v} d^{v}}_{0}=0</me>
              </p>
        
              <p>
                so <m>\left(\operatorname{Tot}^{\oplus}(C), d\right)</m> and <m>\left(\operatorname{Tot}^{\Pi}(C), d\right)</m> are indeed complexes.
              </p>
            </remark>
  
            <p>
              In order to prove our two definitions of Ext and Tor each agree, we will need two special double complexes: the tensor and the Hom double complex.
            </p>
  
            <definition xml:id="def-6.13"><title>Tensor Product Double Complex</title>
              <statement>
                <p>
                  Let <m>R</m> be a ring and <m>C</m> and <m>D</m> be complexes of <m>R</m>-modules. 
                  The tensor product double complex of <m>C</m> and <m>D</m> is the double complex <m>C \otimes D</m> given by taking
                  <me>(C \otimes D)_{p, q}=C_{p} \otimes D_{q} \quad d^{h}=\partial^{C} \otimes_{R} 1_{D}, \quad \text { and } \quad d^{v}=(1)^{p} 1_{C} \otimes_{R} \partial^{D}</me>
                </p>
          
                <p>
                  We call the total complex of the tensor product double complex of <m>C</m> and <m>D</m> the tensor product of <m>C</m> and <m>D</m> in <m>\mathrm{Ch}(R)</m>, and denote it by <m>C \otimes D</m>.
                </p>
              </statement>
            </definition>
  
            <remark xml:id="rem-6.14">
              <p>
                The tensor product total complex has
                <me>\operatorname{Tot}^{\oplus}(C \otimes D)_{n}=\bigoplus_{p+q=n} C_{n} \otimes_{R} D_{n}</me>
                and differential
                <me>d(x \otimes y)=\partial(x) \otimes y+(1)^{p} x \otimes \partial(y)</me>
                for <m>x \in C_{p}</m> and <m>y \in D_{q}</m>.
              </p>
            </remark>
  
            <definition xml:id="def-6.15"><title><m>\Hom</m> Double Complex</title>
              <statement>
                <p>
                  Let <m>R</m> be a ring and <m>C</m> and <m>D</m> be complexes of <m>R</m>-modules. 
                  The <em>Hom double complex</em> of <m>C</m> and <m>D</m> is the double complex <m>\operatorname{Hom}(C, D)</m> given by
                  <me>(\operatorname{Hom}(C, D))_{p, q}:=\operatorname{Hom}_{R}\left(C_{p}, D_{q}\right)</me>
                  with differentials
                  <me>
                    \begin{array}{cr}
                    \operatorname{Hom}_{R}\left(C_{p}, D_{q}\right) \stackrel{d^{h}}{\longrightarrow} \operatorname{Hom}_{R}\left(C_{p}{ }_{1}, D_{q}\right) &amp; \text { and } \operatorname{Hom}_{R}\left(C_{p}, D_{q}\right) \stackrel{d^{v}}{\longrightarrow} \operatorname{Hom}_{R}\left(C_{p}, D_{q}{ }^{1}\right) . \\
                    f \stackrel{C}{ } \stackrel{f}{\longrightarrow}(1)^{p+q+1} \partial^{D} \circ f
                    \end{array}
                  </me>
                </p>
          
                <p>
                  We call the product total complex of the Hom double complex of <m>C</m> and <m>D</m> the (internal) Hom complex of <m>C</m> and <m>D</m>, and denote it by <m>\operatorname{Hom}(C, D)</m>.
                </p>
              </statement>
            </definition>
  
            <remark xml:id="rem-6.16">
              <p>
                The Hom complex of <m>C</m> and <m>D</m> is the complex
                <me>\operatorname{Hom}(C, D)_{n}=\prod_{p+q=n} \operatorname{Hom}_{R}\left(C_{p}, D_{q}\right)</me>
                with differential <m>d(f)=f \circ \partial^{C}+(1)^{p+q+1} \partial^{D} \circ f</m> for each <m>f \in \operatorname{Hom}_{R}\left(C_{p}, D_{q}\right)</m>.
              </p>
            </remark>
  
            <remark xml:id="rem-6.17">
              <p>
                Given <m>C</m> and <m>D</m> in <m>\mathrm{Ch}(R)</m>, what is a 0 -cycle in the Hom complex <m>\operatorname{Hom}(C, D)</m> ? A 0 -cycle is a sequence of maps of <m>R</m>-modules <m>f_{k}: C_{k} \rightarrow D_{k}</m> satisfying <m>f \partial^{C} \quad \partial^{D} f=0</m>, so the 0 -cycles are precisely the maps of complexes <m>C \rightarrow D</m>. 
                Similarly, a sequence of maps <m>f_{k}: C_{k} \rightarrow D_{k}</m> is a 0-boundary if there exists a sequence of maps <m>h_{k}: C_{k} \rightarrow D_{k+1}</m> such that <m>f_{k}=\partial^{D} h_{k}+h_{k}{ }_{1} \partial^{C}</m>. 
                In other words, a 0-boundary indicates a homotopy relation - if <m>f \quad g</m> is a 0-boundary, <m>f</m> and <m>g</m> are homotopic maps.
              </p>
            </remark>
  
            <definition xml:id="def-6.18"><title>Cone</title>
              <statement>
                <p>
                  Let <m>f: C \rightarrow D</m> be a map of complexes. 
                  The <em>cone</em> of <m>f</m> is the complex cone <m>(f)</m> with cone <m>(f)_{n}=C_{n} \quad 1 \oplus D_{n}</m> and differential given by
                  <me>
                    \partial_{n}:=\left(\begin{array}{cc}
                    \partial_{C} &amp; 0 \\
                    f &amp; \partial_{D}
                    \end{array}\right): \begin{array}{cc}
                    C_{n} &amp; 1 \stackrel{\partial^{C}}{\longrightarrow} C_{n} \quad 2 \\
                    &amp; \oplus D_{n} \underset{\partial^{D}}{\longrightarrow} D_{n} \quad 1
                    \end{array}
                  </me>
                </p>
              </statement>
            </definition>
  
            <remark xml:id="rem-6.19">
              <p>
                There are different conventions for the sign in front of <m>f</m> in the definition of the differentials on the cone of <m>f</m>. 
                Weibel [Wei94] defines
                <me>
                  \partial_{n}:=\left(\begin{array}{cc}
                  \partial_{C} &amp; 0 \\
                  f &amp; \partial_{D}
                  \end{array}\right)
                </me>
                and some authors even write
                <me>
                  \partial_{n}:=\left(\begin{array}{cc}
                  \partial_{C} &amp; 0 \\
                  (1)^{n} f &amp; \partial_{D}
                  \end{array}\right)</me>
                </p>
            </remark>
  
            <p>
              All of these choices do make our proposed differential a differential (check it!). 
              The facts below about the mapping cone are all true up to sign whatever the sign convention we follow.
            </p>
  
            <exercise xml:id="exe-69">
              <statement>
                <p>
                  Let <m>f: C \rightarrow</m> be a map of complexes. 
                  Show that giving a map of complexes cone <m>(f) \rightarrow E</m> is the same as giving a map of complexes <m>D \stackrel{g}{\rightarrow} E</m>, and a homotopy between <m>g f</m> and 0 .
                </p>
              </statement>
            </exercise>
  
            <exercise xml:id="exe-70">
              <statement>
                <p>
                  Let <m>f: A \rightarrow B</m> be a map of complexes. 
                  Show that <m>f</m> is nullhomotopic if and only of <m>f</m> factors through the canonical map <m>A \rightarrow \operatorname{cone}\left(\operatorname{id}_{A}\right)</m>.
                </p>  
              </statement>
            </exercise>
  
            <remark xml:id="rem-6.20">
              <p>
                Given any map of complexes <m>C \stackrel{f}{\longrightarrow} D</m>, there is a short exact sequence
                <me>0 \longrightarrow D \longrightarrow \operatorname{cone}(f) \longrightarrow \Sigma^{1} C \longrightarrow 0</me>
                determined by the canonical arrows to and from the product <m>\equiv</m> coproduct. 
                The connecting arrows from the Snake Lemma
                <me>\mathrm{H}_{n \quad 1}(C)=\mathrm{H}_{n}\left(\Sigma{ }^{1} C\right) \stackrel{\delta}{\longrightarrow} \mathrm{H}_{n \quad 1}(D)</me>
                are exactly <m>\mathrm{H}_{n} \quad 1(f): \mathrm{H}_{n} \quad{ }_{1}(C) \rightarrow \mathrm{H}_{n} \quad{ }_{1}(D)</m> induced by <m>f</m>, so there is a long exact sequence
                <me>\cdots \longrightarrow \mathrm{H}_{n+1}(\operatorname{cone}(f)) \longrightarrow \mathrm{H}_{n}(C) \stackrel{\mathrm{H}_{n}(f)}{\longrightarrow} \mathrm{H}_{n}(D) \longrightarrow \mathrm{H}_{n}(\operatorname{cone}(f)) \longrightarrow \mathrm{H}_{n} \quad 1(C) \longrightarrow \cdots</me>
              </p>
        
              <p>
                As a consequence, <m>f</m> is a quasi-isomorphism if and only if cone <m>(f)</m> is exact.
              </p>
            </remark>
  
            <remark xml:id="rem-6.21">
              <p>
                Given a map of complexes <m>C \stackrel{f}{\longrightarrow} D</m>, we can construct a double complex from <m>f</m>, as follows:
              </p>
  
              <image source="2023_11_27_3974d73438430121205eg-14.jpg"/>
              
              <p>
                Note that <m>\operatorname{Tot}^{\oplus}(X)=\operatorname{cone}(f)</m>.
              </p>
            </remark>
      
            <p>
              Now that we have introduced all the tools we need, the last thing we need is a technical but very useful lemma.
            </p>
  
            <lemma xml:id="lem-6.22"><title>Acyclic Assembly Lemma</title>
              <statement>
                <p>
                  Let <m>C</m> be a double complex in <m>R</m> Mod.
                  <ol>
                    <li>
                      <p>
                        If <m>C</m> is an upper half plane double complex with exact rows, meaning <m>C_{p, q}=0</m> whenever <m>q&lt;0</m>, then <m>\operatorname{Tot}^{\oplus}(C)</m> is exact.
                      </p>
                    </li>
  
                    <li>
                      <p>
                        If <m>C</m> is a right half plane double complex with exact columns, meaning <m>C_{p, q}=0</m> whenever <m>p&lt;0</m>, then <m>\operatorname{Tot}^{\oplus}(C)</m> is exact.
                      </p>
                    </li>
  
                    <li>
                      <p>
                        If <m>C</m> is an upper half plane double complex with exact columns, meaning <m>C_{p, q}=0</m> whenever <m>q&lt;0</m>, then <m>\operatorname{Tot}^{\Pi}(C)</m> is exact.
                      </p>
                    </li>
  
                    <li>
                      <p>
                        If <m>C</m> is a right half plane double complex with exact rows, meaning <m>C_{p, q}=0</m> whenever <m>p&lt;0</m>, then <m>\operatorname{Tot}^{\Pi}(C)</m> is exact.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
  
              <proof>
                <p>
                  Notice that <m>\mathrm{a} \Leftrightarrow \mathrm{b}</m> and <m>\mathrm{c} \Leftrightarrow \mathrm{d}</m> by switching the indexes. 
                  Moreover, we claim that it is sufficient to show <m>c</m>, since it implies <m>b</m>.
                </p>
          
                <p>
                  To show that <m>\mathrm{c}</m> implies <m>\mathrm{b}</m>, we need some notation. 
                  Given a double complex <m>C</m>, consider the <m>n</m>th truncation <m>\tau_{n}(C)</m> of <m>C</m> defined by
                  <me>\tau_{n}(C)_{p, q}:= \begin{cases}C_{p, q} &amp; \text { if } q&gt;n \\ \operatorname{ker}\left(C_{p, n} \stackrel{d^{v}}{\longrightarrow} C_{p, n} \quad 1\right) &amp; \text { if } q=n \\ 0 &amp; \text { if } q&lt;n\end{cases}</me>
                  The natural inclusion <m>\tau_{n}(C) \rightarrow C</m> induces an isomorphism in homology for <m>i \geqslant n</m>.
                </p>
          
                <p>
                  Suppose that <m>C</m> is a right half plane double complex with exact columns, and assume that <m>\mathrm{c}</m> holds. 
                  Then <m>\tau_{n}(C)</m> still has exact columns, so by c, <m>\operatorname{Tot} \Pi_{(}\left(\tau_{n}(C)\right)</m> is exact. 
                  On the other hand, notice that up to a vertical shift, <m>\tau_{n}(C)</m> is a first quadrant double complex, and for each fixed <m>m</m>, there are only finitely many values of <m>p</m> and <m>q</m> with <m>p+q=m</m> and such that <m>\tau_{n}(C)_{p, q} \neq 0</m>. 
                  Therefore, <m>\operatorname{Tot}^{\Pi}\left(\tau_{n}\left(C_{p, \bullet}\right)\right)=\operatorname{Tot}^{\oplus}\left(\tau_{n}\left(C_{p, \bullet}\right)\right)</m>, so <m>\operatorname{Tot}^{\oplus}\left(\tau_{n}\left(C_{p, \bullet}\right)\right)</m> is exact. 
                  We claim that this implies that <m>\operatorname{Tot}^{\oplus}(C)</m> is exact. 
                  One can make this precise by saying <m>\operatorname{Tot}^{\oplus}(C)=\operatorname{colim}_{n}\left(\operatorname{Tot}^{\oplus}(C)\right)</m>. 
                  The point is that any element <m>a \in Z_{k}\left(\operatorname{Tot}^{\oplus}(C)\right)</m>, when we write <m>a</m> explicitly as <m>a=\left(a_{p, q}\right) \in \oplus_{p+q=k} C_{p, q}</m> in terms of its coordinates in each <m>C_{p, q}</m>, only finitely many <m>a_{p, q}</m> are nonzero. 
                  Let <m>q</m> be the smallest such that <m>a_{p, q} \neq 0</m>, and fix any <m>n&lt;q</m>. 
                  Then
                  <me>a \in Z_{k}\left(\operatorname{Tot}^{\oplus}\left(\tau_{n}(C)\right)\right)=B_{k}\left(\operatorname{Tot}^{\oplus}\left(\tau_{n}(C)\right)\right) \subseteq B_{k}\left(\operatorname{Tot}^{\oplus}(C)\right)</me>
                </p>
          
                <p>
                  So <m>\operatorname{Tot}^{\oplus}(C)</m> is exact, and b holds.
                </p>
          
                <p>
                  All we have left to do is to show c, meaning that the product total complex of any upper half plane double complex <m>C</m> with exact columns is exact. 
                  We are going to show that <m>\mathrm{H}_{0}\left(\operatorname{Tot}^{\Pi}(C)\right)=0</m>, and the remaining homologies follow by shifting <m>C</m> left and right. 
                  Consider a 0 -cycle in <m>\operatorname{Tot}^{\Pi}(C)</m>, meaning a sequence of elements <m>c_{p} \in C_{p, p}</m> for each <m>p \geqslant 0</m> such that <m>c=\left(c_{p}\right) \in Z_{0}\left(\operatorname{Tot}^{\Pi}(C)\right)</m>. 
                  So
                  <me>d(c)=0 \Leftrightarrow d^{v}\left(c_{p}\right)+d^{h}\left(c_{p} 1\right)=0 \text { for all } p \text {. }</me>
                </p>
          
                <p>
                  We will construct <m>b_{p, p+1} \in C_{p, p+1}</m> for each <m>p</m> such that <m>d^{v}\left(b_{p, p+1}\right)+d^{h}\left(b_{p+1, p}\right)=c_{p}</m>, proving that <m>c \in B_{0}\left(\operatorname{Tot}^{\Pi}(C)\right)</m>.
                </p>
          
                <p>
                  Set <m>b_{1,0}=0 \in C_{1,0}</m> when <m>p=1</m>. Since <m>C_{0,1}=0</m>, we must have <m>d^{v}\left(c_{0}\right)=0 \in C_{0,1}</m>. 
                  We also assumed that the columns are exact, so in particular the 0th column is exact. 
                  We can then find <m>b_{0,1} \in C_{0,1}</m> such that <m>d^{v}\left(b_{0,1}\right)=c_{0}</m>, and thus <m>d^{v}\left(b_{0,1}\right)+d^{h}\left(b_{1,0}\right)=c_{0}</m>.
                </p>
          
                <p>
                  Now we proceed by induction. 
                  Suppose we have constructed <m>b_{s+1, s}</m> for <m>1 \leqslant s \leqslant p</m> with the desired property that <m>d^{v}\left(b_{s, s+1}\right)+d^{h}\left(b_{s+1, s}\right)=c_{s}</m> for all <m>s \leqslant p</m>. 
                  Then
                  <me>
                    \begin{aligned}
                      &amp; d^{v}\left(c_{p, p} \quad d^{h}\left(b_{p+1, p}\right)\right)=d^{v}\left(c_{p}\right)+d^{h} d^{v}\left(b_{p+1, p}\right) \quad \text { since } d^{v} d^{h}+d^{h} d^{v}=0 \\
                      &amp; \left.=d^{v}\left(c_{p}\right)+d^{h}\left(\begin{array}{lllll}
                      c_{p} &amp; 1 &amp; d^{h}\left(b_{p+2, p}\right. &amp; 1
                      \end{array}\right)\right) \quad \text { as } d^{v}\left(b_{p+1, p}\right)+d^{h}\left(\begin{array}{lll}
                      b_{p+2, p} &amp; 1
                      \end{array}\right)=c_{p} \quad 1 \\
                      &amp; =d^{v}\left(c_{p}\right)+d^{h}\left(\begin{array}{ll}
                      c_{p} &amp; 1
                      \end{array}\right) \quad d^{h} d^{h}\left(\begin{array}{lll}
                      b_{p+2, p} &amp; 1
                      \end{array}\right) \\
                      &amp; =d^{v}\left(c_{p}\right)+d^{h}\left(\begin{array}{ll}
                      c_{p} &amp; 1
                      \end{array}\right) \quad \text { since } d^{h} d^{h}=0 \\
                      &amp; =0 \text {. }
                    \end{aligned}
                  </me>
                </p>
          
                <p>
                  The last equality comes simply from the fact that <m>\left(d^{v}+d^{h}\right)(c)=0</m>. 
                  So we have shown that <m>d^{v}\left(c_{p, p} \quad d^{h}\left(b_{p+1, p}\right)\right)=0</m>. 
                  Since the columns are exact, we can find <m>b_{p, p+1} \in C_{p, p+1}</m> such that
                  <me>d^{v}\left(b_{p, p+1}\right)=c_{p, p} \quad d^{h}\left(b_{p+1, p}\right)</me>
                </p>
          
                <p>
                  Equivalently,
                  <me>d^{v}\left(b_{p, p+1}\right)+d^{h}\left(b_{p+1, p}\right)=c_{p, p}</me>
                </p>
              </proof>
            </lemma>
  
            <exercise xml:id="exe-71">
              <statement>
                <p>
                  Given a double complex <m>C</m> with <m>C_{p, q}=0</m> for all <m>p&lt;n</m>, the horizontal differentials <m>C_{n+1, q} \rightarrow C_{n, q}</m> induce a map of complexes
                  <me>\operatorname{Tot}^{\oplus}\left(C_{&gt;n, \bullet}\right) \stackrel{\varphi}{\rightarrow} C_{n, \bullet}</me>
                  where <m>C_{&gt;n, \bullet}</m> denotes the double complex we obtain from <m>C</m> by excluding the leftmost nonzero column, and <m>\operatorname{Tot}^{\oplus}(C) \cong \Sigma^{1} \operatorname{cone}(\varphi)</m>, or equivalently, <m>\Sigma \operatorname{Tot}^{\oplus}(C) \cong \operatorname{cone}(\varphi)</m>.
                </p>
              </statement>
            </exercise>
            
          </subsection>

          <subsection xml:id="subsec-balancing"><title>Balancing <m>\Tor</m> and <m>\Ext</m></title>

            <blockquote>
              <p>
                <q>
                  The balance of power is the scale of peace.
                </q>
              </p>
              <attribution>Thomas Paine</attribution>
            </blockquote>

            <p>
              We are finally ready to show that the two definitions of <m>\Tor</m> coincide.
            </p>
  
            <theorem xml:id="thm-6.23"><title>Balancing <m>\Tor</m></title>
              <statement>
                <p>
                  Let <m>M</m> and <m>N</m> be <m>R</m>-modules, and <m>x</m> projective resolutions <m>P</m> of <m>M</m> and <m>Q</m> of <m>N</m>. 
                  For all <m>n \geqslant 0</m>, there is an isomorphism
                  <me>L_{n}\left(M \otimes_{R} \quad\right)(N)=\mathrm{H}_{n}\left(M \otimes_{R} Q\right) \cong \mathrm{H}_{n}\left(P \otimes_{R} N\right)=L_{n}\left(\otimes_{R} N\right)(M)</me>
                </p>
              </statement>
  
              <proof>
                <p>
                  Consider <m>\pi: P_{0} \quad M</m> and <m>\varepsilon: Q_{0} \quad N</m> and the first quadrant double complex
                </p>
          
                <image source="2023_11_27_3974d73438430121205eg-16.jpg"/>
                  
                <p>
                  Each <m>P_{i}</m> and <m>Q_{i}</m> is projective and thus flat, by <xref ref="thm-4.37"/>, so <m>P_{i} \otimes_{R}</m> and <m>\otimes_{R} Q_{i}</m> are both exact functors. 
                  The rows and columns of our double complex are thus exact everywhere except for the 0th row and column. 
                  We can complete our double complex to make a double complex <m>C</m> with both exact rows if we add in a column induced by the surjection <m>\pi</m> :
                </p>
         
                <image source="2023_11_27_3974d73438430121205eg-17(1).jpg"/>
          
                <p>
                  We can also make a double complex <m>D</m> with exact columns by adding in a row induced by <m>\varepsilon</m> :
                </p>
          
                <image source="2023_11_27_3974d73438430121205eg-17.jpg"/>
          
                <p>
                  By <xref ref="lem-6.22"/>, <m>\operatorname{Tot}^{\oplus}(C)</m> and <m>\operatorname{Tot}^{\oplus}(D)</m> are both exact. 
                  Notice that <m>\pi \otimes Q</m> is a map of complexes <m>\operatorname{Tot}^{\oplus}(P \otimes Q) \rightarrow M \otimes Q</m>, and <m>P \otimes \varepsilon</m> is a map of <m>\operatorname{complexes} \operatorname{Tot}^{\oplus}(P \otimes Q) \rightarrow P \otimes N</m>. 
                  By <xref ref="exe-71"/>,
                  <me>\operatorname{cone}(\pi \otimes Q)=\Sigma \operatorname{Tot}^{\oplus}(C) \quad \text { and } \quad \operatorname{cone}(P \otimes \varepsilon)=\Sigma \operatorname{Tot}^{\oplus}(D)</me>
                </p>
          
                <p>
                  Since <m>\Sigma \operatorname{Tot}^{\oplus}(C)</m> and <m>\Sigma \operatorname{Tot}^{\oplus}(D)</m> are both exact, by <xref ref="rem-6.20"/> both
                  <me>\operatorname{Tot}^{\oplus}(P \otimes Q) \quad \stackrel{\pi \otimes Q}{\rightarrow} M \otimes Q \quad \text { and } \quad \operatorname{Tot}^{\oplus}(P \otimes Q) \stackrel{P \otimes \varepsilon}{\rightarrow} P \otimes N</me>
                  are quasi-isomorphisms, so that
                  <me>L_{n}\left(M \otimes_{R} \quad\right)(N)=\mathrm{H}_{n}\left(M \otimes_{R} Q\right) \cong \mathrm{H}_{n}\left(P \otimes_{R} N\right)=L_{n}\left(\otimes_{R} N\right)(M)</me>
                </p>
              </proof>
            </theorem>
  
            <theorem xml:id="thm-6.24"><title>Balancing <m>\Ext</m></title>
              <statement>
                <p>
                  Let <m>M</m> and <m>N</m> be <m>R</m>-modules, and <m>x</m> a projective resolution <m>P</m> of <m>M</m> and an injective resolution <m>E</m> of <m>N</m>. 
                  For all <m>n</m>, there is an isomorphism
                  <me>R^{n} \operatorname{Hom}_{R}(M, \quad)(N)=\mathrm{H}^{n}\left(\operatorname{Hom}_{R}(M, E)\right) \cong \mathrm{H}^{n}\left(\operatorname{Hom}_{R}(P, N)\right)=R^{n} \operatorname{Hom}_{R}(, N)(M) \text {. }</me>
                </p>
              </statement>
  
              <proof>
                <p>
                  We have a surjection <m>\pi: P_{0} \rightarrow M</m> and an inclusion <m>\varepsilon: M \rightarrow E_{0}</m>. 
                  The double cocomplex <m>\operatorname{Hom}_{R}(P, E)</m> with <m>\operatorname{Hom}_{R}(P, E)_{p, q}=\operatorname{Hom}_{R}\left(P_{p}, E^{q}\right)</m> and
                  <me>\begin{array}{cc}
                    \operatorname{Hom}_{R}\left(P_{p}, E^{q}\right) \stackrel{d^{h}}{\longrightarrow} \operatorname{Hom}_{R}\left(P_{p+1}, E^{q}\right) &amp; \text { and } \operatorname{Hom}_{R}\left(P_{p}, E^{q}\right) \stackrel{d^{v}}{\longrightarrow} \operatorname{Hom}_{R}\left(P_{p}, D_{q+1}\right) . \\
                    f \longrightarrow f \circ \partial^{P} &amp; f \longrightarrow(1)^{p+q+1} \partial^{E} \circ f
                    \end{array}
                  </me>
                  is a cohomological first quadrant double complex:
                </p>
        
                <image source="2023_11_27_3974d73438430121205eg-18(1).jpg"/>
          
                <p>
                  We proceed just like in <xref ref="thm-6.23"/>, now considering two cohomological double complexes:
                </p>
          
                <image source="2023_11_27_3974d73438430121205eg-18(2).jpg"/>
          
                <p>
                  and
                </p>
         
                <image source="2023_11_27_3974d73438430121205eg-18.jpg"/>
                  
                <p>
                  We obtained <m>C</m> from <m>\operatorname{Hom}(P, E)</m> by adding in a column induced by <m>\pi</m>, and <m>D</m> by adding in a row induced by <m>\varepsilon</m>. 
                  Now we notice that
                  <me>\operatorname{cone}\left(\operatorname{Hom}_{R}(P, N) \rightarrow \operatorname{Tot}^{\oplus}(\operatorname{Hom}(P, E))\right)=\operatorname{Tot}^{\oplus}(C)</me>
                  and
                  <me>\operatorname{cone}\left(\operatorname{Hom}_{R}(M, E) \rightarrow \operatorname{Tot}^{\oplus}(\operatorname{Hom}(P, E))\right)=\operatorname{Tot}^{\oplus}(D)</me>
                </p>
          
                <p>
                  The dual of <xref ref="lem-6.22"/> says that <m>\operatorname{Tot}^{\oplus}(C)</m> and <m>\operatorname{Tot}^{\oplus}(D)</m> are both exact, and thus <m>\operatorname{Hom}_{R}(P, N) \rightarrow \operatorname{Tot}^{\oplus}(\operatorname{Hom}(P, E))</m> and <m>\operatorname{Hom}_{R}(M, E) \rightarrow \operatorname{Tot}^{\oplus}(\operatorname{Hom}(P, E))</m> are both quasiisomorphisms. 
                  We conclude that
                  <me>R^{n} \operatorname{Hom}_{R}(M, \quad)(N)=\mathrm{H}^{n}\left(\operatorname{Hom}_{R}(P, N)\right) \cong \mathrm{H}^{n}\left(\operatorname{Hom}_{R}(M, E)\right)=R^{n} \operatorname{Hom}_{R}(, N)(M) \text {. }</me>
                </p>
              </proof>
            </theorem>
            
            <definition xml:id="def-6.25"><title><m>\Tor</m> Module</title>
              <statement>
                <p>
                  Let <m>R</m> be a ring and <m>M</m> and <m>N</m> be <m>R</m>-modules. 
                  The <m>i</m> th Tor module from <m>M</m> to <m>N</m> is
                  <me>\operatorname{Tor}_{i}^{R}(M, N):=L_{i}\left(M \otimes_{R} \quad\right)(N) \cong L_{i}\left(\otimes_{R} N\right)(M)</me>
                </p>
              </statement>
            </definition>
            
            <p>
              Notice in particular that the <m>R</m>-module <m>\operatorname{Tor}_{i}^{R}(M, N)</m> is defined only up to isomorphism.
            </p>
  
            <definition xml:id="def-6.26"><title><m>\Ext</m> Module</title>
              <statement>
                <p>
                  Let <m>R</m> be a ring and <m>M</m> and <m>N</m> be <m>R</m>-modules. 
                  The <m>i</m> th Ext module from <m>M</m> to <m>N</m> is
                  <me>\operatorname{Ext}_{R}^{i}(M, N):=R^{i} \operatorname{Hom}_{R}(M, \quad)(N) \cong R^{i} \operatorname{Hom}_{R}(, N)(M)</me>
                </p>
              </statement>
            </definition>
      
            <p>
              Notice in particular that the <m>R</m>-module <m>\operatorname{Ext}_{R}^{i}(M, N)</m> is only defined up to isomorphism.
            </p>
      
            <p>
              <xref ref="thm-6.5"/> immediately gives us long exact sequences for Ext and Tor.
            </p>
  
            <theorem xml:id="thm-6.27"><title>Long Exact Sequence of <m>\Tor</m></title>
              <statement>
                <p>
                  Let <m>R</m> be a ring and <m>M</m> an <m>R</m>-module. 
                  Every short exact sequence of <m>R</m> modules
                  <me>0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0</me>
                  induces a long exact sequence
                  <me>
                    \begin{aligned}
                      \cdots \longrightarrow \operatorname{Tor}_{n+1}^{R}(M, C) \longrightarrow &amp; \operatorname{Tor}_{n}^{R}(M, A) \longrightarrow \operatorname{Tor}_{n}^{R}(M, B) \longrightarrow \operatorname{Tor}_{n}^{R}(M, A) \longrightarrow \cdots \\
                      \cdots &amp; \longrightarrow \operatorname{Tor}_{1}^{R}(M, C) \longrightarrow A \otimes_{R} M \longrightarrow \otimes_{R} M \longrightarrow C \otimes_{R} M \longrightarrow 0
                    \end{aligned}
                  </me>
                </p>
              </statement>
            </theorem>
  
            <theorem xml:id="thm-6.28"><title>Long Exact Sequence of <m>\Ext</m></title>
              <statement>
                <p>
                  For every <m>R</m>-module <m>M</m>, every short exact sequence of <m>R</m>-modules
                  <me>0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0</me>
                  induces a natural long exact sequence
                  <me>
                    \begin{array}{r}
                      0 \longrightarrow \operatorname{Hom}_{R}(M, A) \longrightarrow \operatorname{Hom}_{R}(M, B) \longrightarrow \operatorname{Hom}_{R}(M, C) \longrightarrow \operatorname{Ext}_{R}^{n}(M, B) \longrightarrow \operatorname{Ext}_{R}^{1}(M, A) \longrightarrow \cdots \\
                      \cdots
                    \end{array}
                  </me>
                  and
                  <me>
                    \begin{array}{r}
                      0 \longrightarrow \operatorname{Hom}_{R}(C, M) \longrightarrow \operatorname{Hom}_{R}(B, M) \longrightarrow \operatorname{Hom}_{R}(A, M) \longrightarrow \operatorname{Ext}_{R}^{1}(C, M) \longrightarrow \cdots \\
                      \cdots \\
                      \cdots \operatorname{Ext}_{R}^{n}(B, M) \longrightarrow \operatorname{Ext}_{R}^{n}(A, M) \longrightarrow \operatorname{Ext}_{R}^{n+1}(C, M) \longrightarrow \cdots
                    \end{array}
                  </me>
                </p>
              </statement>
            </theorem>
  
            <theorem xml:id="thm-6.29">
              <statement>
                <p>
                  Let <m>M</m> and <m>N</m> be <m>R</m>-modules. 
                  For all <m>i</m>, there are natural isomorphisms
                  <me>\operatorname{Tor}_{i}^{R}(M, N) \cong \operatorname{Tor}_{i}^{R}(N, M)</me>
                </p>
              </statement>
  
              <proof>
                <p>
                  Let <m>P</m> be a projective resolution of <m>M</m>. 
                  By <xref ref="thm-6.23"/>, <m>\operatorname{Tor}_{i}^{R}(M, N)=\mathrm{H}_{i}\left(P \otimes_{R} N\right)</m> and <m>\operatorname{Tor}_{i}^{R}(N, M)=\mathrm{H}_{i}\left(N \otimes_{R} P\right)</m>. 
                  By <xref ref="lem-3.38"/>, <m>M \otimes_{R} N</m> and <m>N \otimes_{R} M</m> are naturally isomorphic. 
                  In fact, <m>m \otimes n \mapsto n \otimes m</m> determines an isomorphism. 
                  So consider the map
                  <me>
                    \begin{array}{cc}
                      P_{n} \otimes_{R} N \stackrel{f_{n}}{\longrightarrow} N \otimes_{R} P_{n} &amp; N \otimes_{R} M \stackrel{g_{n}}{\longrightarrow} P_{n} \otimes_{R} N \\
                      m \otimes n \longrightarrow m \otimes m &amp; n \otimes m \longrightarrow n
                    \end{array}
                  </me>
                  which again are isomorphisms for all <m>n</m>.
                  Notice that these <m>f_{n}</m> assemble into a map of complexes <m>P \otimes_{R} N \stackrel{f}{\rightarrow} N \otimes_{R} P</m>, since
                  <me>f_{n}(\partial(m \otimes n))=f_{n}(\partial(m) \otimes n)=n \otimes \partial(m)=\partial(n \otimes m)=\partial f_{n+1}(m \otimes n)</me>
                </p>
          
                <p>
                  Since all the <m>f_{n}</m> are isomorphisms, <m>f</m> is an isomorphism of complexes, and must then induce isomorphisms in homology. 
                  We conclude that
                  <me>\operatorname{Tor}_{i}^{R}(M, N)=\mathrm{H}_{i}\left(P \otimes_{R} N\right) \cong \mathrm{H}_{i}\left(N \otimes_{R} P\right)=\operatorname{Tor}_{i}^{R}(N, M)</me>
                </p>
              </proof>
            </theorem>
  
            <p>
              However, <m>\operatorname{Ext}_{R}^{i}(M, N)</m> and <m>\operatorname{Ext}_{R}^{i}(N, M)</m> can be dramatically different.
            </p>
  
            <example xml:id="ex-6.30">
              <p>
                Let <m>k</m> be a field and <m>R=k[x]</m>. 
                The following is a minimal free resolution for <m>k=R /(x)</m> :
                <me>0 \longrightarrow R \stackrel{x}{\longrightarrow} R \longrightarrow k \longrightarrow 0</me>
              </p>
        
              <p>
                To compute <m>\operatorname{Ext}_{R}^{i}(k, R)</m>, we need only to apply <m>\operatorname{Hom}_{R}(, R)</m> to this resolution; 
                one needs to be careful, though, as this is a contravariant functor. 
                We obtain the following complex:
                <me>0 \longleftarrow \operatorname{Hom}_{R}(R, R) \stackrel{x^{*}}{\longleftarrow} \operatorname{Hom}_{R}(R, R) \longleftarrow 0</me>
              </p>
        
              <p>
                One can show that <m>\operatorname{Hom}_{R}(x, R)</m> is multiplication by <m>x</m> on <m>\operatorname{Hom}_{R}(R, R)</m>; 
                moreover, we have a natural isomorphism <m>\operatorname{Hom}_{R}(R, R) \cong R</m>, giving us
                <me>C=\quad 0 \longleftarrow \underset{1}{2 \longleftarrow} R \underset{0}{\longleftarrow} R \longleftarrow 0</me>
              </p>
        
              <p>
                In particular,
                <me>\operatorname{Ext}^{1}(k, R)=\mathrm{H}^{1}(C)=R /(x) .</me>
              </p>
        
              <p>
                In contrast,
                <me>\operatorname{Ext}^{1}(R, k)=0</me>
                since <m>R</m> is free. 
                Thus <m>\operatorname{Ext}^{1}(R, k) \neq \operatorname{Ext}^{1}(k, R)</m>.
              </p>
        
              <p>
                There is an alternative description of Ext. 
                It turns out that <m>\operatorname{Ext}_{R}^{1}(M, N)</m> measures the extensions of <m>M</m> by <m>N</m> modulo split extensions. 
                More precisely, an extension of <m>M</m> by <m>N</m> is a short exact sequence
                <me>0 \longrightarrow N \longrightarrow B \longrightarrow M \longrightarrow 0</me>
              </p>
        
              <p>
                We can put an abelian group structure on the set of isomorphism classes of extensions of <m>M</m> by <m>N</m>, using an operation called the Baer sum, and one can show that the resulting abelian group is isomorphic to <m>\operatorname{Ext}_{R}^{1}(M, N)</m>. 
                Via this description, the zero in <m>\operatorname{Ext}_{R}^{1}(M, N)</m> corresponds to the split short exact sequence
                <me>0 \longrightarrow N \longrightarrow N \oplus M \longrightarrow M \longrightarrow 0</me>
              </p>
        
              <p>
                The higher Ext modules can also be described in a similar fashion. 
                First, we consider the set of <m>n</m>-fold extensions of <m>N</m> by <m>M</m>, meaning short exact sequences of the form
                <me>0 \longrightarrow N \longrightarrow B_{1} \longrightarrow B_{2} \longrightarrow \cdots \longrightarrow B_{n} \longrightarrow M \longrightarrow 0</me>
                and the equivalence relation on this set given by the existence of a map of complexes
              </p>
        
              <image source="2023_11_27_3974d73438430121205eg-21.jpg"/>
                
              <p>
                where the maps between the <m>B_{i}</m> are not necessarily isomorphisms. 
                We then define an operation on the set of equivalence classes of <m>n</m>-fold extensions of <m>N</m> by <m>M</m> that is also called the Baer sum, and one shows that the resulting abelian group is isomorphic to <m>\operatorname{Ext}_{R}^{n}(M, n)</m>.
              </p>
        
              <p>
                Via this description, <m>\operatorname{Ext}_{R}^{1}(M, N)=0</m> if and only if every short exact sequence
                <me>0 \longrightarrow N \longrightarrow B \longrightarrow M \longrightarrow 0</me>
                splits.
              </p>
            </example>
      
            <p>
              Finally, here are some nice facts about Ext and Tor we leave as exercises.
            </p>
  
            <exercise  xml:id="exe-72">
              <statement>
                <p>
                  If <m>M</m> and <m>N</m> are finitely generated <m>R</m>-modules and <m>R</m> is a noetherian ring, then <m>\operatorname{Ext}_{R}^{i}(M, N)</m> and <m>\operatorname{Tor}_{i}^{R}(M, N)</m> are both finitely generated <m>R</m>-modules for all <m>i</m>.
                </p>
              </statement>
            </exercise>
  
            <exercise xml:id="exe-73">
              <statement>
                <p>
                  Let <m>R</m> be a commutative ring and <m>M</m> and <m>N</m> be <m>R</m>-modules. 
                  Consider the <m>R</m>-module homomorphism <m>f: M \rightarrow M</m> given by multiplication by a fixed element <m>r \in R</m>.
                  <ol>
                    <li>
                      <p>
                        Show that the map <m>\operatorname{Tor}_{i}^{R}(f, M): \operatorname{Tor}_{i}^{R}(M, N) \rightarrow \operatorname{Tor}_{i}^{R}(M, N)</m> induced by <m>f</m> is multiplication by <m>r</m> on <m>\operatorname{Tor}_{i}^{R}(M, N)</m>.
                      </p>
                    </li>
    
                    <li>
                      <p>
                        Show that <m>\operatorname{Ext}^{i}(f, M): \operatorname{Ext}_{R}^{i}(M, N) \rightarrow \operatorname{Ext}_{R}^{i}(M, N)</m> is multiplication by <m>r</m> on <m>\operatorname{Ext}_{R}^{i}(M, N)</m>.
                      </p>
                    </li>
    
                    <li>
                      <p>
                        Show that the map <m>\operatorname{Ext}^{i}(M, f): \operatorname{Ext}_{R}^{i}(N, M) \rightarrow \operatorname{Ext}_{R}^{i}(N, M)</m> induced by <m>f</m> is multiplication by <m>r</m> on <m>\operatorname{Ext}_{R}^{i}(N, M)</m>.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
            </exercise>
  
            <exercise xml:id="exe-74">
              <statement>
                <p>
                  Let <m>M</m> be an <m>R</m>-module.
                  <ol>
                    <li>
                      <p>
                        Show that <m>M</m> is flat if and only if <m>\operatorname{Tor}_{1}^{R}(M, N)=0</m> for every <m>R</m>-module <m>N</m>.
                      </p>
                    </li>
    
                    <li>
                      <p>
                        Show that <m>M</m> is projective if and only if <m>\operatorname{Ext}_{R}^{1}(M, N)=0</m> for every <m>R</m>-module <m>N</m>.
                      </p>
                    </li>
    
                    <li>
                      <p>
                        Show that <m>M</m> is injective if and only if <m>\operatorname{Ext}_{R}^{1}(N, M)=0</m> for every <m>R</m>-module <m>N</m>.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
            </exercise>
            
          </subsection>

          <outcomes>
            <ul>
              <li>
                <p>

                </p>
              </li>
            </ul>
          </outcomes>
          
        </section>

        <section xml:id="sec-comp-ext-tor"><title>Computing Ext and Tor</title>

          <objectives>
            <ul>
              <li>
                
              </li>
            </ul>
          </objectives>

          <subsection xml:id="subsec-constructions"><title>The Constructions</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>

            <p>
              Given <m>R</m>-modules <m>M</m> and <m>N</m>, we have two possible ways to compute <m>\operatorname{Tor}_{i}^{R}(M, N)</m> from the definition.
            </p>
      
            <p>
              Construction 6.31. 
              Find a projective resolution
              <me>\cdots \longrightarrow P_{2} \longrightarrow P_{1} \longrightarrow P_{0} \longrightarrow M \longrightarrow 0</me>
              of <m>M</m>. Applying <m>\otimes_{R} N</m> to the resolution (not counting <m>M</m> ), we get a complex
              <me>\cdots \longrightarrow P_{2} \otimes_{R} N \longrightarrow P_{1} \otimes_{R} N \longrightarrow P_{0} \otimes_{R} N \longrightarrow 0</me>
              Its homology is <m>\operatorname{Tor}_{*}^{R}(M, N)</m> :
              <me>\operatorname{Tor}_{i}^{R}(M, N)=\mathrm{H}_{i}\left(\cdots \longrightarrow P_{2} \otimes_{R} N \longrightarrow P_{1} \otimes_{R} N \longrightarrow P_{0} \otimes_{R} N \longrightarrow 0\right)</me>
            </p>
      
            <p>
              Alternatively, we can find a free resolution of <m>N</m>, say
              <me>\cdots \longrightarrow Q_{2} \longrightarrow Q_{1} \longrightarrow Q_{0} \longrightarrow N \longrightarrow 0</me>
              apply <m>M \otimes_{R} \quad</m>,
              <me>\cdots \longrightarrow M \otimes_{R} Q_{2} \longrightarrow M \otimes_{R} Q_{1} \longrightarrow M \otimes_{R} Q_{0} \longrightarrow 0</me>
              and compute the homology of the resulting complex:
              <me>\operatorname{Tor}_{i}^{R}(M, N)=\mathrm{H}_{i}\left(\cdots \longrightarrow M \otimes_{R} Q_{2} \longrightarrow M \otimes_{R} Q_{1} \longrightarrow M \otimes_{R} Q_{0} \longrightarrow 0\right)</me>
            </p>
      
            <p>
              Similarly, we have two possible ways to compute <m>\operatorname{Ext}_{R}^{i}(M, N)</m>.
            </p>
      
            <p>
              Construction 6.32.
              Find a projective resolution
              <me>\cdots \longrightarrow P_{2} \longrightarrow P_{1} \longrightarrow P_{0} \longrightarrow M \longrightarrow 0</me>
              of <m>M</m>. Applying the contravariant functor <m>\operatorname{Hom}_{R}(, N)</m> to the resolution gives us a cocomplex rather than a complex:
              <me>0 \longrightarrow \operatorname{Hom}_{R}\left(P_{0}, N\right) \longrightarrow \operatorname{Hom}_{R}\left(P_{1}, N\right) \longrightarrow \operatorname{Hom}_{R}\left(P_{2}, N\right) \longrightarrow \cdots</me>
              Its homology is <m>\operatorname{Ext}_{R}^{*}(M, N)</m> :
              <me>\operatorname{Ext}_{R}^{i}(M, N)=\mathrm{H}^{i}\left(0 \longrightarrow \operatorname{Hom}_{R}\left(P_{0}, N\right) \longrightarrow \operatorname{Hom}_{R}\left(P_{1}, N\right) \longrightarrow \operatorname{Hom}_{R}\left(P_{2}, N\right) \longrightarrow \cdots\right)</me>
            </p>
      
            <p>
              Alternatively, we can find an injective resolution of <m>N</m>, say
              <me>0 \longrightarrow N \longrightarrow E^{0} \longrightarrow E^{1} \longrightarrow E^{2} \longrightarrow \cdots</me>
              apply the covariant functor <m>\operatorname{Hom}_{R}(M, \quad)</m>, which yields the cocomplex
              <me>0 \longrightarrow \operatorname{Hom}_{R}\left(M, E^{0}\right) \longrightarrow \operatorname{Hom}_{R}\left(M, E^{1}\right) \longrightarrow \operatorname{Hom}_{R}\left(M, E^{2}\right) \longrightarrow \cdots</me>
              and compute the cohomology of the resulting cocomplex:
              <m>\operatorname{Ext}_{R}^{i}(M, N)=\mathrm{H}^{i}\left(0 \longrightarrow \operatorname{Hom}_{R}\left(M, E^{0}\right) \longrightarrow \operatorname{Hom}_{R}\left(M, E^{1}\right) \longrightarrow \operatorname{Hom}_{R}\left(M, E^{2}\right) \longrightarrow \cdots\right)</m>.
            </p>
      
            <p>
              It helps to keep a few simple ideas in mind:
            </p>
      
            <p>
              If <m>P</m> is a projective <m>R</m>-module, then
              <me>\operatorname{Tor}_{i}^{R}(M, P)=\operatorname{Tor}_{i}^{R}(P, M)=0</me>
              and
              <me>\operatorname{Ext}_{R}^{i}(P, M)=0</me>
              for all <m>i&gt;0</m> and all <m>R</m>-modules <m>M</m>, since <m>0 \rightarrow P \rightarrow 0</m> is a projective resolution for <m>M</m>. 
              This is a special case of Remark 6.3.
            </p>
      
            <p>
              If <m>E</m> is an injective <m>R</m>-module,
              <me>\operatorname{Ext}_{R}^{i}(M, E)=0</me>
              for all <m>i&gt;0</m> and all <m>R</m>-modules <m>M</m>.
              Free resolutions are often easier to compute explicitly, and the best path towards finding <m>\operatorname{Ext}_{R}^{n}(M, N)</m>.
            </p>
      
            <p>
              Relating one of our modules to other, easier modules via a short exact sequence can often simplify complicated computations.
            </p>
            
          </subsection>

          <subsection xml:id="subsec-examples"><title>Examples</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>

            <p>
              Let's compute some examples.
            </p>
  
            <example xml:id="ex-6.33">
              <p>
                Let's compute <m>\operatorname{Ext}_{\mathbb{Z}}^{i}(\mathbb{Z} /(2), \mathbb{Z} /(3))</m>. 
                Injective resolutions are not so easy to find, so we start from a projective resolution for <m>\mathbb{Z} /(2)</m> :
              </p>
        
              <p>
                <me>0 \longrightarrow \mathbb{Z} \stackrel{2}{\longrightarrow} \mathbb{Z} \longrightarrow \mathbb{Z} /(2) \longrightarrow 0</me>
              </p>
        
              <p>
                Notice that <m>\operatorname{pdim}_{\mathbb{Z}}(\mathbb{Z} /(2)) \neq 0</m>, since <m>\mathbb{Z} /(2)</m> is not a projective <m>\mathbb{Z}</m>-module. 
                We found a free resolution of length 1 for <m>\mathbb{Z} /(2)</m>, so it must be that <m>\operatorname{pdim}_{\mathbb{Z}}(\mathbb{Z} /(2))=1</m>. 
                This immediately tells us that <m>\operatorname{Ext}_{\mathbb{Z}}^{i}(\mathbb{Z} /(2), \mathbb{Z} /(3))=0</m> for all <m>i \leqslant 2</m>.
                Now we apply <m>\operatorname{Hom}_{\mathbb{Z}}(, \mathbb{Z} /(3))</m> to our free resolutions for <m>\mathbb{Z} /(2)</m>, and obtain
                <me>0 \longrightarrow \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z}, \mathbb{Z} /(3)) \stackrel{2^{*}}{\longrightarrow} \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z}, \mathbb{Z} /(3)) \longrightarrow 0</me>
              </p>
        
              <p>
                By <xref ref="exe-38"/>, <m>\operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z}, \mathbb{Z} /(3)) \cong \mathbb{Z} /(3)</m>, via the isomorphism <m>f \mapsto f(1)</m>. 
                Since <m>2^{*}</m> was the map <m>f \mapsto(2 \cdot \quad) \circ f=2 f()</m>, we can simplify our complex to
                <me>0 \longrightarrow \mathbb{Z} /(3) \stackrel{2}{\longrightarrow} \mathbb{Z} /(3) \longrightarrow 0</me>
              </p>
        
              <p>
                Notice that multiplication by 2 is an isomorphism on <m>\mathbb{Z} /(3)</m>, so the complex above is exact, and <m>\operatorname{Ext}_{\mathbb{Z}}^{i}(\mathbb{Z} /(2), \mathbb{Z} /(3))=0</m> for all <m>i</m>.
              </p>
            </example>
  
            <example xml:id="ex-6.34">
              <p>
                Given an integer <m>n&gt;1</m>,
                <me>0 \longrightarrow \mathbb{Z} \stackrel{n}{\longrightarrow} \mathbb{Z} \stackrel{\pi}{\longrightarrow} \mathbb{Z} /(n) \longrightarrow 0</me>
                with <m>\pi</m> the canonical projection is a free resolution for <m>\mathbb{Z} /(n)</m> over <m>\mathbb{Z}</m>. 
                Notice that since <m>\mathbb{Z} /(n)</m> is not a free <m>\mathbb{Z}</m>-module, there is no shorter free resolution for <m>\mathbb{Z} / \mathfrak{n}</m>. 
                Now we can use this resolution to compute <m>\operatorname{Tor}_{i}^{\mathbb{Z}}(\mathbb{Z} /(n), M)</m> and <m>\operatorname{Ext}_{\mathbb{Z}}^{i}(\mathbb{Z} /(n), M)</m> for any <m>\mathbb{Z}</m>-module <m>M</m>. 
                For Tor,
                <me>\operatorname{Tor}_{i}^{\mathbb{Z}}(\mathbb{Z} /(n), M)=\mathrm{H}_{i}\left(0 \longrightarrow \mathbb{Z} \otimes_{\mathbb{Z}} M \stackrel{n \otimes 1}{\longrightarrow} \mathbb{Z} \otimes_{\mathbb{Z}} M \longrightarrow 0\right)</me>
              </p>
        
              <p>
                By <xref ref="lem-3.40"/>, <m>\mathbb{Z} \otimes_{\mathbb{Z}} M \cong M</m>, via the map <m>k \otimes m \mapsto k m</m>, and the map <m>n \otimes 1_{M}</m> corresponds to multiplication by <m>n</m> on <m>M</m>. 
                Therefore,
                <me>\operatorname{Tor}_{i}^{\mathbb{Z}}(\mathbb{Z} /(n), M)=\mathrm{H}_{i}(0 \longrightarrow M \stackrel{n}{\longrightarrow} M \longrightarrow 0),</me>
              </p>
        
              <p>
                So
                <me>\operatorname{Tor}_{i}^{\mathbb{Z}}(\mathbb{Z} /(n), M)= \begin{cases}M / n M &amp; \text { for } i=0 \\ \left(0:_{M} n\right) &amp; \text { for } i=1 \\ 0 &amp; \text { otherwise }\end{cases}</me>
                Notice that <m>\operatorname{Tor}_{0}^{\mathbb{Z}}(\mathbb{Z} /(n), M)=M / n M=\mathbb{Z} / n \mathbb{Z} \otimes_{\mathbb{Z}} M</m>, as we already knew from <xref ref="prop-6.4"/>.
              </p>
        
              <p>
                Similarly, we can compute all the Ext modules from <m>\mathbb{Z} /(n)</m> :
                <me>\operatorname{Ext}_{i}^{\mathbb{Z}}(\mathbb{Z} /(n), M)=\mathrm{H}_{i}\left(0 \longrightarrow \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z}, M) \stackrel{n^{*}}{\longrightarrow} \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z}, M) \longrightarrow 0\right)</me>
              </p>
        
              <p>
                By <xref ref="exe-38"/>, <m>\operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z}, M) \cong M</m>, via the map <m>f \mapsto f(1)</m>, and <m>n^{*}=\operatorname{Hom}_{\mathbb{Z}}(n, M)</m> corresponds to multiplication by <m>n</m> on <m>M</m>. 
                So
                <me>\operatorname{Ext}_{\mathbb{Z}}^{i}(\mathbb{Z} /(n), M)=\mathrm{H}^{i}(0 \longrightarrow M \stackrel{n}{\longrightarrow} M \longrightarrow 0)</me>
              </p>
        
              <p>
                We conclude that
                <me>\operatorname{Ext}_{\mathbb{Z}}^{i}(\mathbb{Z} /(n), M)= \begin{cases}M / n M &amp; \text { for } i=1 \\ \left(0:_{M} n\right) &amp; \text { for } i=0 \\ 0 &amp; \text { otherwise }\end{cases}</me>
              </p>
        
              <p>
                Notice that <m>\operatorname{Ext}_{\mathbb{Z}}^{1}(\mathbb{Z} /(n), M)=\left(0:_{M} n\right)=\operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z} /(n), M)</m>, as we already knew from <xref ref="prop-6.4"/>.
              </p>
            </example>
  
            <example xml:id="ex-6.35">
              <p>
                Alternatively, we can compute <m>\operatorname{Ext}_{\mathbb{Z}}^{i}(\mathbb{Z} /(n), M)</m> and <m>\operatorname{Tor}_{i}^{\mathbb{Z}}(\mathbb{Z} /(n), M)</m> by looking at some long exact sequences. 
                The long exact sequence for Tor induced by the short exact sequence
                <me>0 \longrightarrow \mathbb{Z} \stackrel{n}{\longrightarrow} \mathbb{Z} \longrightarrow \mathbb{Z} /(n) \longrightarrow 0</me>
                is
                <me>\begin{aligned}
                &amp; \cdots \longrightarrow \operatorname{Tor}_{n+1}^{\mathbb{Z}}(\mathbb{Z} /(n), M) \longrightarrow \operatorname{Tor}_{n}^{\mathbb{Z}}(\mathbb{Z}, M) \longrightarrow \operatorname{Tor}_{n}^{\mathbb{Z}}(\mathbb{Z}, M) \longrightarrow \operatorname{Tor}_{n}^{\mathbb{Z}}(\mathbb{Z} /(n), M) \longrightarrow \cdots \\
                &amp; \cdots \longrightarrow \operatorname{Tor}_{1}^{\mathbb{Z}}(\mathbb{Z} /(n), M) \longrightarrow \mathbb{Z} \otimes_{\mathbb{Z}} M \longrightarrow \mathbb{Z} \otimes_{\mathbb{Z}} M \longrightarrow
                \end{aligned}</me>
              </p>
        
              <p>
                Since <m>\mathbb{Z}</m> is a projective <m>\mathbb{Z}</m>-module and thus flat, <m>\operatorname{Tor}_{i}^{\mathbb{Z}}(\mathbb{Z}, M)=0</m> for all <m>i&gt;0</m>. 
                As a consequence, the long exact sequence above forces <m>\operatorname{Tor}_{2}^{\mathbb{Z}}(\mathbb{Z} /(n), M)=0</m>. 
                So our long exact sequence really gets reduced to
                <me>0 \longrightarrow \operatorname{Tor}_{1}^{\mathbb{Z}}(\mathbb{Z} /(n), M) \longrightarrow \mathbb{Z} \otimes_{\mathbb{Z}} M \longrightarrow \mathbb{Z} \otimes_{\mathbb{Z}} M \longrightarrow \mathbb{Z} /(n) \otimes_{\mathbb{Z}} M \longrightarrow 0</me>
              </p>
        
              <p>
                Now <m>\mathbb{Z} \otimes_{\mathbb{Z}} M \cong M</m> via <m>k \otimes m \mapsto k m</m>, and this isomorphism turns <m>n \otimes 1_{M}</m> into multiplication by <m>n</m> on <m>M</m>, same as above. 
                So <m>\operatorname{Tor}_{1}^{\mathbb{Z}}(\mathbb{Z} /(n), M)</m> is the kernel of multiplication by <m>n</m> on <m>M</m>, or <m>\left(0:_{M} n\right)</m>.
                If we want to compute <m>\operatorname{Ext}_{\mathbb{Z}}^{i}(\mathbb{Z} /(n), M)</m>, we should now look at the long exact sequence
                <me>
                  \begin{array}{r}
                    0 \longrightarrow \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z} /(n), M) \longrightarrow \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z}, M) \stackrel{n^{*}}{\longrightarrow} \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z}, M) \longrightarrow \operatorname{Ext}_{\mathbb{Z}}^{n}(\mathbb{Z}, M) \longrightarrow \operatorname{Ext}_{\mathbb{Z}}^{1}(\mathbb{Z} /(n), M) \longrightarrow \\
                    \cdots \operatorname{Ext}_{\mathbb{Z}}^{n}(\mathbb{Z}, M) \longrightarrow \operatorname{Ext}_{\mathbb{Z}}^{n+1}(\mathbb{Z} /(n), M) \longrightarrow \cdots
                  \end{array}
                </me>
              </p>
        
              <p>
                Again, <m>\mathbb{Z}</m> is a free <m>\mathbb{Z}</m>-module, so <m>\operatorname{Ext}_{\mathbb{Z}}^{i}(\mathbb{Z}, M)=0</m> for all <m>i&gt;0</m>. 
                Then <m>\operatorname{Ext}_{\mathbb{Z}}^{i}(\mathbb{Z} /(n), M)=0</m> for all <m>i&gt;1</m>, and our long exact sequence is actually just
                <me>0 \longrightarrow \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z} /(n), M) \longrightarrow \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z}, M) \stackrel{n^{*}}{\longrightarrow} \operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z}, M) \longrightarrow \operatorname{Ext}_{\mathbb{Z}}^{1}(\mathbb{Z} /(n), M) \longrightarrow 0</me>
              </p>
        
              <p>
                So <m>\operatorname{Ext}_{\mathbb{Z}}^{1}(\mathbb{Z} /(n), M)</m> is the cokernel of <m>n^{*}</m>. 
                As before, notice that <m>\operatorname{Hom}_{\mathbb{Z}}(\mathbb{Z}, M) \cong M</m> via the map <m>f \mapsto f(1)</m>, and <m>n^{*}</m> corresponds to multiplication by <m>n</m> on <m>M</m>. 
                We conclude that <m>\operatorname{Ext}_{\mathbb{Z}}^{1}(\mathbb{Z} /(n), M) \cong M / n M</m>.
              </p>
            </example>
  
            <exercise xml:id="exe-75">
              <statement>
                <p>
                  Let <m>k</m> be a field and <m>R=k[x] /\left(x^{3}\right)</m>.
                  <ol>
                    <li>
                      <p>
                        Compute <m>\operatorname{Tor}_{i}^{R}(k, k)</m> for all <m>i</m>.
                      </p>
                    </li>
    
                    <li>
                      <p>
                        Show that <m>\operatorname{Ext}_{R}^{i}(k, k) \neq 0</m> for all <m>i</m>.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
            </exercise>
  
            <exercise xml:id="exe-76">
              <statement>
                <p>
                  Let <m>k</m> be a field, <m>R=k[x, y]</m>, and <m>\quad=(x, y)</m>.
                  <ol>
                    <li>
                      <p>
                        Show that
                        <me>
                          0 \longrightarrow R \stackrel{\left(\begin{array}{c}
                        y \\
                        x
                        \end{array}\right)}{\longrightarrow} R^{2} \stackrel{x \quad y)}{\longrightarrow} R \longrightarrow 0</me>
                        is a free resolution for <m>k=R /</m>.
                      </p>
                    </li>
    
                    <li>
                      <p>
                        Compute <m>\operatorname{Tor}_{i}^{R}(k, k)</m> for all <m>i</m>.
                      </p>
                    </li>
    
                    <li>
                      <p>
                        Show that
                        <me>\operatorname{Tor}_{1}(, k) \cong \operatorname{Tor}_{2}(k, k)</me>
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
            </exercise>
            
          </subsection>

          <outcomes>
            <ul>
              <li>
                <p>

                </p>
              </li>
            </ul>
          </outcomes>
          
        </section>

        <section xml:id="sec-other-derived-functors"><title>Other Derived Functors</title> 

          <subsection xml:id="subsec-group-homology"><title>Group Homology</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>

            <p>
              Here are some other examples of derived functors you may encounter.
            </p>

            <definition xml:id="def-6.35"><title>Category of <m>G</m>-modules</title>
              <statement>
                <p>
                  Let <m>G</m> be a group.
                  A (left) <m>G</m>-module is an abelian group <m>A</m> with an action of <m>G</m> by additive maps on the left, meaning that
                  <me>g(a+b)=g a+g b</me>
                  for all <m>a, b \in A</m> and all <m>g \in G</m>, where we write <m>g a</m> for the action of <m>g \in G</m> on <m>a \in A</m>. 
                  Given two <m>G</m>-modules <m>A</m> and <m>B</m>, a morphism of <m>G</m>-modules <m>f: A \rightarrow B</m> is a group homomorphism that is also <m>G</m>-equivariant, meaning <m>f(g a)=g f(a)</m> for all <m>g \in G</m> and <m>a \in A</m>.
                </p>

                <p>
                  The category of <m>G</m>-modules, which we write as <m>G</m>-mod, has objects all <m>G</m>-modules and arrows all <m>G</m>-module morphisms. 
                  We write <m>\operatorname{Hom}_{G}(A, B)</m> instead of <m>\operatorname{Hom}_{G} \bmod (A, B)</m>.
                </p>
            
                <p>
                  This category <m>G</m>-mod can be identified with the category of <m>\mathbb{Z}[G]</m>-modules, of modules over the (noncommutative) ring <m>\mathbb{Z} G</m>, the group ring of <m>G</m>. 
                  It can also be identified with the functor category <m>\mathbf{A b}^{G}</m> of functors from the category <m>G</m> to the category <m>\mathbf{A b}</m> of abelian groups. 
                  As a reminder, <m>G</m> gives a category with one object <m>G</m> and arrows the elements of <m>G</m>.
                </p>
              </statement>
            </definition>

            <definition xml:id="def-6.36"><title>(Co)Invariant Subgroup</title>
              <statement>
                <p>
                  The <em>invariant subgroup</em> <m>A^{G}</m> of a <m>G</m>-module <m>A</m> is
                  <me>A^{G}:=\{a \in A \mid g a=a \text { for all } g \in G\}</me>
                </p>
            
                <p>
                  The coinvariant subgroup <m>A^{G}</m> of a <m>G</m>-module <m>A</m> is
                  <me>A_{G}:=A / G \text {-submodule generated by }\{g a \quad a \in A \mid g \in G, a \in A\} \text {. }</me>
                </p>
              </statement>
            </definition>

            <exercise xml:id="exe-77">
              <statement>
                <p>
                  Given any <m>G</m>-module <m>A, A_{G} \cong \mathbb{Z} \otimes_{\mathbb{Z} G} A</m> and <m>A^{G} \cong \operatorname{Hom}_{G}(\mathbb{Z}, A)</m>, where <m>\mathbb{Z}</m> denotes the trivial <m>G</m>-module. 
                  In fact, there are natural isomorphisms ()<m>_{G} \cong \mathbb{Z} \otimes_{\mathbb{Z} G} A</m> and ()<m>^{G} \cong \operatorname{Hom}_{G}(\mathbb{Z}, \quad)</m>.
                </p>
              </statement>
            </exercise>

            <p>
              Thus taking coinvariants is right exact, and taking invariants is left exact.
            </p>

            <definition xml:id="def-6.37"><title>(Co)Homology Groups</title>
              <statement>
                <p>
                  Let <m>G</m> be a group and <m>A</m> a <m>G</m>-module. 
                  The <em>homology groups</em> of <m>G</m> with coefficients in <m>A</m> are the <m>G</m>-modules <m>\mathrm{H}_{i}(G, A)</m> obtained via the left derived functors of the coinvariants functor:
                  <me>\mathrm{H}_{i}(G ; A):=L_{i}\left(\quad{ }_{G}\right)(A)</me>
                </p>
            
                <p>
                  Similarly, the cohomology groups of <m>G</m> with coefficients in <m>A</m> are the <m>G</m>-modules <m>\mathrm{H}^{i}(G, A)</m> obtained via the right derived functors of the invariants functor:
                  <me>\mathrm{H}^{i}(G ; A):=R^{i}\left({ }^{G}\right)(A) .</me>
                </p>
              </statement>
            </definition>
        
            <p>
              By Exercise 77,
              <me>\mathrm{H}_{i}(G ; A) \cong \operatorname{Tor}_{i}^{\mathbb{Z}[G]}(\mathbb{Z}, A) \text { and } \mathrm{H}^{i}(G ; A) \cong \operatorname{Ext}_{\mathbb{Z}[G]}^{i}(\mathbb{Z}, A)</me>
            </p>
        
            <p>
              Thus to compute group (co)homology we need a projective resolution for the trivial <m>\mathbb{Z}[G]</m>-module <m>\mathbb{Z}</m>. 
              Note also that by Proposition <m>6.4, \mathrm{H}_{0}(G ; A)=A_{G}</m> and <m>\mathrm{H}^{0}(G ; A)=A^{G}</m>.
            </p>
        
            <p>
              Group (co)homology is a rich subject. 
              For a detailed treatment of group (co)homology, see Weibel's Homological Algebra [Wei94].
            </p>
            
          </subsection>

          <subsection xml:id="subsec-local-cohomology"><title>Local Cohomology</title>

            <blockquote>
              <p>
                <q>
                  
                </q>
              </p>
              <attribution></attribution>
            </blockquote>

            <definition xml:id="def-6.37.5"><title><m>I</m>-torsion Functor</title>
              <statement>
                <p>
                  Let <m>I</m> be an ideal in a ring <m>R</m>. 
                  The <m>I</m>-<em>torsion functor</em> <m>\quad{ }_{I}: R</m>-Mod <m>\rightarrow R</m>-Mod is defined by
                  <me>{ }_{I}(M):=\left\{m \in M \mid I^{n} m=0 \text { for some } n\right\}</me>
                  which acts on maps by restriction.
                </p>
              </statement>
            </definition>

            <exercise xml:id="exe-78">
              <statement>
                <p>
                  The <m>I</m>-torsion functor is a left exact covariant additive functor.
                </p>
              </statement>
              </exercise>

            <p>
              The <m>I</m>-torsion functor gives rise to local cohomology, the right derived functors <m>\mathrm{H}_{I}^{i}</m> of <m>{ }_{I}</m>. 
              The <m>i</m> th local cohomology of <m>M</m> with support on <m>I</m> is then given by
              <me>\mathrm{H}_{I}^{i}(M):=R_{I}^{i}{ }_{I}(M)</me>
            </p>
        
            <p>
              Local cohomology was introduced by Grothendieck in a series of seminars at Harvard in 1961, which are now very famous. 
              Grothendieck himself never published any notes on the subject, but Robin Hartshorne's notes of those lectures have been published.
            </p>
        
            <p>
              Local cohomology is a rich subject, and we could easily spend an entire semester on it. 
              For a modern treatment of the local cohomology and its connections, the book 24 hours of local cohomology and the very nice notes by Craig Huneke, Mel Hochster, and Jack Jeffries are all excellent resources.
            </p>
        
            <p>
              It turns out that local cohomology modules can be defined in a few different ways, which are in no way obviously equivalent, and those different points of view are quite helpful. 
              For example, we can define local cohomology via the Čech complex.
            </p>

            <definition xml:id="def-6.38"><title>Čech Complex</title>
              <statement>
                <p>
                  Let <m>M</m> be an <m>R</m>-module and <m>x \in R</m>. 
                  The <em>Čech complex</em> of <m>x</m> on <m>R</m> is given by
                  <me>\check{C}^{\bullet}(x):=\left(\begin{array}{c}
                    0 \longrightarrow \\
                    0
                    \end{array} \underset{x}{R} \begin{array}{c}
                    \longrightarrow \\
                    1
                    \end{array}\right)
                  </me>
                </p>

                <p>
                  The Čech complex of <m>f_{1}, \ldots, f_{t} \in R</m> on <m>M</m> is given by
                  <me>\check{C}^{\bullet}\left(f_{1}^{n}, \ldots, f_{t}^{n} ; M\right):=\check{C}^{\bullet}\left(f_{1}\right) \otimes \cdots \otimes \check{C}^{\bullet}\left(f_{t}\right) \otimes M .</me>
                </p>
              </statement>
            </definition>

            <example xml:id="ex-6.39">
              <p>
                Let's compute the Čech complex on <m>f</m> and <m>g</m> and an <m>R</m>-module <m>M</m>.
              </p>
          
              <image source="2023_11_27_3974d73438430121205eg-27.jpg"/>
            </example>
          
            <exercise xml:id="exe-79">
              <statement>                  
                <p>
                  a) <m>\check{C} \bullet\left(f_{1}, \ldots, f_{t} ; M\right) \cong \bigoplus_{\left\{j_{1}, \ldots, j_{i}\right\} \subseteq[t]} M_{f_{j_{1}} \cdots f_{j_{i}}}</m>
                </p>
            
                <p>
                  b) The maps between components corresponding to subsets <m>I, J</m> are zero if <m>I \nsubseteq J</m>, and \pm 1 if <m>J=I \cup\{k\}</m>.
                </p>
              </statement>
            </exercise>
        
            <p>
              It turns out that the cohomology of the Čech complex gives us local cohomology. For an ideal <m>I=\left(f_{1}, \ldots, f_{n}\right)</m>,
            </p>
        
            <p>
              <me>\begin{aligned}
              \mathrm{H}_{I}^{i}(M) &amp; =\mathrm{H}^{i}\left(\check{C}^{\bullet}\left(f_{1}, \ldots, f_{n} ; M\right)\right) \\
              &amp; =\mathrm{H}^{i}\left(0 \rightarrow M \rightarrow \cdots \rightarrow \bigoplus_{i} M_{f_{i}} \rightarrow \cdots \bigoplus_{i=1}^{n} M_{f_{1} \cdots \widehat{f}_{i} \cdots f_{n}} \rightarrow M_{f_{1} \cdots f_{n}} \rightarrow 0\right)
              \end{aligned}</me>
            </p>
        
            <p>
              so elements in the <m>i</m> th local cohomology can be realized as equivalence classes of fractions.
            </p>
        
            <p>
              Local cohomology modules also arise as a direct limit of Ext modules:
            </p>
        
            <p>
              <me>\underset{n}{\lim _{\rightarrow}} \operatorname{Ext}_{R}^{i}\left(R / I^{n}, M\right)</me>
            </p>
        
            <p>
              The equivalence between all these different definitions is a fundamental result in the theory of local cohomology.
            </p>
        
            <p>
              Local cohomology modules play a crucial, ubiquitous role in commutative algebra. They measure many important invariants, such as dimension and depth, and are extremely useful tools for studying all sorts of topics; for example, they can be used to detect if a ring is Gorenstein (if it has finite injective dimension as a module over itself) or Cohen-Macaulay (a nice class of rings that is both very large but also very well behaved). However, local cohomology modules are typically not finitely generated. One reason for this is that injective modules are also often not finitely generated. Local cohomology is also a major reason why commutative algebraists are interested in studying injective modules.
            </p>
        
            <p>
              In fact, local cohomology is almost never finitely generated. Here's a very simple example.
            </p>
        
            <p>
              Example 6.40. Let <m>R=k\left[x_{1}, \ldots, x_{n}\right], k</m> be a field, and <m>\quad=\left(x_{1}, \ldots, x_{n}\right)</m>. Then <m>\mathrm{H}^{n}(R)</m> has the <m>k</m>-vector space structure
            </p>
        
            <p>
              <me>\bigoplus_{\text {all } a_{i}&gt;0} k \cdot \frac{1}{x_{1}^{a_{1}} \cdots x_{n}^{a_{n}}}</me>
            </p>
        
            <p>
              with <m>R</m>-module structure given by
            </p>
        
            <p>
              <me>x_{1}^{b_{1}} \cdots x_{n}^{b_{n}} \cdot \frac{z}{x_{1}^{a_{1}} \cdots x_{n}^{a_{n}}}= \begin{cases}\frac{z}{x_{1}^{a_{1} b_{1} \ldots x_{n}^{a_{n} b_{n}}}} &amp; \text { if all } b_{i}&lt;a_{i} \\ 0 &amp; \text { otherwise }\end{cases}</me>
            </p>
        
            <p>
              This is not a finitely generated module! Note also that every finitely generated submodule only has terms with bounded negative degree. But this is still a very nice module: it looks like <m>R</m> upside down. 
              
            </p>

            <image source="2023_11_27_3974d73438430121205eg-29(1).jpg"/>
        
            <p>
              <me>\mathrm{H}_{(x, y)}^{2}(k[x, y])</me>
            </p>
       
            <image source="2023_11_27_3974d73438430121205eg-29.jpg"/>
             
            <p>
              Despite being infinitely generated, local cohomology modules enjoy many finiteness properties we have gotten used to expecting from finitely generated modules. For example, over a local ring <m>(R, \quad)</m>, the local cohomology modules <m>\mathrm{H}^{i}(M)</m> of a finitely generated module <m>M</m> are Artinian - but not Noetherian!
            </p>
        
            <p>
              Huneke raised the question of whether local cohomology modules of noetherian rings always have finitely many associated primes, a problem which has been a very active research are in commutative algebra in the last few decades. While the answer to Huneke's question is no - as famous examples by Katzmann, Singh, and Singh and Swanson show - the local cohomology modules of finitely generated <m>R</m>-modules over a regular ring do have finitely many associated primes.
            </p>
        
            <p>
              One very important invariant we can study with local cohomology is the arithmetic rank.
            </p>
        
            <p>
              Definition 6.41. Let <m>I</m> be an ideal in a Noetherian <m>\operatorname{ring} R</m>. The arithmetic rank of <m>I</m> is defined by
            </p>
        
            <p>
              <me>\operatorname{ara}(I):=\min \left\{s \mid \text { there exist some } x_{1}, \ldots, x_{s} \text { such that } \sqrt{\left(x_{1}, \ldots, x_{s}\right)}=\sqrt{I}\right\}</me>
            </p>
        
            <p>
              Given a variety <m>X=V(I) \subseteq \mathbb{A}_{k}^{n}</m>, the arithmetic rank of its defining ideal <m>I(X)</m> is the minimum number of equations needed to define <m>X</m>. It turns out that this number is difficult to study, and it is best understood via local cohomology, a thought best described by Lyubeznik:
            </p>
        
            <p>
              Part of what makes the problem about the number of defining equations so interesting is that it can be very easily stated, yet a solution, in those rare cases when it is known, usually is highly nontrivial and involves a fascinating interplay of Algebra and Geometry.
            </p>
        
            <p>
              The connection to local cohomology begins with the following two elementary facts about local cohomology:
            </p>
        
            <p>
              <me>\text { If } \sqrt{I}=\sqrt{J} \text {, then } \mathrm{H}_{I}^{i}(\quad)=\mathrm{H}_{J}^{i}(\quad) \text {. }</me>
            </p>
        
            <p>
              Given any ideal <m>I, \operatorname{ara}(I) \geqslant \min \left\{i \mid \mathrm{H}_{I}^{i}(M) \neq 0\right.</m> for some <m>R</m>-module <m>\left.M\right\}</m>.
            </p>
        
            <p>
              So computing local cohomology modules, or deciding when they vanish, can help us find bounds on the arithmetic rank of a variety.
            </p>
        
            <p>
              We close this chapter with yet another example of a derived functor of an interesting functor.
            </p>
        
            <p>
              Exercise 80. Let <m>R</m> be a domain and <m>Q</m> be its fraction field. Let <m>T</m> denote the torsion functor.
            </p>
        
            <p>
              a) Show that <m>T(M)=\operatorname{Tor}_{1}^{R}(M, Q / R)</m>.
            </p>
        
            <p>
              b) Show that for every short exact sequence
            </p>
        
            <p>
              <me>0 \longrightarrow A \longrightarrow B \longrightarrow C</me>
            </p>
        
            <p>
              of <m>R</m>-modules gives rise to an exact sequence
            </p>
        
            <p>
              <me>0 \longrightarrow T(A) \longrightarrow T(B) \longrightarrow T(C) \longrightarrow(Q / R) \otimes_{R} A \longrightarrow(Q / R) \otimes_{R} B \longrightarrow(Q / R) \otimes_{R} C \longrightarrow 0</me>
            </p>
        
            <p>
              c) Show that the right derived functors of <m>T</m> are <m>R^{1} T=(Q / R) \otimes_{R} \quad</m> and <m>R^{i} T=0</m> for all <m>i \geqslant 2</m>.
            </p>
            
          </subsection>

          <outcomes>
            <ul>
              <li>
                <p>

                </p>
              </li>
            </ul>
          </outcomes>
          
        </section>
        
      </chapter>

      <chapter xml:id="ch-abelian-categories"><title>Abelian Categories</title>

        <section xml:id="sec-abelian-def"><title>What's an Abelian Category?</title>

          <subsection xml:id="subsec-mono-epi"><title>Monomorphisms and Epimorphisms</title>

            <definition xml:id="def-mono-epi"><title>Monic and Epic</title>
              <statement>
                <p>
                  <ul>
                    <li>
                      <p>
                        An arrow <m>f \in \operatorname{Hom}(B, C)</m> is a <em>monomorphism</em> or a <em>mono</em> if for all arrows
                      </p>
    
                      <p>
                        <me>A \stackrel{g_{1}}{\underset{g_{2}}{\longrightarrow}} B \stackrel{f}{\longrightarrow} C</me>
                      </p>
                  
                      <p>
                        if <m>f g_{1}=f g_{2}</m> then <m>g_{1}=g_{2}</m>.
                      </p>
                    </li>
            
                    <li>
                      <p>
                        Similarly, an arrow <m>f \in \operatorname{Hom}(A, B)</m> is an <em>epi</em> or an <em>epimorphism</em> if for all arrows
                        <me>
                          A \stackrel{f}{\longrightarrow} B \underset{g_{2}}{\stackrel{g_{1}}{\longrightarrow}} C
                        </me>
                        if <m>g_{1} f=g_{2} f</m> then <m>g_{1}=g_{2}</m>.
                      </p>
                    </li>
                  </ul>
                </p>
              </statement>
            </definition>
        
            <p>
              Here are some examples:
            </p>

            <example><title>Monos and Epis</title>
              <p>
                <ol>
                  <li xml:id="exe-2">
                    <p>
                      In <m>\Set</m>, the monos coincide with the injective functions and the epis coincide with the surjective functions.
                    </p>
                  </li>

                  <li>
                    <p>
                      In <m>R-\mod</m>, the monos coincide with the injective functions and the epis coincide with the surjective functions.
                    </p>
                  </li>

                  <li xml:id="exe-3">
                    <p>
                      In any category, every isomorphism is both epi and mono.                    
                    </p>
                  </li>
                </ol>
              </p>
            </example>
    
            <exercise xml:id="exe-4"><title>Epi and Surjective not the Same</title>
              <statement>
                <p>
                  Show that the usual inclusion <m>\mathbb{Z} \longrightarrow \mathbb{Q}</m> is an epi in the category <m>\Ring</m>.
                </p>
              </statement>
            </exercise>
        
            <p>
              This should feel weird: it says being epi and being surjective are not the same thing. 
              Similarly, being monic and being injective are not the same thing.
            </p>
    
            <exercise xml:id="exe-5"><title>Mono and Injective not the Same</title>
              <statement>
                <p>
                  Show that the canonical projection <m>\mathbb{Q} \longrightarrow \mathbb{Q} / \mathbb{Z}</m> is a mono in the category of divisible abelian groups.
                  <fn>An abelian group <m>A</m> is divisible if for every <m>a \in A</m> and every positive integer <m>n</m> there exists <m>b \in A</m> such that <m>n b=a</m>.</fn>
                </p>
              </statement>
            </exercise>
    
            <exercise xml:id="exe-6"><title>Monic and Epic in Poset Category</title>
              <statement>
                <p>
                  Show that given any poset <m>P</m>, in the poset category of <m>P</m> every morphism is both monic and epic, but no nonidentity morphism has a left or right inverse.
                </p>
              </statement>
            </exercise>
    
            <p>
              There are some special types of objects we will want to consider.
            </p>
    
            <definition xml:id="def-initial-terminal"><title>Initial and Terminal Objects</title>
              <statement>
                <p>
                  Let <m>\mathscr{C}</m> be a category. 
                  An <em>initial object</em> in <m>\mathscr{C}</m> is an object <m>i</m> such that for every object <m>x</m> in <m>\mathscr{C}, \operatorname{Hom}_{\mathscr{C}}(i, x)</m> is a singleton, meaning there exists a unique arrow <m>i \longrightarrow x</m>. 
                  A <em>terminal object</em> in <m>\mathscr{C}</m> is an object <m>t</m> such that for every object <m>x</m> in <m>\mathscr{C}, \operatorname{Hom}_{\mathscr{C}}(x, t)</m> is a singleton, meaning there exists a unique arrow <m>x \longrightarrow t</m>. 
                  A <em>zero object</em> in <m>\mathscr{C}</m> is an object that is both initial and terminal.
                </p>
              </statement>
            </definition>
    
            <exercise xml:id="exe-7"><title>Uniqueness of Initial and Terminal Objects</title>
              <statement>
                <p>
                  Initial objects are unique up to unique isomorphism. 
                  Terminal objects are unique up to unique isomorphism.
                </p>
              </statement>
            </exercise>
    
            <p>
              So we can talk about the initial object, the terminal object, and the zero object, if they exist.
            </p>
    
            <example xml:id="ex-initial-terminal"><title>Initial and Terminal Objects</title>
              <p>
                <ol>
                  <li>
                    <p>
                      The empty set is initial in <m>\Set</m>. 
                      Any singleton is terminal. 
                      Since the empty set and a singleton are not isomorphic in <m>\Set</m>, there is no zero object in <m>\Set</m>.
                    </p>
                  </li>
    
                  <li>
                    <p>
                      The <m>0</m> module is the zero object in <m>R</m><m>\Mod</m>.
                    </p>
                  </li>
    
                  <li>
                    <p>
                      The trivial group <m>\{e\}</m> is the zero object in <m>\Grp</m>.
                    </p>
                  </li>
    
                  <li>
                    <p>
                      In the category of rings, <m>\mathbb{Z}</m> is the initial object, but there is no terminal object unless we allow the <m>0</m> ring.
                    </p>
                  </li>
    
                  <li>
                    <p>
                      There are neither initial nor terminal objects in the category of fields.
                    </p>
                  </li>
                </ol>
              </p>
            </example>

            <definition xml:id="def-7.4"><title>Zero Arrow</title>
              <statement>
                <p>
                  Let <m>\mathscr{C}</m> be a category with a zero object <m>0</m>. 
                  Given two objects <m>x</m> and <m>y</m> in <m>\mathscr{C}</m>, the <em>zero arrow</em> from <m>x</m> to <m>y</m> is the unique arrow <m>x \longrightarrow y</m> that factors through <m>0</m>, meaning the arrow given by composition of the unique arrows <m>x \longrightarrow 0 \longrightarrow y</m>. 
                  We will often denote both the zero object and the zero arrow by <m>0</m>, whenever it does not lead to confusion.
                </p>
              </statement>
            </definition>
    
            <remark xml:id="rem-7.5">
              <p>
                If a category <m>\mathcal{A}</m> has a zero object, then <m>\operatorname{Hom}_{\mathcal{A}}(x, y)</m> is always nonempty, since it contains at least the 0 arrow.
              </p>
            </remark>
    
            <remark xml:id="rem-7.6">
              <p>
                Composing the zero arrow with any other arrow always yields the zero arrow.
              </p>
            </remark>
            
          </subsection>

          <subsection xml:id="subsec-additive-categories"><title>Additive Categories</title>

            <p>
              An abelian category is a category that has just enough extra structure to behave like <m>R</m>-Mod: 
              we have complexes and exact sequences, homology, the Snake Lemma, the long exact sequence in homology, and many other nice features. 
              On the one hand, every abelian category embeds nicely in some <m>R</m>-Mod, so it is in some ways sufficient to study <m>R</m>-Mod. 
              In other ways, the general nonsense definitions in an abelian category can sometimes give us a uniform, simple way to prove many results about <m>R</m>-Mod (and <m>\mathrm{Ch}(R</m>-Mod), and other related categories) all at once.
            </p>
  
            <definition xml:id="def-7.1"><title>Preadditive Cateogory</title>
              <statement>
                <p>
                  A category <m>\mathscr{A}</m> is a <em>preadditive category</em> if:
                  <ul>
                    <li>
                      <p>
                        For all objects <m>x</m> and <m>y</m> in <m>\mathcal{A}, \operatorname{Hom}_{\mathcal{A}}(x, y)</m> is an abelian group.
                      </p>
                    </li>
          
                    <li>
                      <p>
                        For all objects <m>x, y</m>, and <m>z</m> in <m>\mathcal{A}</m>, the composition
                        <me>\operatorname{Hom}_{\mathcal{A}}(x, y) \times \operatorname{Hom}_{\mathcal{A}}(z, x) \stackrel{\circ}{\longrightarrow} \operatorname{Hom}_{\mathcal{A}}(z, y)</me>
                        is bilinear, meaning
                        <me>g \circ\left(f_{1}+f_{2}\right)=g \circ f_{1}+g \circ f_{2} \quad \text { and } \quad\left(g_{1}+g_{2}\right) \circ f=g_{1} \circ f+g_{2} \circ f \text {. }</me>
                      </p>
                    </li>
                  </ul>
                </p>
              </statement>
            </definition>            
        
            <p>
              In the literature, preadditive categories are sometimes called <em>Ab-enriched</em> categories.
            </p>
  
          <example xml:id="ex-7.2">
            <p>
              Our favorite category <m>R</m>-Mod is a preadditive category; so is <m>\operatorname{Ch}(R)</m>.
            </p>
          </example>
        
          <p>
            We can talk about additive functors between any two preadditive categories.
          </p>
  
          <definition xml:id="def-7.3">
            <statement>
              <p>
                Let <m>\mathcal{A}</m> and <m>\mathscr{B}</m> be preadditive categories. 
                An <em>additive functor</em> <m>\mathcal{A} \rightarrow \mathscr{B}</m> is a functor such that the map
                <me>
                  \begin{gathered}
                    \operatorname{Hom}_{\mathcal{A}}(x, y) \longrightarrow \operatorname{Hom}_{\mathscr{B}}(F(x), F(y)) \\
                    f \longmapsto F(f)
                  \end{gathered}
                </me>
                is a homomorphism of abelian groups.
              </p>
            </statement>
          </definition>
    
          <remark xml:id="rem-7.7">
            <p>
              In any preadditive category <m>\mathcal{A}</m> with a zero object 0, the 0 arrow <m>x \longrightarrow y</m> coincides with the 0 of the abelian <m>\operatorname{group} \operatorname{Hom}_{\mathcal{A}}(x, y)</m>.
            </p>
          </remark>
  
          <remark xml:id="rem-7.8">
            <p>
              We can characterize the zero object 0 by the property that the zero arrow and the identity arrows on 0 coincide. 
              To see this, notice that if <m>1_{x}=x \stackrel{0}{\rightarrow} x</m>, then given any arrow <m>x \stackrel{f}{\rightarrow} y</m>, we must have
              <me>f=f \circ 1_{x}=f \circ 0=0</me>
              and similarly any arrow <m>y \stackrel{f}{\rightarrow} x</m> must be 0. 
              Then <m>x</m> is terminal and initial, and it must be the zero object.
            </p>
          </remark>

            <definition xml:id="def-7.9"><title>Additive Category</title>
              <statement>
                <p>
                  An <em>additive category</em> is a preadditive category <m>\mathcal{A}</m> such that:
                  <ul>
                    <li>
                      <p>
                        <m>\mathcal{A}</m> has a zero object.
                      </p>
                    </li>
          
                    <li>
                      <p>
                        <m>\mathcal{A}</m> has all finite products: given any two objects <m>x</m> and <m>y</m> in <m>\mathcal{A}</m>, there exists a product of <m>x</m> and <m>y</m> in <m>\mathcal{A}</m>.
                      </p>
                    </li>
                  </ul>
                </p>
              </statement>
            </definition>
    
            <lemma xml:id="lem-7.10">
              <statement>
                <p>
                  In an additive category, finite coproducts exist and they agree with products.
                </p>
              </statement>
    
              <proof>
                <p>
                  Let <m>x</m> and <m>y</m> be objects in our additive category, and consider their product, which exists by assumption:
                </p>
    
                <image source="2024_01_10_e73c1aec4ffc24ca9984g-02.jpg" width="20%"/>
              
                <p>
                  The universal property of the product give arrows <m>\iota_{1}</m> and <m>\iota_{2}</m> such that
                </p>
          
                <image source="2024_01_10_e73c1aec4ffc24ca9984g-02(1).jpg" width="20%"/>
                  
                <p>
                  and
                </p>
          
                <image source='2024_01_10_e73c1aec4ffc24ca9984g-02(2).jpg' width="20%"/> 
          
                <p>
                  commute.
                  We claim that <m>z</m> together with <m>\iota_{1}</m> and <m>\iota_{2}</m> form a coproduct for <m>x</m> and <m>y</m>. 
                  Given an object <m>w</m> and arrows <m>x \stackrel{f}{\rightarrow} w</m> and <m>y \stackrel{g}{\rightarrow} w</m>, we need to show that there exists a unique arrow <m>h</m> such that
                </p>
          
                <image source="2024_01_10_e73c1aec4ffc24ca9984g-03.jpg" width="20%"/>
                  
                <p>
                  commutes.
                </p>
          
                <p>
                  To see such an <m>h</m> exists, consider <m>h:=f \pi_{1}+g \pi_{2}</m>. 
                  Then
                  <me>h \iota_{1}=f \underbrace{\pi_{1} \iota_{1}}_{1_{x}}+g \underbrace{\pi_{2} \iota_{1}}_{0}=f \quad \text { and } \quad h \iota_{2}=f \underbrace{\pi_{1} \iota_{2}}_{0}+g \underbrace{\pi_{2} \iota_{2}}_{1_{y}}=f</me>
                  so indeed our proposed <m>h</m> does the job.
                </p>
          
                <p>
                  To show the uniqueness of such an <m>h</m>, we will use the fact that <m>z</m> together with <m>\pi_{1}</m> and <m>\pi_{2}</m> is a product for <m>x</m> and <m>y</m>. 
                  So suppose that <m>h^{\prime}</m> is another arrow such that <m>h^{\prime} \iota_{1}=f</m> and <m>h^{\prime} \iota_{2}=g</m>. 
                  Then <m>h-h^{\prime}</m> satisfies <m>\left(h-h^{\prime}\right) \iota_{1}=f-f=0</m> and <m>\left(h-h^{\prime}\right) \iota_{2}=g-g=0</m>, so it's sufficient to show that the 0 arrow is the unique arrow <m>\psi</m> such that
                </p>
          
                <image source="2024_01_10_e73c1aec4ffc24ca9984g-03(2).jpg" width="20%"/>
                
                <p>
                  commutes. 
                  First, we claim that <m>\iota_{1} \pi_{1}+\iota_{2} \pi_{2}</m> is the identity arrow on <m>z</m>. 
                  And indeed, this map satisfies
                  <me>\pi_{1}\left(\iota_{1} \pi_{1}+\iota_{2} \pi_{2}\right)=\underbrace{\pi_{1} \iota_{1}}_{1_{x}} \pi_{1}+\underbrace{\pi_{2} \iota_{1}}_{0} \pi_{2}=\pi_{1} \quad \text { and } \quad \pi_{2}\left(\iota_{1} \pi_{1}+\iota_{2} \pi_{2}\right)=\underbrace{\pi_{2} \iota_{1}}_{0} \pi_{1}+\underbrace{\pi_{2} \iota_{1}}_{1_{y}} \pi_{2}=\pi_{2},</me>
                  and so does the identity arrow <m>1_{z}</m>, so the universal property of the product guarantees that <m>\iota_{1} \pi_{1}+\iota_{2} \pi_{2}=1_{z}</m>. 
                  Now if <m>\psi \iota_{1}=0</m> and <m>\psi \iota_{2}=0</m>, then
                  <me>\psi=\psi 1_{z}=\psi\left(\iota_{1} \pi_{1}+\iota_{2} \pi_{2}\right)=\psi \iota_{1} \pi+\psi \iota_{2} \pi_{2}=0+0=0 .</me>
                </p>
              </proof>
            </lemma>
    
            <convention>
              <p>
                Notation 7.11. 
                In an additive category <m>\mathcal{A}</m>, given objects <m>A</m> and <m>B</m>, the notation <m>A \oplus B</m> denotes the product <m>\equiv</m> coproduct of <m>A</m> and <m>B</m>.
              </p>
            </convention>
    
            <remark xml:id="rem-7.12">
              <p>
                Remark 7.12. 
                If <m>\mathcal{A}</m> is additive category, the object <m>A \oplus B</m> is characterized by the existence of arrows
              </p>
    
              <image source="2024_01_10_e73c1aec4ffc24ca9984g-03(1).jpg" width="20%"/>
            
              <p>
                such that
                <me>\pi_{A} i_{A}=\mathrm{id}_{A}, \quad \pi_{B} i_{B}=\mathrm{id}_{B}, \quad \text { and } \quad i_{A} \pi_{A}+i_{B} \pi_{B}=\mathrm{id}_{A \oplus B}</me>
              </p>
            </remark>
    
            <lemma xml:id="lem-7.13">
              <statement>
                <p>
                  Lemma 7.13. 
                  Let <m>F: \mathcal{A} \longrightarrow \mathcal{B}</m> an additive functor between additive categories, and let 0 denote the zero object on both categories.
                  <ol>
                    <li>
                      <p>
                        We have <m>F(0)=0</m>. 
                        For any two objects <m>x</m> and <m>y, F(x \stackrel{0}{\rightarrow} y)=F(x) \stackrel{0}{\rightarrow} F(y)</m>.
                      </p>
                    </li>
    
                    <li>
                      <p>
                        F preserves finite products and coproducts.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
    
              <proof>
                <p>
                  We show the statement assuming <m>F</m> is covariant, and note that the argument in the contravariant case is essentially the same.
                  <ol>
                    <li>
                      <p>
                        Since <m>F_{x y}: \operatorname{Hom}_{\mathcal{A}}(x, y) \rightarrow \operatorname{Hom}_{\mathcal{B}}(F(x), F(y))</m> is a group homomorphism and that the zero elements in the abelian groups <m>\operatorname{Hom}_{\mathcal{A}}(x, y)</m> and <m>\operatorname{Hom}_{\mathcal{B}}(F(x), F(y))</m> are the corresponding zero arrows, then
                        <me>F(x \stackrel{0}{\longrightarrow} y)=F(x) \stackrel{0}{\longrightarrow} F(y) .</me>
                      </p>
                
                      <p>
                        Now the zero arrow and the identity arrows of the zero object coincide, and so do their images by <m>F</m>. 
                        On the one hand, <m>F\left(1_{0}\right)=1_{F(0)}</m>. On the other hand, by what we have shown at the arrow level we have
                        <me>F\left(1_{0}\right)=F(0) \stackrel{0}{\rightarrow} F(0)</me>
                      </p>
                
                      <p>
                        Then the identity and the zero arrows on <m>F(0)</m> coincide, so by Remark 7.8 we must have <m>F(0)=0</m>.
                      </p>
                    </li>
    
                    <li>
                      <p>
                      Fix objects <m>A</m> and <m>B</m> and the canonical arrows
                        <me>A \stackrel{i_{A}}{\longrightarrow} A \oplus B, \quad B \xrightarrow{i_{B}} A \oplus B, \quad A \oplus B \stackrel{\pi_{A}}{\longrightarrow} A, \quad \text { and } \quad A \oplus B \stackrel{\pi_{A}}{\longrightarrow} B \text {. }</me>
                      </p>
                
                      <p>
                        Any functor preserves identity arrows, so any additive functor <m>F</m> must satisfy
                        <me>
                          \begin{gathered}
                          F\left(\pi_{A}\right) F\left(i_{A}\right)=F\left(\pi_{A} i_{A}\right)=\operatorname{id}_{F(A)} \quad F\left(\pi_{B}\right) F\left(i_{B}\right)=F\left(\pi_{B} i_{B}\right)=\operatorname{id}_{F(B)} \\
                          \text { and } \\
                          F\left(i_{A}\right) F\left(\pi_{A}\right)+F\left(i_{B}\right) F\left(\pi_{B}\right)=\operatorname{id}_{F(A \oplus B)}
                          \end{gathered}
                        </me>
                        which satisfy
                        <me>\pi_{A} i_{A}=\mathrm{id}_{A}, \quad \pi_{B} i_{B}=\mathrm{id}_{B}, \quad \text { and } \quad i_{A} \pi_{A}+i_{B} \pi_{B}=\mathrm{id}_{A \oplus B}</me>
                      </p>
                
                      <p>
                        By Remark 7.12, this implies that <m>F(A \oplus B)</m> is the product <m>\equiv</m> coproduct of <m>F(A)</m> and <m>F(B)</m>.
                      </p>
                    </li>
                  </ol>
                </p>
              </proof>
            </lemma>
    
            <exercise xml:id="exe-81">
              <statement>
                <p>
                  Exercise 81. 
                  Let <m>\mathcal{A}</m> be an additive category.
                  <ol>
                    <li>
                      <p>
                        Show that an arrow <m>f</m> is a mono if and only if <m>f g=0</m> implies <m>g=0</m>.
                      </p>
                    </li>
      
                    <li>
                      <p>
                        Show that an arrow <m>f</m> is an epi if and only if <m>g f=0</m> implies <m>g=0</m>.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
            </exercise>
            
          </subsection>

          <subsection xml:id="subsec-ker-coker"><title>Kernels and Cokernels</title>

            <p>
              We can now define kernels and cokernels.
            </p>
    
            <definition xml:id="def-7.14">
              <statement>
                <p>
                  Let <m>\mathcal{A}</m> be an additive category and <m>f</m> an arrow <m>x \longrightarrow y</m>. 
                  The <em>kernel</em> of <m>f</m> is an arrow <m>k \stackrel{i}{\rightarrow} x</m> satisfying the following properties:
                  <ul>
                    <li>
                      <p>
                        <m>k \stackrel{i}{\longrightarrow} x \stackrel{f}{\longrightarrow} y</m> is 0 .
                      </p>
                    </li>
          
                    <li>
                      <p>
                        Given any <m>g \in \operatorname{Hom}_{\mathcal{A}}(z, x)</m> such that <m>z \stackrel{g}{\longrightarrow} x \stackrel{f}{\longrightarrow} y</m> is the zero arrow, there exists a unique arrow <m>\varphi</m> such that <m>i \varphi=g</m>, meaning that
                      </p>
                    </li>
                  </ul>
                </p>
          
                <image source="2024_01_10_e73c1aec4ffc24ca9984g-05(1).jpg" width="20%"/>
                  
                <p>
                  commutes. We denote the kernel of <m>f</m> by <m>\operatorname{ker} f</m>.
                </p>
              </statement>
            </definition>
    
            <remark xml:id="rem-7.15">
              <p>
                Remark 7.15. 
                We claim that a kernel, if it exists, is always a mono. Indeed, suppose that
                <me>z \stackrel{g_{1}}{\longrightarrow} k \stackrel{i}{\longrightarrow} x \stackrel{f}{\longrightarrow} y</me>
                are such that <m>i g_{1}=i g_{2}</m>. Then <m>i\left(g_{1}-g_{2}\right)=0</m>, so it's sufficient to show that <m>i g=0</m> implies <m>g=0</m>. 
                But then
              </p>
        
              <image source="2024_01_10_e73c1aec4ffc24ca9984g-05(2).jpg" width="20%"/>
                
              <p>
                commutes, and <m>f \circ 0=0</m>, so 0 factors uniquely through the kernel. But both <m>g</m> and <m>z \stackrel{0}{\rightarrow} k</m> are such factorizations, so <m>g=0</m>.
              </p>
            </remark>
      
            <p>
              We are used to thinking about the kernel of a map <m>f</m> as an object; but in this general context, the kernel is really an arrow, or more precisely, an object (the source of the kernel) and an arrow from that object to the source of <m>f</m>. 
              We sometimes refer to the kernel as the pair (object, arrow). 
              Also, we might use the notation <m>\operatorname{ker} f \longrightarrow x</m> for the kernel of <m>f: x \rightarrow y</m>. W
              e might also abuse notation and refer to the object that is the source of <m>\operatorname{ker} f</m> as the kernel of <m>f</m>, motivated by the familiar case of <m>R</m>-Mod. 
              Nevertheless, the kernel of <m>f</m> is technically an arrow, not an object. A good reason for identifying the arrow ker <m>f</m> with its source object is the following rewriting of the definition:
            </p>
    
            <remark xml:id="rem-7.16">
              <p>
                Remark 7.16. 
                If <m>k_{1} \stackrel{i_{1}}{\longrightarrow} x</m> and <m>k_{2} \xrightarrow{i_{2}} x</m> are both kernels of <m>f</m>, then there exist unique arrows <m>g</m> and <m>h</m> such that
              </p>
        
              <image source="2024_01_10_e73c1aec4ffc24ca9984g-05.jpg" width="20%"/>
                
              <p>
                commutes. 
                By Remark 7.15, kernels are always monic. 
                But then <m>i_{1} g h=i_{2} h=i_{1}</m>, and since <m>i_{1}</m> is a mono, we must have <m>g h=1</m>. 
                Similarly, <m>h g=1</m>, and <m>g</m> and <m>h</m> are isomorphisms.
              </p>
        
              <p>
                This shows that if <m>k \stackrel{i}{\longrightarrow} x</m> is the kernel of <m>f \in \operatorname{Hom}_{\mathcal{A}}(x, y)</m>, the object <m>k</m> is, up to isomorphism, the unique object that satisfies the following universal property: 
                for every object <m>z</m> and every arrow <m>g: z \rightarrow x</m> such that <m>f g=0</m>, there exists a unique arrow <m>h: z \rightarrow k</m> such that <m>i h=g</m>.
              </p>
            </remark>
    
            <definition xml:id="def-7.17">
              <statement>
                <p>
                  Definition 7.17. 
                  Let <m>\mathcal{A}</m> be an additive category and <m>f \in \operatorname{Hom}_{\mathcal{A}}(x, y)</m>. 
                  The <em>cokernel</em> of <m>f</m> is an arrow <m>y \stackrel{p}{\rightarrow} c</m>, denoted coker <m>f</m>, satisfying the following properties:
                </p>
          
                <p>
                  <ul>
                    <li>
                      <p>
                        <m>x \stackrel{f}{\longrightarrow} y \stackrel{p}{\longrightarrow} c</m> is 0.
                      </p>
                    </li>
          
                    <li>
                      <p>
                        Given any <m>g \in \operatorname{Hom}_{\mathcal{A}}(y, z)</m> such that <m>x \stackrel{f}{\longrightarrow} y \stackrel{g}{\longrightarrow} z</m> is 0 , there exists a unique arrow <m>\varphi</m> such that <m>i \varphi=g</m>, meaning that
                      </p>
                    </li>
                  </ul>
                </p>
          
                <image source="2024_01_10_e73c1aec4ffc24ca9984g-06.jpg" width="20%"/>
                  
                <p>
                  commutes.
                </p>
              </statement>
            </definition>
    
            <p>
              We will sometimes use the notation <m>y \rightarrow</m> coker <m>f</m> for the cokernel of <m>x \stackrel{f}{\longrightarrow} y</m>, although once again the cokernel of <m>f</m> is an arrow rather than an object.
            </p>
    
            <example xml:id="ex-7.18"><title>Example 7.18</title>
    
              <p>
                <ol>
                  <li>
                    <p>
                      The kernels and cokernels in <m>R</m>-Mod are what we think they are: 
                      the inclusion of the usual kernel, and the projection onto the usual cokernel.
                    </p>
                  </li>
    
                  <li>
                    <p>
                      It's not always true that all arrows have kernels or cokernels. 
                      For example, the category of finitely generated <m>R</m>-modules over some nonnoetherian ring <m>R</m> is additive, but it does not have all kernels. 
                      If <m>I</m> is some infinitely generated ideal in <m>R</m>, the kernel of the canonical projection <m>R \longrightarrow R / I</m> does not exist in our category. 
                      In fact, this is an epi but not a cokernel: it should be the cokernel of the inclusion map <m>I \longrightarrow R</m>, but that is not an arrow in our category.
                    </p>
                  </li>
                </ol>
              </p>
    
            </example>
          
              <p>
                While not all epis are cokernels and not all monos are kernels, the converse is true. 
                Just like we saw for kernels, cokernels, if they exist, are always epi, and they are unique in the sense we described in Remark 7.16.
              </p>
    
              <exercise xml:id="exe-82">
                <p>
                  Exercise 82. 
                  Let <m>\mathcal{A}</m> be an additive category.
                  <ol>
                    <li>
                      <p>
                        Show if <m>y \stackrel{\pi}{\longrightarrow} c</m> is the cokernel of <m>f \in \operatorname{Hom}_{\mathcal{A}}(x, y)</m>, the object <m>c</m> is, up to isomorphism, the unique object that satisfies the following universal property: 
                        for every object <m>z</m> and every arrow <m>g: y \rightarrow z</m> such that <m>g f=0</m>, there exists a unique arrow <m>h: c \rightarrow z</m> such that <m>h \pi=g</m>.
                      </p>
                    </li>
    
                    <li>
                      <p>
                        Show that every cokernel in <m>\mathcal{A}</m> is epi.
                      </p>
                    </li>
                  </ol>
                </p>
              </exercise>
    
              <remark xml:id="rem-7.19">
                <p>
                  Remark 7.19. 
                  Let <m>\mathcal{A}</m> be an additive category, and let <m>f</m> be any arrow such that ker coker <m>f</m> and coker ker <m>f</m> exist. 
                  Since <m>f \circ \operatorname{ker} f=0</m>, then by the universal property of the cokernel <m>f</m> factors uniquely through coker( <m>\operatorname{ker} f</m> ), say by coker <m>\operatorname{ker} f \stackrel{g}{\rightarrow} y</m>. 
                  Now
                  <me>\operatorname{coker} f \circ g \circ(\operatorname{coker} \operatorname{ker} f)=\operatorname{coker} f \circ f=0 \text {. }</me>
                </p>
            
                <p>
                  By Exercise 85, coker ker <m>f</m> is an epi, and thus we must have coker <m>f \circ g=0</m>. 
                  Then <m>g</m> factors uniquely through ker coker <m>f</m>, so we get a unique arrow such that
                </p>
            
                <image source="2024_01_10_e73c1aec4ffc24ca9984g-07(2).jpg" width="20%"/>
    
                <p>
                  commutes.
                </p>
              </remark>
    
              <example xml:id="ex-7.20">
                <p>
                  Example 7.20. 
                  Let's see what this factoring looks like in the more familiar example of <m>R</m>-Mod. 
                  Given an <m>R</m>-module homomorphism <m>f: M \rightarrow N</m>, we get a commutative diagram
                </p>
            
                <image source="2024_01_10_e73c1aec4ffc24ca9984g-07(1).jpg" width="20%"/>
    
                <p>
                  The map <m>\psi</m> is the isomorphism given by the First Isomorphism Theorem.
                </p>
    
              </example>
            
          </subsection>

          <subsection xml:id="subsec-ab-cat"><title>Definition of an Abelian Category</title>

            <definition xml:id="def-7.21"><title>Abelian Category</title>
              <statement>
                <p>
                  Definition 7.21. 
                  An abelian category is an additive category <m>\mathcal{A}</m> such that
                  <ul>
                    <li>
                      <p>
                        The category <m>\mathcal{A}</m> contains all kernels and cokernels of arrows in <m>\mathcal{A}</m>.
                      </p>
                    </li>
            
                    <li>
                      <p>
                        Every mono is a kernel of its cokernel.
                      </p>
                    </li>
            
                    <li>
                      <p>
                        Every epi is the cokernel of its kernel.
                      </p>
                    </li>
            
                    <li>
                      <p>
                        For every <m>f</m>, the canonical arrow coker <m>\operatorname{ker} f \longrightarrow \operatorname{ker} \operatorname{coker} f</m> is an isomorphism.
                      </p>
                    </li>
                  </ul>
                </p>
              </statement>
            </definition>
        
            <p>
              Ultimately, an abelian category is one that has just enough structure so that we can extend many of the desired properties of <m>R</m>-Mod. 
              In particular, we will see that we can define complexes and their homology in any abelian category, and that the Snake Lemma and the long exact sequence in homology hold.
            </p>
  
            <remark xml:id="rem-7.22">
              <p>
                Remark 7.22. 
                Let <m>\mathcal{A}</m> be an abelian category, and <m>f</m> any arrow. 
                As described in Remark 7.19, we have a commutative diagram
              </p>
  
              <image source="2024_01_10_e73c1aec4ffc24ca9984g-07.jpg" width="20%"/>
  
              <p>
                where <m>\psi</m> is now assumed to be an iso. 
                Now kernels are mono and cokernels are epi, by Exercise 85, and composing an epi (respectively, mono) with an iso gives us an epi (respectively, mono). 
                Therefore, we can factor <m>f</m> as a composition mono <m>\circ</m> epi.
              </p>
            </remark>
  
            <example xml:id="ex-7.23">
              <p>
                Example 7.23. 
                In <m>R</m>-Mod, this factorization is just the factoring through the image of the homomorphism: any <m>R</m>-module homomorphism <m>f: M \rightarrow N</m> factors as
                <me>M \rightarrow \operatorname{im} f \hookrightarrow N</me>
              </p>
            </example>
  
            <definition xml:id="def-7.24">
              <statement>
                <p>
                  Definition 7.24. 
                  Let <m>\mathcal{A}</m> be an abelian category, and consider an arrow <m>x \stackrel{f}{\rightarrow} y</m>. 
                  The <em>image</em> of <m>f</m> is <m>\operatorname{im} f:=\operatorname{ker}(\operatorname{coker} f)</m>.
                </p>
              </statement>
            </definition>
      
            <p>
              Following Remark 7.22, the source of <m>\operatorname{im} f=\operatorname{ker}</m> coker <m>f</m> is the unique (up to unique isomorphism) object such that <m>f</m> factors as
              <me>x \xrightarrow{\text { epi }} \operatorname{im} f \xrightarrow{\text { mono }} y .</me>
            </p>
  
            <exercise xml:id="exe-83">
              <p>
                Exercise 83. 
                Let <m>\mathcal{A}</m> be an abelian category.
                <ol>
                  <li>
                    <p>
                      Show that <m>f</m> is a mono if and only if <m>\operatorname{ker} f=0</m>.
                    </p>
                  </li>
  
                  <li>
                    <p>
                      Show that <m>f</m> is an epi if and only if <m>\operatorname{coker} f=0</m>.
                    </p>
                  </li>
                </ol>
              </p>
            </exercise>
  
            <remark xml:id="rem-7.25">
              <p>
                Remark 7.25. 
                If <m>\mathcal{A}</m> is an abelian category, its opposite category <m>\mathcal{A}^{\text {op }}</m> is also abelian. 
                This is just a consequence of the fact that all the requirements to be an abelian category come together with the dual requirements, so everything automatically dualizes well.
              </p>
            </remark>
  
            <example xml:id="ex-7.26">
              <p>
                Example 7.26. 
                Here are some examples and nonexamples of abelian categories.
                <ol>
                  <li>
                    <p>
                      The category <m>R</m>-Mod is an abelian category.
                    </p>
                  </li>
  
                  <li>
                    <p>
                      The category of free <m>R</m>-modules is additive but not abelian, as kernels and cokernels do not exist in general.
                    </p>
                  </li>
  
                  <li>
                    <p>
                      The category of finitely generated <m>R</m>-modules is abelian if and only if <m>R</m> is noetherian, which is exactly the condition we need to guarantee the existence of kernels and cokernels. 
                      For a general (nonoetherian) ring <m>R</m>, the category of noetherian <m>R</m>-modules is abelian.
                    </p>
                  </li>
  
                  <li>
                    <p>
                      The category of Hilbert spaces with continuous linear functions is an additive category. 
                      The monos are injective linear maps, and the epis are maps with dense image. 
                      The kernels are the usual kernels, while the cokernel of <m>f: X \longrightarrow Y</m> is given by the orthogonal projection <m>Y \longrightarrow \overline{f(X)}{ }^{\perp}</m>.
                    </p>
  
                    <p>
                      However, we claim that this is not an abelian category, since a mono might not be the kernel of its cokernel. 
                      Indeed, if <m>X \hookrightarrow Y</m> is a dense inclusion that is not surjective, then this mono is not the kernel of its cokernel: its cokernel is
                      <me>Y \longrightarrow \overline{f(X)}{ }^{\perp}</me>
                      but <m>\overline{f(X)}=Y</m> and thus <m>\overline{f(X)}{ }^{\perp}=\{0\}</m>, so ker coker <m>(f)=Y</m>, while <m>f(X) \neq Y</m>.
                    </p>
                  </li>
                </ol>
              </p>
          
            </example>
  
            <remark xml:id="rem-7.27">
              <p>
                Remark 7.27. 
                Suppose that <m>g</m> factors through <m>f</m>, meaning that there exists <m>h</m> such that
              </p>
              
              <image source="2024_01_10_e73c1aec4ffc24ca9984g-09.jpg" width="20%"/>
  
              <p>
                commutes. 
                Then <m>(\operatorname{coker} f) \circ g=(\operatorname{coker} f) \circ f \circ h=0</m>, so <m>g</m> factors through <m>\operatorname{ker}(\operatorname{coker} f)=\operatorname{im} f</m>, meaning we have another commutative diagram
              </p>
          
              <image source="2024_01_10_e73c1aec4ffc24ca9984g-09(2).jpg" width="20%"/>
            </remark>
  
            <exercise xml:id="exe-84">
              <p>
                Exercise 84. 
                Show that the kernel of <m>x \stackrel{0}{\rightarrow} y</m> is the identity arrow <m>1_{x}</m>, its cokernel is the identity arrow <m>1_{y}</m>, and <m>\operatorname{im}(x \stackrel{0}{\rightarrow} y)=0</m>.
              </p>
            </exercise>
  
            <exercise xml:id="exe-85">
              <p>
                Exercise 85. 
                Let <m>\mathcal{A}</m> be an abelian category, <m>g</m> an epi, and <m>f</m> a mono. 
                Then <m>\operatorname{ker}(f g)=\operatorname{ker} g</m>, <m>\operatorname{coker}(f g)=\operatorname{coker} f</m>, and <m>\operatorname{im}(f g)=\operatorname{im} f=f</m>.
              </p>
            </exercise>

          </subsection>

        </section>

        <section xml:id="sec-com-hom-ab"><title>Complexes and Homology</title>

          <subsection xml:id="subsec-complexes-ab"><title>Complexes in Abelian Categories</title>

            <definition xml:id="def-7.28">
              <statement>
                <p>
                  Let <m>\mathcal{A}</m> be an abelian category. 
                  A chain complex or simply complex <m>(C, \partial)</m>, which we sometimes write just a <m>C</m>, is a sequence of objects and arrows
                  <me>\cdots \longrightarrow C_{n} \stackrel{\partial_{n}}{\longrightarrow} C_{n-1} \longrightarrow \cdots</me>
                  such that <m>\partial_{n-1} \partial_{n}=0</m> for all <m>n</m>. 
                  
                  A map of complexes <m>f: C \longrightarrow D</m> between two chain complexes is a sequence of arrows <m>f_{n}</m> such that the diagram
                </p>
          
               <image source="2024_01_10_e73c1aec4ffc24ca9984g-09(1).jpg" width="20%"/>
                  
                <p>
                  commutes. 
                  The category of (chain) complexes over <m>\mathcal{A}</m>, denoted <m>\operatorname{Ch}(\mathcal{A})</m>, is the category that has objects all chain complexes in <m>\mathcal{A}</m> and arrows all the chain complex maps.
                </p>
              </statement>
            </definition>
  
            <lemma xml:id="lem-7.29">
              <statement>
                <p>
                  If <m>\mathcal{A}</m> is an abelian category, then <m>\operatorname{Ch}(\mathcal{A})</m> is also an abelian category.
                </p>
              </statement>
  
              <proof>
                <p>
                  Proof sketch. 
                  First, note that <m>\operatorname{Ch}(\mathcal{A})</m> is a preadditive category: given two maps of complexes <m>f</m> and <m>g, f+g</m> is obtained degreewise, by taking
                  <me>(f+g)_{n}:=f_{n}+g_{n}</me>
                </p>
          
                <p>
                  The facts that <m>\operatorname{Hom}_{\operatorname{Ch}(\mathcal{A})}(C, D)</m> is an abelian group and that composition is bilinear follow from the analogous facts in <m>\mathcal{A}</m> (exercise). 
                  The zero object is the zero complex, which has the zero object in <m>\mathcal{A}</m> in each degree. 
                  Given two complexes <m>C</m> and <m>D</m>, their product is taken degreewise:
                  <me>C \times D=\cdots \longrightarrow C_{n} \times D_{n} \stackrel{\partial_{n}^{C} \times \partial_{n}^{D}}{\longrightarrow} C_{n-1} \times D_{n-1} \longrightarrow \cdots</me>
                  and each of the projection maps in each degree assemble to make a map of complexes. So <m>\operatorname{Ch}(\mathcal{A})</m> is an additive category.
                </p>
          
                <p>
                  Let <m>f: C \rightarrow D</m> be a map of complexes. 
                  We need to show that both the both the kernel and cokernel of <m>f</m> exist. 
                  The universal property of <m>\operatorname{ker} \partial_{n}</m> gives us a unique arrow <m>\delta_{n+1}</m> such that
                </p>
          
                <image source="2024_01_10_e73c1aec4ffc24ca9984g-10.jpg" width="20%"/>
                  
                <p>
                  commutes. 
                  The commutativity of <m>\operatorname{ker} f_{n+1} \longrightarrow C_{n+1}</m> together with <m>\partial_{n} \partial_{n+1}=0</m> and the
                </p>
          
                <image source="2024_01_10_e73c1aec4ffc24ca9984g-10(2).jpg" width="20%"/>
                  
                <p>
                  fact that <m>\operatorname{ker} f_{n-1}</m> is a mono imply that <m>\delta_{n} \delta_{n+1}=0</m>. 
                  Finally, we conclude that
                  <me>\cdots \longrightarrow \operatorname{ker} f_{n} \stackrel{\delta_{n}}{\longrightarrow} \operatorname{ker} f_{n-1} \longrightarrow \cdots</me>
                  is a complex in <m>\operatorname{Ch}(\mathcal{A})</m>, and the canonical maps <m>\operatorname{ker} f_{n} \rightarrow C_{n}</m> assemble into a map of complexes. 
                  One can check that the universal property of the kernels <m>\operatorname{ker} f_{n}</m> forces this complex we just constructed to be <m>\operatorname{ker} f</m>. 
                  In particular, <m>\operatorname{Ch}(\mathcal{A})</m> has all kernels. 
                  Similarly, we construct cokernels in <m>\operatorname{Ch}(\mathcal{A})</m>, building on the fact that <m>\mathcal{A}</m> has all cokernels.
                </p>
          
                <p>
                  Finally, it remains to show that every mono is the kernel of its cokernel and every epi is the cokernel of its kernel. 
                  This boils down to the fact that <m>f</m> is a mono if and only if all the <m>f_{n}</m> are monos, and dually that <m>f</m> is an epi if and only if all the <m>f_{n}</m> are epis. 
                  The conclusion will then follow from our construction of kernels and cokernels and the fact that <m>\mathcal{A}</m> is abelian. 
                  Our claim follows from Exercise 83 and the fact that <m>f=0</m> if and only if all <m>f_{n}=0</m>.
                </p>
              </proof>
            </lemma>
  
            <definition xml:id="def-7.30">
              <statement>
                <p>
                  Let <m>\mathcal{A}</m> be an abelian category. 
                  For each <m>C</m> in <m>\operatorname{Ch}(\mathcal{A})</m>, we define its cycles <m>Z_{n}(C)</m> and boundaries <m>B_{n}(C)</m> by
                  <me>Z_{n}(C):=\text { source ker } \partial_{n} \quad \text { and } \quad B_{n}(C):=\text { source im } \partial_{n+1}</me>
                </p>
              </statement>
            </definition>
  
            <remark xml:id="rem-7.31">
              <p>
                Let <m>\mathcal{A}</m> be an abelian category, and <m>C \stackrel{f}{\rightarrow} D \stackrel{g}{\rightarrow} E</m> be arrows in <m>\mathcal{A}</m> such that <m>g f=0</m>. 
                By Remark 7.22, we can factor <m>f</m> as an epi followed by <m>\operatorname{im} f</m>.
              </p>
        
              <image source="2024_01_10_e73c1aec4ffc24ca9984g-10(1).jpg" width="20%"/>
                
              <p>
                Since <m>g \circ \operatorname{im} f \circ \operatorname{epi}=g f=0</m>, we must have <m>g \circ \operatorname{im} f=0</m>, so <m>\operatorname{im} f</m> factors uniquely through ker <m>g</m>. 
                Most importantly, there is a canonical arrow <m>\operatorname{im} f \longrightarrow \operatorname{ker} g</m>.
              </p>
        
              <image source="2024_01_10_e73c1aec4ffc24ca9984g-11.jpg" width="20%"/>
            </remark>
  
            <definition xml:id="def-7.32">
              <statement>
                <p>
                  Definition 7.32. Let <m>\mathcal{A}</m> be an abelian category. A sequence of arrows <m>C \stackrel{f}{\rightarrow} D \stackrel{g}{\rightarrow} E</m> in <m>\mathcal{A}</m> is exact if <m>g f=0</m> and <m>\operatorname{ker} g=\operatorname{im} f</m>.
                </p>
              </statement>
            </definition>
  
            <remark xml:id="rem-7.33">
              <p>
                Remark 7.33. In our definition of exact sequence, we really mean that the canonical arrow <m>\operatorname{im} f \longrightarrow \operatorname{ker} g</m> we described in Remark 7.31 is an isomorphism. But notice that is equivalent to saying that the arrow <m>\operatorname{im} f</m> is a kernel for <m>g</m>, and <m>\operatorname{ker} g</m> is an image for <m>f</m>, hence the equality we wrote above, which is a more compact way of saying this.
              </p>
            </remark>
            
            <p>
              This immediately generalizes to define an exact sequence, and once again a short exact sequence is one of the form
            </p>
      
            <p>
              <me>0 \longrightarrow A \longrightarrow B \longrightarrow C \longrightarrow 0</me>
            </p>
  
            <exercise xml:id="exe-86">
              <statement>
                <p>
                  Exercise 86. Show that <m>0 \longrightarrow A \stackrel{f}{\rightarrow} B</m> is exact if and only if <m>f</m> is a mono, and <m>B \stackrel{g}{\rightarrow} C \longrightarrow 0</m> is exact if and only if <m>g</m> is an epi. Moreover,
                </p>
          
                <p>
                  <me>0 \longrightarrow A \xrightarrow{f} B \stackrel{g}{\longrightarrow} C \longrightarrow 0</me>
                </p>
          
                <p>
                  is a short exact sequence if and only if
                </p>
          
                <p><ul>
                  <li>
                        <p>
                  <m>f</m> is a mono. <m>\quad \bullet g</m> is an epi. <m>f=\operatorname{im} f=\operatorname{ker} g</m>. <m>\bullet \operatorname{coker} f=g</m>.
                </p>
                  </li>
          
                </ul></p>
              </statement>
            </exercise>
  
            <remark xml:id="rem-7.34">
              <p>
                Remark 7.34. Let <m>\mathcal{A}</m> be an abelian category and <m>(C, \partial)</m> be a complex in <m>\operatorname{Ch}(R)</m>. Since <m>\partial_{n} \partial_{n+1}=0</m> for all <m>n</m>, we get a canonical arrow <m>B_{n}(C) \longrightarrow Z_{n}(C)</m> for each <m>n</m>.
              </p>
            </remark>
  
            <exercise xml:id="exe-87">
              <statement>
                <p>
                  Exercise 87. Given an additive category <m>\mathcal{A}, B_{n}</m> and <m>Z_{n}</m> are additive functors <m>\operatorname{Ch}(\mathcal{A}) \longrightarrow \mathcal{A}</m>. In particular, an arrow <m>C \stackrel{f}{\rightarrow} D</m> induces arrows <m>Z_{n}(C) \stackrel{Z_{n}(f)}{\longrightarrow} Z_{n}(D)</m> and <m>B_{n}(c) \stackrel{B_{n}(f)}{\longrightarrow} B_{n}(D)</m>.
                </p>
              </statement>
            </exercise>
            
          </subsection>

          <subsection xml:id="subsec-hom-ab"><title>Homology in Abelian Categories</title>

            <definition xml:id="def-7.35">
              <statement>
                <p>
                  Let <m>\mathcal{A}</m> be an abelian category and <m>(C, \partial)</m> a complex in <m>\operatorname{Ch}(R)</m>. 
                  The <m>n</m>th homology of <m>C</m> is the object
                  <me>\mathrm{H}_{n}(C):=\text { target of } \operatorname{coker}\left(B_{n}(C) \longrightarrow Z_{n}(C)\right) \text {, }</me>
                  where <m>B_{n}(C) \longrightarrow Z_{n}(C)</m> is the canonical arrow we described in Remark 7.31.
                </p>
              </statement>
            </definition>
  
            <p>
              In fact, the <m>n</m>th homology is an additive functor <m>\mathrm{H}_{n}: \mathrm{Ch}(\mathcal{A}) \longrightarrow \mathcal{A}</m>. But to see that, we first need to make sense of what homology does to maps of complexes.
            </p>
      
            <p>
              Let <m>\mathcal{A}</m> be an abelian category and <m>C \stackrel{f}{\rightarrow} D</m> a map of complexes in <m>\operatorname{Ch}(\mathcal{A})</m>. Fix an integer <m>n</m>. We get induced arrows <m>B_{n}(f)</m> and <m>Z_{n}(f)</m>, since <m>B_{n}</m> and <m>Z_{n}</m> are additive functors. This gives us a commutative diagram
            </p>
      
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-12.jpg" width="20%"/>
              
            <p>
              where <m>\alpha</m> and <m>\beta</m> are the canonical arrows. To construct <m>\mathrm{H}_{n}(f)</m>, we claim that there is a unique arrow coker <m>\alpha \longrightarrow</m> coker <m>\beta</m> making the diagram commute. This is all explained in the commutative diagram
            </p>
      
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-12(1).jpg" width="20%"/>
              
            <p>
              where coker <m>\beta \circ\left(Z_{n}(f)\right) \circ \alpha=\operatorname{coker} \beta \circ \beta \circ B_{n}(f)=0</m>, which gives us a unique factorization <m>\mathrm{H}_{n}(f)</m> through coker <m>\alpha</m>.
            </p>
  
            <exercise xml:id="exe-88">
              <statement>
                <p>
                  Given any abelian category <m>\mathcal{A}, \mathrm{H}_{n}</m> is an additive functor <m>\operatorname{Ch}(\mathcal{A}) \longrightarrow \mathcal{A}</m>.
                </p>
              </statement>
            </exercise>
      
            <p>
              Similarly, we can define homotopies.
            </p>
  
            <definition xml:id="def-7.36">
              <statement>
                <p>
                  Let <m>\mathcal{A}</m> be an abelian category and <m>f, g: F \longrightarrow G</m> be maps complexes in <m>\mathrm{Ch}(\mathcal{A})</m>. A homotopy, sometimes referred to as a chain homotopy, between <m>f</m> and <m>g</m> is a sequence of arrows <m>h_{n}: F_{n} \longrightarrow G_{n+1}</m>
                </p>
          
                <image source="2024_01_10_e73c1aec4ffc24ca9984g-12(2).jpg" width="20%"/>
                  
                <p>
                  such that
                </p>
          
                <p>
                  <me>\delta_{n+1} h_{n}+h_{n-1} \delta_{n}=f_{n}-g_{n}</me>
                </p>
          
                <p>
                  for all <m>n</m>. 
                  If there exists a homotopy between <m>f</m> and <m>g</m>, we say that <m>f</m> and <m>g</m> are homotopic, and write <m>f \simeq g</m>. 
                  If <m>f</m> is homotopic to the zero map, we say <m>f</m> is null-homotopic. 
                  If <m>f: F \rightarrow G</m> and <m>g: G \rightarrow F</m> are maps of complexes such that <m>f g</m> is homotopic to the identity arrow <m>1_{G}</m> and <m>g f</m> is homotopic to the identity arrow <m>1_{F}</m>, we say that <m>f</m> and <m>g</m> are homotopy equivalences and <m>F</m> and <m>G</m> are homotopy equivalent.
                </p>
              </statement>
            </definition>
  
            <exercise xml:id="exe-89">
              <statement>
                <p>
                  Homotopy is an equivalence relation in <m>\operatorname{Ch}(\mathcal{A})</m>.
                </p>
              </statement>
            </exercise>
  
            <exercise xml:id="exe-90">
              <statement>
                <p>
                  Let <m>\mathcal{A}</m> be an abelian category. 
                  Homotopic maps of complexes in <m>\operatorname{Ch}(\mathcal{A})</m> induce the same map on homology.
                </p>
              </statement>
            </exercise>
  
            <remark xml:id="rem-7.37">
              <p>
                Let <m>F</m> be an additive functor between abelian categories. 
                Then <m>F</m> must send complexes to complexes, and it induces a functor <m>\operatorname{Ch}(\mathcal{A}) \rightarrow \operatorname{Ch}(\mathcal{A})</m>, which we also call <m>F</m>. 
                Now if <m>h</m> is a homotopy between two maps of complexes, <m>F</m> preserves the identities <m>\delta_{n+1} h_{n}+h_{n-1} \delta_{n}=f_{n}-g_{n}</m> for all <m>n</m>, so <m>F(h)</m> is a homotopy between <m>F(f)</m> and <m>F(g)</m>.
              </p>
            </remark>
  
            <definition xml:id="def-7.38">
              <statement>
                <p>
                  Let <m>\mathcal{A}</m> be an abelian category. 
                  A map of complexes <m>f: A \rightarrow B</m> in <m>\operatorname{Ch}(\mathcal{A})</m> is a quasi-isomorphism if <m>\mathrm{H}_{n}(f)</m> is an isomorphism for all <m>n</m>.
                </p>
              </statement>
            </definition>
      
            <p>
              Finally, we set up some notation we will use later.
            </p>
  
            <definition xml:id="def-7.39">
              <statement>
                <p>
                  We will denote the full subcategory of <m>\operatorname{Ch}(\mathcal{A})</m> of complexes <m>C</m> such that <m>C_{n}=0</m> for all <m>n&lt;k</m> by <m>\mathrm{Ch}_{\geqslant k}(\mathcal{A})</m>.
                </p>
              </statement>
            </definition>
            
          </subsection>

        </section>

        <section xml:id="sec-functors-ab"><title>Functors</title>

          <subsection xml:id="subsec-exact-ab"><title>Exact Functors: Revisited</title>

            <definition xml:id="def-7.40">
              <statement>
                <p>
                  Let <m>\mathcal{A}</m> be an abelian category. 
                  A subcategory <m>\mathcal{B}</m> of <m>\mathcal{A}</m> is an abelian subcategory of <m>\mathcal{A}</m> if <m>\mathcal{B}</m> is abelian and the inclusion <m>\mathcal{B} \subseteq \mathcal{A}</m> is an exact functor.
                </p>
              </statement>
            </definition>
  
            <exercise xml:id="exe-91">
              <statement>
                <p>
                  Let <m>\mathcal{B}</m> be a full subcategory of the abelian category <m>\mathcal{A}</m>. Show that: a) <m>\mathcal{B}</m> is an additive category if and only if <m>\mathcal{B}</m> contains 0 and is closed under finite coproducts. b) <m>\mathcal{B}</m> is an abelian subcategory if and only if <m>\mathcal{B}</m> is additive and closed under kernels and cokernels.
                </p>
              </statement>
            </exercise>
  
            <definition xml:id="def-7.41">
              <statement>
                <p>
                  Let <m>T: \mathcal{A} \longrightarrow \mathcal{B}</m> be an additive covariant functor between abelian categories. 
                  We say <m>T</m> is left exact if it takes every exact sequence
                  <me>0 \longrightarrow A \xrightarrow{f} B \xrightarrow{g} C \longrightarrow 0</me>
                  to the exact sequence
                  <me>0 \longrightarrow T(A) \stackrel{T(f)}{\longrightarrow} T(B) \stackrel{T(g)}{\longrightarrow} T(C)</me>
                  and right exact if it takes every exact sequence
                  <me>0 \longrightarrow A \xrightarrow{f} B \xrightarrow{g} C \longrightarrow 0</me>
                  to the exact sequence
                  <me>T(A) \stackrel{T(f)}{\longrightarrow} T(B) \stackrel{T(g)}{\longrightarrow} T(C) \longrightarrow 0</me>
                </p>
          
                <p>
                  Finally, <m>T</m> is an exact functor if it preserves short exact sequences, meaning every short exact sequence
                  <me>0 \longrightarrow A \xrightarrow{f} B \xrightarrow{g} C \longrightarrow 0</me>
                  is taken to the short exact sequence
                  <me>0 \longrightarrow T(A) \stackrel{T(f)}{\longrightarrow} T(B) \stackrel{T(g)}{\longrightarrow} T(C) \longrightarrow 0</me>
                </p>
          
                <p>
                  A contravariant additive functor <m>T: \mathcal{A} \longrightarrow \mathcal{B}</m> between abelian categories is left exact if it takes every short exact sequence
                  <me>0 \longrightarrow A \xrightarrow{f} B \xrightarrow{g} C \longrightarrow 0</me>
                  to the exact sequence
                  <me>0 \longrightarrow T(C) \stackrel{T(g)}{\longrightarrow} T(B) \stackrel{T(f)}{\longrightarrow} T(A)</me>
                  and right exact if it takes every exact sequence
                  <me>0 \longrightarrow A \xrightarrow{f} B \xrightarrow{g} C \longrightarrow 0</me>
                  to the exact sequence
                  <me>T(C) \stackrel{T(g)}{\longrightarrow} T(B) \stackrel{T(f)}{\longrightarrow} T(A) \longrightarrow 0</me>
                </p>
          
                <p>
                  Finally, <m>T</m> is an exact functor if it preserves short exact sequences, meaning every short exact sequence
                  <me>0 \longrightarrow A \xrightarrow{f} B \xrightarrow{g} C \longrightarrow 0</me>
                  is taken to the short exact sequence
                  <me>0 \longrightarrow T(C) \stackrel{T(g)}{\longrightarrow} T(B) \stackrel{T(f)}{\longrightarrow} T(A) \longrightarrow 0</me>
                </p>
              </statement>
            </definition>
  
            <theorem xml:id="thm-7.42">
              <statement>
                <p>
                  Let <m>\mathcal{A}</m> be an abelian category, and fix an object <m>x</m> in <m>\mathcal{A}</m>. 
                  The functors
                  <me>
                    \begin{array}{lll}
                      \mathcal{A} \longrightarrow \boldsymbol{A b} &amp; \text { and } &amp; \mathcal{A} \longrightarrow \boldsymbol{A b} \\
                      y \longmapsto \operatorname{Hom}_{\mathcal{A}}(x, y) &amp; &amp; y \longmapsto \operatorname{Hom}_{\mathcal{A}}(y, x)
                    \end{array}
                  </me>
                  are left exact.
                </p>
              </statement>
  
              <proof>
                <p>
                  We will show that <m>\operatorname{Hom}_{\mathcal{A}}(x,-)</m> is left exact. 
                  Notice that the contravariant functor <m>\operatorname{hom}_{\mathcal{A}}(-, x)</m> can be viewed as the covariant functor <m>\operatorname{Hom}_{\mathcal{A}^{\mathrm{op}}}(x,-)</m>. 
                  Since <m>\mathcal{A}^{\mathrm{op}}</m> is also an abelian category, it will then follow that <m>\operatorname{Hom}_{\mathcal{A}^{\text {op }}}(x,-)</m> is also left exact, or equivalently, that <m>\operatorname{Hom}_{\mathcal{A}}(-, x)</m> is left exact.
                </p>
          
                <p>
                  So let
                  <me>0 \longrightarrow A \xrightarrow{f} B \xrightarrow{g} C \longrightarrow 0</me>
                  be an exact sequence in <m>\operatorname{Ch}(\mathcal{A})</m>. 
                  We want to show that
                  <me>0 \longrightarrow \operatorname{Hom}_{\mathcal{A}}(x, A) \stackrel{f_{*}}{\longrightarrow} \operatorname{Hom}_{\mathcal{A}}(x, B) \stackrel{g_{*}}{\longrightarrow} \operatorname{Hom}_{\mathcal{A}}(x, C)</me>
                  is exact, and notice this last complex lives in the category of abelian groups.
                </p>
          
                <p>
                  We have three things to show:
                </p>
          
                <p>
                  <ul>
                    <li>
                      <p>
                        Exactness at <m>A</m> is equivalent to <m>f</m> being a mono. 
                        By assumption, <m>f</m> is a mono, so <m>f_{*}(h)=f h</m> is injective.
                      </p>
                  </li>
          
                  <li>
                    <p>
                      Since <m>g f=0</m>, so is <m>g_{*} f_{*}=(g f)_{*}</m>.
                    </p>
                  </li>
          
                  <li>
                    <p>
                      We want to show that <m>\operatorname{ker} g_{*}=\operatorname{im} f_{*}</m>, and these are now maps of abelian groups. So we need to show that every <m>h \in \operatorname{Hom}_{\mathcal{A}}(x, C)</m> such that <m>g h=0</m> factors uniquely through <m>f</m>, meaning <m>h=\operatorname{im} f_{*}</m>. Our assumption that the original sequence is exact implies that <m>f=\operatorname{im} f=\operatorname{ker} g</m>. The universal of property of the kernel gives us that whenever <m>g h=0, h</m> must factor through <m>\operatorname{ker} g=f=\operatorname{im} f</m>.
                    </p>
                  </li>
                </ul>
              </p>
              </proof>
            </theorem>
            
            <exercise xml:id="exe-92">
              <statement>
                <p>
                  Let <m>I</m> be any small category. Show that if <m>\mathcal{A}</m> is an abelian category, then so is the category <m>\mathcal{A}^{I}</m> of functors <m>I \longrightarrow \mathcal{A}</m>.
                </p>
              </statement>
            </exercise>
            
          </subsection>

          <subsection xml:id="subsec-yoneda-ab"><title>The Yoneda Lemma: Revisited</title>

            <p>
              We are now ready for the abelian category version of the Yoneda Lemma; this turns out to be a very useful result.
            </p>
  
            <theorem xml:id="thm-7.43"><title>Yoneda Embedding for Abelian Categories</title>
              <statement>
                <p>
                  Let <m>\mathcal{A}</m> be an abelian category. 
                  Recall that <m>\boldsymbol{A b}^{\mathcal{A}^{o p}}</m> denotes the category of contravariant functors <m>\mathcal{A} \rightarrow \boldsymbol{A} \boldsymbol{b}</m>. 
                  The covariant functor
                </p>
          
                <p>
                  <me>
                    \begin{aligned}
                      &amp; \mathcal{A} \longrightarrow \boldsymbol{A} \boldsymbol{b}^{\mathcal{A}^{o p}} \\
                      &amp; x \longrightarrow \operatorname{Hom}_{\mathcal{A}}(-, x)
                    \end{aligned}</me>
                </p>
          
                <p>
                  is an embedding into a full subcategory. 
                  Moreover, this functor reflects exactness, meaning that if
                  <me>\operatorname{Hom}_{\mathcal{A}}(-, x) \longrightarrow \operatorname{Hom}_{\mathcal{A}}(-, y) \longrightarrow \operatorname{Hom}_{\mathcal{A}}(-, z)</me>
                  is exact, then
                  <me>x \longrightarrow y \longrightarrow z</me>
                  must also be exact.
                </p>
              </statement>
  
              <proof>
                <p>
                  First, our functor is injective on objects because our axioms for a category include the assumption that the Hom-sets are all disjoint. Moreover, by the usual version of the Yoneda Lemma the assignment
                  <me>
                    \begin{array}{r}
                      \operatorname{Nat}\left(\operatorname{Hom}_{\mathcal{A}}(-, x), \operatorname{Hom}_{\mathcal{A}}(-, y)\right) \longrightarrow \operatorname{Hom}_{\mathcal{A}}(x, y) \\
                      \eta \longmapsto \eta_{x}\left(1_{x}\right)
                    \end{array}
                  </me>
                  is a natural bijection. 
                  In particular, our functor is indeed full and faithful.
                </p>
          
                <p>
                  To show that the functor reflects exactness, suppose that
                  <me>\operatorname{Hom}_{\mathcal{A}}(-, x) \stackrel{f_{*}}{\longrightarrow} \operatorname{Hom}_{\mathcal{A}}(-, y) \stackrel{g_{*}}{\longrightarrow} \operatorname{Hom}_{\mathcal{A}}(-, z)</me>
                  is exact. 
                  Then <m>g_{*} f_{*}=0</m>, so <m>g f=g_{*} f_{*}\left(1_{x}\right)=0</m>.
                </p>
          
                <p>
                  It remains to show that <m>\operatorname{ker} g=\operatorname{im} f</m>. 
                  Let <m>\psi</m> be the canonical arrow <m>\operatorname{im} f \longrightarrow \operatorname{ker} g</m>. 
                  The exactness of
                  <me>\operatorname{Hom}_{\mathcal{A}}(-, x) \stackrel{f_{*}}{\longrightarrow} \operatorname{Hom}_{\mathcal{A}}(-, y) \stackrel{g_{*}}{\longrightarrow} \operatorname{Hom}_{\mathcal{A}}(-, z)</me>
                  together with the fact that <m>g_{*}(\operatorname{ker} g)=0</m> imply that <m>\operatorname{ker} g</m> factors through <m>f</m>. 
                  By Remark 7.27, ker <m>g</m> must also factor through <m>\operatorname{im} f</m>, say by <m>\varphi</m>. 
                  The universal property of the kernels ker <m>g</m> and <m>\operatorname{im} f</m> will give us that <m>\psi</m> and <m>\varphi</m> are inverse isos.
                </p>
          
                <p>
                  When <m>\mathcal{A}=R</m>-Mod, the proof can be simplified: the exactness of
                  <me>\operatorname{Hom}_{R}(R, A) \stackrel{f_{*}}{\longrightarrow} \operatorname{Hom}_{\mathcal{A}}(R, B) \stackrel{g_{*}}{\longrightarrow} \operatorname{Hom}_{\mathcal{A}}(R, C)</me>
                  together with the natural isomorphism between <m>\operatorname{Hom}_{R}(R,-)</m> and the identity functor give us that
                  <me>A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C</me>
                  is exact.
                </p>
              </proof>
            </theorem>
  
            <p>
              Here is a fun and very useful application of Theorem 7.43.
            </p>
  
            <corollary xml:id="cor-7.44">
              <statement>
                <p>
                  Let <m>(L, R)</m> be an adjoint pair of additive functors <m>\mathcal{A} \underset{R}{\stackrel{L}{\longleftrightarrow}} \mathcal{B}</m> between abelian categories. 
                  Then <m>L</m> is right exact, and <m>R</m> is left exact.
                </p>
              </statement>
  
              <proof>
                <p>
                  Consider a short exact sequence
                  <me>0 \longrightarrow x \longrightarrow y \longrightarrow z \longrightarrow 0</me>
                  in <m>\mathcal{B}</m>, and let <m>w</m> be an object in <m>\mathcal{A}</m>. 
                  The adjointness of the pair <m>(L, R)</m> gives us a commutative diagram
                </p>
          
                <image source="2024_01_10_e73c1aec4ffc24ca9984g-16.jpg" width="20%"/>
                  
                <p>
                  where the vertical maps are bijections of sets. 
                  For every <m>w</m> in <m>\mathcal{A}, \operatorname{Hom}_{\mathcal{B}}(L w,-)</m> is left exact, by Theorem 7.42, so the bottom row of the diagram above is exact. 
                  We claim this implies that the top row must also be exact. 
                  Our vertical maps are a priori only bijection on sets, but it is easy to see that these natural bijections restrict to a bijection between the images of each pair of corresponding maps. 
                  Moreover, for any objects <m>A</m> and <m>B</m>, the natural bijection <m>\operatorname{Hom}_{\mathcal{A}}(A, R B) \cong \operatorname{Hom}_{\mathcal{A}}(L A, B)</m> must always send 0 to 0, since
                </p>
          
                <image source="2024_01_10_e73c1aec4ffc24ca9984g-16(1).jpg" width="20%"/>
                  
                <p>
                  commutes. 
                  It is then routine to check that our bijections also restrict to bijections between the kernels of each pair of corresponding maps. 
                  The exactness of the bottom row then induces exactness of the top row. 
                  By Theorem 7.43, Hom reflects exactness, and we conclude that
                  <me>0 \longrightarrow R x \longrightarrow R y \longrightarrow R z</me>
                  must also be exact. 
                  Thus <m>R</m> is a left exact functor.
                </p>
          
                <p>
                  Finally, by Remark 7.25, <m>\mathcal{A}^{\mathrm{op}}</m> and <m>\mathcal{B}^{\mathrm{op}}</m> are both abelian categories. 
                  Consider the opposite functors <m>L^{\mathrm{op}}</m> and <m>R^{\mathrm{op}}</m>. Notice that <m>L^{\mathrm{op}}</m> is the right adjoint to <m>R^{\mathrm{op}}</m>, so <m>L^{\mathrm{op}}</m> must be left exact. 
                  Therefore, <m>L</m> must be right exact.
                </p>
              </proof>
            </corollary>
    
            <p>
              This is possibly the first time we have encountered a proof that truly used duality in an essential and interesting way. 
              In the case where <m>\mathcal{A}=\mathcal{B}=R</m>-Mod, the fact that <m>R</m> is left exact can be obtained using only methods from <m>R</m>-Mod; 
              but the statement about <m>L</m> used the fact that <m>\mathcal{A}^{\mathrm{op}}</m> is an abelian category, while the opposite category of <m>R</m>-Mod is not another category of modules.
            </p>
      
            <p>
              The Yoneda embedding from Theorem 7.43 is the first piece of the proof of a very important result.
            </p>
  
            <theorem xml:id="thm-7.45"><title>Freyd-Mitchell embedding theorem</title>
              <statement>
                <p>
                  Let <m>\mathcal{A}</m> be a small abelian category. 
                  There exists a ring <m>R</m>, possibly not commutative, and an exact, fully faithful embedding <m>\mathcal{A} \longrightarrow R</m>-Mod.
                </p>
              </statement>
            </theorem>
      
            <p>
              The full details of the proof are rather complicated, and can be found in [Fre03]. 
              Here is a very rough map of the proof. 
              By Theorem 7.43, we already have a fully faithful embedding of <m>\mathcal{A}</m> in <m>\mathbf{A} \mathbf{b}^{\mathcal{A}^{\text {op }}}</m>, so it is sufficient to show that there is a fully faithful embedding of <m>\mathbf{A} \mathbf{b}^{\mathcal{A}^{\text {op }}}</m> into some <m>R</m>-Mod. 
              The idea is to quotient <m>\mathbf{A b}^{\mathcal{A}^{\text {op }}}</m> by an abelian subcategory <m>L</m> that contains all the kernels and cokernels of the arrows <m>\operatorname{Hom}_{\mathcal{A}}(-, y) \rightarrow \operatorname{Hom}_{\mathcal{A}}(-, z)</m> for all epis <m>y \longrightarrow z</m>, in such a way that the composite of the embedding in Theorem 7.43 with this quotient remains an embedding. 
              Then one shows that this quotient category has all coproducts and also what is called a projective generator. 
              Roughly speaking, this is a projective object <m>P</m> such that for every object <m>M</m> there exists an arrow <m>P \rightarrow M</m>. 
              Then one shows that this implies that this category is equivalent to a full abelian subcategory of <m>R</m>-Mod for some <m>R</m>.
            </p>
            
          </subsection>

          <subsection xml:id="subsec-diagrams-ab"><title>The Diagram Chasers: Revisited</title>

            <p>
              Most of the theorems we have proved about <m>R</m>-Mod extend to any abelian category. 
              Some of those theorems can in fact be deduced from the fact that they are true over <m>R</m>-Mod.
            </p>
  
            <theorem xml:id="thm-7.46"><title>Snake Lemma</title>
              <statement>
                <p>
                  Consider an abelian category <m>\mathcal{A}</m> and a commutative diagram
                </p>
  
                <image source="2024_01_10_e73c1aec4ffc24ca9984g-17.jpg" width="20%"/>
              
                <p>
                  If the rows of the diagram are exact, then there exists an exact sequence
                  <me>\text { ker } f \longrightarrow \operatorname{ker} g \longrightarrow \operatorname{ker} h \stackrel{\partial}{\longrightarrow} \operatorname{coker} f \longrightarrow \operatorname{coker} g \longrightarrow \text { coker } h \text {. }</me>
                </p>
              </statement>
            </theorem>
  
            <theorem xml:id="thm-7.47"><title>Long exact sequence in homology</title>
              <statement>
                <p>
                  Given a short exact sequence in <m>\operatorname{Ch}(R)</m>
                  <me>0 \longrightarrow A \xrightarrow{f} B \xrightarrow{g} C \longrightarrow 0</me>
                  there are connecting arrows <m>\partial: \mathrm{H}_{n}(C) \longrightarrow \mathrm{H}_{n-1}(A)</m> such that
                  <me>\cdots \longrightarrow \mathrm{H}_{n+1}(C) \stackrel{\partial}{\longrightarrow} \mathrm{H}_{n}(A) \stackrel{\mathrm{H}_{n}(f)}{\longrightarrow} \mathrm{H}_{n}(B) \stackrel{\mathrm{H}_{n}(g)}{\longrightarrow} \mathrm{H}_{n}(C) \stackrel{\partial}{\longrightarrow} \mathrm{H}_{n-1}(A) \longrightarrow \cdots</me>
                  is an exact sequence.
                </p>
              </statement>
            </theorem>
  
            <theorem xml:id="thm-7.48"><title>The Five Lemma</title>
              <statement>
                <p>
                  Given an abelian category <m>\mathcal{A}</m>, consider the following commutative diagram in <m>\mathcal{A}</m> with exact rows:
                </p>
  
                <image source="2024_01_10_e73c1aec4ffc24ca9984g-18.jpg" width="20%"/>
              
                <p>
                  If <m>b</m> and <m>d</m> are epi and <m>e</m> is a mono, then <m>c</m> is an epi. 
                  If <m>b</m> and <m>d</m> are mono and a is epi, then <m>c</m> is mono.
                </p>
              </statement>
            </theorem>
            
            <p>
              One can prove these by invoking the Freyd-Mitchell theorem and checking that one can go back and forth with our statements between some small subcategory of <m>\mathcal{A}</m> containing our diagram and all the necessary kernels, cokernels, etc, and some <m>R</m>-Mod where that category embeds. 
              Alternatively, one can use what are called members, as in [ML98, VIII.4.5]. 
              The theory of members is an attempt to fix the main difficulty when dealing with abelian categories: that the objects and arrows are not just sets and functions, so we can't just talk about members of the objects and their images by each arrow.
            </p>
            
          </subsection>

        </section>

        <section xml:id="sec-proj-inj-ab"><title>Projectives and Injectives</title>

          <subsection xml:id="subsec-proj-inj-ab"><title>Projectives, Injective, and Resolutions: Revisited</title>

            <p>
              A lot of the notions we have studied this semester can be extended to the setting of a general abelian category.
            </p>
  
            <definition xml:id="def-7.49">
              <statement>
                <p>
                  Definition 7.49. Let <m>\mathcal{A}</m> be an abelian category. 
                  An object <m>P</m> in <m>\mathcal{A}</m> is <em>projective</em> if <m>\operatorname{Hom}_{\mathcal{A}}(P,-)</m> is an exact functor. 
                  An object <m>E</m> in <m>\mathcal{A}</m> is <em>injective</em> if <m>\operatorname{Hom}_{\mathcal{A}}(-, E)</m> is exact.
                </p>
              </statement>
            </definition>
  
            <p>
              This generalizes the notion of projective and injective modules.
            </p>
  
            <remark xml:id="rem-7.50">
              <p>
                Remark 7.50. Let <m>\mathcal{A}</m> be an abelian category. 
                An object <m>P</m> is projective if and only if every arrow <m>P \longrightarrow Y</m> factors through every epi <m>X \longrightarrow Y</m> :
              </p>
  
              <image source="2024_01_10_e73c1aec4ffc24ca9984g-18(2).jpg" width="20%"/>
              
              <p>
                and an object <m>E</m> is injective if and only if every arrow <m>X \longrightarrow E</m> factors through every mono <m>X \longrightarrow Y</m> :
              </p>
      
               <image source="2024_01_10_e73c1aec4ffc24ca9984g-18(1).jpg" width="20%"/>
            </remark>
  
            <exercise xml:id="exe-93">
              <statement>
                <p>
                  Exercise 93. Let <m>\mathcal{A}</m> be an abelian category.
                </p>
          
                <p>
                  a) Show that <m>\operatorname{Hom}_{\mathcal{A}}(x \oplus y, z)=\operatorname{Hom}_{\mathcal{A}}(x, z) \oplus \operatorname{Hom}_{\mathcal{A}}(y, z)</m>.
                </p>
          
                <p>
                  b) Show that if <m>P</m> and <m>Q</m> are projective, then so is <m>P \oplus Q</m>.
                </p>
              </statement>
            </exercise>
  
            <definition xml:id="def-7.51">
              <statement>
                <p>
                  Definition 7.51. 
                  An abelian category <m>\mathcal{A}</m> has <em>enough projectives</em> if for every object <m>M</m> there exists a projective object <m>P</m> and an epi <m>P \longrightarrow M</m>. 
                  We say that <m>\mathcal{A}</m> has <em>enough injectives</em> if for every object <m>M</m> there exists an injective object <m>E</m> and a mono <m>M \longrightarrow E</m>.
                </p>
              </statement>
            </definition>
      
            <p>
              Lemma 4.13 and Theorem 4.31 say that <m>R</m>-Mod has enough injectives and enough projectives.
            </p>
  
            <example xml:id="ex-7.52">
              <p>
                Example 7.52. The category of finite abelian groups has no projectives beside 0. In particular, Ab does not have enough projectives.
              </p>
            </example>
  
            <definition xml:id="def-7.53"><title>Projective Resolution</title>
              <statement>
                <p>
                  Definition 7.53. 
                  Let <m>M</m> be an object in the abelian category <m>\mathcal{A}</m>. 
                  A projective resolution of <m>M</m> is a complex
                  <me>\cdots \longrightarrow P_{2} \longrightarrow P_{1} \longrightarrow P_{0} \longrightarrow 0</me>
                  where all the <m>P_{n}</m> are projective, <m>\mathrm{H}_{0}(P)=M</m>, and <m>\mathrm{H}_{n}(P)=0</m> for all <m>n \neq 0</m>. 
                  An injective resolution of <m>M</m> is a cochain complex
                  <me>0 \longrightarrow E^{0} \longrightarrow E^{1} \longrightarrow \cdots</me>
                  such that every <m>E^{n}</m> is injective, <m>\mathrm{H}^{n}(E)=0</m> for all <m>n</m>, and <m>\mathrm{H}^{0}(E)=M</m>.
                </p>
              </statement>
            </definition>
  
            <theorem xml:id="thm-7.54">
              <statement>
                <p>
                  Theorem 7.54. 
                  If <m>\mathcal{A}</m> has enough projectives, every object in <m>\mathcal{A}</m> has a projective resolution. 
                  Similarly, if <m>\mathcal{A}</m> has enough injectives, every object in <m>\mathcal{A}</m> has an injective resolution.
                </p>
              </statement>
  
              <proof>
                <p>
                  Proof. 
                  Given be an object <m>M</m> in <m>\mathcal{A}</m>, let's construct a projective resolution explicitly. 
                  We start by picking an epi <m>P_{0} \stackrel{\varepsilon}{\rightarrow} M</m> from a projective <m>P_{0}</m>. 
                  Since <m>\epsilon</m> is an epi, it is the cokernel of its kernel, so
                  <me>0 \longrightarrow \operatorname{ker} \varepsilon \longrightarrow P_{0} \stackrel{\varepsilon}{\longrightarrow} M \longrightarrow 0</me>
                  is a short exact sequence. 
                  Now we find an epi <m>P_{1} \stackrel{\varepsilon_{1}}{\longrightarrow} K_{0}:=\operatorname{ker} \varepsilon</m>, and set <m>P_{1} \xrightarrow{\partial_{1}} P_{0}</m> to be the composition
                </p>
          
                <image source="2024_01_10_e73c1aec4ffc24ca9984g-19.jpg" width="20%"/>
                  
                <p>
                  We proceed the same way, at each step taking a projective <m>P_{n}</m> and an epi <m>\varepsilon_{n}: P_{n} \longrightarrow \operatorname{ker} \partial_{n-1}</m>, and setting <m>\partial_{n+1}</m> to be the composition <m>\left(\operatorname{ker} \partial_{n-1}\right) \circ \varepsilon_{n}</m>. 
                  By construction, <m>\partial_{n}=i_{n-1} \varepsilon_{n}</m>, where <m>\varepsilon_{n}</m> is an epi and ker <m>\partial_{n-1}</m> is mono. 
                  By Exercise 85, im <m>\partial_{n}=i_{n-1}=\operatorname{ker} \partial_{n-1}</m>.
                </p>
              </proof>
            </theorem>
      
            <p>
              This generalizes Theorem 5.2 in a natural way, and the proof is essentially the same.
            </p>
            
          </subsection>

          <subsection xml:id="subsec-split-ab"><title>Split Exact Sequences: Revisited</title>

            <p>
              We can also characterize injectives in term of split short exact sequences, as we did for modules. 
              In particular, the Splitting Lemma extends to any abelian category.
            </p>
  
            <definition xml:id="def-7.55">
              <statement>
                <p>
                  Definition 7.55. Let <m>\mathcal{A}</m> be an abelian category. A short exact sequence
                </p>
          
                <p>
                  <me>0 \longrightarrow A \xrightarrow{f} B \xrightarrow{g} C \longrightarrow 0</me>
                </p>
          
                <p>
                  splits if one of the following equivalent conditions hold:
                </p>
          
                <p><ol>
                  <li>
                        <p>
                  There exists an arrow <m>C \stackrel{r}{\rightarrow} B</m> such that <m>g r=\operatorname{id}_{C}</m>.
                </p>
                  </li>
          
                  <li>
                        <p>
                  There exists an arrow <m>C \stackrel{r}{\rightarrow} B</m> such that <m>g r=\mathrm{id}_{C}</m>.
                </p>
                  </li>
          
                  <li>
                        <p>
                  There exists an isomorphism of complexes between our sequence and
                </p>
                  </li>
          
                </ol></p>
          
                <p>
                  <me>0 \longrightarrow A \longrightarrow A \oplus C \longrightarrow C \longrightarrow 0</me>
                </p>
          
                <p>
                  where the arrows are the canonical arrows that come with the (co)product <m>A \oplus C</m>.
                </p>
              </statement>
            </definition>
  
            <theorem xml:id="thm-7.56">
              <statement>
                <p>
                  Theorem 7.56. Let <m>\mathcal{A}</m> be an abelian category. Every short exact sequence
                </p>
          
                <p>
                  <me>0 \longrightarrow A \xrightarrow{f} B \xrightarrow{f} C \longrightarrow 0</me>
                </p>
          
                <p>
                  where <m>A</m> is injective or <m>C</m> is projective splits.
                </p>
              </statement>
            </theorem>
      
            <p>
              The proofs are exactly the same as in the case of <m>R</m>-Mod, Theorem 4.6 and Theorem 4.32. 
              Proof. If <m>C</m> is projective, there exists <m>h</m> such that
            </p>
    
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-20.jpg" width="20%"/>
              
            <p>
              commutes, so <m>g h=\operatorname{id}_{C}</m> and <m>g</m> is a splitting. 
              If <m>A</m> is injective, there exists <m>h</m> such that
            </p>
      
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-20(1).jpg" width="20%"/>
              
            <p>
              commutes, so <m>h f=\operatorname{id}_{A}</m>, and <m>h</m> is a splitting.
            </p>
      
            <p>
              More generally, we can talk about split exact complexes.
            </p>
  
            <definition xml:id="def-7.57">
              <statement>
                <p>
                  Definition 7.57. A complex <m>C</m> in <m>\operatorname{Ch}(\mathcal{A})</m> is split if there are arrows <m>s_{n}: C_{n} \longrightarrow C_{n+1}</m> such that the differential <m>\partial</m> satisfies <m>\partial=\partial s \partial</m>. 
                  A complex is split exact if it is both exact and split.
                </p>
              </statement>
            </definition>
  
            <remark xml:id="rem-7.58">
              <p>
                Remark 7.58. A split short exact sequence is precisely a short exact sequence that is a split complex.
              </p>
            </remark>
  
            <exercise xml:id="exe-94">
              <statement>
                <p>
                  Exercise 94. Additive functors preserve split complexes, meaning that if <m>C</m> is a split complex, then so is <m>F(C)</m> for any additive functor <m>F</m>. 
                  In particular, additive functors preserve split short exact sequences.
                </p>
              </statement>
            </exercise>
            
          </subsection>

          <subsection xml:id="subsec-res-ab"><title>Unique Resolutions and the Horseshoe Lemma: Revisited</title>

            <lemma xml:id="lem-7.59">
              <statement>
                <p>
                  Lemma 7.59. Let <m>\mathcal{A}</m> be an abelian category, <m>(P, \partial)</m> in <m>\mathrm{Ch}_{\geqslant 0}(\mathcal{A})</m> with each <m>P_{i}</m> projective, <m>P_{0} \xrightarrow{\partial_{0}} M</m> an arrow in <m>\mathcal{A}</m> such that <m>\partial_{0} \partial_{1}=0</m> and <m>(Q, \delta)</m> a projective resolution of <m>N</m>. Given any <m>M \stackrel{f}{\rightarrow}</m> in <m>\mathcal{A}</m>, there exists a map of complexes <m>P \xrightarrow{\varphi} Q</m> such that
                </p>
          
                <image source="2024_01_10_e73c1aec4ffc24ca9984g-21(2).jpg" width="20%"/>
                  
                <p>
                  commutes, which is unique up to homotopy.
                </p>
              </statement>
  
              <proof>
                <p>
                  Proof. Since <m>P_{0}</m> is projective and <m>\delta_{0}</m> is an epi, there exists <m>\varphi_{0}</m> such that
                </p>
          
          
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-21(1).jpg" width="20%"/>
                  
                <p>
                  commutes.
                </p>
          
                <p>
                  We proceed inductively, assuming we have <m>\varphi_{0}, \ldots, \varphi_{n-1}</m> with <m>\varphi_{n-2} \partial_{n-1}=\delta_{n-2} \varphi_{n-1}</m>. Since <m>P_{n}</m> is projective, there exists <m>\varphi_{n}</m> such that
                </p>
          
          
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-21(3).jpg" width="20%"/>
                  
                <p>
                  commutes. Commutativity gives <m>\delta_{n-1} \varphi_{n-1} \partial_{n}=\varphi_{n-2} \partial_{n-1} \partial_{n}=0</m>, so <m>\varphi_{n-1} \partial_{n}</m> factors through the kernel of <m>\delta_{n-1}</m>.
                </p>
          
          
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-21.jpg" width="20%"/>
                  
                <p>
                  Since <m>Q</m> is a projective resolution of <m>N</m>, the arrow <m>Q_{n} \longrightarrow Z_{n-1}(Q)</m> above is an epi, so the arrow <m>P_{n} \longrightarrow Z_{n-1}(Q)</m> we just constructed factors through <m>Q_{n}</m>, giving us <m>\varphi_{n}</m> such that
                </p>
          
          
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-22(2).jpg" width="20%"/>
                  
                <p>
                  commutes.
                </p>
          
                <p>
                  Now suppose we are given two such maps of complexes <m>\varphi</m> and <m>\psi</m> lifting <m>f</m>, say <m>\varphi</m> and <m>\psi</m>. Note that <m>\varphi-\psi</m> and 0 are two liftings of the 0 map. We are going to show that any map lifting the 0 map <m>M \longrightarrow N</m> must be nullhomotopic, which will then imply that <m>\varphi</m> and <m>\psi</m> are homotopic as well (essentially via the same homotopy!).
                </p>
          
                <p>
                  So let <m>\varphi: P \longrightarrow C</m> be a map of complexes lifting the 0 map <m>M \longrightarrow N</m>.
                </p>
          
          
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-22.jpg" width="20%"/>
                  
                <p>
                  We will construct a nullhomotopy for <m>\varphi</m> inductively. Set <m>h_{n}=0</m> for all <m>n&lt;0</m>. The commutativity of the rightmost square says that <m>\delta_{0} \varphi_{0}=0</m>, so <m>\operatorname{im} \varphi_{0} \subseteq \operatorname{ker} \delta_{0}=\operatorname{im} \delta_{1}</m>. Since <m>\partial_{0} \varpi_{0}=0, \varphi_{0}</m> factors through <m>Z_{0}(Q)</m>. But <m>Q_{1} \rightarrow Z_{0}(Q)</m> is an epi and <m>P_{0}</m> is projective, there exists <m>H_{0}</m> such that
                </p>
          
          
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-22(1).jpg" width="20%"/>
                  
                <p>
                  commutes. So <m>H_{0}</m> satisfies <m>\delta_{0} H_{0}=\varphi_{0}</m>. Set <m>H_{-1}=0</m>.
                </p>
          
                <p>
                  Now suppose we have constructed <m>H_{0}, \ldots, H_{n-1}</m> such that <m>\delta_{n} H_{n-1}+H_{n-2} \partial_{n-1}=\varphi_{n-1}</m>. Then
                </p>
          
                <p>
                  <me>\begin{aligned}
          \delta_{n} \varphi_{n} &amp; =\varphi_{n-1} \partial_{n} &amp; \text { since } \varphi \text { is a map of complexes } \\
          &amp; =\left(\delta_{n} H_{n-1}+H_{n-2} \partial_{n-1}\right) \partial_{n} &amp; \text { by assumption } \\
          &amp; =\delta_{n} H_{n-1} \partial_{n}+H_{n-2} \partial_{n-1} \partial_{n} &amp; \\
          &amp; =\delta_{n} H_{n-1} \partial_{n} &amp; \text { since } \partial_{n-1} \partial_{n}=0
          \end{aligned}</me>
                </p>
          
                <p>
                  so <m>\delta_{n}\left(\varphi_{n}-H_{n-1} \partial_{n}\right)=0</m>. Therefore, <m>\varphi_{n}</m> factors through <m>Z_{n}(Q)</m>, and since <m>Q</m> is a projective resolution of <m>N, Q_{n+1} \longrightarrow Z_{n}(Q)</m> is an epi. Therefore, the factorization of <m>\varphi_{n}-H_{n-1} \partial_{n}</m> through <m>Z_{n}(Q)</m> also factors through <m>Q_{n}</m>, and we end up with an arrow <m>H_{n}</m> such that
                </p>
          
          
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-23(1).jpg" width="20%"/>
                  
                <p>
                  commutes. This <m>H_{n}</m> must then satisfy <m>\delta_{n-1} H_{n}+H_{n-1} \partial_{n}=\varphi_{n}</m>, and ultimately <m>H</m> is a homotopy between <m>\varphi</m> and 0 .
                </p>
              </proof>
            </lemma>
  
            <theorem xml:id="thm-7.60">
              <statement>
                <p>
                  Theorem 7.60 (Horseshoe Lemma). Let <m>\mathcal{A}</m> be an abelian category, <m>P</m> be a projective resolution of <m>A</m>, and <m>R</m> be a projective resolution of <m>C</m>. If
                </p>
          
                <p>
                  <me>0 \longrightarrow A \xrightarrow{f} B \xrightarrow{g} C \longrightarrow 0</me>
                </p>
          
                <p>
                  is an exact sequence, there exists a projective resolution <m>Q</m> of <m>B</m> and maps of complexes <m>F</m> and <m>G</m> lifting <m>f</m> and <m>g</m> such that
                </p>
          
                <p>
                  <me>0 \longrightarrow P \xrightarrow{F} Q \stackrel{G}{\longrightarrow} R \longrightarrow 0</me>
                </p>
          
                <p>
                  is an exact sequence in <m>\operatorname{Ch}(\mathcal{A})</m>.
                </p>
              </statement>
  
              <proof>
                <p>
                  First, a word on notation: <m>\oplus</m> denotes the coproduct in <m>\mathcal{A}</m>, and given arrows <m>x \stackrel{f}{\rightarrow} z</m> and <m>y \stackrel{g}{\rightarrow} z</m>, we will write <m>f \oplus g</m> for the unique arrow <m>x \oplus y \longrightarrow z</m> induced by <m>f</m> and <m>g</m>. Moreover, we will denote the differential of <m>P</m> by <m>\partial^{P}</m>, and the differential of <m>R</m> by <m>\partial^{R}</m>.
                </p>
          
                <p>
                  Set <m>Q_{n}=P_{n} \oplus R_{n}</m>. Recall that the product and coproduct in <m>\mathcal{A}</m> coincide, by Lemma 7.10, so let <m>F_{n}: P_{n} \longrightarrow Q_{n}</m> and <m>G_{n}: Q_{n} \longrightarrow R_{n}</m> be the canonical arrows. One can show that in fact we get short exact sequences
                </p>
          
                <p>
                  <me>0 \longrightarrow P_{n} \stackrel{F_{n}}{\longrightarrow} Q_{n} \stackrel{G_{n}}{\longrightarrow} R_{n} \longrightarrow 0</me>
                </p>
          
                <p>
                  for all <m>n</m>. Moreover, <m>Q_{n}</m> is projective for all <m>n</m>, by Exercise 93. We will construct the missing differentials <m>\partial^{Q}</m> inductively.
                </p>
          
                <p>
                  Since <m>R_{0}</m> is projective and <m>g</m> is an epi, there exists <m>\gamma</m> such that
                </p>
          
          
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-23(2).jpg" width="20%"/>
                  
                <p>
                  commutes. Set <m>\partial_{0}^{Q}:=\left(f \partial_{0}^{P}\right) \oplus \gamma</m>. The universal property of the coproduct guarantees that
                </p>
          
                  <image source='2024_01_10_e73c1aec4ffc24ca9984g-23.jpg' width="20%"/> 
          
                <p>
                  commutes. 
                  By the Five Lemma, <m>\partial_{0}^{Q}</m> is epi. By the Snake Lemma,
                  <me>\operatorname{ker} \partial_{0}^{P} \longrightarrow \operatorname{ker} \partial_{0}^{Q} \longrightarrow \operatorname{ker} \partial_{0}^{R}</me>
                  is exact. 
                  We then proceed by induction, and at each step we apply the base case to
                </p>
          
                <image source="2024_01_10_e73c1aec4ffc24ca9984g-24.jpg" width="20%"/>
                  
                <p>
                  where the vertical arrows are epi because <m>P</m> and <m>R</m> are projective resolutions and thus exact.
                </p>
              </proof>
            </theorem>
  
            <remark xml:id="rem-7.61">
              <p>
                By duality, if <m>\mathcal{A}</m> has enough injectives,
              </p>
        
              <p>
                <me>0 \longrightarrow A \longrightarrow B \longrightarrow C \longrightarrow 0</me>
              </p>
        
              <p>
                is exact, and <m>E_{A}</m> and <m>E_{C}</m> are injective resolutions for <m>A</m> and <m>C</m>, then there exist an injective resolution <m>E_{B}</m> of <m>B</m> and a short exact sequence of complexes
              </p>
        
              <p>
                <me>0 \longrightarrow E_{A} \longrightarrow E_{B} \longrightarrow E_{C} \longrightarrow 0</me>
              </p>
        
              <p>
                extending the given one.
              </p>
            </remark>
            
          </subsection>
          
        </section>

        <section xml:id="sec-derived-functors-ab"><title>Derived Functors</title>

          <subsection xml:id="subsec-derived-ab"><title>Derived Functors: Revisited</title>

            <p>
              We are now ready to define derived functors in full generality. The definitions will match the definitions over <m>R</m>-modules; the one notable addition from <m>R</m>-Mod to the general case is the new need to worry about whether the abelian category in question has enough injectives or enough projectives.
            </p>
  
            <definition xml:id="def-7.62"><title>Derived functors</title>
              <statement>
                <p>
                  Let <m>\mathcal{A}</m> and <m>\mathcal{B}</m> be abelian categories.
                </p>
          
                <p>
                  Let <m>F: \mathcal{A} \longrightarrow \mathcal{B}</m> be a covariant right exact functor. 
                  If <m>\mathcal{A}</m> has enough projectives, the left derived functors of <m>F</m> are a sequence of functors <m>L_{i} F: \mathcal{A} \longrightarrow \mathcal{B}, i \geqslant 0</m>, defined as follows:
                  <ul>
                    <li>
                      <p>
                        For each object <m>A</m> in <m>\mathcal{A}</m>, fix a projective resolution <m>P</m> of <m>A</m>, and set
                        <me>L_{i} F(A):=\mathrm{H}_{i}(F(P))</me>
                      </p>
                    </li>

                    <li>
                      <p>
                        Given an arrow <m>f: A \rightarrow B</m>, fix projective resolutions <m>P \longrightarrow A</m> and <m>Q \longrightarrow B</m>, and a map of complexes <m>\varphi: P \rightarrow Q</m> lifting <m>f</m>. Then
                        <me>L_{i} F(f):=\mathrm{H}_{i}(F(\varphi))</me>
                      </p>
                    </li>
                  </ul>
                </p>
          
                <p>
                  Let <m>F: \mathcal{A} \longrightarrow \mathcal{B}</m> be a covariant left exact functor. 
                  If <m>\mathcal{A}</m> has enough injectives, the right derived functors of <m>F</m> are a sequence of functors <m>R^{i} F: \mathcal{A} \longrightarrow \mathcal{B}, i \geqslant 0</m>, defined as follows:
                  <ul>
                    <li>
                      <p>
                        For each object <m>A</m> in <m>\mathcal{A}</m>, fix an injective resolution <m>E</m> of <m>A</m>, and set
                        <me>R^{i} F(A):=\mathrm{H}^{i}(F(E))</me>
                      </p>
                    </li>

                    <li>
                      <p>
                        Given an arrow <m>f: A \rightarrow B</m>, fix injective resolutions <m>A \longrightarrow E</m> and <m>B \longrightarrow I</m>, and a map of complexes <m>\varphi: P \rightarrow Q</m> extending <m>f</m>. Then
                        <me>R^{i} F(f):=\mathrm{H}^{i}(F(\varphi))</me>
                      </p>
                    </li>
                  </ul>
                </p>
          
          
                <p>
                  Let <m>F: \mathcal{A} \longrightarrow \mathcal{B}</m> be a contravariant left exact functor. 
                  If <m>\mathcal{A}</m> has enough projectives, the right derived functors of <m>F</m> are a sequence of functors <m>R^{i} F: \mathcal{A} \longrightarrow \mathcal{B}, i \geqslant 0</m>, defined as follows:
                </p>
          
                <p>
                  <ul>
                    <li>
                      <p>
                        For each object <m>A</m> in <m>\mathcal{A}</m>, fix a projective resolution <m>P</m> of <m>A</m>, and set
                        <me>R^{i} F(A):=\mathrm{H}^{i}(F(P))</me>
                      </p>
                    </li>

                    <li>
                      <p>
                        Given an arrow <m>f: A \rightarrow B</m>, fix projective resolutions <m>P \longrightarrow A</m> and <m>Q \longrightarrow B</m>, and a map of complexes <m>\varphi: P \rightarrow Q</m> extending <m>f</m>. Then
                        <me>R^{i} F(f):=\mathrm{H}^{i}(F(\varphi))</me>
                      </p>
                    </li>
                  </ul>
                </p>

                <p>
                  Finally, let <m>F: \mathcal{A} \longrightarrow \mathcal{B}</m> be a contravariant right exact functor. 
                  If <m>\mathcal{A}</m> has enough injectives, the left derived functors of <m>F</m> are a sequence of functors <m>L_{i} F: \mathcal{A} \longrightarrow \mathcal{B}, i \geqslant 0</m>, defined as follows:
                  <ul>
                    <li>
                      <p>
                        For each object <m>A</m> in <m>\mathcal{A}</m>, fix an injective resolution <m>E</m> of <m>A</m>, and set
                        <me>L_{i} F(A):=\mathrm{H}_{i}(F(E))</me>
                      </p>
                    </li>

                    <li>
                      <p>
                        Given an arrow <m>f: A \rightarrow B</m>, fix injective resolutions <m>A \longrightarrow E</m> and <m>B \longrightarrow I</m>, and a map of complexes <m>\varphi: E \rightarrow I</m> extending <m>f</m>. Then
                        <me>L_{i} F(f):=\mathrm{H}_{i}(F(\varphi))</me>
                      </p>
                    </li>
                  </ul>
                </p>
              </statement>
            </definition>
  
            <remark xml:id="rem-7.63">
              <p>
                If <m>F</m> is exact, then <m>\mathrm{H}_{i}(F(C))=F\left(\mathrm{H}_{i}(C)\right)</m>, so <m>L_{i} F=0</m> for all <m>i&gt;0</m>.
              </p>
            </remark>
  
            <remark xml:id="rem-7.64">
              <p>
                If <m>P</m> is projective, then <m>0 \longrightarrow P \longrightarrow 0</m> is a projective resolution of <m>P</m>, and thus <m>L_{i} F(P)=0</m> for all <m>i&gt;0</m>. 
                Similarly, if <m>E</m> is injective then <m>R^{i} F(E)=0</m>.
              </p>
            </remark>
  
            <proposition xml:id="prop-7.65">
              <statement>
                <p>
                  Let <m>\mathcal{A}</m> be an abelian category with enough projectives, and <m>F</m> a covariant right exact functor. 
                  <ol>
                    <li>
                      <p>
                        <m>L_{i} F(A)</m> is well-defined up to isomorphism for every object <m>A</m>. 
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>L_{i} F(f)</m> is well-defined for every arrow <m>f</m>. 
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>L_{i} F</m> is an additive functor for each <m>i</m>. 
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>L_{0} F=F</m>.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
  
              <proof>

                <p>
                  <ol>
                    <li>
                      <p>
                        Let <m>P</m> and <m>Q</m> be projective resolutions of <m>A</m>. Theorem 5.17 gives us maps of complexes <m>\varphi: P \rightarrow Q</m> and <m>\psi: Q \rightarrow P</m> such that <m>\varphi \psi</m> is homotopic to <m>1_{Q}</m> and <m>\psi \varphi</m> is homotopic to <m>1_{P}</m>. Additive functors preserve homotopies, by Remark 7.37, so <m>F(\varphi) F(\psi)</m> and <m>F(\psi) F(\varphi)</m> are homotopic to the corresponding identity arrows. Homotopic maps induce the same map in homology, by Exercise 90. Therefore, <m>F(\varphi)</m> and <m>F(\psi)</m> induce isomorphisms in homology.
                      </p>
                    </li>

                    <li>
                      <p>
                        Fix projective resolutions <m>P</m> and <m>Q</m> of <m>M</m> and <m>N</m>. Any two lifts <m>\varphi</m> and <m>\psi</m> of <m>f: M \longrightarrow N</m> to <m>P \longrightarrow Q</m> are homotopic, by Lemma 7.59. Additive functors preserve homotopies, by Remark 7.37, so <m>F(\varphi)</m> and <m>F(\psi)</m> are homotopic. Homotopic maps induce the same map in homology, by Exercise 90, so <m>L_{i} F(\varphi)=L_{i} F(\psi)</m> for each <m>i</m>.
                      </p>
                    </li>

                    <li>
                      <p>
                        Given an arrow <m>f</m>, fix a lift <m>\varphi</m> of <m>f</m> to projective resolutions of the source and target. Since <m>F</m> is an additive functor, <m>\mathrm{H}_{i}(F(\varphi))</m> is a homomorphism for each <m>i</m>, and thus <m>L_{i} F(f)</m> is a homomorphism between the corresponding <m>\Hom</m>-groups, which as we've seen is independent of our choice of <m>\varphi</m>.
                      </p>
                    </li>

                    <li>
                      <p>
                        Let <m>A</m> be any object and <m>P</m> be a projective resolution of <m>A</m>. Since <m>P</m> is right exact, and
                        <me>P_{1} \longrightarrow P_{0} \longrightarrow A \longrightarrow 0</me>
                        is exact, then so is
                      </p>

                      <p>
                        <me>F\left(P_{1}\right) \longrightarrow F\left(P_{0}\right) \longrightarrow F(A) \longrightarrow 0 \text {. }</me>
                      </p>
                
                      <p>
                        We claim that <m>\mathrm{H}_{0}(F(P))=F(A)</m>. By Exercise 84, <m>\operatorname{ker}\left(F\left(P_{0}\right) \longrightarrow 0\right)=1_{F\left(P_{0}\right)}</m>, so the canonical arrow <m>\operatorname{im} F\left(\partial_{1}\right) \longrightarrow F\left(P_{0}\right)</m> is precisely the image of <m>F\left(\partial_{1}\right)</m>. By exactness of the last sequence we wrote above, <m>\operatorname{im} F\left(\partial_{1}\right)=\operatorname{ker}\left(F\left(P_{0}\right) \longrightarrow F(A)\right)</m>. On the other hand, exactness at <m>F(A)</m> says that <m>F\left(P_{0}\right) \longrightarrow F(A)</m> is an epi, by Exercise 86 . Every epi is the cokernel of its kernel, so <m>F\left(P_{0}\right) \longrightarrow F(A)</m> is the cokernel of <m>\operatorname{im} F\left(\partial_{1}\right)</m>, which we saw was exactly the canonical arrow <m>B_{1}(F(P)) \longrightarrow Z_{0}(F(P))</m>. Therefore, <m>\mathrm{H}_{0}(F(P))=F(A)</m>, the target of the cokernel of <m>B_{1}(F(P)) \longrightarrow Z_{0}(F(P))</m>.
                      </p>
                    </li>
                  </ol>
                </p>
              </proof>
            </proposition>
  
            <exercise xml:id="exe-95">
              <statement>
                <p>
                  Let <m>\mathcal{A}</m> be an abelian category with enough injectives, and <m>F</m> a covariant left exact functor. 
                  <ol>
                    <li>
                      <p>
                        <m>R^{i} F(A)</m> is well-defined up to isomorphism. 
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>R^{i} F(f)</m> is well-defined for every arrow <m>f</m>. 
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>R^{i} F(f)</m> is an additive functor for every <m>i</m>. 
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>R^{0} F=F</m>.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
            </exercise>
  
            <remark xml:id="rem-7.66">
              <p>
                If <m>\mathcal{A}</m> is an abelian category with enough injectives, then <m>\mathcal{A}^{\text {op }}</m> is an abelian category with enough projectives. 
                This gives us a relationship between left derived and right derived functors: <m>R^{i} F=\left(L_{i} F^{\mathrm{op}}\right)^{\mathrm{op}}</m>.
              </p>
            </remark>
  
            <theorem xml:id="thm-7.67">
              <statement>
                <p>
                  Let <m>T_{i}: \mathcal{A} \longrightarrow \mathcal{B}</m> be a sequence of additive covariant functors between abelian categories, where <m>\mathcal{A}</m> has enough projectives, and <m>F: \mathcal{A} \longrightarrow \mathcal{B}</m> a right exact functor. 
                  Suppose the following hold:
                  <ol>
                    <li>
                      <p>
                        For every short exact sequence <m>0 \longrightarrow A \longrightarrow B \longrightarrow C \longrightarrow 0</m> in <m>\mathcal{A}</m>, we get a natural long exact sequence
                        <me>\cdots \longrightarrow T_{2}(C) \longrightarrow T_{1}(A) \longrightarrow T_{1}(B) \longrightarrow T_{1}(C) \longrightarrow T_{0}(A) \longrightarrow T_{0}(B) \longrightarrow T_{0}(C) \longrightarrow 0</me>
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>T_{0}</m> is naturally isomorphic to <m>F</m>.
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>T_{n}(P)=0</m> for every projective object <m>P</m> in <m>\mathcal{A}</m>, and all <m>n \geqslant 1</m>.
                      </p>
                    </li>
                  </ol>
                </p>

                <p>
                  Then <m>T_{n}</m> is naturally isomorphic to <m>L_{n} F</m> for all <m>n</m>.
                </p>
          
                <p>
                  Similarly, suppose <m>T_{i}: \mathcal{A} \longrightarrow \mathcal{B}</m> is a sequence of additive covariant functors, where <m>\mathcal{A}</m> has enough injectives, and <m>F: \mathcal{A} \longrightarrow \mathcal{B}</m> a left exact functor such that
                  <ol>
                    <li>
                      <p>
                        For every short exact sequence <m>0 \longrightarrow A \longrightarrow B \longrightarrow C \longrightarrow 0</m> in <m>\mathcal{A}</m>, we get a long exact sequence
                        <me>0 \longrightarrow T_{0}(A) \longrightarrow T_{0}(B) \longrightarrow T_{0}(C) \longrightarrow T_{1}(A) \longrightarrow T_{1}(B) \longrightarrow T_{1}(C) \longrightarrow \cdots</me>
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>T_{0}</m> is naturally isomorphic to <m>F</m>. 
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>T_{n}(E)=0</m> for every injective object <m>E</m> in <m>\mathcal{A}</m>, and all <m>n \geqslant 1</m>.
                      </p>
                    </li>
                  </ol>
                </p>

                <p>
                  Then <m>T_{n}</m> is naturally isomorphic to <m>R^{n} F</m> for all <m>n</m>.
                </p>
              </statement>
            </theorem>
            
          </subsection>

        </section>

      </chapter>

      <chapter xml:id="ch-spectral-sequences"><title>Spectral Sequences</title>
        
        <section xml:id="sec-what-is-spectral"><title>Intro to Spectral Sequences</title>

          <subsection xml:id="subsec-spectral"><title>What is a Spectral Sequence?</title>

            <blockquote>
              <p>
                It has been suggested that the name "spectral" was given because, like spectres, spectral sequences are terrifying, evil, and dangerous. 
                I have heard no one disagree with this interpretation, which is perhaps not surprising since I just made it up.
              </p>
              <attribution>Ravi Vakil, in Spectral Sequences: friend or foe?</attribution>
            </blockquote>

            <p>
              Spectral sequences are useful bookkeeping tools for computing, among other things, the homology and cohomology of complicated complexes. 
              Unfortunately, spectral sequences have a bad reputation for being difficult and scary; 
              but continuing Vakil's quote above, "you can use spectral sequences without hesitation or fear, and [...] you shouldn't be frightened when they come up in a seminar". 
              Rotman wisely says that "Of course, the reader must digest these new ideas in order to apply them, but it is worth the effort" [Rot09, page 608].
            </p>
        
            <p>
              Spectral sequences were introduced independently by Leray and Lyndon in the 1940s. 
              Leray came up with the idea while he was a prisoner of the nazis during WWII. 
              The primary usages of spectral sequences are in homotopy theory and topology more generally, but there are also applications in commutative algebra and other fields. 
              Due to its topological roots, the subject is best learned with a topological backdrop - which provides many motivating examples - but since we are not assuming any particular topological background, we will give only a very brief introduction to the subject, and from a more algebraic perspective.
            </p>
        
            <p>
              Here are some recommended sources to learn more about spectral sequences:
            </p>
        
            <p>
              <ul>
                <li>
                  <p>
                    Rotman's book An introduction to Homological Algebra (second edition) [Rot09].
                  </p>
                </li>
        
              <li>
                <p>
                  John McCleary's A user's guide to spectral sequences [McC01].
                </p>
              </li>
        
              <li>
                <p>
                  Ravi Vakil's notes Spectral Sequences: friend or foe?
                </p>
              </li>
        
              <li>
                <p>
                  Hatcher's additional chapter on spectral sequences, an addition to his Algebraic Topology book [Hat02].
                </p>
              </li>
        
              <li>
                <p>
                  Weibel's book An introduction to homological algebra [Wei94].
                </p>
              </li>
        
              <li>
                <p>
                  Eisenbud's Appendix A3.13 to his book Commutative algebra with a view towards algebraic geometry [Eis95].
                </p>
              </li>
        
              <li>
                <p>
                  Mel Hochster's notes.
                </p>
              </li>
        
              <li>
                <p>
                  Michael Hutchings notes.
                </p>
              </li>
            </ul>
          </p>

          <p>
            Roughly speaking, a spectral sequence is a book where each page is a plane with a module (or more general, an object in an abelian category) sitting in each point with integer coordinates. 
            To pass the pages, we take the (co)homology of a differential, and attach to the next page a new differential with a different shape.
          </p>

          <definition xml:id="def-8.1">
            <statement>
              <p>
                A cohomological spectral sequence <m>E</m> consists of the following data:
                <ul>
                  <li>
                    <p>
                      A family <m>E=\left(E_{r}^{p, q}\right)</m> of <m>R</m>-modules ranging over all integers <m>p, q, r</m> with <m>r \geqslant 0</m>. 
                      For a fixed <m>r</m>, the collection of modules <m>E_{r}=E_{r}^{p, q}</m> is called the <m>r</m> th page or sheet of the spectral sequence. 
                      We think of each page as living in <m>\mathbb{Z}^{2}</m>, and depict the <m>r</m> th page by putting <m>E_{r}^{p, q}</m> in the point with coordinates <m>(p, q)</m> :
                    </p>
                    <image source="2024_01_10_e73c1aec4ffc24ca9984g-29(3).jpg" width="20%"/>
                  </li>
                
                  <li>
                    <p>
                      Differentials
                      <me>d_{r}: E_{r}^{p, q} \longrightarrow E_{r}^{p+r, q-r+1}</me>
                      so <m>R</m>-module homomorphisms such that <m>d_{r} d_{r}=0</m>, or more precisely,
                      <me>d_{r}^{p+r, p-r+1} d_{r}^{p, q}=0</me>
                    </p>
                  </li>
          
                  <li>
                    <p>
                      Isomorphisms
                      <me>E_{r+1}^{p, q} \cong \mathrm{H}^{p, q}\left(E_{r}\right)</me>
                      meaning
                      <me>E_{r+1}^{p, q}=\frac{\operatorname{ker}\left(E_{r}^{p, q} \stackrel{d_{r}}{\longrightarrow} E_{p+r, q-r+1}^{r}\right)}{\operatorname{im}\left(E_{p-r, q+r-1}^{r} \stackrel{d_{r}}{\longrightarrow} E_{p, q}^{r}\right)}</me>
                      for every <m>p, q</m>.
                    </p>
                  </li>
                </ul>
              </p>
            </statement>
          </definition>

          <remark>
            <p>
              Remark 8.2. 
              The differential in the <m>r</m> th page is a map of degree <m>(r,-r+1)</m>. 
              Here are some examples:
            </p>
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-29.jpg" width="20%"/>
            <p>
              0th page
            </p>
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-29(1).jpg" width="20%"/>
            <p>
              1st page
            </p>
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-29(2).jpg" width="20%"/>
            <p>
              2nd page
            </p>
          </remark>
      
          <p>
            We can define spectral sequences more generally over any abelian category. 
            However, most spectral sequences the typical mathematician ever computes are over <m>R</m>-modules (or even just vector spaces!), so we will keep things friendly by sticking to <m>R</m>-modules.
          </p>

          <definition xml:id="def-8.3">
            <statement>
              <p>
                A homological spectral sequence <m>E</m> is a sequence consists of the following data:
                <ul>
                  <li>
                    <p>
                      A family <m>E=\left(E_{p, q}^{r}\right)</m> of <m>R</m>-modules ranging over all integers <m>p, q, r</m> with <m>r \geqslant 0</m>. 
                      For a fixed <m>r</m>, the collection of objects <m>E_{r}=E_{r}^{p, q}</m> is called the <m>r</m> th page or sheet of the spectral sequence. 
                      We think of each page as living in <m>\mathbb{Z}^{2}</m>, and depict the <m>r</m> th page by putting <m>E_{r}^{p, q}</m> in the point with coordinates <m>(p, q)</m> :
                    </p>
                    <image source="2024_01_10_e73c1aec4ffc24ca9984g-30(1).jpg" width="20%"/>
                  </li>
                
                  <li>
                    <p>
                      Differentials
                      <me>d_{r}: E_{p, q}^{r} \longrightarrow E_{p-r, q+r-1}^{r}</me>
                      and for each <m>r</m> isomorphisms <m>E^{r+1} \cong \mathrm{H}\left(E^{r}, d^{r}\right)</m>, meaning
                      <me>E_{p, q}^{r+1} \cong \frac{\operatorname{ker}\left(E_{p, q}^{r} \stackrel{d_{r}}{\longrightarrow} E_{p-r, q+r-1}^{r}\right)}{\operatorname{im}\left(E_{p+r, q-r+1}^{r} \stackrel{d_{r}}{\longrightarrow} E_{p, q}^{r}\right)}</me>
                      for every <m>p, q</m>.
                    </p>
                  </li>
          
                  <li>
                    <p>
                      Isomorphisms
                      <me>E_{p, q}^{r+1} \cong \mathrm{H}_{p, q}\left(E_{r}\right)</me>
                      meaning
                      <me>E_{p, q}^{r+1} \cong \frac{\operatorname{ker}\left(E_{p, q}^{r} \stackrel{d_{r}}{\longrightarrow} E_{p-r, q+r-1}^{r}\right)}{\operatorname{im}\left(E_{p+r, q-r+1}^{r} \stackrel{d_{r}}{\longrightarrow} E_{p, q}^{r}\right)}</me>          
                      for every <m>p, q</m>.
                    </p>
                  </li>
                </ul>
              </p>
            </statement>
          </definition>

          <remark>
            <p>
              Remark 8.4. The differential in the <m>r</m> th page is a map of degree <m>(-r, r-1)</m>.
            </p>
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-30(2).jpg" width="20%"/>
            <p>
              0th page
            </p>
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-30.jpg" width="20%"/>
            <p>
              1st page
            </p>
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-30(3).jpg" width="20%"/>
            <p>
              2nd page
            </p>
          </remark>

          </subsection>

          <subsection xml:id="subsec-bigrad"><title>Graded and Bigraded Modules</title>

            <p>
              We can be a bit more formal and say that a page in a spectral sequence is a differential bigraded module. 
              The goal of this section is to set up some background on the topic of differential bigraded modules.
            </p>
  
            <definition xml:id="def-8.5">
              <statement>
                <p>
                  Definition 8.5. 
                  Let <m>R</m> be a ring. 
                  A graded module over <m>R</m> is a family <m>M=\left(M_{n}\right)_{n \in \mathbb{Z}}</m> of <m>R</m>-modules indexed by <m>\mathbb{Z}</m>. 
                  We sometimes denote <m>M</m> by <m>M_{\bullet}</m>.
                </p>
              </statement>
            </definition>
      
            <p>
              More precisely, these are <m>\mathbb{Z}</m>-graded modules. 
              More generally, we have discussed <m>\mathbb{Z}</m>-graded modules over any graded ring; in that case, the action of <m>R</m> on <m>M</m> must respect the grading. 
              But here we are not assuming any grading on <m>R</m>, so we have no such conditions. 
              One may reinterpret our definition of graded module as assuming that <m>R</m> is given the trivial grading concentrated in degree 0, so that <m>R_{0}=R</m> and <m>R_{i}=0</m> otherwise, and thus the condition on the action of <m>R</m> becomes trivial.
            </p>
  
            <example>
              <p>
                Example 8.6. 
                If <m>C</m> is a complex of <m>R</m>-modules, then <m>\left(C_{n}\right)_{n \in \mathbb{Z}}</m> is a graded module. 
                Moreover, its homology <m>H=\left(H_{n}(C)\right)</m> also forms a graded module.
              </p>
            </example>
  
            <definition xml:id="def-8.7">
              <statement>
                <p>
                  Definition 8.7. 
                  Given graded modules <m>M</m> and <m>N</m>, a graded map of degree <m>d</m> is a family
                  <me>f=\left(f_{n}: M_{n} \rightarrow N_{n+d}\right)_{n \in \mathbb{Z}}</me>
                  of homomorphisms of <m>R</m>-modules, which we denote by <m>f: M \rightarrow N</m>. 
                  We write <m>\operatorname{deg}(f)=d</m> to denote that the degree <m>f</m> is <m>d</m>.
                </p>
              </statement>
            </definition>
      
            <example><title>Example 8.8.</title>
              <p>
                <ol>
                  <li>
                    <p>
                      If <m>C</m> is a complex of <m>R</m>-modules, the differential <m>d</m> is a graded map <m>d: C \rightarrow C</m> of degree -1 . If <m>C</m> is a cochain complex, the differential is a graded map of degree 1 .
                    </p>
                  </li>
          
                  <li>
                    <p>
                      Any map of complexes <m>f: C \rightarrow D</m> is a graded map of degree 0 .
                    </p>
                  </li>
            
                  <li>
                    <p>
                      A homotopy is a map of degree 1 .
                    </p>
                  </li>
                </ol>
              </p>
            </example>
  
            <definition xml:id="def-8.9">
              <statement>
                <p>
                  Definition 8.9. 
                  Let <m>R</m> be a ring. 
                  The category of graded modules over <m>R</m> has objects all graded modules and arrows all graded maps of graded modules over <m>R</m>.
                </p>
              </statement>
            </definition>
  
            <definition xml:id="def-8.10">
              <statement>
                <p>
                  Definition 8.10. 
                  Let <m>M</m> and <m>N</m> be graded modules over a <m>\operatorname{ring} R</m>. 
                  We say <m>N</m> is a submodule of <m>M</m>, and write <m>N \subseteq M</m>, if <m>N_{n} \subseteq M_{n}</m> for all <m>n</m>. 
                  The quotient of <m>M</m> by <m>N</m> is the graded module
                  <me>M / N:=\left(M_{n} / N_{n}\right)_{n}</me>
                </p>
              </statement>
            </definition>
  
            <definition xml:id="def-8.11">
              <statement>
                <p>
                  Definition 8.11. 
                  Let <m>f: M \rightarrow N</m> be a graded map of degree <m>d</m> between graded modules. 
                  The kernel of <m>f</m> is the graded module
                  <me>\operatorname{ker} f:=\left(\operatorname{ker} f_{n}\right)_{n \in \mathbb{Z}}</me>
                  and the image of <m>f</m> is the graded module
                  <me>\operatorname{im} f:=\left(\operatorname{im} f_{n-d}\right)_{n \in \mathbb{Z}}</me>
                </p>
              </statement>
            </definition>
  
            <definition xml:id="def-8.12">
              <statement>
                <p>
                  Definition 8.12. 
                  Consider graded maps of graded modules
                  <me>A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C</me>
                  We say this is an exact sequence if <m>\operatorname{im} f=\operatorname{ker} g</m>.
                </p>
              </statement>
            </definition>
  
            <remark>
              <p>
                Remark 8.13. 
                By our definition of kernel and image, <m>\operatorname{im} f=\operatorname{ker} g</m> says that <m>\operatorname{im} f_{n-d}=\operatorname{ker} g_{n}</m> for all <m>n</m>.
              </p>
            </remark>
  
            <definition xml:id="def-8.14">
              <statement>
                <p>
                  Definition 8.14. 
                  Let <m>R</m> be a ring. 
                  A bigraded module over <m>R</m> is a family <m>M=\left(M_{p, q}\right)_{p, q \in \mathbb{Z}}</m> of <m>R</m>-modules indexed by <m>\mathbb{Z} \times \mathbb{Z}</m>. 
                  We sometimes denote <m>M</m> by <m>M_{\bullet, \bullet}</m>.
                </p>
              </statement>
            </definition>
  
            <definition xml:id="def-8.15">
              <statement>
                <p>
                  Definition 8.15. 
                  Let <m>M</m> and <m>N</m> be bigraded modules over a ring <m>R</m>. 
                  A bigraded map <m>f: M \rightarrow N</m> of degree <m>(a, b)</m> is a family of homomorphisms of <m>R</m>-modules
                  <me>f=\left(f_{p, q}: M_{p, q} \rightarrow N_{p+a, q+b}\right)_{p, q \in \mathbb{Z}}</me>
                </p>
            
                <p>
                  We denote the degree of <m>f</m> by <m>\operatorname{deg}(f)=(a, b)</m>.
                </p>
            
                <p>
                  The kernel of <m>f</m> is the bigraded module
                  <me>\operatorname{ker} f:=\left(\operatorname{ker} f_{p, q}\right)_{p, q \in \mathbb{Z}}</me>
                  and the image of <m>f</m> is the bigraded module
                  <me>\operatorname{im} f:=\left(\operatorname{im} f_{p-a, q-b}\right)_{p, q \in \mathbb{Z}}</me>
                </p>
            
                <p>
                  We say a sequence of graded maps
                  <me>A \stackrel{f}{\longrightarrow} B \xrightarrow{g} C</me>
                  is exact if <m>\operatorname{im} f=\operatorname{ker} g</m>.
                </p>
              </statement>
            </definition>
  
            <definition xml:id="def-8.16">
              <statement>
                <p>
                  Definition 8.16. 
                  A differential (bi)graded module <m>(M, d)</m> over a ring <m>R</m> consists of a (bi)graded module <m>M</m> and a graded map <m>d: M \rightarrow M</m>, which we call the differential, such that <m>d d=0</m>.
                </p>
              </statement>
            </definition>
  
            <p>
              We can think of (bi)graded modules as differential (bi)graded modules with zero differential.
            </p>
  
            <example>
              <p>
                Example 8.17. 
                A double complex <m>C</m> with differentials <m>d^{h}</m> and <m>d^{v}</m> gives rise to two differential bigraded complexes: <m>\left(C, d^{h}\right)</m> and <m>\left(C, d^{v}\right)</m>.
              </p>
            </example>
  
            <definition xml:id="def-8.18">
              <statement>
                <p>
                  Definition 8.18. 
                  Let <m>(M, d)</m> be a differential (bi)graded module. 
                  The homology of <m>M</m> is the (bi)graded module
                  <me>\mathrm{H}(M, d)=\operatorname{ker} d / \operatorname{im} d</me>
                  We sometimes shorten this to <m>\mathrm{H}(M)</m>.
                </p>
              </statement>
            </definition>
  
            <p>
              A spectral sequence can now be recast as a sequence <m>\left(E^{r}, d^{r}\right)</m> of differential bigraded modules such that <m>E^{r+1}=\mathrm{H}\left(E^{r}, d^{r}\right)</m>.
            </p>
            
          </subsection>

          <subsection xml:id="subsec-filtrations"><title>Filtrations</title>
            
            <definition xml:id="def-8.19">
              <statement>
                <p>
                  Definition 8.19. 
                  Let <m>M</m> be an <m>R</m>-module. 
                  A filtration <m>F^{\bullet} M</m> on <m>M</m> is a family <m>\left(F^{p} M\right)_{p \in \mathbb{Z}}</m> of submodules of <m>M</m> such that either
                  <me>F^{p} M \subseteq F^{p+1} M</me>
                  for all <m>p</m>, in which case we say the filtration is increasing, or
                  <me>F^{p} M \subseteq F^{p-1} M</me>
                  for all <m>p</m>, in which case we say the filtration is decreasing. 
                  When we do not specify if a filtration is ascending or descending, we will assume by default that it is ascending, though we accept both kinds as filtrations in their own right. 
                  The factors of <m>F^{\bullet}</m> are the quotient modules
                  <me>F^{p} M / F^{p-1} M</me>
                </p>
              </statement>
            </definition>
  
            <p>
              One can in fact define filtrations on any abelian category; that requires the notion of a subobject, which we have not yet defined, but it is easy to guess: 
              a suboject of an object <m>x</m> in an abelian category <m>\mathcal{A}</m> is a mono with target <m>x</m>. 
              In particular, we can define a filtration on a complex, or more generally on a (differential) (bi)graded module:
            </p>
  
            <definition xml:id="def-8.20">
              <statement>
                <p>
                  Definition 8.20. 
                  An ascending filtration on a (bi)graded module <m>M</m> is a sequence <m>F^{p} M</m> of submodules of <m>M</m> such that <m>F^{p} M \subseteq F^{p+1} M</m>. 
                  If <m>M</m> is a differential (bi)graded module, we require additionally that the filtration respects the differential, that is, that <m>d\left(F^{p} M\right) \subseteq F^{p} M</m>.
                </p>
              </statement>
            </definition>
      
            <p>
              So in particular when <m>C</m> is a complex, we get the following definition:
            </p>
  
            <definition xml:id="def-8.21">
              <statement>
                <p>
                  Definition 8.21. 
                  Let <m>C</m> be a complex. 
                  An ascending filtration <m>F^{\bullet} C</m> of <m>C</m> is an ascending chain of subcomplexes <m>F^{p} C</m> of <m>C</m>
                  <me>\cdots \subseteq F^{p-1} C \subseteq F^{p} C \subseteq F^{p+1} C \subseteq \cdots</me>
                </p>
          
                <p>
                  We call a complex <m>(C, \partial)</m> with a filtration <m>F</m> a filtered complex, and denote it by <m>(C, \partial, F)</m>.
                </p>
              </statement>
            </definition>
      
            <p>
              As above, one can define a descending filtration; if we do not indicate whether a filtration is ascending or descending, we will always by default assume it is ascending.
            </p>
  
            <remark>
              <p>
                Remark 8.22. 
                Let <m>C</m> be a complex and consider an ascending filtration <m>F_{\bullet} C</m> of <m>C</m>. 
                For each fixed homological degree <m>n</m>, we get an ascending filtration
                <me>\cdots \subseteq F^{p-1} C_{n} \subseteq F^{p} C_{n} \subseteq F^{p+1} C_{n} \subseteq \cdots</me>
                of submodules of <m>C_{n}</m>. A filtration of <m>C</m> gives us commutative diagrams
              </p>
  
              <image source="2024_01_10_e73c1aec4ffc24ca9984g-33.jpg" width="20%"/>
              
              <p>
                where the rows are given by the differential on <m>C</m> and its restrictions to the appropriate modules.
              </p>
            </remark>
      
            <definition xml:id="def-8.23">
              <statement>
                <p>
                  Definition 8.23. 
                  Let <m>C</m> be a complex with a filtration <m>F^{\bullet} C</m>, and consider the inclusions <m>i_{p}: F^{p} C \rightarrow C</m>. 
                  We get an induced filtration in homology, as follows: for each <m>n</m>,
                  <me>F^{p} \mathrm{H}_{n}(C):=\operatorname{im}\left(\mathrm{H}_{n}\left(F^{p} C\right) \rightarrow \mathrm{H}_{n}(C)\right),</me>
                  giving us a filtration <m>F^{\bullet} \mathrm{H}(C)</m> on the graded module <m>\mathrm{H}(C)</m>.
                </p>
              </statement>
            </definition>
  
            <definition xml:id="def-8.24">
              <statement>
                <p>
                  Definition 8.24. 
                  A filtration <m>F^{\bullet} M</m> of a graded module <m>M</m> is bounded if for each <m>n</m> there exists integers <m>s=s(n)</m> and <m>t=t(n)</m> such that
                  <me>F^{s} M_{n}=0 \quad \text { and } \quad F^{t} M_{n}=M_{n}</me>
                  so that the filtration on <m>M_{n}</m> can be described by finitely many terms
                  <me>F^{s} M_{n}=0 \subseteq F^{s+1} M_{n} \subseteq \cdots F^{t-1} M_{n} \subseteq F^{t} M_{n}=M_{n}</me>
                </p>
              </statement>
            </definition>
  
            <p>
              In particular, <m>F^{i} M_{n}=0</m> for all <m>i&lt;s</m> and <m>F^{i} M_{n}=M_{n}</m> for all <m>i&gt;t</m>.
            </p>
      
            <p>
              Notice, however, that the bounds <m>s</m> and <m>t</m> may depend on <m>n</m>, and in particular there is not necessarily global integers <m>s</m> and <m>t</m> such that
              <me>F^{s} M_{n}=0 \quad \text { and } \quad F^{t} M_{n}=M_{n}</me>
              for all <m>n</m>.
            </p>
  
            <remark>
              <p>
                Remark 8.25. 
                Suppose that <m>F^{\bullet} M</m> is a bounded filtration on a complex <m>C</m>. 
                Then the induced filtration in homology is also bounded, with the same bounds (or better), so that for all <m>n</m> there exist <m>s</m> and <m>t</m> such that
                <me>0=F^{s} \mathrm{H}_{n}(C)=0 \quad \text { and } \quad F^{t} \mathrm{H}_{n}(C)=\mathrm{H}_{n}(C) .</me>
              </p>
            </remark>
  
            <definition xml:id="def-8.26">
              <statement>
                <p>
                  Definition 8.26. 
                  Let <m>M</m> be a module or a graded module. 
                  Given an increasing filtration <m>F</m> of <m>M</m>, its associated graded module is the graded module <m>\operatorname{gr}_{F}(M)</m> given by
                  <me>\operatorname{gr}_{F}(M):=\left(F^{n} M / F^{n-1} M\right)_{n \in \mathbb{Z}}</me>
                </p>
  
                <p>
                  Given a decreasing filtration <m>F</m> of an <m>R</m>-module <m>M</m>, its associated graded module is the graded module <m>\operatorname{gr}_{F}(M)</m> given by
                  <me>\operatorname{gr}_{F}(M):=\left(F^{n} M / F^{n+1} M\right)_{n \in \mathbb{Z}}</me>
                </p>
              </statement>
            </definition>
  
            <p>
              Note that the associated graded module depends on the choice of filtration.
            </p>
  
            <remark>
              <p>
                Remark 8.27. 
                Let <m>(C, d, F)</m> be a filtered complex. 
                The differential <m>d</m> induces a differential on the associated graded:
                <me>
                  \begin{aligned}
                  F^{p} C_{n} / F^{p-1} C_{n} &amp; \longrightarrow F^{p} C_{n-1} / F^{p-1} C_{n-1} \\
                  a+F^{p-1} C_{n} &amp; \longmapsto d(a)+F^{p-1} C_{n-1}
                  \end{aligned}
                </me>
                This is well-defined, since our definition of filtered complex requires that the filtration respects the differential: 
                if <m>a \in F_{p-1} C_{n}</m>, then <m>d(a) \in F^{p-1} C_{n-1}</m>.
              </p>
            </remark>
  
            <definition xml:id="def-8.28">
              <statement>
                <p>
                  Definition 8.28. 
                  We can filter the integers <m>\mathbb{Z}</m> as a <m>\mathbb{Z}</m>-module as follows: we set
                  <me>F^{n} \mathbb{Z}=\mathbb{Z} \quad \text { whenever } n \leqslant 0</me>
                  and
                  <me>F^{n} \mathbb{Z}=\left(2^{n}\right) \quad \text { whenever } n \geqslant 0</me>
                </p>
          
                <p>
                  This give us the decreasing filtration
                  <me>\mathbb{Z} \supseteq \mathbb{Z} \supseteq \mathbb{Z} \supseteq(2) \supseteq(4) \supseteq(8) \supseteq \cdots</me>
                </p>
          
                <p>
                  The corresponding associated graded module has
                  <me>\operatorname{gr}_{F}(\mathbb{Z})_{n}=0 \quad \text { whenever } n \leqslant 0</me>
                  and
                  <me>\operatorname{gr}_{F}(\mathbb{Z})_{n}=\left(2^{n}\right) /\left(2^{n+1}\right) \cong \mathbb{Z} / 2 \quad \text { whenever } n \geqslant 0</me>
                </p>
              </statement>
            </definition>
  
            <remark>
              <p>
                Remark 8.29 (the associated graded versus the actual module). 
                Suppose someone has filtered the <m>R</m>-module <m>M</m> by <m>F^{\bullet} M</m>, but that we only have access to the associated graded module of this filtration. 
                While the pieces of the associated graded give us information about <m>M</m>, they may not be sufficient to fully compute <m>M</m>. 
                For a simple example, consider an <m>R</m>-module <m>B</m> and a submodule <m>A \subseteq B</m>, and the filtration
                <me>F^{p} M= \begin{cases}0 &amp; \text { if } p&lt;0 \\ A &amp; \text { if } p=0 \\ B &amp; \text { if } p \geqslant 1\end{cases}</me>
              </p>
        
              <p>
                The associated graded is given by
                <me>\operatorname{gr}_{n}= \begin{cases}0 &amp; \text { if } p&lt;0 \\ A &amp; \text { if } p=0 \\ B / A &amp; \text { if } p=1 \\ 0 &amp; \text { if } p \geqslant 1\end{cases}</me>
              </p>
        
              <p>
                So if we are only given the associated graded, meaning, if all we have access to is <m>A</m> and <m>B / A</m>, then all we know about <m>B</m> is that fits into a short exact sequence
                <me>0 \longrightarrow A \longrightarrow B \longrightarrow B / A \longrightarrow 0</me>
              </p>
        
              <p>
                However, if <m>\operatorname{Ext}_{R}^{1}(B / A, A) \neq 0</m>, then this does not uniquely determine <m>B</m>. 
                Indeed, it turns out that the isomorphism classes of extensions of <m>A</m> by <m>B / A</m>, meaning modules <m>M</m> that fit into short exact sequences of the form
                <me>0 \longrightarrow A \longrightarrow M \longrightarrow B / A \longrightarrow 0</me>
                are in bijection with the elements of <m>\operatorname{Ext}_{R}^{1}(B / A, A)</m>; this is a topic we previously skipped.
              </p>
            </remark>
  
            <example>
              <p>
                For a concrete example, take the case where <m>A=\mathbb{Z} / 2</m> and <m>B / A=\mathbb{Z} / 2</m>. 
                Then <m>B</m> is not uniquely determined: <m>\operatorname{Ext}_{R}^{1}(\mathbb{Z} / 2, \mathbb{Z} / 2) \cong \mathbb{Z} / 2</m>, and <m>B</m> can be either <m>\mathbb{Z} / 4</m> or <m>\mathbb{Z} / 2 \oplus \mathbb{Z} / 2</m>, which are not isomorphic.
              </p>
            </example>
            
          </subsection>

        </section>

        <section xml:id="sec-convergence"><title>Convergence</title>

          <p>
            But back to spectral sequences. 
            For now, let us stick to cohomological spectral sequences; any general statement we make about these can easily be translate into a statement about homological spectral sequences.
          </p>

          <definition xml:id="def-8.30">
            <statement>
              <p>
                Definition 8.30. 
                We say that a spectral sequence <m>E=\left(E^{r}\right)</m> is bounded if for every <m>n</m> there are only finitely many nonzero terms of total degree <m>n</m>, meaning that there are only finitely many pairs <m>(p, q)</m> with <m>n=p+q</m> such that <m>E_{p, q}^{r} \neq 0</m> for all <m>r</m>.
              </p>
            </statement>
          </definition>

          <remark>
            <p>
              Remark 8.31. 
              Notice that if a spectral sequence is bounded, then for every <m>(p, q)</m> there exists an <m>r</m> such that all the differentials in and out of <m>E_{p, q}^{r}</m> are zero, and thus <m>E_{p, q}^{r}=E_{p, q}^{r+1}</m>.
            </p>
          </remark>

          <p>
            Most spectral sequences one deals with end up being bounded, so we will focus only on the case of bounded spectral sequences. 
            This guarantees that what we are about to do makes sense.
          </p>
    
          <p>
            From the data in a spectral sequence <m>E</m> we define a limiting page <m>E_{\infty}</m>, which can often be identified with some interesting object (for example, the homology of a complex we care about). 
            These <m>E_{\infty}</m> pages are sort of the whole point of the spectral sequence business, as they contain (pieces of) the information we want to compute.
          </p>
    
          <p>
            Construction 8.32 ( <m>E_{\infty}</m> page). Set
            <me>B_{0}:=0 \quad \text { and } \quad Z_{0}=E_{0}</me>
            so that <m>E_{0}=Z_{0} / B_{0}</m>. At each stage <m>r</m>, given <m>B_{r} \subseteq Z_{r}</m> such that <m>E_{r} \cong Z_{r} / B_{r}</m>, we define
            <me>Z_{r+1}:=\operatorname{ker}\left(Z_{r} \longrightarrow Z_{r} / B_{r}=E_{r} \stackrel{d_{r}}{\longrightarrow} E_{r}=Z_{r} / B_{r}\right)</me>
            and <m>B_{r+1}</m> such that <m>B_{r} \subseteq B_{r+1} \subseteq Z_{r}</m> and
            <me>B_{r+1} / B_{r}:=\operatorname{im}\left(Z_{r} \longrightarrow Z_{r} / B_{r}=E_{r} \stackrel{d_{r}}{\longrightarrow} E_{r}=Z_{r} / B_{r}\right)</me>
          </p>
    
          <p>
            At each stage,
            <me>B_{r} \subseteq B_{r+1} \subseteq Z_{r+1} \subseteq Z_{r}</me>
            and
            <me>E_{r+1}=H\left(E_{r}\right)=\cong Z_{r+1} / B_{r+1}</me>
          </p>
    
          <p>
            Thus we get chains
            <me>0=B_{0} \subseteq B_{1} \subseteq B_{2} \subseteq \cdots \subseteq Z_{r} \subseteq Z_{r-1} \subseteq \cdots \subseteq Z_{1} \subseteq Z_{0}=E_{0}</me>
          </p>
    
          <p>
            We say that <m>Z_{r}</m> consists of the elements that survive until stage <m>r</m>, while <m>B_{r}</m> consists of the elements that are in the image of the differentials by stage <m>r</m>. 
            We define
            <me>B_{\infty}:=\bigcup_{i} B_{i} \quad \text { and } \quad B_{\infty}:=\bigcap_{i} Z_{i}</me>
          </p>
    
          <p>
            The elements in <m>B_{\infty}^{p, q}</m> are the (classes of) those elements in <m>E_{0}^{p, q}</m> that are in the image of the differential at some stage; 
            we say these are the elements that are eventually bound. 
            The elements in <m>Z_{\infty}^{p, q}</m> are the (classes of) those elements in <m>E_{0}^{p, q}</m> that are in the kernel of all the differentials at all stages, so they survive forever or live forever.
          </p>

          <definition xml:id="def-8.33">
            <statement>
              <p>
                Definition 8.33. 
                Given a homological spectral sequence <m>E=\left(E_{r}\right)</m>, the <m>E_{\infty}</m> page is the bigraded module given by
                <me>E_{\infty}^{p, q}:=Z_{\infty}^{p, q} / B_{\infty}^{p, q}</me>
              </p>
        
              <p>
                Similarly, given a cohomological spectral sequence <m>\left(E^{r}\right)</m> one can define <m>Z^{r}</m> and <m>B^{r}, Z^{\infty}</m> and <m>B^{\infty}</m>, and the <m>E^{\infty}</m> page
                <me>E_{p, q}^{\infty}:=Z_{p, q}^{\infty} / B_{p, q}^{\infty}</me>
              </p>
            </statement>
          </definition>

          <lemma xml:id="lem-8.34">
            <statement>
              <p>
                Lemma 8.34. 
                Let <m>E=\left(E_{r}\right)</m> be a spectral sequence. We have
                <me>E_{r+1}=E_{r} \Longleftrightarrow Z_{r+1}=Z_{r} \text { and } B_{r+1}=B_{r} \text {. }</me>
              </p>
            </statement>

            <proof>
              <p>
                Proof. 
                In general, if <m>X / Y</m> is a subquotient of <m>Z</m>, we have <m>Y \subseteq X \subseteq Z</m>, so <m>X / Y=Z</m> if and only if <m>Y=0</m> and <m>X=Z</m>. 
                If <m>E_{r+1}=E_{r}</m>, then
                <me>Z_{r+1} / B_{r+1}=E_{r+1}=E_{r}=Z_{r} / B_{r},</me>
                so <m>B_{r+1}=0</m> in <m>Z_{r} / B_{r}</m>, so we must have <m>B_{r+1}=B_{r}</m>. 
                But then
                <me>Z_{r+1} / B_{r}=Z_{r} / B_{r}</me>
                so <m>Z_{r+1}=Z_{r}</m>.
              </p>
        
              <p>
                Conversely, if <m>Z_{r+1}=Z_{r}</m> and <m>B_{r+1}=B_{r}</m>, then
                <me>E_{r+1}=Z_{r+1} / B_{r+1}=Z_{r} / B_{r}=E_{r} .</me>
              </p>
            </proof>
          </lemma>

          <p>
            This <m>E^{\infty}</m> is easier to compute in the following special cases.
          </p>

          <definition xml:id="def-8.35">
            <statement>
              <p>
                Definition 8.35. 
                We say that a spectral sequence <m>E=\left(E_{r}\right)</m> degenerates at the <m>n</m>th page if <m>d_{r}=0</m> for all <m>r \geqslant n</m>.
              </p>
            </statement>
          </definition>

          <remark>
            <p>
              Remark 8.36. 
              If a spectral sequence degenerates at the <m>r</m> th page, then <m>E_{r}</m> is a limit term for the spectral sequence, in the sense that <m>E_{s}=E_{r}</m> for all <m>s \geqslant r</m>, and <m>E_{\infty}=E_{r}</m>.
            </p>
          </remark>

          <example>
            <p>
              Example 8.37. 
              Let <m>E</m> be a spectral sequence. 
              If the <m>r</m> th page is concentrated in one row or one columnn, we say that the spectral sequence collapses at the <m>r</m> th page. 
              Notice that in such situations the spectral sequence will automatically degenerate at the <m>r</m> th page.
            </p>
          </example>

          <definition xml:id="def-8.36">
            <statement>
              <p>
                Definition 8.38. 
                Le <m>H</m> be a graded <m>R</m>-module. 
                We say that a spectral sequence <m>E=\left(E^{r}\right)</m> converges to the graded <m>R</m>-module <m>H=\left(H_{n}\right)</m>, and denote it by
                <me>E_{2}^{p, q} \Longrightarrow H_{p+q}</me>
                if there exists a bounded filtration <m>F^{\bullet}</m> for <m>H</m> such that
                <me>E_{\infty}^{p, q} \cong F^{p} H_{p+q} / F^{p-1} H_{p+q} \quad \text { for all } p, q</me>
              </p>
            </statement>
          </definition>

          <p>
            Alternatively, we may write <m>E_{r}^{p, q} \Longrightarrow H_{p+q}</m> for some other fixed choice of <m>r</m> besides <m>r=2</m>.
            We have the basic definitions but we haven't yet seen any examples. 
            This is by design; to give a good example of a spectral sequence we need to do a bit more work than to give a starting example for a run of the mill definition. 
            In the next few sections we will discuss some of the ways in which spectral sequences arise. 
            There are, however, many interesting spectral sequences one would discuss in a first course that we do not have the time to cover. 
            We strongly encourage the reader to seek out better sources, such as those we listed in the beginning of the chapter.
          </p>
          
        </section>

        <section xml:id="sec-spec-filt"><title>Filtered Complexes</title>

          <p>
            We will now describe how every filtered complex gives rise to a spectral sequence. 
            We will be writing a homological spectral sequence, but by setting slightly different conventions one could also write a cohomological spectral sequence; this part is up to your personal taste. 
            Given a filtered complex <m>(C, \partial, F)</m>, we first, define
            <me>E_{p, q}^{0}:=F^{p} C_{p+q} / F^{p-1} C_{p+q}</me>
            and let <m>d_{0}: E_{p, q}^{0} \longrightarrow E_{p, q-1}^{0}</m> be the differential induced on the associated graded <m>\operatorname{gr}_{F} C</m>. 
            Each column of the <m>E^{0}</m> page contains a complex, one of the levels of the filtration.
          </p>
    
          <image source="2024_01_10_e73c1aec4ffc24ca9984g-38.jpg" width="20%"/>
            
          <p>
            Next, let
            <me>E_{p, q}^{1}=\mathrm{H}_{p+q}\left(G_{p} C\right)</me>
            and note that
            <me>\mathrm{H}_{p+q}\left(G_{p} C\right)=\frac{\operatorname{ker}\left(G_{p} C_{p+q} \rightarrow G_{p} C_{p+q-1}\right)}{\operatorname{im}\left(G_{p} C_{p+q+1} \rightarrow G_{p} C_{p+q}\right)}=\frac{\operatorname{ker}\left(E_{p, q}^{0} \rightarrow E_{p, q-1}^{0}\right)}{\operatorname{im}\left(E_{p, q+1}^{0} \rightarrow E_{p, q}^{0}\right)}=\mathrm{H}_{p, q}\left(E_{\bullet, \bullet}^{0}\right)</me>
          </p>
    
          <p>
            Thus <m>E_{\bullet . \bullet}^{0}</m> and <m>E_{\bullet \bullet}^{1}</m> are consistent with being the zeroeth and first pages of a spectral sequence. Before we move on, note that we can also rewrite the <m>E^{1}</m> page as follows:
            <me>E_{p, q}^{1}=\frac{\left\{x \in F^{p} C_{p+q} \mid \partial(x) \in F^{p-1} C_{p+q-1}\right\}}{F^{p-1} C_{p+q}+\partial\left(F^{p} C_{p+q+1}\right)}</me>
            One way to interpret this is that if we take an element <m>x \in F^{p} C_{p+q}</m> representing the class <m>[x] \in G_{p} C_{p+q}</m> such that <m>\partial([x])=0</m>, then the element <m>\partial(x) \in F^{p} C_{p+q-1}</m> is really in <m>F^{p-1} C_{p+q-1}</m>, so we really should move it to the column on our left (the one indexed by <m>p-1</m> ).
          </p>
    
          <p>
            Thus the differential on <m>E_{p, q}^{1}</m> is the map <m>d_{1}: E_{p, q}^{1} \rightarrow E_{p-1, q}^{1}</m> defined as follows: since each class <m>[x] \in E_{p, q}^{1}</m> corresponds to an element <m>x \in F^{p} C_{p+q}</m> such that <m>\partial(x) \in F^{p-1} C_{p+q-1}</m>, we recast <m>\partial(x)</m> by asking about its class in <m>E_{p-1, q}^{1}=F^{p-1} C_{p+q-1} / F^{p-2} C_{p+q-1}</m>. If <m>[x] \in \operatorname{ker} d_{1}</m>, that means <m>\partial(x) \in F^{p-2} C_{p+q-1}</m>, and so on. Ultimately, we will gather information about how deep into our filtration we can go to still find <m>\partial(x)</m>.
          </p>
    
          <p>
            Inspired by this, we define
            <me>E_{p, q}^{r}:=\frac{\left\{x \in F^{p} C_{p+q} \mid \partial(x) \in F^{p-r} C_{p+q-1}\right\}}{F^{p-1} C_{p+q}+\partial\left(F^{p+r-1} C_{p+q+1}\right)}</me>
          </p>
    
          <p>
            Now given <m>x \in F^{p} C_{p+q}</m> representing a class <m>[x] \in E_{p, q}^{r}</m>, by definition
            <me>\partial(x) \in F^{p-r} C_{p+q-1}</me>
            so we define
            <me>d_{r}([x])=[\partial(x)] \in E_{p-r, q+r-1}^{r}=\frac{\left\{y \in F^{p-r} C_{p+q-1} \mid \partial(y) \in F^{p-2 r} C_{p+q-2}\right\}}{F^{p-r-1} C_{p+q-1}+\partial\left(F^{p-1} C_{p+q}\right)}</me>
          </p>
    
          <p>
            We claim that this is well-defined, and leave the details as an exercise. 
            Moreover, <m>d_{r}^{2}=0</m> since <m>\partial^{2}=0</m>. 
            Finally, each class in the kernel of <m>d_{r}</m> is represented by some <m>x \in F^{p} C_{p+q}</m> such that <m>\partial(x) \in F^{p-r-1} C_{p+q-1}</m>, while the image of <m>d_{r}: E_{p+r, q-r+1}^{r} \rightarrow E_{p, q}^{r}</m> consists of the image of <m>\partial\left(F^{p+r} C_{p+q+1}\right)</m>. 
            Ultimately, this gives us an isomorphism
            <me>E_{p, q}^{r+1} \cong \mathrm{H}_{p, q}\left(E^{r}\right)</me>
          </p>
    
          <p>
            Theorem 8.39. 
            Let <m>(C, \partial)</m> be a filtered complex with filtration <m>F^{\bullet} C</m>, and let
            <me>E_{p, q}^{r}:=\frac{\left\{x \in F^{p} C_{p+q} \mid \partial(x) \in F^{p-r} C_{p+q-1}\right\}}{F^{p-1} C_{p+q}+\partial\left(F^{p+r-1} C_{p+q+1}\right)}</me>
          </p>
    
          <p>
            Then <m>\partial</m> induces a well-defined map
            <me>d_{r}: E_{p, q}^{r} \rightarrow E_{p-r, q+r-1}^{r}</me>
            such that <m>d_{r} d_{r}=0</m>, and
            <me>E_{p, q}^{r+1} \cong \mathrm{H}_{p, q}\left(E^{r}\right)</me>
            Thus this gives us a spectral sequence with
            <me>E_{p, q}^{1}=\mathrm{H}_{p+q}\left(G_{p} C_{\bullet}^{\bullet}\right)</me>
            Moreover, if for all <m>n</m> the filtration <m>F^{\bullet} C_{n}</m> of <m>C_{n}</m> stabilizes, then the spectral sequence converges to
            <me>E_{p, q}^{\infty}=G_{p} \mathrm{H}_{p+q}\left(C_{\bullet}\right)=F^{p} \mathrm{H}_{p+q}\left(C_{\bullet}\right) / F^{p-1} \mathrm{H}_{p+q}\left(C_{\bullet}\right)</me>
            Thus
            <me>E_{p, q}^{\infty} \Rightarrow \mathrm{H}_{p+q}(C)</me>
          </p>
    
          <p>
            This provides a comparison between taking the homology of the associated graded module, or taking the associated graded module of the homology.
          </p>
    
          <p>
            Example 8.40. 
            Consider any short exact sequence of complexes, which we can always write as the inclusion of a subcomplex <m>A</m> into a complex <m>B</m> followed by the quotient map:
            <me>0 \longrightarrow A \xrightarrow{i} B \stackrel{\pi}{\longrightarrow} A / B \longrightarrow 0</me>
            It turns out that we can recover the long exact sequence in homology given by the Snake Lemma via a spectral sequence.

            To do that, we can think of the inclusion <m>A \subseteq B</m> as a filtration on <m>C=B</m> : we set
            <me>F^{n} C= \begin{cases}0 &amp; \text { if } n&lt;0 \\ A &amp; \text { if } n=0 \\ B &amp; \text { if } n \geqslant 1\end{cases}</me>
          </p>
    
          <p>
            Let us compute the spectral sequence of this filtered complex. 
            First, note that In <m>E^{0}</m> page, we have
            <me>E_{0, q}^{0}=F^{0} C_{q} / F^{-1} C_{q}=A_{q} \quad \text { and } \quad E_{1, q}^{0}=F^{1} C_{q+1} / F^{0} C_{q+1}=B_{q+1} / A_{q+1} \text {. }</me>
            The differential <m>d^{0}</m> on the <m>E^{0}</m> page is induced by the differential <m>\partial</m> on <m>A</m> and <m>B</m>. 
            Note that we denote the differential on both complexes <m>A</m> and <m>B</m> by the same letter since the differential on <m>A</m> is just the restriction of the differential on <m>B</m>. So the <m>E^{0}</m> page looks like
          </p>
    
          <image source="2024_01_10_e73c1aec4ffc24ca9984g-40.jpg" width="20%"/>
            
          <p>
            where only the 0th and first columns are nonzero.
          </p>
    
          <p>
            The <m>E^{1}</m> page is obtained by taking homology, so it looks like
            <me>
              \begin{aligned}
              &amp; \mathrm{H}_{q+1}(A) \stackrel{\partial}{\longleftarrow} \mathrm{H}_{q+2}(B / A) \\
              &amp; E^{1} \mathrm{H}_{q}(A) \stackrel{\partial}{\longleftarrow} \mathrm{H}_{q+1}(B / A) \\
              &amp; \mathrm{H}_{q-1}(A) \stackrel{\partial}{\longleftarrow} \mathrm{H}_{q}(B / A)
              \end{aligned}
            </me>
            and the differentials <m>d^{1}</m>, which are now horizontal, are induced by <m>\partial</m>. 
            More precisely, we can rewrite the terms on the right column as
            <me>E_{1, q}^{1}=\mathrm{H}_{q+1}(B / A)=\frac{\left\{x \in B_{q+1} \mid \partial(x) \in A_{q}\right\}}{A_{q+1}+\partial\left(B_{q+2}\right)}</me>
            and so by definition any class <m>[x] \in E_{q, 1}^{1}</m> is represented by some <m>x \in B_{q+1}</m> such that <m>\partial(x) \in A_{q}</m>. 
            Since <m>\partial^{2}=0</m>, then <m>\partial(x) \in Z_{q}(A)</m>, and so we can ask about the class of <m>\partial(x)</m> in <m>\mathrm{H}_{q}(Z)</m>. 
            So the differential <m>d^{1}</m> on <m>E^{1}</m> is given by
            <me>
              \begin{aligned}
              &amp; E_{1, q}^{1}=\frac{\left\{x \in B_{q+1} \mid \partial(x) \in A_{q}\right\}}{A_{q+1}+\partial\left(B_{q+2}\right)} \longrightarrow \mathrm{H}_{q}(A) \\
              &amp; {[x] \longmapsto[\partial(x)] . }
              \end{aligned}
            </me>
          </p>
    
          <p>
            Now onto the <m>E^{2}</m> page, where
            <me>E_{1, q}^{2}=\mathrm{H}_{1, q}\left(E^{1}\right)=\operatorname{ker}\left(E_{1, q}^{1} \stackrel{d^{1}}{\longrightarrow} E_{0, q}^{1}\right)</me>
            and
            <me>E_{0, q}^{2}=\mathrm{H}_{0, q}\left(E^{1}\right)=\mathrm{H}_{q}(A) / \operatorname{im}\left(d^{1}\right)</me>
          </p>
    
          <p>
            Note now that <m>d^{2}</m> is a map of degree <m>(-2,1)</m>, and thus <m>d^{2}=2</m>, since we always have zero as the source or target (or both) of <m>d^{2}</m>. 
            Thus <m>E_{p, q}^{n}=E_{p, q}^{2}</m> for all <m>n \geqslant 2</m>, and so by Theorem 8.39 this spectral sequence converges, with
            <me>E_{p, q}^{\infty} \cong F^{p} \mathrm{H}_{p+q}(C) / F^{p-1} \mathrm{H}_{p+q}(C)</me>
          </p>
    
          <p>
            Now <m>F^{1} \mathrm{H}_{n}(C)=\mathrm{H}_{n}(B)</m>, while
            <me>F^{0} \mathrm{H}_{n}(C)=\operatorname{im}\left(\mathrm{H}_{n}(A) \rightarrow \mathrm{H}_{n}(B)\right) \text {. }</me>
          </p>
    
          <p>
            Here the map <m>\mathrm{H}(A) \rightarrow \mathrm{H}(B)</m> is the map induced by the original inclusion of <m>A</m> into <m>B</m>. 
            Moreover, <m>F^{n} \mathrm{H}(C)=0</m> for all <m>n&lt;0</m> and <m>F^{n} \mathrm{H}(C)=\mathrm{H}(B)</m> for all <m>n \geqslant 1</m>. 
            So for all <m>n</m> we get isomorphisms
            <me>\operatorname{ker}\left(E_{1, n-1}^{1} \stackrel{d^{1}}{\longrightarrow} E_{0, n-1}^{1}\right) \cong \mathrm{H}_{n}(B) / \operatorname{im}\left(\mathrm{H}_{n}(A) \rightarrow \mathrm{H}_{n}(B)\right)=\mathrm{H}_{n}(B) / \operatorname{im~}_{n}(i)</me>
            and
            <me>\mathrm{H}_{n}(A) / \operatorname{im}\left(d^{1}\right) \cong \operatorname{im}\left(\mathrm{H}_{n}(A) \rightarrow \mathrm{H}_{n}(B)\right)=\operatorname{im}\left(\mathrm{H}_{n}(i)\right)</me>
          </p>
    
          <p>
            So we now have all the tools we need to construct the long exact sequence in homology from this spectral sequence. 
            First, we construct a complex. 
            Our map <m>d^{1}</m> from the spectral sequence gives us homomorphisms
            <me>\mathrm{H}_{n+1}(B / A) \stackrel{d^{1}}{\longrightarrow} \mathrm{H}_{n}(A) .</me>
          </p>
    
          <p>
            By definition, <m>d^{1}([x])=[\partial(x)]</m>; composing this with the map <m>\mathrm{H}_{n}(i): \mathrm{H}_{n}(A) \rightarrow \mathrm{H}(B)</m> consists of viewing <m>\partial(x) \in Z_{n}(B / A)</m> and asking for its class in <m>\mathrm{H}_{n}(B)</m>. 
            But <m>\partial(x) \in A_{n} \subseteq Z_{n}(B / A)</m>, so the composition
            <me>\mathrm{H}_{n+1}(B / A) \stackrel{d^{1}}{\longrightarrow} \mathrm{H}_{n}(A) \stackrel{\mathrm{H}_{n}(i)}{\longrightarrow} \mathrm{H}_{n}(B)</me>
            is zero.
          </p>
    
          <p>
            Similarly, the map <m>\mathrm{H}_{n+1}(B) \rightarrow \mathrm{H}_{n+1}(A)</m> takes a class <m>[y] \in \mathrm{H}_{n}(B)</m>, represented by <m>y \in</m> <m>Z_{n}(B)</m>, and identifies <m>y</m> with its image in <m>Z_{n}(B) \subseteq Z_{n}(B / A)</m>. 
            But <m>\partial(y)=0</m> by definition, so <m>[\partial(y)]=0</m> and the composition
            <me>
              \begin{array}{r}
              \mathrm{H}_{n+1}(B) \longrightarrow \mathrm{H}_{n+1}(B / A) \stackrel{d^{1}}{\longrightarrow} \mathrm{H}_{n}(A) \\
              \quad[y] \longmapsto[y] \longmapsto[\partial(y)]
              \end{array}
            </me>
            is the zero map. 
            Moreover, <m>\mathrm{H}_{n}</m> is an additive functor, and thus it takes <m>A \rightarrow B \rightarrow B / A</m> to a complex, so putting it all together we get a complex
            <me>\mathrm{H}_{n+1}(B / A) \stackrel{d^{1}}{\longrightarrow} \mathrm{H}_{n}(A) \stackrel{\mathrm{H}_{n}(i)}{\longrightarrow} \mathrm{H}_{n}(B) \stackrel{\mathrm{H}_{n}(\pi)}{\longrightarrow} \mathrm{H}_{n}(B / A) \xrightarrow{d^{1}} \mathrm{H}_{n-1}(A)</me>
          </p>
    
          <p>
            All that is left is for us to check that exactness follows from our spectral sequence. 
            On the one hand, the fact that this is a complex says that
            <me>\operatorname{im}\left(d^{1}\right) \subseteq \operatorname{ker}\left(\mathrm{H}_{n}(i)\right)</me>
            but our spectral sequence gave us the isomorphism
            <me>\mathrm{H}_{n}(A) / \operatorname{im}\left(d^{1}\right) \cong \operatorname{im}\left(\mathrm{H}_{n}(i)\right)</me>
            so by the First Isomorphism Theorem we get
            <me>\mathrm{H}_{n}(A) / \operatorname{ker}\left(\mathrm{H}_{n}(i)\right) \cong \operatorname{im}\left(\mathrm{H}_{n}(i)\right) \cong \mathrm{H}_{n}(A) / \operatorname{im}\left(d^{1}\right)</me>
          </p>
    
          <p>
            We can now conclude that <m>\operatorname{im}\left(d^{1}\right)=\operatorname{ker} \mathrm{H}_{n}(i)</m>. 
            This gives us exactness at <m>\mathrm{H}_{n}(A)</m>. 
            Similarly, we claim that the fact that we have a complex gives us a map
            <me>
              \begin{gathered}
              \operatorname{coker}\left(\mathrm{H}_{n}(i)\right) \stackrel{\psi}{\longrightarrow} \operatorname{ker}\left(d^{1}\right) \\
              x+\operatorname{im}\left(\mathrm{H}_{n}(i)\right) \longmapsto \mathrm{H}_{n}(\pi)(x) .
              \end{gathered}
            </me>
          </p>
    
          <p>
            Indeed, for any <m>x \in \mathrm{H}_{n}(B)</m> we get <m>\mathrm{H}_{n}(\pi)(x) \in \operatorname{ker} d^{1}</m>, and the map is well-defined since if <m>x \in \operatorname{im}\left(\mathrm{H}_{n}(i)\right) \subseteq \operatorname{ker}\left(\mathrm{H}_{n}(\pi)\right)</m> then by definition <m>\mathrm{H}_{n}(\pi)(x)=0</m>, so that we get a well-defined map from <m>\operatorname{coker}\left(\mathrm{H}_{n}(i)\right)</m>. 
            But our spectral sequence gave us an isomorphism
            <me>\operatorname{ker}\left(d^{1}\right) \cong \mathrm{H}_{n}(B) / \operatorname{im}\left(\mathrm{H}_{n}(i)\right)=\operatorname{coker}\left(\mathrm{H}_{n}(i)\right)</me>
            so that the map <m>\psi</m> we defined above is an isomorphism, and thus we must have
            <me>\operatorname{ker}\left(\mathrm{H}_{n}(\pi)\right)=\operatorname{im}\left(\mathrm{H}_{n}(i)\right)</me>
            proving exactness at <m>\mathrm{H}_{n}(B)</m>. 
          </p>
    
          <p>
            Finally, this also says that we can rewrite our previous isomorphism as
            <me>\operatorname{ker}\left(d^{1}\right) \cong \mathrm{H}_{n}(B) / \operatorname{im}\left(\mathrm{H}_{n}(i)\right)=\mathrm{H}_{n}(B) / \operatorname{ker}\left(\mathrm{H}_{n}(\pi)\right)</me>
            but by the First Isomorphism Theorem we get
            <me>\operatorname{ker}\left(d^{1}\right) \cong \operatorname{im}\left(\mathrm{H}_{n}(\pi)\right)</me>
          </p>
    
          <p>
            We already knew that <m>\operatorname{im}\left(\mathrm{H}_{n}(\pi)\right) \subseteq \operatorname{ker}\left(d^{1}\right)</m> from the fact that we had a complex, so we conclude that we must have exactness at <m>\mathrm{H}_{n}(B / A)</m>.
          </p>
    
          <p>
            Thus we have recovered the connecting homomorphism from the Snake Lemma and the long exact sequence in homology, all via this spectral sequence.
          </p>
          
        </section>

        <section xml:id="sec-spec-double"><title>Double Complexes</title>

          <p>
            One important example of a spectral sequence induced by a filtered complex is the case of the spectral sequence of a double complex.
          </p>
    
          <p>
            Definition 8.41. 
            Let <m>C</m> be a double complex. 
            There are two canonical filtrations on the total complex of <m>C</m> :
          </p>
    
          <p>
            (I) The First Filtration of <m>\operatorname{Tot}^{\oplus}(C)</m> is the filtration <m>{ }^{I} F^{s} \operatorname{Tot}^{\oplus}(C)</m> given by
          </p>
    
          <p>
            <me>{ }^{I} F^{s} \operatorname{Tot}^{\oplus}(C)_{n}:=\bigoplus_{i \leqslant s} C_{i, n-i}</me>
          </p>
    
          <p>
            For each <m>s,{ }^{I} F^{s} \operatorname{Tot}^{\oplus}(C)</m> is the subcomplex of <m>\operatorname{Tot}^{\oplus}(C)</m> obtained by first truncating <m>C</m> at <m>p=s</m> :
          </p>
    
  
      <image source="2024_01_10_e73c1aec4ffc24ca9984g-43(1).jpg" width="20%"/>
            
          <p>
            The First Filtration
          </p>
    
          <p>
            II The Second Filtration of <m>\operatorname{Tot}^{\oplus}(C)</m> is the filtration <m>{ }^{I I} F^{s} \operatorname{Tot}^{\oplus}(C)</m> given by
          </p>
    
          <p>
            <me>{ }^{I I} F^{s} \operatorname{Tot}^{\oplus}(C)_{n}:=\bigoplus_{j \leqslant s} C_{n-j, j}</me>
          </p>
    
          <p>
            For each <m>s,{ }^{I I} F^{s} \operatorname{Tot}^{\oplus}(C)</m> is the subcomplex of <m>\operatorname{Tot}^{\oplus}(C)</m> obtained by truncating <m>C</m> at <m>q=s</m> :
          </p>
    
  
      <image source="2024_01_10_e73c1aec4ffc24ca9984g-43.jpg" width="20%"/>
            
          <p>
            The Second Filtration
          </p>
    
          <p>
            Each of these filtered complexes gives rise to a spectral sequence.
          </p>
    
          <p>
            Discussion 8.42 (First Spectral Sequence). Let us examine the spectral sequence induced by the First Filtration, which we write as <m>{ }^{I} E^{s}</m>. To make the notation less heavy, we will write
          </p>
    
          <p>
            <me>E_{p, q}^{r}:={ }^{I} E_{p, q}^{r} \quad \text { and } F^{p}:={ }^{I} F^{s} \operatorname{Tot}^{\oplus}(C) \quad \text { so } \quad F_{n}^{p}=\bigoplus_{i \leqslant s} C_{i, n-i}</me>
          </p>
    
          <p>
            Our spectral sequence starts with
          </p>
    
          <p>
            <me>E_{p, q}^{0}=F_{p+q}^{p} / F_{p+q}^{p-1}=\bigoplus_{i \leqslant p} C_{i, p+q-i} / \bigoplus_{i \leqslant p-1} C_{i, p+q-i}=C_{p, q}</me>
          </p>
    
          <p>
            so that
          </p>
    
          <p>
            <me>E_{p, \bullet}^{0}=C_{p, \bullet}=p \text { th column of } C</me>
          </p>
    
          <p>
            Moreover,
          </p>
    
          <p>
            <me>d_{0}: C_{p, q}=E_{0}^{p, q} \longrightarrow E_{0}^{p, q-1}=C_{p, q-1}</me>
          </p>
    
          <p>
            is the map induced by the differential <m>d=d^{v}+d^{h}</m> on this filtration. Since
          </p>
    
          <p>
            <me>d: C_{p, q} \stackrel{\left(d^{h}, d^{v}\right)}{\longrightarrow} C_{p-1, q} \oplus C_{p, q-1}</me>
          </p>
    
          <p>
            we conclude that <m>d_{0}</m> is precisely the vertical differential <m>d^{v}</m> of the original double complex <m>C</m>. Thus the <m>E_{0}</m> page looks like <m>E^{0}</m> 
          </p>

          <image source='2024_01_10_e73c1aec4ffc24ca9984g-44.jpg' width="20%"/>

          <p>
            Then <m>E_{p, q}^{1}=\mathrm{H}_{q}^{v}\left(C_{p, \bullet}\right)</m>, and
          </p>
    
          <p>
            <me>d_{1}: \mathrm{H}_{q}^{v}\left(C_{p, \bullet}\right)=E_{p, q}^{1} \longrightarrow E_{p-1, q}^{1}=\mathrm{H}_{q}^{v}\left(C_{p-1, \bullet}\right)</me>
          </p>
    
          <p>
            is the map induced by <m>d: C_{p, q} \stackrel{\left(d^{h}, d^{v}\right)}{\longrightarrow} C_{p-1, q} \oplus C_{p, q-1}</m>. This is the horizontal differential <m>d^{h}</m>. We conclude that
          </p>
    
          <p>
            <me>{ }^{I} E_{p, q}^{2}=\mathrm{H}_{p}^{h} \mathrm{H}_{q}^{v}(C)</me>
          </p>
    
          <p>
            We automatically get a convergence theorem from Theorem 8.39.
          </p>
    
          <p>
            Theorem 8.43. If <m>C</m> is a bounded double complex, then
          </p>
    
          <p>
            <me>{ }^{I} E_{p, q}^{2} \Rightarrow \mathrm{H}_{p+q}\left(\operatorname{Tot}^{\oplus}(C)\right)</me>
          </p>
    
          <p>
            Discussion 8.44 (Second Spectral Sequence). Let us examine the spectral sequence induced by the Second Filtration, which we write as <m>{ }^{I I} E^{s}</m>. To make the notation less heavy, we will write
          </p>
    
          <p>
            Our spectral sequence starts with
          </p>
    
          <p>
            <me>F^{p}:={ }^{I I} F^{s} \operatorname{Tot}^{\oplus}(C) \quad \text { so } \quad F_{n}^{p}=\bigoplus_{j \leqslant s} C_{n-j, j}</me>
          </p>
    
          <p>
            <me>E_{p, q}^{0}=F_{p+q}^{p} / F_{p+q}^{p-1}=\bigoplus_{j \leqslant p} C_{p+q-j, j} / \bigoplus_{j \leqslant p-1} C_{p+q-j, j}=C_{q, p}</me>
          </p>
    
          <p>
            so that
          </p>
    
          <p>
            <me>E_{p, \bullet}^{0}=C_{\bullet, p}=p \text { th column of } C \text {. }</me>
          </p>
    
          <p>
            Moreover,
          </p>
    
          <p>
            <me>d_{0}: C_{q, p}=E_{p, q}^{0} \longrightarrow E_{p, q-1}^{0}=C_{q-1, p}</me>
          </p>
    
          <p>
            is the map induced by the differential <m>d=d^{v}+d^{h}</m> on this filtration. Since
          </p>
    
          <p>
            <me>d: C_{p, q} \stackrel{\left(d^{h}, d^{v}\right)}{\longrightarrow} C_{p-1, q} \oplus C_{p, q-1}</me>
          </p>
    
          <p>
            we conclude that <m>d_{0}</m> is precisely the horizontal differential <m>d^{h}</m> of the original double complex <m>C</m>. Thus the <m>E_{0}</m> page looks like
          </p>
    
  
      <image source="2024_01_10_e73c1aec4ffc24ca9984g-45.jpg" width="20%"/>
            
          <p>
            Then <m>E_{p, q}^{1}=\mathrm{H}_{q}^{h}\left(C_{\bullet, p}\right)</m>, and
          </p>
    
          <p>
            <me>d_{1}: \mathrm{H}_{q}^{h}\left(C_{\bullet, p}\right)=E_{p, q}^{1} \longrightarrow E_{p-1, q}^{1}=\mathrm{H}_{q}^{h}\left(C_{\bullet, p-1}\right)</me>
          </p>
    
          <p>
            is the map induced by <m>d: C_{p, q} \stackrel{\left(d^{h}, d^{v}\right)}{\longrightarrow} C_{p-1, q} \oplus C_{p, q-1}</m>. Thus <m>d_{1}</m> is the vertical differential <m>d^{v}</m>. We conclude that
          </p>
    
          <p>
            <me>{ }^{I I} E_{p, q}^{2}=\mathrm{H}_{p}^{v} \mathrm{H}_{q}^{h}(C)</me>
          </p>
    
          <p>
            We now get a convergence theorem automatically from Theorem 8.39.
          </p>
    
          <p>
            Theorem 8.45. If <m>C</m> is a bounded double complex, then
          </p>
    
          <p>
            <me>{ }^{I I} E_{p, q}^{2} \Rightarrow \mathrm{H}_{p+q}\left(\operatorname{Tot}^{\oplus}(C)\right)</me>
          </p>
    
          <p>
            Remark 8.46. We know exactly how each spectral sequence converges to <m>\mathrm{H}_{n}\left(\operatorname{Tot}^{\oplus}(C)\right)</m> : via the filtration on <m>\mathrm{H}_{n}\left(\operatorname{Tot}^{\oplus}(C)\right)</m> induced by the given filtration on <m>\operatorname{Tot}^{\oplus}(C)</m>. More precisely,
          </p>
    
          <p>
            <me>{ }^{I} E_{p, q}^{\infty}=\frac{{ }^{I} F^{p} \mathrm{H}_{p+q}\left(\operatorname{Tot}^{\oplus}(C)\right)}{{ }^{I} F^{p-1} \mathrm{H}_{p+q}\left(\operatorname{Tot}^{\oplus}(C)\right)} \quad \text { and } \quad{ }^{I I} E_{p, q}^{\infty}=\frac{{ }^{I I} F^{p} \mathrm{H}_{p+q}\left(\operatorname{Tot}^{\oplus}(C)\right)}{{ }^{I I} F^{p-1} \mathrm{H}_{p+q}\left(\operatorname{Tot}^{\oplus}(C)\right)}</me>
          </p>
    
          <p>
            Remark 8.47. If <m>C</m> is a first quadrant double complex, so that <m>C_{i, j}=0</m> whenever <m>i&lt;0</m> or <m>j&lt;0</m>, then for all <m>p&lt;0</m> we have
          </p>
    
          <p>
            <me>{ }^{I} F^{p} \operatorname{Tot}^{\oplus}(C)=0 \text { and }{ }^{I I} F^{p} \operatorname{Tot}^{\oplus}(C)=0</me>
          </p>
    
          <p>
            Thus
          </p>
    
          <p>
            <me>{ }^{I} F^{p} \mathrm{H}\left(\operatorname{Tot}^{\oplus}(C)\right)=0 \text { and }{ }^{I I} F^{p} \mathrm{H}\left(\operatorname{Tot}^{\oplus}(C)\right)=0 \text {. }</me>
          </p>
    
          <p>
            Moreover, for each fixed <m>n</m> if we take <m>p&gt;n</m> or <m>q&gt;n</m> then
          </p>
    
          <p>
            <me>{ }^{I} F^{p} \operatorname{Tot}^{\oplus}(C)_{n}=\operatorname{Tot}^{\oplus}(C)_{n} \text { and }{ }^{I I} F^{p} \operatorname{Tot}^{\oplus}(C)_{n}=\operatorname{Tot}^{\oplus}(C)_{n}</me>
          </p>
    
          <p>
            so
          </p>
    
          <p>
            <me>{ }^{I} F^{p} \mathrm{H}_{n}\left(\operatorname{Tot}^{\oplus}(C)\right)=\mathrm{H}_{n}\left(\operatorname{Tot}^{\oplus}(C)\right) \text { and }{ }^{I I} F^{p} \mathrm{H}_{n}\left(\operatorname{Tot}^{\oplus}(C)\right)=\mathrm{H}_{n}\left(\operatorname{Tot}^{\oplus}(C)\right) \text {. }</me>
          </p>
    
          <p>
            Thus each fixed diagonal of <m>{ }^{I} E_{\infty}^{p, q}</m> and <m>{ }^{I I} E_{2}^{p, q}</m> contains the factors of a finite filtration on <m>\mathrm{H}_{n}\left(\operatorname{Tot}^{\oplus}(C)\right)</m> :
          </p>
    
          <p>
            <me>0=M_{0} \subseteq M_{1} \subseteq \cdots \subseteq M_{s}=\mathrm{H}_{n}\left(\operatorname{Tot}^{\oplus}(C)\right)</me>
          </p>
    
          <p>
            In the special case when <m>{ }^{I} E</m> or <m>{ }^{I I} E</m> collapses, meaning that <m>E^{\infty}</m> is concentrated in one row or column, then the filtration on <m>\mathrm{H}\left(\operatorname{Tot}^{\oplus}(C)\right)</m> has a unique term in each degree, so that we can read <m>\mathrm{H}\left(\operatorname{Tot}^{\oplus}(C)\right)</m> exactly from the <m>E^{\infty}</m> page.
          </p>
    
          <p>
            Remark 8.48. The fact that <m>{ }^{I I} E_{p, q}^{0}=C_{q, p}</m> can lead to a lot of confusion. To make things easier, one often breaks the rules a little and instead takes the <m>E_{0}</m> page to be <m>{ }^{I I} E_{p, q}^{0}=C_{p, q}</m> with horizontal differentials, the <m>E^{1}</m> page to have vertical differentials induced by the vertical differentials on <m>C</m>, and then the <m>E^{r}</m> page to have a differential of degree <m>(r-1,-r)</m>. This gives us a gadget that isn't quite a spectral sequence under our formal definition, but should be a spectral sequence. In fact, this new convention makes everything much easier to read.
          </p>
    
          <p>
            Under this reasonable convention, the differentials look as follows:
          </p>
    
  
      <image source="2024_01_10_e73c1aec4ffc24ca9984g-46(2).jpg" width="20%"/>
            
          <p>
            0th page
          </p>
    
  
      <image source="2024_01_10_e73c1aec4ffc24ca9984g-46.jpg" width="20%"/>
            
          <p>
            1st page
          </p>
    
  
      <image source="2024_01_10_e73c1aec4ffc24ca9984g-46(1).jpg" width="20%"/>
            
          <p>
            2nd page
          </p>
    
          <p>
            Also, note that now
          </p>
    
          <p>
            <me>{ }^{I I} E_{p, q}^{2}=\mathrm{H}_{q}^{v} \mathrm{H}_{p}^{h}(C)</me>
          </p>
    
          <p>
            and that while
          </p>
    
          <p>
            <me>{ }^{I I} E_{p, q}^{\infty} \Longrightarrow \mathrm{H}_{p+q}\left(\operatorname{Tot}^{\oplus}(C)\right)</me>
          </p>
    
          <p>
            we now should carefully read the filtration backwards:
          </p>
    
          <p>
            <me>{ }^{I I} E_{p, q}^{\infty}=\frac{F^{q} \mathrm{H}_{p+q}\left(\operatorname{Tot}^{\oplus}(C)\right)}{F^{q-1} \mathrm{H}_{p+q}\left(\operatorname{Tot}^{\oplus}(C)\right)}</me>
          </p>
    
          <p>
            Example 8.49. Let us give a new proof of the Snake Lemma using spectral sequences. More precisely, we will show that given any commutative diagram with exact rows
          </p>
    
  
      <image source="2024_01_10_e73c1aec4ffc24ca9984g-47.jpg" width="20%"/>
            
          <p>
            then there exists an exact sequence
          </p>
    
          <p>
            <me>0 \longrightarrow \operatorname{ker} f \longrightarrow \operatorname{ker} g \longrightarrow \operatorname{ker} h \stackrel{\partial}{\longrightarrow} \operatorname{coker} f \longrightarrow \operatorname{coker} g \longrightarrow \text { coker } h \longrightarrow 0</me>
          </p>
    
          <p>
            To do that, we start by viewing our commutative diagram as a double complex <m>M</m>, as follows: we set <m>M_{0,0}=C, M_{0,1}=C^{\prime}</m>, and so on, resulting in
          </p>
    
  
      <image source="2024_01_10_e73c1aec4ffc24ca9984g-47(1).jpg" width="20%"/>
            
          <p>
            Now notice that <m>M</m> is a first quadrant double complex with exact rows, so by the Acyclic Assembly Lemma, <m>\operatorname{Tot}^{\oplus}(M)</m> is exact. We can also prove that <m>\operatorname{Tot}^{\oplus}(M)</m> is exact by computing the spectral sequence arising from the Second Filtration on <m>M</m>, which under our new and improved notation from Remark 8.48 has
          </p>
    
          <p>
            <me>\begin{aligned}
    &amp; C \stackrel{\pi}{\longleftarrow} B \stackrel{i}{\longleftarrow} C \\
    &amp; E^{0}= \\
    &amp; C^{\prime} \underset{\pi^{\prime}}{\longleftarrow} B^{\prime} \underset{i^{\prime}}{\longleftarrow} C^{\prime}
    \end{aligned}</me>
          </p>
    
          <p>
            and since the rows are all exact, we see that in the next step we will end up with <m>E^{1}=0</m>, and thus <m>E^{\infty}=0</m>. Therefore, <m>\mathrm{H}\left(\operatorname{Tot}^{\oplus}(M)\right)=0</m>.
          </p>
    
          <p>
            Now consider the spectral sequence induced by the First Filtration on <m>M</m>, which has
          </p>
    
  
      <image source="2024_01_10_e73c1aec4ffc24ca9984g-47(3).jpg" width="20%"/>
            
          <p>
            Now whatever <m>E^{2}</m> is, since <m>d^{2}</m> is a <m>(-2,1)</m> degree map, the only possible nonzero differential on <m>E^{2}</m> is <m>d^{2}: E_{2,0}^{2} \rightarrow E_{0,1}^{2}</m>. Moreover, all the differentials on all the higher pages vanish, simply because there are not enough nonzero modules already, so <m>E^{3}=E^{\infty}</m>. But we know that <m>\operatorname{Tot}^{\oplus}(M)</m> is exact, so in fact since our filtrations are finite we must necessarily have <m>E^{\infty}=0</m>. In particular, the only potentially nonzero objects in <m>E^{2}</m> are <m>E_{0,1}^{2}</m> and <m>E_{2,0}^{2}</m>, so this proves the exactness of
          </p>
    
  
      <image source="2024_01_10_e73c1aec4ffc24ca9984g-47(2).jpg" width="20%"/>
            
          <p>
            Moreover, the fact that <m>E_{0,1}^{2}</m> and <m>E_{2,0}^{2}</m> are the only possible nonzero objects in <m>E^{2}</m> together with the fact that and <m>E_{0,1}^{3}=0=E_{2,0}^{3}</m> imply that <m>d^{2}: E_{0,1}^{2} \rightarrow E_{2,10}^{2}</m> must be an isomorphism. More precisely, we get an isomorphism
          </p>
    
          <p>
            <me>\operatorname{coker}\left(\operatorname{ker} h \stackrel{\pi^{\prime}}{\longleftarrow} \operatorname{ker} g\right)=E_{0,1}^{2} \cong E_{2,0}^{2}=\operatorname{ker}(\operatorname{coker} g \stackrel{i}{\longleftarrow} \operatorname{coker} f) .</me>
          </p>
    
          <p>
            Thus we get an exact sequence
          </p>
    
  
      <image source="2024_01_10_e73c1aec4ffc24ca9984g-48.jpg" width="20%"/>
            
          <p>
            where the map <m>\partial</m> obtained by composition is the connecting homomorphism we dreamed of.
          </p>

          <exercise xml:id="exe-96">
            <statement>
              <p>
                Exercise 96. Show that if <m>M</m> is a first quadrant double complex with exact rows or exact columns, then <m>\operatorname{Tot}^{\oplus}(M)</m> is exact.
              </p>
            </statement>
            <solution>
              <p>
                
              </p>
            </solution>
          </exercise>

          <exercise xml:id="exe-97">
            <statement>
              <p>
                Exercise 97. Let <m>M</m> and <m>N</m> be <m>R</m>-modules and fix projective resolutions <m>P</m> for <m>M</m> and <m>Q</m> for <m>N</m>. Consider the double complex <m>C=P \otimes_{R} Q</m>.
              </p>
          
              <p>
                a) Compute the spectral sequence associated to the First Filtration (I) on <m>C</m> up to the <m>E^{2}</m> page.
              </p>
          
              <p>
                b) Compute the spectral sequence associated to the Second Filtration II on <m>C</m> up to the <m>E^{2}</m> page.
              </p>
          
              <p>
                c) Give a new proof that Tor is balanced:
              </p>
          
              <p>
                <me>\mathrm{H}_{n}\left(P \otimes_{R} N\right) \cong \mathrm{H}_{n}\left(M \otimes_{R} Q\right) .</me>
              </p>
            </statement>
            <solution>
              <p>
                
              </p>
            </solution>
          </exercise>

          <exercise xml:id="exe-98">
            <statement>
              <p>
                Exercise 98. Consider the following first quadrant double complex <m>C</m> :
              </p>
          
            <image source="2024_01_10_e73c1aec4ffc24ca9984g-49.jpg" width="20%"/>
                
              <p>
                a) Compute the spectral sequence associated to the First Filtration (I) until it stabilizes.
              </p>
          
              <p>
                b) Compute the spectral sequence associated to the Second Filtration II until it stabilizes.
              </p>
          
              <p>
                c) How are the two resulting <m>E^{\infty}</m> pages even possible considering they both converge to the same thing?
              </p>
          
              <p>
                d) Compute <m>\mathrm{H}_{3}\left(\operatorname{Tot}^{\oplus}(M)\right)</m> explicitly using only the two spectral sequences you calculated.
              </p>
          
              <p>
                e) Check your work by computing <m>\mathrm{H}_{3}\left(\operatorname{Tot}^{\oplus}(M)\right)</m> explicitly from the definition of <m>\operatorname{Tot}^{\oplus}(M)</m>.
              </p>
            </statement>
            <solution>
              <p>
                
              </p>
            </solution>
          </exercise>
    
        </section>

      </chapter>

    </part>

    <part xml:id="part-commutative-algebra"><title>Commutative Algebra</title>
      
      <chapter xml:id="ch-finiteness-conditions"><title>Finiteness Conditions</title>

        <introduction>
          <p>
            We start our study of commutative algebra by discussing modules and algebras, the most important structures over a given ring. 
            We will discuss module-finite versus algebra-finite ring extensions, the relationship between the two concepts, and how they relate to integral extensions. 
            We will then be ready to discuss noetherian rings; most of the rings we will be interested in are noetherian, as it often happens in commutative algebra.
          </p>
        </introduction>
  
        <section xml:id="sec-gen-mod"><title>Generated Modules</title>
          
          <blockquote>
            <p>
              <q>True success comes only when every generation continues to develop the next generation.</q>
            </p>
            <attribution>John C. Maxwell</attribution>
          </blockquote>

          <p>
            In many ways, commutative algebra is the study of finitely generated modules. 
            While vector spaces make for a great first example of modules, many of the basic facts we are used to from linear algebra are often a little more subtle in commutative algebra. 
            These differences are features, not bugs. 
            The first big noticeable difference between vector spaces and general modules is that while every vector space has a basis, most modules do not. 
          </p>

          <definition xml:id="def-generated-module"><title>Generated Module</title>
          <idx><h>basis</h></idx><idx><h>free module</h></idx><idx><h>generating set</h></idx><idx><h>generators for an <m>R</m>-module</h></idx>
            <statement>
              <p>
                Let <m>M</m> be an <m>R</m>-module and <m>\Gamma \subseteq M</m>. 
                The submodule of <m>M</m> <em>generated</em> by (also known as the submodule <em>spanned</em> by) <m>\Gamma</m>, denoted <m>\sum_{m \in \Gamma} R m</m>, <idx><h><m>\sum_{m \in \Gamma} R m</m></h></idx> is the smallest (with respect to containment) submodule of <m>M</m> containing <m>\Gamma</m>.<idx><h>module generated by a subset</h></idx>
              </p> 

              <p>
                We say <m>\Gamma</m> <em>generates</em> <m>M</m>, or is a <em>set of generators</em> for <m>M</m>, if <m>\sum_{m \in \Gamma} R m =~M</m>, meaning that every element in <m>M</m> can be written as a finite linear combination of elements in <m>\Gamma</m>.
              </p>
            </statement>
          </definition>

          <definition xml:id="def-basis"><title>Basis</title>     
            <statement>
              <p>
                A subset <m>A</m> of an <m>R</m>-module <m>M</m> is a <em>basis</em> of <m>M</m>, if the set <m>A</m> generates <m>M</m> and is linearly independent.
                <idx><h>generating set</h></idx>
                <idx><h>set of generators</h></idx>
                <idx><h>basis of a module</h></idx>
              </p>
            </statement>
          </definition>

          <definition xml:id="def-free-module"><title>Free Module</title>         
            <statement>
              <p>
                An <m>R</m>-module M is a <em>free</em> <m>R</m>-module if <m>M</m> admits at least one a basis.
                <idx><h>free module</h></idx>
              </p>
            </statement>
          </definition>

          <example xml:id="ex-vector-space-is-a-free-module"><title>Vector Space is a Free Module</title>
            <p>
              Every vector space over a field <m>k</m> is a free <m>k</m>-module.
            </p>
          </example>

          <example xml:id="ex-free-r-module-isomorphic-to-copies-of-r"><title>Free <m>R</m>-module Isomorphic to Copies of <m>R</m></title>
            <statement>
              <p>
                Every free <m>R</m>-module is isomorphic to a direct sum of copies of <m>R</m>.
              </p>
            </statement>

            <solution>
              <p>
                To construct such an isomorphism for the free <m>R</m>-module <m>M</m>, take a basis <m>\Gamma = \left\lbrace \gamma_i \right\rbrace_{i \in I}</m> for <m>M</m> and let <m>\pi</m> be a map such that 
                <me>
                  \begin{CD}
                  \oplus_{i \in I}R@&gt;\pi&gt;&gt; M\\\\
                  (r_i)_{i \in I}@&gt;&gt;&gt; \displaystyle\sum_i r_i \gamma_i
                  \end{CD}
                </me>
                The condition that <m>\Gamma</m> is a basis for <m>M</m> is equivalent to <m>\pi</m> being an isomorphism of <m>R</m>-modules.
              </p>
            </solution>
            
          </example>

          <p>
            One of the key things that makes commutative algebra so rich and beautiful is that most modules are in fact <em>not</em> free. 
            In general, every <m>R</m>-module has a generating set --- for example, <m>M</m> itself. 
            Given some generating set <m>\Gamma</m> for <m>M</m>, we can always write a <term>presentation</term><idx><h>presentation</h></idx></p>

          <p>EMPTY</p>

          <p>
            for <m>M</m>, but in general <m>\pi</m> will have a nontrivial kernel. 
            A nonzero kernel element <m>(r_i)_{i \in I} \in \ker \pi</m> corresponds to a <term>relation</term> between the generators.
            <idx><h>relation</h></idx>
          </p>

          <example xml:id="ex-homomorphism-determined-of-images-of-elements"><title>Homomorphism Determined of Images of Elements</title>
            <statement>
              <p>
                A homomorphism of <m>R</m>-modules <m>M\to N</m> is completely determined by the images of the elements on any given set of generators for <m>M</m>.
              </p>
            </statement>
          </example>

          <lemma xml:id="lem-generated-module-equivalencies"><title>Generated Module Equivalencies</title>
            <statement>
              <p>The following are equivalent:</p>
  
              <p>
                <ol>
                  <li>
                    <m>\Gamma</m> generates <m>M</m> as an <m>R</m>-module.
                  </li>
    
                  <li>
                    Every element of <m>M</m> can be written as a finite linear combination of the elements of <m>\Gamma</m> with coefficients in <m>R</m>.
                  </li>
    
                  <li>
                    The homomorphism <m>\t : R^{\oplus Y}\to M</m>, where <m>R^{\oplus Y}</m> is a free <m>R</m>-module with basis <m>Y</m> in bijection with <m>\Gamma</m> via <m>\t(y_{i}) = \g_{i}</m>, is surjective.
                  </li>
                </ol>
              </p>
  
            </statement>

            <proof>
              <p>
                <ol>
                  <li>
                    <p>
                      (1 <m>\Longleftrightarrow</m> 2) Suppose <m>\Gamma</m> generates <m>M</m> as an <m>R</m>-module. 
                      The definition of a generated submodule is that it is the smallest submodule containing all linear combinations of the generators of <m>\Gamma</m>.
                      Thus every element of <m>M</m> can be written as a finite linear combination of elements of <m>\Gamma</m>.
                    </p>

                    <p>
                      (2 <m>\Longrightarrow</m> 3) Suppose every element of <m>M</m> can be written as a finite linear combination of the elements of <m>\Gamma</m> with coefficients in <m>R</m>, and let <m>\t : R^{\oplus Y}\to M</m> be defined as above. 
                      Let <m>x\in M</m>. 
                      Thus <m>m</m> can be written in the form <m>r_{1}m_{1}+\dots+r_{n}m_{n}</m>, where <m>r_{i}\in R</m> and and <m>m_{i}\in\Gamma</m>. 
                      As <m>Y</m> is in bijection with <m>\Gamma</m>, we see that there exist <m>y_{i}\in Y</m> such that <m>\t(y_{i})=m_{i}</m> for each <m>1\leq i\leq n</m>. 
                      Thus the element <m>r_{1}y_{1}+\dots+r_{n}y_{n}</m> maps to <m>x</m> via <m>\t</m>.                  
                    </p>
                  </li>

                  <li>
                    <p>
                      (3 <m>\Longrightarrow</m> 1) Suppose the homomorphism <m>\t : R^{\oplus Y}\to M</m> , where <m>R^{\oplus Y}</m> is a free <m>R</m>-module with basis <m>Y</m> in bijection with <m>\Gamma</m> via <m>\t(y_{i}) = \g_{i}</m>, is surjective.
                      Thus for any <m>x\in M</m> there exists some <m>y\in R^{\oplus Y}</m> such that <m>\t(y)=x</m>. 
                      As <m>Y</m> is a basis for <m>R^{\oplus Y}</m> there exist <m>y_{i}\in Y</m> such that <m>y=r_{1}y_{1}+\dots+r_{n}y_{n}</m>. 
                      As <m>\t</m> is a homomorphism, we see that 
                      <md>
                        <mrow>x \amp =\t(y)</mrow>
                        <mrow> \amp =\t(r_{1}y_{1}+\dots+r_{n}y_{n})</mrow>
                        <mrow> \amp =\t(r_{1})m_{1}+\dots+\t(r_{n})m_{n},</mrow>
                      </md>
                      where each <m>m_{i}\in\Gamma</m> and each <m>\t(r_{i})\in R</m>. 
                      Thus every element of <m>M</m> can be written as a finite linear combination of elements of <m>\Gamma</m> with coefficients in <m>R</m>.                  
                    </p>
                  </li>
                </ol>
              </p>
            </proof>
          </lemma>

          <remark>
            <p>
              The equivalence between (1) and (2) in <xref ref="lem-generated-module-equivalencies"/> says that the submodule generated by <m>\Gamma</m> is exactly the set of all finite linear combinations of elements in <m>\Gamma</m> with coefficients in <m>R</m>, which explains the notation <m>\sum_{m \in \Gamma} Rm</m>.
            </p>
          </remark>

          <definition xml:id="def-fg-module"><title>Finitely Generated Module</title>   
            <statement>
              <p>
                We say that a module <m>M</m> is <em>finitely generated</em> if we can find a finite generating set for <m>M.</m><idx><h>finitely generated module</h></idx>
              </p>
            </statement>
          </definition>

          <remark>
            <p>
              A better name might be <em>finitely generatable</em>, since we do not need to know an actual finite set of generators to say that a module is finitely generated.
            </p>
          </remark>

          <example xml:id="ex-cyclic-modules-isomorphic-to-quotient"><title></title>
            <statement>
              <p>
                An <m>R</m>-module is cyclic if it can be generated by one element. <idx><h>cyclic module</h></idx>
                Equivalently, we can write <m>M</m> as a quotient of <m>R</m> by some ideal <m>I</m>.
              </p>
            </statement>

            <solution>
              <p>
							  Indeed, given a generator <m>m</m> for <m>M</m>, the kernel of the map <m>R^{n}\longrightarrow M</m> induced by <m>1 \mapsto m</m> is some ideal <m>I</m>. 
                Since we assumed that <m>m</m> generates <m>M</m>, <m>\pi</m> is automatically surjective, and thus induces an isomorphism <m>R/I \cong M</m>.
						  </p>
            </solution>
            
          </example>

          <example xml:id="ex-f.g.-modules-quotient-of-copies-of-r">
            <p>
							More generally, if an <m>R</m>-module has <m>n</m> generators, we can naturally think about it as a quotient of <m>R^n</m> by the submodule of relations among those <m>n</m> generators. More precisely, if <m>M</m> is generated by <m>m_1, \ldots, m_n \in M</m>, then the homomorphism of <m>R</m>-modules<me>\begin{CD}
              R^{n}@&gt;\pi&gt;&gt; m\\\\
              (r_{1}, \ldots, r_{n})@&gt;d&gt;&gt; r_{1} m_{1} + \cdots + r_{n} m_{n}
              \end{CD}</me>that sends each of the canonical generators <m>e_i</m> of <m>R^n</m> to <m>m_i</m> is surjective; more precisely, this is a presentation for <m>M</m>. <idx><h>presentation</h></idx> By the <xref text="title" ref="thm-fit-mod"/>, <m>M \cong R^n / \ker \pi</m>.
						</p>
          </example>

          <paragraphs><title>Macaulay 2</title>
            <p>
              Defining free modules in Macaulay2 is straightforward:
            </p>

            <sage language="macaulay2">
              <input>
                R = QQ[x,y,z];
                M = R^3 
              </input>
            </sage>

            <pre>
              i1 : R = QQ[x,y,z];
  
              i2 : M = R^3 
                    3
              o2 = R
  
              o2 : R-module, free
            </pre>

            <p>
              Note that from now on and until we reset Macaulay2, whenever you write <c>R</c> it will be read as a ring, not a module; 
              if instead you want to refer to the module <m>R</m>, you can write it as <c>R^1</c>. 
              Alternatively, you can also use the command <c>module</c> and write <c>module R</c>. 
              If you do calculations that require a module and not a ring, it is important to be careful about whether you write <c>R</c> or <c>R^1</c>; 
              this is an easy way to get an error message.
            </p>

            <p>
              If we want to define a module that happens to be an ideal, but we want to think about it as a module, we can use the command <c>module</c> to turn the ideal into a module:
            </p>

            <sage language="macaulay2">
              <input>
                R = QQ[x,y,z];
                M = R^3;
                I = ideal"xy,yz"
                N = module I
              </input>
            </sage>

            <pre>
              i3 : I = ideal"xy,yz"

              o3 = ideal (x*y, y*z)
              
              o3 : Ideal of R
              
              i4 : N = module I
              
              o4 = image | xy yz |
                                            1
              o4 : R-module, submodule of R
            </pre>

            <p>
              If we forget that this is actually an ideal, and simply think about as a submodule of the module <m>R</m>, we can also view this module as the image of a map, as we described in <xref ref="ex-f.g.-modules-quotient-of-copies-of-r"/>: 
              if a submodule of <m>R^m</m> has <m>n</m> generators, we can view it as the the image of the map <m>R^n \to R^m</m> that sends each of the canonical generators of <m>R^n</m> to the generators we chose for our module. 
              In our example, our module is the image of the following map from <m>R^2</m> to <m>R</m>:
            </p>

            <sage language="macaulay2">
              <input>
                R = QQ[x,y,z];
                M = R^3;
                I = ideal"xy,yz";
                N = module I;
                phi = map(R^1,R^2,{{x*y,y*z}})
                L = image phi
              </input>
            </sage>

            <pre>
              i5 : phi = map(R^1,R^2,{{x*y,y*z}})

              o5 = | xy yz |
                            1       2
              o5 : Matrix R  &lt;--- R

              i6 : L = image phi

              o6 = image | xy yz |
                                            1
              o6 : R-module, submodule of R
            </pre>

            <p>
              Note that above, when we first defined the module <m>N</m>, Macaulay2 immediately stored that information in this exact way, as the image of the same map we just defined. 
              This is useful to keep in mind when you see the results for a computation: 
              if a module is given to us as the image of a matrix, then we are being told that our module is a submodule of some free module. 
              If the matrix has <m>n</m> rows, then that means our module is a submodule of <m>R^n</m>. 
              Each column corresponds to a generator of our module (as a submodule of <m>R^n</m>).
            </p>

            <p>
              Of course that the modules <m>M</m>, <m>N</m>, and <m>L</m> we have defined are all the same module: the ideal <m>(xy,yz)</m>. 
              It is our job to know that; depending on how you ask the question, Macaulay2 might not be able to identify this. 
              Finally, we can also describe this module by saying that it has two generators, say <m>f</m> and <m>g</m>, and there is a unique relation between them:	
              <me>-zf + yg = 0.</me>
              This means that our module is the quotient of <m>R^2</m> by the submodule generated by the relation <m>(-z,y)</m>. 
              We can write this as the quotient of <m>R^2</m> by the image of a map landing in <m>R^2</m>, meaning it is the cokernel of a map.
            </p>

            <sage language="macaulay2">
              <input>
                R = QQ[x,y,z];
                M = R^3;
                I = ideal"xy,yz";
                N = module I;
                phi = map(R^1,R^2,{{x*y,y*z}});
                L = image phi;
                psi = map(R^2,R^1,{{-z},{y}})
                K = coker psi
              </input>
            </sage>

            <pre>
              i7 : psi = map(R^2,R^1,{{-z},{y}})

              o7 = | -z |
                   | y  |
                            2       1
              o7 : Matrix R  &lt;--- R

              i8 : K = coker psi

              o8 = cokernel | -z |
                            | y  |
                                          2
              o8 : R-module, quotient of R
            </pre>

            <p>
              When a module is given to us in this format, as the cokernel of some matrix, we are essentially being given a presentation: the number of rows is the number of generators, while each column corresponds to a relation among those generators. 
              If one the vector <m>(r_1, \ldots, r_n)</m> appears in a column of the matrix, that means that the generators <m>m_1, \ldots, m_n</m> satisfy the relation
              <me>r_1 m_1 + \cdots + r_n m_n  = 0.</me>
              Keep in mind that when you do a calculation and the result is a module given to you in this format, Macaulay2 will not necessarily respond with a <em>minimal</em> presentation: 
              one of the generators given might actually be a linear combination of the remaining ones, so there might be more generators than necessary, and there might be superfluous relations which follow as linear combinations of the others. 
              You might be able to get rid of some superfluous generators and relations using the command <c>prune</c>. 
              We will discuss this in more detail when we talk about local rings in <xref ref="ch-local-rings"/>.
            </p>  
          </paragraphs>

        </section>

        <section xml:id="sec-algebras"><title>Algebras</title>
          
          <blockquote>
            <p>
              <q>
                I don't know why I should have to learn Algebra... I'm never likely to go there.
              </q>
            </p>
            <attribution>Billy Connolly</attribution>
          </blockquote>

          <definition xml:id="def-algebra"><title>Algebra</title>
            <statement>
              <p>
                Given a ring <m>R</m>, an <m>R</m>-<em>algebra</em> is a ring <m>S</m> equipped with a ring homomorphism <m>\phi: R \to S</m>. 
                This defines an <m>R</m>-module structure on <m>S</m> given by restriction of scalars: 
                for each <m>r\in R</m> and <m>s\in S</m>, <m>rs := \phi(r)s</m>. 
                This <m>R</m>-module structure on <m>S</m> is compatible with the internal multiplication of <m>S</m> i.e., <idx><h>restriction of scalars</h></idx>
                <me>r(st)=(rs)t=s(rt) \text{ for all } r\in R, s, t\in S.</me>
                We will call <m>\phi</m> the <em>structure homomorphism</em> of the <m>R</m>-algebra <m>S</m>.<idx><h>structure homomorphism of an algebra</h></idx>
              </p>
            </statement>
          </definition>
          
          <example xml:id="ex-polynomial-rings-are-algebras"><title>Polynomial Rings are Algebras</title>
            <statement>
              <p>
                If <m>A</m> is a ring and <m>x_1,\dots,x_n</m> are indeterminates, the inclusion map <m>A \hookrightarrow A[x_1,\dots,x_n]</m> makes the polynomial ring into an <m>A</m>-algebra.
              </p>
            </statement>
          </example>

          <example xml:id="ex-inclusion-maps-give-algebra-structure"><title>Inclusion Maps Give Algebra Structure</title>
            <statement>
              <p>
                More generally, any inclusion map <m>R \subseteq S</m> gives <m>S</m> an <m>R</m>-algebra structure. 
                In this case the <m>R</m>-module multiplication coincides with the internal (ring) multiplication on <m>S</m>.
              </p>
            </statement>
          </example>

          <example xml:id="ex-rings-have-unique-structure-as-z-algebra"><title>Rings Have Unique Structure as <m>\Z</m>-algebra</title>
            <statement>
              <p>
                Any ring comes with a unique structure as a <m>\Z</m>-algebra, since there is a unique ring homomorphism <m>\Z \to R</m>: the one given by <m>n \mapsto n \cdot 1_R</m>.
              </p>
            </statement>
          </example>

          <definition xml:id="def-generated-algebra"><title>Generated Algebra</title>
            <statement>
              <p>
                Let <m>S</m> be an <m>R</m>-algebra with structure homomorphism <m>\varphi</m> and let <m>\Lambda \subseteq S</m> be a set. 
                The <m>R</m>-algebra <em>generated</em> by a subset <m>\Lambda</m> of <m>S</m>, denoted <m>R[\Lambda]</m>, is the smallest (with respect to containment) subring of <m>S</m> containing <m>\Lambda</m> and <m>\varphi(R)</m>. 
                A set of elements <m>\Lambda \subseteq S</m> <em>generates</em> <m>S</m> as an <m>R</m>-algebra if <m>S=R[\Lambda]</m>.
              </p>
            </statement>
          </definition>

          <p>
            Note that there are two different meanings for the notation <m>R[S]</m> for a ring <m>R</m> and set <m>S</m>: 
            one calls for a polynomial ring, and the other calls for a subring of something. 
            If <m>S</m> is a subset of elements of some other larger ring which is clear from context, then we are talking about the algebra generated by <m>S</m>; 
            in contrast, if <m>S</m> is a set of indeterminates, then we are talking about a polynomial ring in those variables.
          </p>

          <p>
            This can be unpackaged more concretely in a number of equivalent ways.
          </p>

          <lemma xml:id="lem-generated-algebra-equivalencies"><title>Generated Algebra Equivalencies</title>
            <statement>
              <p>
                The following are equivalent: 
                <ol>
                  <li>
                    <p>
                      <m>\Lambda</m> generates <m>S</m> as an <m>R</m>-algebra. 
                    </p>
                  </li>

                  <li>
                    <p>
                      Every element in <m>S</m> admits a polynomial expression in <m>\Lambda</m> with coefficients in <m>\phi(R)</m>, i.e. 
                      <me>
                        S = \left\{\sum_{\mathrm{finite}} \phi(r_{i_1, \ldots, i_n}) \lambda_1^{i_1} \cdots \lambda_n^{i_n} \mid r_l \in R, \lambda_j\in\Lambda, i_j \geqslant 0 \right\}.
                      </me> 
                    </p>
                  </li>

                  <li>
                    <p>
                      If <m>R[X]</m> is a polynomial ring on a set of indeterminates <m>X</m> in bijection with <m>\Lambda</m>, then the <m>R</m>-algebra homomorphism
                      <me>
                        \begin{CD}
                        R[X]^{n}@&gt;\pi&gt;&gt; S\\\\
                        x_{i}@&gt;&gt;&gt; \l_{i}
                        \end{CD}
                      </me>
                      is surjective.
                    </p>
                  </li>
                </ol>
              </p>
            </statement>

            <proof>
              <p>
                Let <m>S= \left\{\sum_{\mathrm{finite}} \phi(a) \lambda_1^{i_1} \cdots \lambda_n^{i_n} \mid a\in A, \lambda_j\in\Lambda, i_j\in \N\right\}</m>.
              </p>
  
              <p>
                For the equivalence between (2) and (3), we note that <m>S</m> is the image of <m>\pi</m>. In particular, <m>S</m> is a subring of <m>R</m>. It then follows from the definition that (1) implies (2). Conversely, any subring of <m>R</m> containing <m>\phi(A)</m> and <m>\Lambda</m> certainly must contain <m>S</m>, so (2) implies (1).
              </p>
            </proof>
          </lemma>

          <remark>
            <p>
              Let <m>S</m> be an <m>R</m>-algebra generated by <m>\Lambda</m>, let <m>\pi</m> be the surjective map in part (3) of <xref ref="lem-generated-algebra-equivalencies"/>, and let <m>I := \ker \pi</m>. 
              By the <xref text="title" ref="thm-fit"/>, we have a ring isomorphism <m>S\cong R[X]/I</m>. 
              The elements of <m>I</m> are the relations among the generators in <m>\Lambda</m>. <idx><h>relations</h></idx> 
              If we understand the ring <m>R</m> and generators and relations for <m>S</m> over <m>R</m>, we can get a pretty concrete understanding of <m>S</m>.
            </p>
          </remark>
      
          <definition xml:id="def-free-algebra"><title>Free Algebra</title>
            <statement>
              <p>
                Suppose <m>\Lambda</m> generates <m>S</m> as an <m>R</m>-algebra. Let <m>R[X]</m> be a polynomial ring on a set of indeterminates <m>X</m> in bijection with <m>\Lambda</m>, and let <m>\pi</m> denote the <m>R</m>-algebra homomorphism 
                <me>
                  \begin{CD}
                  R[X]^{n}@&gt;\pi&gt;&gt; S\\\\
                  x_{i}@&gt;&gt;&gt; \l_{i}
                  \end{CD}
                </me>
                If the homomorphism <m>\pi</m> is injective (and thus an isomorphism) we say that <m>S</m> is a <em>free algebra</em>; 
                a free algebra on <m>R</m> is isomorphic to a polynomial ring on <m>R</m>.
              </p>
    
              <p>
                The ideal <m>I = \ker(\pi)</m> measures how far <m>R</m> is from being a free <m>R</m>-algebra and is called the set of <em>relations</em> on <m>\Lambda</m>.
                <idx><h>relations of an algebra</h></idx>
              </p>
            </statement>
          </definition>

          <example xml:id="ex-zsqrtd-and-zsqrt3d-are-z-algebras"><title><m>\Z[\sqrt{d}]</m> and <m>\Z[\sqrt[3]{d}]</m> are <m>\Z</m>-algebras</title>
            <statement>
              <p>
                You may have seen this used in <m>\Z[\sqrt{d}]</m> for some <m>d \in \Z</m> to describe the ring 
                <me>\{ a + b \sqrt{d} \mid a,b \in \Z\}.</me>
                The <m>\Z</m>-algebra generated by <m>\sqrt{d}</m> in the most natural place, the algebraic closure of <m>\Q</m>, is exactly the set above.
              </p>
            </statement>

            <solution>
              <p>
                The point is that for any power <m>(\sqrt{d})^n</m>, we can always write <m>n=2q+r</m> with <m>r\in \{0,1\}</m>, so <m>(\sqrt{d})^n=d^q (\sqrt{d})^r</m> is in the algebra generated by <m>\mathbb{Z}</m> and <m>\sqrt{d}</m>.
              </p>
  
              <p>
                We can also write the one-generated <m>\Z</m>-algebra <m>\Z[\sqrt{d}]</m> as a quotient of a polynomial ring in one variable: if <m>d</m> is not a perfect square, the map <m>\pi</m> in part (3) of this <xref ref="lem-generated-algebra-equivalencies"/> is 
                <me>
                  \begin{CD}
                  \Z[x]@&gt;\pi&gt;&gt; \Z[\sqrt[3]{d}]\\\\
                  x@&gt;&gt;&gt; \sqrt[3]{d}\\\\
                  y@&gt;&gt;&gt; \sqrt[3]{d^{2}}
                  \end{CD}
                </me> 
                and its kernel is generated by <m>x^2-d</m>, so <m>\Z[\sqrt{d}] \cong \Z[x]/(x^2-d)</m>.
              </p>
  
              <p>
                Similarly, the ring <m>\Z[\sqrt[3]{d}]</m> can be written as 
                <me>\Z[\sqrt[3]{d}] = \{ a + b \sqrt[3]{d} + c \sqrt[3]{d^2}  \ | \ a,b,c\in \Z\},</me> 
                which is a quotient of <m>\mathbb{Z}[x,y]</m>, and the map <m>\pi</m> from <xref ref="lem-generated-algebra-equivalencies"/> is
                <me>
                  \begin{CD}
                    \Q[w_{1},\dots,w_{6}]@&gt;\pi&gt;&gt; R\\\\
                    (w_{1}, \ldots, w_{6})@&gt;&gt;&gt; (x^{2},xy,xz,y^{2},yz,z^{2})
                  \end{CD}
                </me>
              </p>
            </solution>
          </example>

          <paragraphs><title>Macaulay2</title>
            <p>
              Unfortunately, Macaulay2 does not understand subalgebras directly, only quotient rings. 
              But as we have discussed, any <m>R</m>-algebra can be thought of as a quotient of a polynomial ring over <m>R</m>. 
              For example, the Veronese algebra <m>V = \mathbb{Q}[x^2, xy, xz, y^2, yz, z^2]</m> is a quotient of a polynomial ring over <m>\mathbb{Q}</m> in <m>6</m> variables, since it has <m>6</m> algebra generators. 
              More precisely, <m>V</m> is the image of the map
              <me>
                \begin{CD}
                \Q[w_1, \ldots, w_6]@&gt;\pi&gt;&gt; R\\\\
                (w_1, \ldots, w_6)@&gt;&gt;&gt; (x^2, xy, xz, y^2, yz, z^2)
                \end{CD}
              </me>
              so by the <xref text="title" ref="thm-fit"/>, <m>V \cong \mathbb{Q}[w_1, \ldots, w_6]/ \ker \pi</m>.
            </p>

            <pre>
              i4 : use R;

              i5 : aux = QQ[w_1 .. w_6]
              
              o5 = aux
              
              o5 : PolynomialRing
              
              i6 : p = map(R,aux,{x^2,x*y,x*z,y^2,y*z,z^2})
                                  2             2        2
              o6 = map (R, aux, {x , x*y, x*z, y , y*z, z })
              
              o6 : RingMap R &lt;--- aux
              
              i7 : V = aux/ker p
              
              o7 = V
              
              o7 : QuotientRing
            </pre>

            <p>
              To do calculations with <m>V</m>, note that <m>w_1</m> is actually <m>x_2</m>, <m>w_2</m> is <m>xy</m>, and so on.
            </p>

          </paragraphs>

          <definition xml:id="def-algebra-finite"><title>Algebra-Finite</title>
            <statement>
              <p>
                We say that <m>\varphi:R\to S</m> is <em>algebra-finite</em>, or <m>S</m> is a <em>finitely generated</em> <m>R</m>-algebra, or <m>S</m> is of <em>finite type</em> over <m>R</m>, if there exists a finite set of elements <m>f_1,\dots,f_t\in S</m> that generates <m>S</m> as an <m>R</m>-algebra.
                <idx><h>algebra-finite</h></idx><idx><h>finitely generated algebra</h></idx><idx><h>finite type</h></idx>
              </p>
            </statement>
          </definition>

          <remark>
            <p>
              A better name might be <em>finitely generatable</em>, since we do not need to know an actual finite set of generators to say that an algebra is finitely generated.
            </p>
          </remark>

          <example xml:id="ex-algebra-finite-iff-quotient-of-polynomial-ring"><title>Algebra Finite iff Quotient of Polynomial Ring</title>
            <p>
              From the discussion above, we conclude that <m>S</m> is a finitely generated <m>R</m>-algebra if and only if <m>S</m> is a quotient of some polynomial ring <m>R[x_1,\dots,x_d]</m> over <m>R</m> in finitely many variables.
            </p>

            <p>
              If <m>S</m> is generated over <m>R</m> by <m>f_1,\dots,f_d</m>, we will use the notation <m>R[f_1,\dots,f_d]</m><idx><h><m>R[f_1,\dots,f_d]</m></h></idx> to denote <m>S</m>. 
              Of course, for this notation to properly specify a ring, we need to understand how these generators behave under the operations; 
              this is no problem if <m>R</m> and <m>\underline{f}</m> are understood to be contained in some larger ring.
            </p>
          </example>

          <conjecture xml:id="conj-jacobian-determinant-and-c-generation"><title>Jacobian Determinant and <m>\C</m> Generation</title>
            <statement>
              <p>
                There are many basic questions about algebra generators that are surprisingly difficult.
                Let <m>R=\C[x_1,\dots,x_n]</m> and <m>f_1,\dots,f_n\in R</m>. 
                When do <m>f_1,\dots,f_n</m> generate <m>R</m> over <m>\C</m>? 
                It is not too hard to show that the Jacobian determinant <idx><h>Jacobian</h></idx> 
                <me>\det \begin{bmatrix} \frac{\partial f_1}{\partial x_1} &amp; \cdots &amp; \frac{\partial f_1}{\partial x_n} \\ \vdots &amp; \ddots &amp; \vdots \\ \frac{\partial f_n}{\partial x_1} &amp; \cdots &amp; \frac{\partial f_n}{\partial x_n} \end{bmatrix}</me> 
                must be a nonzero constant. 
                It is a big open question whether this is in fact a sufficient condition!
              </p>
            </statement>
          </conjecture>

        </section>

        <section xml:id="sec-alg-mod-finite"><title>Algebra and Module Finite</title>

          <blockquote>
            <p>
              <q>
                All poetry is putting the infinite within the finite.
              </q>
            </p>
            <attribution>Robert Browning</attribution>
          </blockquote>

          <definition xml:id="def-module-finite"><title>Module Finite</title>
            <statement>
              <p>
                Given an <m>R</m>-algebra <m>S</m>, we say <m>S</m> is <em>module-finite</em> over <m>R</m> if it is finitely generated as an <m>R</m>-module.
              </p>
            </statement>
          </definition>

          <remark>
            <p>
              Instead of asking about how <m>S</m> is generated as an algebra over <m>R</m>, we can ask how it is generated as a module over <m>R</m>. 
              The notion of module-finite is much stronger than algebra-finite, since a linear combination is a very special type of polynomial expression.
            </p>
          </remark>

          <lemma xml:id="lem-subsets-of-generating-sets"><title>Subsets of Generating Sets</title>
            <statement>
              <p>
                <ol>
                  <li>
                    If <m>M</m> is a finitely generated <m>R</m>-module, then any generating set for <m>M</m> as an <m>R</m>-module contains a finite subset that generates <m>M</m>.
                  </li>
  
                  <li>
                    If the ring <m>S</m> is algebra-finite over <m>R</m>, then any generating set for <m>S</m> as an <m>R</m>-algebra contains a finite subset that also generates <m>S</m> as an <m>R</m>-algebra.
                  </li>
                </ol>
              </p>
            </statement>

            <proof>
              <p>
                Let <m>\Gamma</m> be a generating set for <m>M</m> as an <m>R</m>-module. 
                If <m>M</m> is a finitely generated <m>R</m>-module, then we can find elements <m>f_1 \ldots, f_r</m> that generate <m>M</m> as an <m>R</m>-module. 
                Since <m>\Gamma</m> generates <m>M</m>, for each <m>i</m> we can find finitely many elements <m>\gamma_{i,1}, \ldots, \gamma_{i,n_i} \in \Gamma</m> and <m>R</m>-coefficients <m>r_{i,1}, \ldots, r_{i,n_i}</m> such 
                <me>f_i = r_{i,1} \gamma_{i,1} + \cdots + r_{i,n_i} \gamma_{i,n_i}.</me>
                The submodule <m>N</m> of <m>M</m> generated by all the <m>\gamma_{i,j}</m> contains the elements <m>f_1, \ldots, f_n</m>, but since <m>M = Rf_1 + \cdots + Rf_n</m>, we conclude that <m>M</m> is generated by those finitely many <m>\gamma_{i,j}</m>, and thus by a finite subset of <m>\Gamma</m>.
              </p>
  
              <p>
                The other proof is essentially the same, with the appropriate replacements: whenever we talk about a set that generates <m>M</m> as an <m>R</m>-module, we should instead consider a set that generates <m>S</m> as an <m>R</m>-algebra, and instead of taking linear combinations of elements we should consider polynomials in those elements with <m>R</m>-coefficients.
              </p>
            </proof>
          </lemma>

          <lemma xml:id="lem-mod-finite-and-algebra-finite-expressions"><title>Mod Finite and Algebra Finite Expressions</title>
            <statement>
              <p>
                If <m>S</m> is an <m>R</m>-algebra,
              </p>
  
              <p>
                <ol>
                  <li>
                    <m>R \subseteq S</m> is algebra-finite if and only if <m>S = R[f_1, \ldots, f_n]</m> for some <m>f_1, \ldots, f_n \in S</m>.
                  </li>
  
                  <li>
                    <m>R \subseteq S</m> is module-finite if and only if <m>S = R f_1 + \cdots + R f_n</m> for some <m>f_1, \ldots, f_n \in S</m>.
                  </li>
                </ol>
              </p>
            </statement>

            <proof>
              <p>
                <ol>
                  <li>
                    <p>
                      Suppose <m>R\subseteq S</m> is algebra-finite, i.e., <m>S</m> is a finitely generated <m>R</m>-algebra. Then, there exist <m>f_1,\ldots,f_n\in S</m> such that <m>S=R[f_1,\ldots,f_n]</m>. To see this, note that since <m>S</m> is finitely generated over <m>R</m>, we can write <m>S=R[x_1,\ldots,x_m]</m> for some <m>x_1,\ldots,x_m\in S</m>. Then, we can express each <m>x_i</m> as a polynomial in <m>f_1,\ldots,f_n</m> with coefficients in <m>R</m>, so <m>S\subseteq R[f_1,\ldots,f_n]</m>. Conversely, if <m>S=R[f_1,\ldots,f_n]</m> for some <m>f_1,\ldots,f_n\in S</m>, then <m>S</m> is generated over <m>R</m> by <m>f_1,\ldots,f_n</m>, and so <m>S</m> is algebra-finite.
                    </p>
                  </li>
  
                  <li>
                    <p>
                      Suppose <m>R\subseteq S</m> is module-finite, i.e., <m>S</m> is a finitely generated <m>R</m>-module. Then, there exist <m>f_1,\ldots,f_n\in S</m> such that <m>S=Rf_1+\cdots+Rf_n</m>. To see this, note that since <m>S</m> is finitely generated over <m>R</m>, we can write <m>S=Rx_1+\cdots+Rx_m</m> for some <m>x_1,\ldots,x_m\in S</m>. Then, we can express each <m>x_i</m> as a linear combination of <m>f_1,\ldots,f_n</m> with coefficients in <m>R</m>, so <m>S\subseteq R[f_1,\ldots,f_n]</m>. Conversely, if <m>S=Rf_1+\cdots+Rf_n</m> for some <m>f_1,\ldots,f_n\in S</m>, then <m>S</m> is generated over <m>R</m> by <m>f_1,\ldots,f_n</m>, and so <m>S</m> is module-finite.
                    </p>
                  </li>
                </ol>
              </p>
            </proof>
          </lemma>

          <example xml:id="ex-qxxn-not-free-algebra"><title><m>\Q[x]/(x^{n})</m> Not Free Algebra</title>
            <p>
              Given <m>n \geq 2</m>, the <m>\Q</m>-algebra <m>S=\Q[x]/(x^n)</m> is generated as an algebra by the element <m>x</m>. 
              Note, however, that this is not a free <m>\Q</m>-algebra.
            </p>       
          </example>

          <lemma xml:id="lem-module-finite-implies-algebra-finite"><title>Module Finite Implies Algebra Finite</title>
            <statement>
              <p>
                If <m>S</m> is a module-finite <m>R</m>-algebra, then it is also algebra-finite.
              </p>
            </statement>

            <proof>
              <p>
                Let <m>S = R f_1 + \cdots + R f_n</m>, meaning that <m>f_1, \ldots, f_n</m> is a set of module generators for <m>S</m> over <m>R</m>. 
                Note that every <m>R</m>-linear combination of <m>f_1, \ldots, f_n</m> is also an element of <m>R[f_1, \ldots, f_n]</m>, and thus <m>S</m> is a subalgebra of <m>R[f_1, \ldots, f_n]</m>.
              </p>
  
              <p>
                On the other hand, since <m>f_1, \ldots, f_n \in S</m> and <m>S</m> is an <m>R</m>-algebra, every polynomial in <m>f_1, \ldots, f_n</m> with coefficients in <m>R</m> is also in <m>S</m>, and thus <m>S = R[f_1, \ldots, f_n]</m>, so that <m>S</m> is algebra-finite over <m>R</m>.
              </p>
            </proof>
          </lemma>

          <p>
            The converse, however, is false: it is <em>harder</em> to be module-finite than algebra-finite.
          </p>

          <example xml:id="ex-mod-fin-vs-alg-fin"><title></title>
            <p>
              <ol>
                <li>
                  <p>
                    The Gaussian integers <m>\Z[i]</m> <idx><h>Gaussian integers</h></idx> satisfy the well-known property (or definition, depending on your source) that any element <m>z\in\Z[i]</m> admits a unique expression <m>z=a+bi</m> with <m>a,b\in \Z</m>. 
                    That is, <m>\Z[i]</m> is generated as a <m>\Z</m>-module by <m>\{1,i\}</m>; 
                    moreover, <m>\{1,i\}</m> is a free module basis! 
                    As a <m>\Z</m>-algebra, <m>\Z[i]</m> is generated by <m>i</m>, but it is not a free <m>\Z</m>-algebra, since <m>i^2 -1 = 0</m>.
                  </p>
                </li>

                <li>
                  <p>
                    If <m>R</m> is a ring and <m>x</m> an indeterminate, the algebra-finite extension <m>R\subseteq R[x]</m> is not module-finite. Indeed, <m>R[x]</m> is a free <m>R</m>-module on the basis <m>\{1,x,x^2,x^3,\dots\}</m>.

                  </p>
                </li>

                <li>
                  <p>
                    Another map that is <em>not</em> module-finite is the inclusion <m>R := k[x] \subseteq k[x,\frac{1}{x}] =: S</m>. First, note that any element of <m>k[x,\frac{1}{x}]</m> can be written in the form <m>\frac{f(x)}{x^n}</m> for some <m>f \in k[x]</m> and some <m>n \geqslant 0</m>. Now any finitely generated <m>R</m>-submodule of <m>S</m> is of the form <me>M = \sum_i R \cdot \frac{f_i(x)}{x^{n_i}} = \sum_i k[x] \cdot \frac{f_i(x)}{x^{n_i}}.</me>If <m>n := \max \{ n_i \}_i</m>, then <m>M \subseteq \frac{1}{x^n} k[x] \neq k[x,\frac{1}{x}] = S</m>.
                  </p>
                </li>

                <li>
                  <p>
                    The extension <m>\Z \subseteq \Q</m> is neither module-finite nor algebra-finite. To see that, we first claim that the set 
                    <me>
                      P = \left\lbrace \frac{1}{p} \mid p \textrm{ prime integer} \right\rbrace
                    </me> 
                    generates <m>\mathbb{Q}</m> as a <m>\Z</m>-algebra. The key point here is the Fundamental Theorem of Arithmetic: since any positive integer <m>n</m> can be written as a product <m>n = p_1^{a_1} \cdots p_s^{a_s}</m> where the <m>p_i</m> are all prime and the <m>a_i \geqslant 0</m> are nonnegative integers, we see that the rational number <m>\frac{m}{n} \neq 0</m> can be written as 
                    <me>
                      \frac{m}{n} = m \left( \frac{1}{p_1} \right)^{a_1} \cdots \left( \frac{1}{p_s} \right)^{a_s} \in \Z \left[ \frac{1}{p_1}, \ldots, \frac{1}{p_s} \right] \subseteq \Z[P].
                    </me>
                    On the other hand, note that any finite subset of <m>P</m> is contained in 
                    <me>
                      \left\lbrace \frac{1}{p} \mid p \leqslant q \textrm{ prime integer} \right\rbrace
                    </me> 
                    for some fixed prime <m>q</m>, and that 
                    <me>
                      \Z \left[ \frac{1}{p} \mid p \leqslant q \textrm{ is prime} \right]
                    </me> 
                    contains only rational numbers whose denominator is a product of primes smaller than <m>q</m>. But there are infinitely many primes, and thus this cannot be all of <m>\Q</m>. By this <xref provisional="lem-subsets-of-generating-sets"/>, we can conclude that <m>\Q</m> is not a algebra-finite over <m>\Z</m>. But then <m>\Q</m> cannot be module-finite over <m>\Z</m> by <xref provisional="lem-module-finite-implies-algebra-finite"/>.
                  </p>
                </li>
              </ol>
            </p>
          </example>
      
          <lemma xml:id="lem-compositions-preserve-module-finite"><title>Compositions Preserve Module Finite</title>
            <statement>       
              <p>If <m>R\subseteq S</m> is module-finite and <m>N</m> is a finitely generated <m>S</m>-module, then <m>N</m> is a finitely generated <m>R</m>-module by restriction of scalars. In particular, the composition of two module-finite ring maps is module-finite.</p>
            </statement>

            <proof>
              <p>Let <m>S = R a_1 + \cdots + R a_r</m> and <m>N = S b_1 + \cdots + S b_s</m>. Then we claim <me>N=\sum_{i=1}^{r}\sum_{j=1}^{s} R a_i b_j.</me> Indeed, given <m>n = \sum_{j=1}^{s} s_j b_j</m>, rewrite each <m>s_j=\sum_{i=1}^{r} r_{ij} a_{i}</m> and substitute to get <me>n=\sum_{i=1}^{r}\sum_{j=1}^{s} r_{ij} a_i b_j</me> as an <m>R</m>-linear combination of the <m>a_i b_j</m>.</p>
            </proof>
  
          
          </lemma>
  
          <example xml:id="ex-algebra-finite-and-transitivity"><title>Algebra Finite and Transitivity</title>
            <statement>
              <p>
                Let <m>A\subseteq B \subseteq C</m> be rings. It follows from the definitions that 
                
                <ol>
                  <li>
                    <p>
                      If <m>A\subseteq B</m> algebra-finite and <m>B\subseteq C</m> algebra finite, then <m>A\subseteq C</m> algebra finite.
                    </p>
                  </li>

                  <li>
                    <p>
                      <m>A\subseteq C \,\text{algebra-finite} \Longrightarrow B\subseteq C \,\text{algebra-finite}.</m>
                    </p>
                  </li>
                </ol>
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-infinitely-generated-subalgebra"><title>Infinitely Generated Subalgebra</title>
            <statement>
              <p>Let <m>k</m> be a field and <me>B=k[x,xy,xy^2,xy^3,\cdots] \subseteq C=k[x,y],</me>where <m>x</m> and <m>y</m> are indeterminates. While <m>B</m> and <m>C</m> are both <m>k</m>-algebras, <m>C</m> is a finitely generated <m>k</m>-algebra, while <m>B</m> is not.</p>
            </statement>
  
            <solution>
              <p>To see this, first note by this <xref provisional="lem-subsets-of-generating-sets"/> it is sufficient to show that no finite subset of <m>\{ xy^n \mid n \geqslant 1 \}</m> generates <m>B</m> over <m>k</m>. Since any such subset is contained in <m>\{ xy^n \mid 1 \leqslant n \leqslant m \}</m> for some fixed <m>m</m> it is sufficient to show that <m>B</m> is not <m>k[x,xy,\dots,xy^m]</m> for any <m>m</m>. Now note that every element of <m>k[x,xy,\dots,xy^m]</m> is a <m>k</m>-linear combination of monomials <m>x^iy^j</m> with <m>j \leqslant mi</m>, so this ring does not contain <m>xy^{m+1}</m>. Therefore, <m>B</m> is not a finitely generated <m>A</m>-algebra.</p>
            </solution>
          </example>

          <remark>
            <p>
              Let <m>A\subseteq B \subseteq C</m> be rings. It follows from the definitions that 
              
              <ol>
                <li>
                  <p>
                    If <m>A\subseteq B</m> module-finite and <m>B\subseteq C</m> module-finite, then <m>A\subseteq C</m> module-finite.
                  </p>
                </li>

                <li>
                  <p>
                    <m>A\subseteq C \,\text{module-finite} \Longrightarrow B\subseteq C \,\text{module-finite}.</m>
                  </p>
                </li>
              </ol>
            </p>
          </remark>

          <p>However, we will see that <m>A\subseteq C</m> module-finite <m>\not\implies A\subseteq B</m> module-finite. This construction is a bit more involved, so we will leave it for the problem sets.</p>

          <remark>
            <p>
              Any surjective ring homomorphism <m>\varphi\!: R \to S</m> is both algebra-finite and module-finite, since <m>S</m> must then be generated over <m>R</m> by <m>1</m>. Moreover, we can always factor <m>\varphi</m> as the surjection 
              <!--$\xymatrix{R \ar@{->>}[r] & R/\ker (\varphi)}$-->
              <m>R\into R/\ker(\varphi)</m>
              followed by the inclusion <m>R/\ker (\varphi) \hookrightarrow S</m>, so to understand algebra-finiteness or module-finiteness it suffices to restrict our attention to injective homomorphisms.
            </p>
          </remark>
      
        </section>

        <section xml:id="sec-noetherian"><title>Noetherian Rings</title>

          <introduction>
            <blockquote>
              <p>
                <q>It is worth ascending unexiting heights if for nothing else than to see the big ones from nearer their own level.</q>
              </p>
              <attribution>Nan Shepherd</attribution>
            </blockquote>
          </introduction>

          <subsection xml:id="subsec-noetherian-rings"><title>Noetherian Rings</title>

            <p>
              Most rings that commutative algebraists naturally want to study are noetherian. Noetherian rings are named after Emmy Noether, who is in many ways the mother of modern commutative algebra.
            </p>
        
            <definition xml:id="defn-noetherian-ring"><title>Noetherian Ring</title>
            <idx><h>noetherian ring</h></idx>
            <statement>
              <p>
                Suppose <m>R</m> is a commutative ring. Then <m>R</m> is called a <em>noetherian ring</em> if <m>R</m> satisfies the ascending chain condition on ideals - i.e., for every chain of ideals of <m>R</m> <me>I_1 \subseteq I_2  \subseteq I_3 \subseteq \cdots</me> there exists a positive integer <m>n</m> such that <m>I_n = I_{n+1} = I_{n+2} = \cdots=I_{n+k}</m> for all <m>k\geq 0</m>.
              </p>
            </statement>

            </definition>

            <proposition xml:id="prop-equivalent-noetherian-ring-definitions"><title>Equivalent Noetherian Ring Definitions</title>
              <statement>
                <p>
                  Let <m>R</m> be a ring. The following are equivalent:
                </p>

                <p>
                  <ol>
                    <li>
                      <m>R</m> is a noetherian ring.
                    </li>

                    <li>
                      Every nonempty family of ideals has a maximal element (under <m>\subseteq</m>).
                    </li>

                    <li>
                      Every ascending chain of finitely generated ideals of <m>R</m> stabilizes.
                    </li>

                    <li>
                      Given any generating set <m>S</m> for an ideal <m>I</m>, <m>I</m> is generated by a finite subset of <m>S</m>.
                    </li>

                    <li>
                      Every ideal of <m>R</m> is finitely generated.
                    </li>
                  </ol>
                </p>
              </statement>

              <proof>
                <p>
                  (1)<m>\Rightarrow</m>(2): 
                  Suppose there is a nonempty family of ideals with no maximal element. 
                  This means that we can keep inductively choosing larger ideals from this family to obtain an infinite properly ascending chain, so <m>R</m> is not noetherian.
                </p>

                <p>
                  (2)<m>\Rightarrow</m>(1): 
                  An ascending chain of ideals is a family of ideals, and the maximal ideal in the family indicates where our chain stabilizes.
                </p>

                <p>
                  (1)<m>\Rightarrow</m>(3): 
                  Contained within the definition of a noetherian ring.
                </p>

                <p>
                  (3)<m>\Rightarrow</m>(4): 
                  Suppose that there is an ideal <m>I</m> and a generating set <m>S</m> for <m>I</m> such that no finite subset of <m>S</m> generates <m>I</m>. 
                  So for any finite <m>S'\subseteq S</m> we have <m>(S') \subsetneq (S) =I</m>, so there is some <m>s \in S \setminus (S').</m> 
                  Thus, <m>(S') \subsetneq (S' \cup \{s\})</m>. 
                  Inductively, we can continue this process to obtain an infinite proper chain of finitely generated ideals, so (c) does not hold.
                </p>

                <p>
                  (4)<m>\Rightarrow</m>(5): 
                  This is the definition of being finitely generated.
                </p>

                <p>
                  (5)<m>\Rightarrow</m>(1): 
                  Given an ascending chain of ideals 
                  <me>I_1 \subseteq I_2 \subseteq I_3 \subseteq \cdots</me> 
                  let <m>I=\bigcup_{n\in \N} I_n</m>. In general, the union of two ideals might fail to be an ideal, but the union of a chain of ideals is an ideal (exercise). 
                  By assumption, the ideal <m>I</m> is finitely generated, say <m>I=(a_1,\dots,a_t)</m>.
                  Now since each <m>a_i</m> is in <m>I</m>, it must be in some <m>I_{n_i}</m>, by definition. 
                  Thus for any <m>N \geqslant \max n_i</m>, we have <m>a_1, \ldots, a_t \in I_N</m>. 
                  But then <m>I_N=I</m>, and thus <m>I_n = I_{n+1}</m> for all <m>n \geqslant N</m>. 
                  Thus the original chain stabilizes, and <m>R</m> is noetherian.
                </p>
              </proof>
            </proposition>
            
            <remark>
              <p>
                When we say that every non-empty family of ideals has a maximal element, that maximal element does not have to be unique in any way. 
                An ideal <m>I</m> is maximal in the family <m>\mathcal{F}</m> if <m>I \subseteq J</m> for some <m>J \in \mathcal{F}</m> implies <m>I = J</m>. 
                However, we might have many incomparable maximal elements in <m>\mathcal{F}</m>. 
                For example, every element in the family of ideals in <m>\mathbb{Z}</m> given by 
                <me>\mathcal{F} = \lbrace (p) \mid p \textrm{ is a prime integer} \rbrace</me>
                is maximal.
              </p>
            </remark>

            <remark>
              <p>
                If <m>R</m> is a noetherian ring and <m>S</m> is a non-empty set of ideals in <m>R</m>, not only does <m>S</m> have a maximal element, but every element in <m>S</m> must be contained in a maximal element of <m>S</m>. 
                Given an element <m>I \in S</m>, the subset <m>T</m> of <m>S</m> of ideals in <m>S</m> that contain <m>I</m> is nonempty, and must then contain a maximal element <m>J</m> by . 
                If <m>J \subseteq L</m> for some <m>L \in S</m>, then <m>I \subseteq L</m>, so <m>L \in T</m>, and thus by maximality of <m>J</m> in <m>T</m>, we must <m>J = L</m>. 
                This proves that <m>J</m> is in fact a maximal element in <m>S</m>, and by construction it contains <m>I</m>.
              </p>
            </remark>

            <example xml:id="ex-noetherian-examples"><title>Noetherian Rings</title>
              <statement>
                <p>
                  <ol>
                    <li>
                      <p>
                        If <m>R=k</m> is a field, the only ideals in <m>k</m> are <m>(0)</m> and <m>(1)=k</m>, so <m>k</m> is a noetherian ring.
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>\mathbb{Z}</m> is a noetherian ring, since all ideals are principal. 
                        More generally, if <m>R</m> is a PID, then <m>R</m> is noetherian. 
                        Indeed, every ideal is finitely generated!
                      </p>
                    </li>

                    <li>
                      <p>
                        As a special case of the previous example, consider the ring of germs of complex analytic functions near <m>0</m>, <idx><h><m>\C\{z\}</m></h></idx>
                        <me>\C\{z\} := \{ f(z) \in \CC[[z]] \ | \ f \text{ is analytic on a neighborhood of }z=0\}.</me>
                        This ring is a PID: every ideal is of the form <m>(z^n)</m>, since any <m>f\in \CC\{z\}</m> can be written as <m>z^n g(z)</m> for some <m>g(z)\neq 0</m>, and any such <m>g(z)</m> is a unit in <m>\C\{z\}</m>.
                      </p>
                    </li>

                    <li>
                      <p>
                        A ring that is not noetherian is a polynomial ring in infinitely many variables over a field <m>k</m>, <m>R = k[x_1, x_2, \ldots]</m>: the ascending chain of ideals 
                        <me>(x_1)\subseteq (x_1,x_2) \subseteq (x_1,x_2,x_3) \subseteq \cdots</me>
                        does not stabilize.
                      </p>
                    </li>

                    <li>
                      <p>
                        The ring <m>R=k[x,x^{1/2},x^{1/3},x^{1/4},x^{1/5},\dots]</m> is not noetherian. 
                        A nice ascending chain of ideals is 
                        <me>(x) \subsetneq (x^{1/2}) \subsetneq (x^{1/3})\subsetneq (x^{1/4}) \subsetneq \cdots.</me>
                      </p>
                    </li>

                    <li>
                      <p>
                        The ring of continuous real-valued functions <m>\mathcal{C}(\R,\R)</m> is not noetherian. 
                        The chain of ideals 
                        <me>I_{n}=\{ f(x) \in \mathcal{C}(\R,\R) \ | \ f|_{[-1/n,1/n]}\equiv 0 \}</me> 
                        is increasing and proper. 
                        The same construction shows that the ring of infinitely differentiable real functions <m>\mathcal{C}^{\infty}(\R,\R)</m> is not noetherian: properness of the chain follows from, e.g., Urysohn's lemma 
                        (though it's not too hard to find functions distinguishing the ideals in the chain). 
                        Note that if we asked for analytic functions instead of infinitely-differentiable functions, every element of the chain would be the zero ideal!
                        <idx><h><m>\mathcal{C}(\R,\R)</m></h></idx>
                        <idx><h><m>\mathcal{C}^{\infty}(\R,\R)</m></h></idx>
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
            </example>

            <lemma xml:id="lem-quotient-noetherian"><title>Quotient Noetherian</title>
              <statement>
                <p>
                  Let <m>R</m> be a ring and <m>I</m> an ideal in <m>R</m>. 
                  If <m>R</m> is noetherian, then so is <m>R/I</m>.
                </p>
              </statement>

              <proof>
                <p>
                  There is an order preserving bijection 
                  <me>\{ \text{ideals of } R \text{ that contain } I \} \longleftrightarrow \{\text{ideals of }R/I\}</me> 
                  that sends the ideal <m>J \supseteq I</m> to <m>J/I</m>; 
                  its inverse is the map that sends each ideal in <m>R/I</m> to its preimage. 
                  Given this bijection, chains of ideals in <m>R/I</m> come from chains of ideals in <m>R</m> that contain <m>J</m>. 
                  This implies that if <m>R</m> is noetherian, then <m>R/I</m> is noetherian as well.
                </p>
              </proof>
            </lemma>

            <p>
              This gives us many more examples of noetherian rings, by simply taking quotients of the examples above. 
              We will soon show that any polynomial ring over a noetherian ring is also noetherian; 
              as a consequence, we obtain that any quotient of a polynomial ring over a field is noetherian. 
              This is the content of Hilbert's Basis Theorem.
            </p>

            <p>
              But first, we need to talk about noetherian modules.
            </p>

          </subsection>

          <subsection xml:id="subsec-noetherian-modules"><title>Noetherian Modules</title>
            
            <definition xml:id="defn-noetherian-module"><title>Noetherian Module</title>
              <statement>
                <p>
                  An <m>R</m>-module <m>M</m> is <em>noetherian</em> if every ascending chain of submodules of <m>M</m> eventually stabilizes.
                  <idx><h>noetherian module</h></idx>
                </p>
              </statement>
            </definition>
    
            <proposition xml:id="prop-equivalent-definitions-for-noetherian-module"><title>Equivalent Definitions for Noetherian Module</title>
              <statement>
                <p>
                  Let <m>M</m> be an <m>R</m>-module. 
                  The following are equivalent: 
                  <ol>
                    <li>
                      <p>
                        <m>M</m> is a noetherian module. 
                      </p>
                    </li>

                    <li>
                      <p>
                        Every nonempty family of submodules has a maximal element. 
                      </p>
                    </li>

                    <li>
                      <p>
                        Every ascending chain of finitely generated submodules of <m>M</m> eventually stabilizes. 
                      </p>
                    </li>

                    <li>
                      <p>
                        Given any generating set <m>S</m> for a submodule <m>N</m>, the submodule <m>N</m> is generated by a finite subset of <m>S</m>. 
                      </p>
                    </li>

                    <li>
                      <p>
                        Every submodule of <m>M</m> is finitely generated. 
                        In particular, a noetherian module must be finitely generated.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
            </proposition>
    
            <example xml:id="ex-noetherian-ring-iff-noetherian-module-over-itself"><title>Noetherian Ring iff Noetherian Module over Itself</title>
              <statement>
                <p>
                  A ring <m>R</m> is a noetherian ring if and only if <m>R</m> is noetherian as a module over itself.
                </p>
              </statement>
            </example>
    
            <example xml:id="ex-noeth-ring-not-noeth-mod-over-subring"><title>Noeth Ring Not Noeth Mod over Subring</title>
              <statement>
                <p>
                  A noetherian ring need not be a noetherian module over a subring.
                </p>

                <p>
                  For example, consider <m>\Z\subseteq \Q</m>. 
                  These are both noetherian rings but <m>\Q</m> is not a noetherian <m>\Z</m>-module; 
                  for example, the following is an ascending chain of submodules which does not stabilize: 
                  <me>0 \subsetneq \frac{1}{2} \Z \subsetneq \frac{1}{2} \Z + \frac{1}{3} \Z \subsetneq \frac{1}{2} \Z + \frac{1}{3} \Z + \frac{1}{5} \Z \subsetneq \cdots .</me>
                </p>
              </statement>
            </example>
    
            <lemma xml:id="lem-noetherianity-in-exact-sequences"><title>Noetherianity in Exact Sequences</title>
              <statement>
                <p>
                  In an exact sequence of modules 
                  <me>\begin{CD}
                  0@&gt;&gt;&gt;A@&gt;f&gt;&gt;B@&gt;g&gt;&gt;C@&gt;&gt;&gt;0
                  \end{CD}</me>
                  <m>B</m> is noetherian if and only if <m>A</m> and <m>C</m> are noetherian.
                </p>
              </statement>
    
              <proof>
                <p>
                  Assume <m>B</m> is noetherian. 
                  Since <m>A</m> is a submodule of <m>B</m>, and its submodules are also submodules of <m>B</m>, <m>A</m> is noetherian. 
                  Moreover, any submodule of <m>B/A</m> is of the form <m>D/A</m> for some submodule <m>D \supseteq A</m> of <m>B</m>. 
                  Since every submodule of <m>B</m> is finitely generated, every submodule of <m>C</m> is also finitely generated. 
                  Therefore, <m>C</m> is noetherian.
                </p>
    
                <p>
                  Conversely, assume that <m>A</m> and <m>C</m> are noetherian, and let 
                  <me>M_1 \subseteq M_2 \subseteq M_3 \subseteq \cdots</me> 
                  be a chain of submodules of <m>B</m>. 
                  First, note that 
                  <me>M_1 \cap A \subseteq M_2 \cap A \subseteq \cdots</me> 
                  is an ascending chain of submodules of <m>A</m>, and thus it stabilizes. 
                  Moreover, 
                  <me>g(M_1) \subseteq g(M_2) \subseteq g(M_3) \subseteq \cdots</me> 
                  is a chain of submodules of <m>C</m>, and thus it also stabilizes. 
                  Pick a large enough index <m>n</m> such that both of these chains stabilize. 
                  We claim that <m>M_n = M_{n+1}</m>, so that the original chain stabilizes as well. 
                  To show that, take <m>x \in M_{n+1}</m>. 
                  Then <me>g(x) \in g(M_{n+1}) = g(M_n)</me> so we can choose some <m>y \in M_n</m> such that <m>g(x) = g(y)</m>. 
                  Then <m>x-y \in \ker g = \im f = A</m>. 
                  Now note that <m>y \in M_n \subseteq M_{n+1}</m>, so <m>x-y \in M_{n+1}</m>, and thus 
                  <me>x-y \in M_{n+1} \cap A = M_n \cap A.</me> 
                  Then <m>x-y \in M_n</m>, and since <m>y \in M_n</m>, we must have <m>x \in M_n</m> as well.
                </p>
              </proof>
            </lemma>
    
            <corollary xml:id="cor-direct-sums-are-noetherian"><title>Direct Sums are Noetherian</title>
              <statement>
                <p>
                  If <m>A</m> and <m>B</m> are noetherian <m>R</m>-modules, then <m>A \oplus B</m> is a noetherian <m>R</m>-module.
                </p>
              </statement>
    
              <proof>
                <p>
                  Apply <xref ref="lem-noetherianity-in-exact-sequences"/> to the short exact sequence 
                  <me>
                    \begin{CD}
                    0@&gt;&gt;&gt;A@&gt;&gt;&gt;A\oplus B@&gt;&gt;&gt;B@&gt;&gt;&gt;0
                    \end{CD}
                  </me>
                </p>
              </proof>
            </corollary>
    
            <corollary xml:id="cor-module-powers-are-noetherian"><title>Module Powers are Noetherian</title>
              <statement>
                <p>
                  A module <m>M</m> is noetherian if and only if <m>M^n</m> is noetherian for some <m>n</m>. 
                  In particular, if <m>R</m> is a noetherian ring then <m>R^n</m> is a noetherian module.
                </p>
              </statement>
    
              <proof>
                <p>
                  We will do induction on <m>n</m>. 
                  The case <m>n=1</m> is a tautology. 
                  For <m>n&gt;1</m>, consider the short exact sequence 
                  <me>
                    \begin{CD}
                    0@&gt;&gt;&gt;M^{n-1}@&gt;&gt;&gt;M^{n}@&gt;g&gt;&gt;M@&gt;&gt;&gt;0
                    \end{CD}
                  </me> 
                  <xref ref="lem-noetherianity-in-exact-sequences"/> and the inductive hypothesis give the desired conclusion.
                </p>
    
              </proof>
            </corollary>
    
            <proposition xml:id="prop-submodule-of-f.g.-module-f.g."><title>Submodule of F.G. Module F.G</title>
              <statement>
                <p>
                  Let <m>R</m> be a noetherian ring. 
                  Given an <m>R</m>-module <m>M</m>, <m>M</m> is a noetherian <m>R</m>-module if and only if <m>M</m> is finitely generated. 
                  Consequently, any submodule of a finitely generated <m>R</m>-module is also finitely generated.
                </p>
              </statement>
    
              <proof>
                <p>
                  If <m>M</m> is noetherian, <m>M</m> is finitely generated, and so are all of its submodules.
                </p>
    
                <p>
                  Now let <m>R</m> be noetherian and <m>M</m> be a finitely generated <m>R</m>-module. 
                  Then <m>M</m> is isomorphic to a quotient of <m>R^n</m> for some <m>n</m>, which is noetherian by <xref ref="cor-module-powers-are-noetherian"/>  and <xref ref="lem-quotient-noetherian"/>.
                </p>
              </proof>
            </proposition>
    
            <example xml:id="ex-noetherian-required-for-noetherian-f.g."><title>Noetherian Required for Noetherian F.G</title>
              <statement>
                <p>
                  If <m>R</m> is a non-noetherian ring and <m>M</m> is a finitely generated <m>R</m>-module, <m>M</m> might not be noetherian.
                </p>
              </statement>
    
              <solution>
                <p>
                  For a dramatic example, note that <m>R</m> itself is a finitely generated <m>R</m>-module, but not noetherian.
                </p>
              </solution>
            </example>
          </subsection>

          <subsection xml:id="subsec-hilbert"><title>Hilbert's Basis Theorem</title>

            <p>
              Now we are ready to prove Hilbert's Basis Theorem. 
              David Hilbert was a big influence in the early years of commutative algebra, in many different ways. 
              Emmy Noether's early work in algebra was in part inspired by some of his work, and he later invited her to join the Göttingen Math Department — many of her amazing contributions to algebra happened during her time in Göttingen. 
              Unfortunately, some of the faculty opposed a woman joining the department, and for her first two years in Göttingen, Noether did not have an official position nor was she paid. 
              Hilbert's contributions also include three of the most fundamental results in commutative algebra — Hilbert's Basis Theorem, the Hilbert Syzygy Theorem, and Hilbert's Nullstellensatz.
            </p>
        
            <theorem xml:id="hilbert-basis-theorem"><title>Hilbert's Basis Theorem</title>
              <statement>   
                <p>
                  If <m>R</m> is a noetherian ring, then the polynomial rings <m>R[x_1,\dots,x_d]</m> and <m>R[[ x_1,\dots,x_d]]</m> are noetherian for any <m>d \geqslant 1</m>.
                </p>
              </statement>
    
              <proof>
                <p>
                  We will give the proof for polynomial rings, and at the end we will indicate what the difference is in the argument for the power series ring case. 
                  First, note that by induction on <m>d</m>, we can reduce to the case <m>d=1</m>.
                </p>
    
                <p>
                  Given an ideal <m>I\subseteq R[x]</m>, consider the set of leading coefficients of all polynomials in <m>I</m>, 
                  <me>J :=  \{ a \in R \ \mid  \ \textrm{there is some } a x^n + \text{lower order terms (with respect to }x) \in I\}.</me> 
                  By the <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Exercise - Hilbert Basis Lemma|Hilbert Basis Lemma]], we see that this is an ideal of <m>R</m>. 
                  Since <m>R</m> is noetherian, <m>J</m> is finitely generated, so let <m>J = (a_1,\dots,a_t)</m>. Pick <m>f_1,\dots,f_t\in R[x]</m> such that the leading coefficient of <m>f_i</m> is <m>a_i</m>, and set <m>N=\displaystyle\max_i \{\deg{f_i} \}</m>.
                </p>
    
                <p>
                  Let <m>f \in I</m>. 
                  The leading coefficient of <m>f</m> is an <m>R</m>-linear combination of <m>a_1, \ldots, a_t</m>. 
                  If <m>f</m> has degree greater than <m>N</m>, then we can cancel off the leading term of <m>f</m> by subtracting a suitable combination of the <m>f_i</m>. 
                  Therefore, any <m>f \in I</m> can be written as <m>f = g+ h</m> for some <m>h \in (f_1, \ldots, f_t)</m> and <m>g \in I</m> with degree at most <m>N</m>. 
                  In particular, note that 
                  <me>g \in I \cap \frac{R + Rx + \cdots + R x^N}.</me>
                  Since <m>I \cap (R + Rx + \cdots + R x^N)</m> is a submodule of the finitely generated free <m>R</m>-module <m>R + Rx + \cdots + R x^N</m>, it must also be finitely generated as an <m>R</m>-module. 
                  Given such a generating set, say <m>I \cap (R + Rx + \cdots + Rx^N) = (f_{t+1}, \ldots, f_s)</m>, we can write any element <m>f \in I</m> as an <m>R[x]</m>-linear combination of these generators <m>f_{t+1}, \ldots, f_s</m> and the original <m>f_{1}, \ldots, f_t</m>. 
                  Therefore, <m>I = (f_1, \ldots, f_t, f_{t+1}, \ldots, f_s)</m> is finitely generated as an ideal in <m>R[x]</m>, and <m>R[x]</m> is a noetherian ring.
                </p>
    
                <p>
                  In the power series case, take <m>J</m> to be the set of coefficients of lowest degree terms.
                </p>
              </proof>
            </theorem>

            <remark>
              <p>
                We can rephrase <xref text="title" ref="hilbert-basis-theorem"/> in a way that can be better understood by those with high school algebra (as opposed to abstract algebra) knowledge:
              </p>
    
              <blockquote>
                <p>
                  Any system of polynomial equations in finitely many variables can be written in terms of finitely many equations.
                </p>
              </blockquote>
            </remark>

            <p>
              Finally, note that a standard corollary of <xref text="title" ref="hilbert-basis-theorem"/> is that finitely generated algebras over noetherian rings are also noetherian.
            </p>
    
            <corollary xml:id="cor-f.g.-algebras-over-noeth-rings-are-noeth"><title>F.G. Algebras over Noeth Rings are Noeth</title>
              <statement>
                <p>
                  If <m>R</m> is a noetherian ring, then any finitely generated <m>R</m>-algebra is noetherian. 
                  In particular, any finitely generated algebra over a field is noetherian.
                </p>
              </statement>
    
              <proof>
                <p>
                  Any finitely generated <m>R</m>-algebra is isomorphic to a quotient of a polynomial ring over <m>R</m> in finitely many variables; 
                  polynomial rings over noetherian rings are noetherian by the <xref text="title" ref="hilbert-basis-theorem"/>, and quotients of noetherian rings are noetherian.
                </p>
              </proof>
            </corollary>

            <remark>
              <p>
                The converse to this statement is false: there are lots of noetherian rings that are not finitely generated algebras over a field. 
                For example, <m>\C\{z\}</m> is not algebra-finite over <m>\C</m>. 
                We will see more examples of these when we talk about local rings.
              </p>
            </remark>

            <p>
              Finally, we can now prove a technical sounding result that puts together all our finiteness conditions in a useful way.
            </p>
    
            <theorem xml:id="thm-artin-tate-lemma"><title>Artin-Tate Lemma</title>   
              <statement>               
                <p>
                  Let <m>A\subseteq B \subseteq C</m> be rings. 
                  Assume that 
                  <ul>
                    <li>
                      <p>
                        <m>A</m> is noetherian, 
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>C</m> is module-finite over <m>B</m>, and 
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>C</m> is algebra-finite over <m>A</m>. Then, <m>B</m> is algebra-finite over <m>A</m>.
                      </p>
                    </li>
                  </ul>
                </p>
              </statement>
    
              <proof>
                <p>
                  Let <m>C=A[f_1,\dots,f_r]</m> and <m>C=B g_1 + \cdots + B g_s</m>. 
                  Then, 
                  <me>f_i = \sum_j b_{ij} g_j \quad \text{and} \quad g_i g_j = \sum_k b_{ijk} g_k</me> 
                  for some <m>b_{ij}, b_{ijk}\in B</m>. 
                  Let <m>B_0 = A[\{b_{ij}, b_{ijk}\}] \subseteq B</m>. 
                  This is a finitely generated <m>A</m>-algebra; by this <xref ref="cor-f.g.-algebras-over-noeth-rings-are-noeth"/>, since <m>A</m> is noetherian, so is <m>B_0</m>.
                </p>
    
                <p>
                  We claim that <m>C=B_0 \, g_1 + \cdots + B_0 g_s</m>. 
                  Given an element <m>c\in C</m>, write <m>c</m> as a polynomial expression in <m>f_1, \ldots, f_r</m>. 
                  Since the <m>f_i</m> are linear combinations of the <m>g_i</m> with coefficients in the <m>b_{ij},</m> we have <m>c\in A[\{b_{ij}\}][g_1,\dots,g_s]</m>. 
                  Then using the equations for <m>g_i g_j</m> repeatedly, we can rewrite <m>c</m> as a linear combination of the <m>g_i</m> with coefficients in <m>B_0</m>.
                </p>
    
                <p>
                  Since <m>B_0</m> is noetherian and <m>C</m> is a finitely generated <m>B_0</m>-module, <m>C</m> is a noetherian <m>B_0</m>-module, by <xref ref="prop-submodule-of-f.g.-module-f.g."/>. 
                  Since <m>B\subseteq C</m>, then <m>B</m> is also a finitely generated <m>B_0</m>-module. 
                  In particular, <m>B_0 \subseteq B</m> is algebra-finite. 
                  Since <m>A \subseteq B_0</m> is algebra-finite, we conclude that <m>A \subseteq B</m> is algebra-finite, as required.
                </p>    
              </proof>
            </theorem>
            
          </subsection>

        </section>

        <section xml:id="sec-inv-rings-1"><title>Invariant Rings: Application I</title>
          
          <blockquote>
            <p>
              <q>No taxation without representation!</q>
            </p>
            <attribution>James Otis</attribution>
          </blockquote>

          <p>
            Historically, commutative algebra has roots in classical questions of algebraic and geometric flavors, including the following natural question:
          </p>

          <question xml:id="question">
            <p>
              Given a (finite) set of symmetries, consider the collection of polynomial functions that are fixed by all of those symmetries. 
              Can we describe all the fixed polynomials in terms of finitely many of them?
            </p>
          </question>

          <p>
            To make this precise, let <m>G</m> be a group acting on a ring <m>R</m>. 
            The main case we have in mind is when <m>R=k[x_1,\dots,x_d]</m> and <m>k</m> is a field; 
            we let <m>G</m> act trivially on <m>k</m>, and the action respects the sum and product in the ring:
            <me>g \cdot \left( \sum_{a} c_{a} x_1^{a_1} \cdots x_d^{a_d} \right) = \sum_{a} c_{a} (g \cdot x_1)^{a_1} \cdots (g \cdot x_d)^{a_d}.</me>
            We are interested in the set of elements that are {\bf invariant} under the action,
            <me>R^G : = \{ r \in R \ | \ g(r) = r \ \text{for all} \ g\in G\}.</me>
            Note that <m>R^G</m> is a subring of <m>R</m>. Indeed, given <m>r,s\in R^G</m>, then
            <me>r+s=g \cdot r + g \cdot s = g \cdot (r+s) \quad \text{and}\quad r s = (g \cdot r) (g \cdot s) = g \cdot (rs) \qquad \text{for all} \ g\in G,</me>
            since each <m>g</m> is a homomorphism. 
            Note also that if <m>G=\langle g_1,\dots,g_t\rangle</m>, then <m>r\in R^G</m> if and only if <m>g_i(r)=r</m> for <m>i=1,\dots,t</m>.
            The question above can now be rephrased as follows:
            <idx><h>invariant</h></idx>
            <idx><h><m>R^G</m></h></idx>
          </p>
            
          <question xml:id="question-1">
            <p>
              Given a finite group <m>G</m> acting on <m>R=k[x_1,\dots,x_d]</m>, is <m>R^G</m> a finitely generated <m>k</m>-algebra?
            </p>
          </question>

          <p>
            Note that <m>R^G</m> is a <m>k</m>-subalgebra of <m>R</m>. Even though <m>R</m> is a finitely generated <m>k</m>-algebra, this does not guarantee a priori that <m>R^G</m> is a finitely generated <m>k</m>-algebra --- recall \Cref{inf gen subalg} <xref provisional="cite"/>, where we saw a subalgebra of a finitely generated algebra which is nevertheless not finitely generated.
          </p>
  
          <example xml:id="ex-root-of-unity-invariants"><title>Root of Unity Invariants</title>
            <p>
              Consider the group with two elements <m>G=\{e,g\}</m>. 
              To define an action of <m>G</m> on <m>R=k[x]</m>, we need only to define <m>g \cdot x</m>, since <m>e</m> is the identity and <m>g</m> acts linearly. 
              Consider the action of <m>G</m> on <m>R=k[x]</m> given by <m>g \cdot x = -x</m>, so <m>g \cdot f(x) = f(-x)</m>. 
              Suppose that the characteristic of <m>k</m> is not 2, so <m>-1 \neq 1</m>. 
              Write <m>f= a_n x^n + a_{n-1} x^{n-1} + \cdots + a_0</m>. 
              We have <m>g \cdot x^i=(-x)^i = (-1)^i x^i</m>, so 
              <me> g\cdot f = (-1)^n a_n x^n+ (-1)^{n-1} a_{n-1} x^{n-1} +  \cdots  + a_0,</me>
              which differs from <m>f</m> unless for each odd <m>i</m>, <m>a_i=0</m>. 
              That is, [ R^G = { f R  |  }.] Any such <m>f</m> is a polynomial in <m>x^2</m>, so we have 
              <me>R^G = k[x^2].</me>
              In particular, <m>R^G</m> is a finitely generated <m>k</m>-algebra.
            </p>
          </example>
  
          <example xml:id="ex-veronese-subring"><title>Veronese Subring</title>
            <p>
              Generalize the last example as follows: let <m>k</m> be a field with a primitive <m>d</m>th root of unity <m>\zeta</m>, and let <m>G= \langle g \rangle \cong C_d</m> act on <m>R = k[x_1,\dots,x_n]</m> via <m>g \cdot x_i = \zeta x_i</m> for all <m>i</m>. 
              Then 
              <me>R^G = \{ f \in R \ | \ \text{every term of $f$ has degree a multiple of $d$}\} = k[\{ \text{monomials of degree d}\}].</me> 
              This what is known as the Veronese subring of <m>R</m> of degree <m>d</m>.
            </p>
          </example>
  
          <example xml:id="ex-standard-rep-of-sn"><title>Standard Representation of the Symmetric Group</title>
            <p>
              Let <m>S_n</m> <idx><h><m>S_n</m></h></idx>be the symmetric group on <m>n</m> letters acting on <m>R=k[x_1,\dots,x_n]</m> via <m>\sigma(x_i)=x_{\sigma(i)}</m>. 
              For example, if <m>n=3</m>, then <m>f=x_1^2+x_2^2+x_3^2</m> is invariant, while <m>g=x_1^2+x_1x_2+x_2^2+x_3^2</m> is not, since swapping 1 with 3 gives a different polynomial.
            </p>
  
            <p>
              You may recall the Fundamental Theorem of Symmetric Polynomials says that every element of <m>R^{S_n}</m> can be written as polynomial expression in the elementary symmetric polynomials
              <md>
                <mrow>e_1 \amp = x_1+\dots +x_n</mrow>
                <mrow>e_2  \amp =\sum x_i x_j</mrow>
                <mrow>\vdots</mrow>
                <mrow>e_n \amp =x_1x_2\cdots x_n.</mrow>
              </md>
              More precisely, <m>R^{S_n} = k[e_1, \ldots, e_n]</m>. 
              For example, <m>f</m> above is <m>e_1^2-2 e_2</m>. 
              In fact, any symmetric polynomial can be written like so in a  way, so <m>R^{S_n}</m> is a free <m>k</m>-algebra.
              So even though we have infinitely many invariant polynomials, we can understand them in terms of only finitely many of them, which are <em>fundamental</em> invariants.
            </p>
          </example>
  
          <proposition xml:id="prop-group-ring-and-automorphisms-mod-fin"><title>Group Ring and Automorphisms Mod-Fin</title>
            <statement>
              <p>
                Let <m>k</m> be a field, <m>R</m> be a finitely generated <m>k</m>-algebra, and <m>G</m> a finite group of automorphisms of <m>R</m> that fix <m>k</m>. 
                Then <m>R^G \subseteq R</m> is module-finite.
              </p>
            </statement>
  
            <proof>
              <p>
                By , integral and algebra-finite implies module-finite, so we will show that <m>R</m> is algebra-finite and integral over <m>R^G</m>.
              </p>
  
              <p>
                First, since <m>k\subseteq R^G</m> and <m>R</m> is generated finitely generated <m>k</m>-algebra, it is generated by the same finite set as an <m>R^G</m>-algebra as well. 
                Thus <m>R^G \subseteq R</m> is algebra-finite.
              </p>
  
              <p>
                To show that <m>R^G \subseteq R</m> is integral, let us first extend the action of <m>G</m> on <m>R</m> to <m>R[t]</m> trivially, meaning that we will let <m>G</m> fix <m>t</m>. 
                Given <m>r\in R</m>, consider the polynomial 
                <me>F_r(t) :=  \prod_{g\in G} (t-g \cdot r) \in R[t].</me> 
                Now <m>G</m> fixes <m>F_r(t)</m>, since for each <m>h \in G</m>, 
                <me>h \cdot F_r(t) = h \prod_{g\in G} (t-g \cdot r) = \prod_{g\in G} (h \cdot t-(hg) \cdot r) = F_r(t)</me> 
                Thus, <m>F_r(t)\in (R[t])^{G}</m>. 
                Notice that <m>(R[t])^G = R^G[t]</m>, since 
                <me>g (a_nt^n + \cdots + a_0) = a_nt^n + \cdots + a_0 \implies (g \cdot a_n)t^n + \cdots + (g \cdot a_0) = a_nt^n + \cdots + a_0.</me> 
                Therefore, <m>F_r(t) \in R^G[t]</m>. 
                The leading term (with respect to <m>t</m>) of <m>F_r(t)</m> is <m>t^{|G|}</m>, so <m>F_r(t)</m> is monic. 
                On the other hand, one of the factors of <m>F_r(t)</m> is <m>(t-r)</m>, so <m>F_r(r) = 0</m>. 
                Therefore, <m>r</m> satisfies a monic polynomial with coefficients in <m>R^G</m>, and thus <m>R</m> is integral over <m>R^G</m>.
              </p>
            </proof>
          </proposition>
  
          <theorem xml:id="thm-noethers-finiteness-theorem"><title>Noether's Finiteness Theorem</title>
            <statement>      
              <p>
                Let <m>k</m> be a field, <m>R</m> be a polynomial ring over <m>k</m>, and <m>G</m> be a finite group acting <m>k</m>-linearly on <m>R</m>. 
                Then <m>R^G</m> is a finitely generated <m>k</m>-algebra.
              </p>
            </statement>
  
            <proof>
              <p>
                Observe that <m>k \subseteq R^G \subseteq R</m>, that <m>k</m> is noetherian, <m>k\subseteq R</m> is algebra-finite, and <m>R^G\subseteq R</m> is module-finite.
                The desired result is now a corollary of the <xref text="title" ref="thm-artin-tate-lemma"/>.
              </p>
            </proof>
          </theorem>

        </section>
  
      </chapter>

      <chapter xml:id="ch-graded-rings"><title>Graded Rings</title>

        <introduction>
          <p>
            The main purpose of this chapter is to set up some background and notation we will use throughout the rest of the course.
          </p>
        </introduction>
  
        <section xml:id="sec-graded-rings"><title>Graded Rings</title>

          <subsection xml:id="subsec-graded-ring"><title>Graded Rings</title>
            
            <blockquote>
              <p>
                <q></q>
              </p>
              <attribution></attribution>
            </blockquote>

            <p>
              When we think of a polynomial ring <m>R</m>, we often think of <m>R</m> with its graded structure, even if we have never formalized what that means. 
              Other rings we have seen also have a graded structure, and this structure is actually very powerful.
            </p>
        
            <definition xml:id="defn-graded-ring"><title>Graded Ring</title>
              <statement>
                <p>
                  Let <m>T</m> be a monoid; 
                  in many examples we will take <m>T = \N</m>, which is a monoid since we follow the convention that <m>0</m> is a natural number. 
                  A ring <m>R</m> is <m>T</m>-<em>graded</em> if we can write a direct sum decomposition of <m>R</m> as an abelian group indexed by <m>T</m>,
                  <me>R=\bigoplus_{a \geqslant 0} R_a,</me>
                  such that 
                  <me>R_a R_b \subseteq R_{a+b} \quad \textrm{for every } a,b \in T.</me>
                  This means that for all <m>r \in R_a</m> and <m>s \in R_b</m>, we have <m>rs\in R_{a+b}</m>.
                  <idx><h><m>T</m>-graded</h></idx>
                  <idx><h><m>\N</m>-graded</h></idx>
                  <idx><h>graded ring</h></idx>
                </p>
              </statement>
            </definition>

            <definition xml:id="def-homogeneous-element"><title>Homogeneous Element</title>
              <statement>
                <p>
                  An element in one of the summands of <m>R_a</m> is said to be <em>homogeneous</em> of <em>degree</em> <m>a</m>; 
                  we write <m>|r|</m> or <m>\deg(r)</m> to denote the degree of a homogeneous element <m>r</m>.
                  <idx><h>homogeneous element</h></idx>
                  <idx><h>degree of homogeneous element</h></idx>
                  <idx><h><m>\mid r\mid</m></h></idx>
                  <idx><h><m>\deg(r)</m></h></idx> 
                </p>
              </statement>
            </definition>

            <definition xml:id="def-homogeneous-component"><title>Homogeneous Component</title>
              <statement>
                <p>
                  By definition, an element in a graded ring is a unique sum of homogeneous elements, which we call its <em>homogeneous</em> or <em>graded components</em>. 
                  One nice thing about graded rings is that many properties can usually be checked on homogeneous elements, and these are often easier to deal with.
                  <idx><h>homogeneous components</h></idx>
                  <idx><h>graded components</h></idx>
                </p>
              </statement>
            </definition>
    
            <lemma xml:id="lem-graded-ring-properties"><title>Graded Ring Properties</title>
              <statement>
                <p>
                  Let <m>R</m> be a <m>T</m>-graded ring.
                  <ol>
                    <li>
                      <m>1</m> is homogeneous of degree <m>0 \in T</m> (the identity of <m>T</m>).
                    </li>
    
                    <li>
                      <m>R_0</m> is a subring of <m>R</m>.
                    </li>
    
                    <li>
                      Each <m>R_a</m> is an <m>R_0</m>-module.
                    </li>
                  </ol>
                </p>
              </statement>
    
              <proof>
                <p>
                  <ol>
                    <li>
                      <p>
                        Write <m>1=\sum_a r_a</m> with <m>r_a</m> homogeneous of degree <m>a</m>. 
                        Then <m>r_0 = r_0 (\sum_a r_a) = \sum_a r_0 r_a</m> implies <m>r_0 r_a = 0</m> for <m>a\neq 0</m>. 
                        Similarly, for any other <m>a</m> we have <m>r_a = r_a (\sum_b r_b)</m>, and thus <m>r_a = r_a r_0</m> (here is where we use the cancellative assumption). 
                        Thus <m>r_a =0</m> for <m>a\neq 0</m>, so <m>1\in R_0.</m>
                      </p>
                    </li>
    
                    <li>
                      <p>
                        We have shown that <m>1 \in R_0</m>. 
                        Moreover, <m>R_0</m> is a subgroup under addition, and <m>r,s\in R_0</m> implies <m>rs\in R_0</m>.
                      </p>
                    </li>
      
                    <li>
                      <p>
                        By assumption, <m>R_a</m> is a subgroup under addition. 
                        Given <m>r\in R_0</m> and <m>s\in R_a</m> we must have <m>rs\in R_a</m>.
                      </p>
                    </li>
                  </ol>
                </p>
              </proof>
            </lemma>

            <example xml:id="ex-graded-ring-examples"><title>Graded Ring Examples</title>
              <p>
                <ol>
                  <li>
                    <p>
                      Any ring <m>R</m> is trivially an <m>\N</m>-graded ring, by setting <m>R_0 = R</m> and <m>R_n = 0</m> for <m>n \neq 0</m>.
                    </p>
                  </li>

                  <li>
                    <p>
                      If <m>k</m> is a field and <m>R=k[x_1,\dots,x_n]</m> is a polynomial ring, there is an <m>\N</m>-grading on <m>R</m> called the <em>standard grading</em> where <m>R_d</m> is the <m>k</m>-vector space with basis given by the monomials of total degree <m>d</m>, meaning those of the form <m>x_1^{\alpha_1}\cdots x_n^{\alpha_n}</m> with <m>\sum_i \alpha_i =d</m>. 
                      For example, <m>x_1^2+x_2x_3</m> is homogeneous in the standard grading, while <m>x_1^2+x_2</m> is not.
                      <idx><h>standard grading</h></idx> 
                    </p>
                  </li>

                  <li>
                    <p>
                      If <m>k</m> is a field, and <m>R=k[x_1,\dots,x_n]</m> is a polynomial ring, we can give different <m>\N</m>-gradings on <m>R</m> by fixing some tuple <m>(\beta_1,\dots,\beta_n)\in \N^n</m> and letting <m>x_i</m> be a homogeneous element of degree <m>\beta_i</m>; 
                      we call this a grading with <em>weights</em> <m>(\beta_1,\dots,\beta_n)</m>. 
                      For example, in <m>k[x_1,x_2]</m>, <m>x_1^2+x_2^3</m> is not homogeneous in the standard grading, but it is homogeneous of degree <m>6</m> under the <m>\mathbb{N}</m>-grading with weights <m>(3,2)</m>.
                      <idx><h>weights</h></idx> 
                    </p>
                  </li>

                  <li>
                    <p>
                      A polynomial ring <m>R = k[x_1, \ldots, x_n]</m> also admits a natural <m>\N^n</m>-grading: 
                      the grading with <m>R_{(d_1,\dots,d_n)}= k \cdot x_1^{d_1}\cdots x_n^{d_n}</m>. 
                      This is called the <em>fine grading</em> 
                      <idx><h>fine grading</h></idx>
                    </p>
                  </li>

                  <li>
                    <p>
                      Let <m>\Gamma \subseteq \mathbb{N}^n</m> be a subsemigroup of <m>\mathbb{N}^n</m>. 
                      Then 
                      <me>\bigoplus_{\gamma \in \Gamma} k \cdot \underline x ^ {\gamma} \subseteq k[\underline x] = k[x_1, \ldots, x_n]</me>
                      is an <m>\mathbb{N}^n</m>-graded subring of <m>k[x_1,\dots,x_n]</m> with the fine grading. 
                      Moreover, every <m>\N^n</m>-graded subring of <m>k[x_1,\dots,x_n]</m> is of this form.
                    </p>
                  </li>
                </ol>
              </p>
            </example>

            <paragraphs><title>Macaulay2</title>
              <p>
                Polynomial rings in Macaulay2 are graded with the standard grading by default. 
                To define a different grading, we give Macaulay2 a list with the grading of each of the variables:
              </p>

              <sage language="macaulay2">
                <input>
                  R = ZZ/101[a,b,c,Degrees=>{{1,2},{2,1},{1,0}}]
                </input>
              </sage>

              <pre>
                i1 : R = ZZ/101[a,b,c,Degrees=>{{1,2},{2,1},{1,0}}];
              </pre>

              <p>
                We can check whether an element of <m>R</m> <c>isHomogeneous</c>, and the function <c>degree</c> applied to an element of <m>R</m> returns the least upper bound of the degrees of its monomials:
              </p>

              <sage language="macaulay2">
                <input>
                  R = ZZ/101[a,b,c,Degrees=>{{1,2},{2,1},{1,0}}];
                  degree (a+b)
                  i3 : isHomogeneous(a+b)
                </input>
              </sage>

              <pre>
                i2 : degree (a+b)
                o2 = {2, 2}
                o2 : List
                
                i3 : isHomogeneous(a+b)
                o3 = false
              </pre>
            </paragraphs>

            <remark>
              <p>
                You may have seen the term <em>homogeneous polynomial</em> used to refer to a polynomial <m>f(x_1, \ldots, x_n) \in k[x_1, \ldots, x_n]</m> that satisfies 
                <me>f(\lambda x_1, \ldots, \lambda x_n) = \lambda^d f(x_1, \ldots, x_n)</me>
                for all <m>\lambda \in k</m> and some fixed <m>d</m>. 
                This is equivalent to saying that all the terms in <m>f</m> have the same total degree <m>d</m>, or that <m>f</m> is homogeneous with respect to the standard grading.
              </p>
    
              <p>
                Similarly, a polynomial is <em>quasi-homogeneous</em>, or <em>weighted homogeneous</em> if there exist integers <m>w_1, \ldots, w_n</m> such that the sum <m>d = a_1 w_1 + \cdots + a_n w_n</m> is the same for all monomials <m>x_1^{a_1} \cdots x_n^{a_n}</m> appearing in <m>f</m>. 
                So <m>f</m> satisfies 
                <me>f(\lambda^{w_1} x_1, \ldots, \lambda^{w_n} x_n) = \lambda^{d} f(x_1, \ldots, x_n),</me>
                for all <m>\lambda \in k</m> and <m>f(x_1^{w_1}, \ldots, x_n^{w_n})</m> is homogeneous (in the previous sense, so with respect to the standard grading).
                <idx><h>quasi-homogenous polynomial</h></idx>
              </p>
    
              <p>
                This condition is equivalent to asking that <m>f</m> be homogeneous with respect to some weighted grading on <m>k[x_1, \ldots, x_n]</m>.
              </p>
            </remark>
    
            <example xml:id="ex-quasi-homogeneous"><title>Quasi-Homogeneous</title>
              <p>
                In <m>k[x,y,z]</m>, the element <m>x^2+y^3+z^5</m> is not homogeneous in the standard grading, but it is homogeneous (of degree 30) if we set <m>\deg(x) = 15</m>, <m>\deg(y)=10</m>, and <m>\deg(z)=6</m>.
                This tells us that <m>x^2+y^3+z^5</m> is quasi-homogeneous; 
                it is homogeneous with respect to the weights <m>(15,10,6)</m>. 
                Indeed, 
                <me>(\lambda^{15}x)^2+(\lambda^{10}y)^3+(\lambda^6z)^5 = \lambda^{30}(x^2+y^3+z^5).</me>
              </p>
            </example>
    
            <definition xml:id="defn-homogeneous-ideal"><title>Homogeneous Ideal</title>
              <statement>
                <p>
                  An ideal <m>I</m> in a graded ring <m>R</m> is called <em>homogeneous</em> if it can be generated by homogeneous elements.
                  <idx><h>homogenous ideal</h></idx>
                </p>
              </statement>
    
            </definition>
    
            <lemma xml:id="lem-equivalent-homogeneous-ideal-definitions"><title>Equivalent Homogeneous Ideal Definitions</title>
              <statement>
                <p>
                  Let <m>I</m> be an ideal in a graded ring <m>R</m>. The following are equivalent: 
                  <ol>
                    <li>
                      <p>
                        <m>I</m> is homogeneous. 
                      </p>
                    </li>
                    
                    <li>
                      <p>
                        For any element <m>f\in R</m> we have <m>f\in I</m> if and only if every homogeneous component of <m>f</m> lies in <m>I</m>. 
                      </p>
                    </li>

                    <li>
                      <p>
                        <m>I = \bigoplus_{a \in T} I_a</m>, where <m>I_a = I \cap R_a</m>.
                      </p>
                    </li>
                  </ol>
                </p>
              </statement>
    
              <proof>
                <p>
                  <ol>
                    <li>
                      <p>
                        (1) <m>\Rightarrow</m> (2): 
                        Let <m>f_1, \ldots, f_n</m> be homogeneous generators for <m>I</m>. 
                        If <m>f\in I</m>, we can write <m>f</m> as
                        <me>f = r_1 f_1 + \cdots + r_n f_n.</me>
                        We can also write each <m>r_i</m> as a sum of its components, say <m>r_i = [r_i]_{d_{i,1}} + \cdots + [r_i]_{d_{i,m_i}}</m>. 
                        Then, after substituting and collecting, 
                        <me>f= \sum_{d} ( [r_1]_{d-|f_1|} f_1 + \cdots + [r_n]_{d-|f_n|} f_n)</me> 
                        expresses <m>f</m> as a sum of homogeneous elements of different degrees, so 
                        <me>f_d =  [r_1]_{d-|f_1|} f_1 + \cdots + [r_n]_{d-|f_n|} f_n \in I.</me>
                      </p>
                    </li>
      
                    <li>
                      <p>
                        (2) <m>\Rightarrow</m> (1): 
                        Any element of <m>I</m> is a sum of its homogeneous components. 
                        Thus, in this case, the set of homogeneous elements in <m>I</m> is a generating set for <m>I</m>.
                      </p>
                    </li>
      
                    <li>
                      <p>
                        (1) <m>\Rightarrow</m> (3): 
                        As above, <m>I</m> is generated by the collection of additive subgroups <m>\{I_a\}</m> in this case; 
                        the sum is direct as there is no nontrivial <m>\Z</m>-linear combination of elements of different degrees.
                      </p>
                    </li>
      
                    <li>
                      <p>
                        (3) <m>\Rightarrow</m> (2): 
                        We can take generators for each abelian group <m>I \cap R_a</m>, and the collection of all of them is a generating set for <m>I</m>.
                      </p>
                    </li>
                  </ol>
                </p>
              </proof>
            </lemma>
    
            <example><title></title>
              <p>
                Given an <m>\N</m>-graded ring <m>R</m>, then <m>R_+=\bigoplus_{d&gt;0} R_d</m> is a homogeneous ideal.
              </p>
            </example>

            <p>
              We now observe the following:
            </p>
    
            <lemma xml:id="lem-quotients-of-graded-rings"><title>Quotients of Graded Rings</title>
              <statement>
                <p>
                  Let <m>R</m> be an <m>T</m>-graded ring, and <m>I</m> be a homogeneous ideal. 
                  Then <m>R/I</m> has a natural <m>T</m>-graded structure induced by the <m>T</m>-graded structure on <m>R</m>.
                </p>
              </statement>
    
              <proof>
                <p>
                  The ideal <m>I</m> decomposes as the direct sum of its graded components, so we can write 
                  <me>R/I = \frac{\oplus R_a}{\oplus I_a} \cong \oplus \frac{R_a}{I_a}.</me>
                  It's elementary to check that this direct sum decomposition satisfies the desired properties.
                </p>
              </proof>
            </lemma>
    
            <example xml:id="ex-homogeneous-ideals"><title>Homogeneous Ideals</title>
              <p>
                <ol>
                  <li>
                    The ideal <m>I = (w^2x+wyz+z^3,x^2+3xy+5xz+7yz+11z^2)</m> in <m>R=k[w,x,y,z]</m> is homogeneous with respect to the standard grading on <m>R</m>, and thus the ring <m>R/I</m> admits an <m>\N</m>-grading with <m>|w|=|x|=|y|=|z|=1</m>.
                  </li>
      
                  <li>
                    The ring <m>R=k[x,y,z]/(x^2+y^3+z^5)</m> does not admit a grading with <m>|x|=|y|=|z|=1</m>, but by <xref ref="ex-quasi-homogeneous"/> it does admit a grading with <m>|x|=15,|y|=10,|z|=6</m>.
                  </li>
                </ol>
              </p>
            </example>

          </subsection>

          <subsection xml:id="subsec-graded-mod"><title>Graded Modules and Homomorphisms</title>

            <definition xml:id="defn-graded-module"><title>Graded Module</title>
              <statement>
                <p>
                  Let <m>R</m> be a <m>T</m>-graded ring and <m>M</m> an <m>R</m>-module. 
                  An <m>R</m>-module <m>M</m> is <m>T</m>-<em>graded</em> if there exists a direct sum decomposition of <m>M</m> as an abelian group indexed by <m>T</m>:
                  <me>M=\bigoplus_{a\in T} M_a \textrm{ such that } R_a M_b \subseteq M_{a+b}</me>
                  for all <m>a,b\in T</m>.
                  <idx><h><m>T</m>-graded module</h></idx>
                  <idx><h>graded module</h></idx>
                </p>
              </statement>
            </definition>
          
            <p>
              The notions of homogeneous element of a module and degree of a homogeneous element of a module take the obvious meanings. 
              A notable abuse of notation: we will often talk about <m>\Z</m>-graded modules over <m>\N</m>-graded rings, and likewise.
            </p>
      
            <definition xml:id="defn-graded-ring-homomorphism"><title>Graded Ring Homomorphism</title>
              <statement>
                <p>
                  Let <m>R</m> and <m>S</m> be <m>T</m>-graded rings with the same grading monoid <m>T</m>. 
                  A ring homomorphism <m>\varphi:R\to S</m> is <em>graded</em> or <em>degree-preserving</em> if <m>\varphi(R_a) \subseteq S_{a}</m> for all <m>a \in T</m>.
                  <idx><h>graded ring homomorphism</h></idx>
                  <idx><h>degree preserving homomorphism</h></idx> 
                </p>
              </statement>
            </definition>
  
            <remark>
              <p>
                Note that our definition of ring homomorphism requires <m>1_R \mapsto 1_S</m>, and thus it does not make sense to talk about graded ring homomorphisms of degree <m>d \neq 0</m>. 
                But we can have graded module homomorphisms of any degree.
              </p>
            </remark>
    
            <definition xml:id="defn-graded-module-homomorphism"><title>Graded Module Homomorphism</title>
              <statement>
                <p>
                  Let <m>M</m> and <m>N</m> be <m>T</m>-graded modules over the <m>T</m>-graded ring <m>R</m>. 
                  A homomorphism of <m>R</m>-modules] <m>\varphi\!: M \to N</m> is <em>graded</em>  of <em>degree</em> <m>d</m> if <m>\varphi(M_a) \subseteq N_{a+d}</m> for all <m>a \in T</m>. 
                  A graded homomorphism of degree <m>0</m> is also called <em>degree-preserving</em>.
                  <idx><h>graded homomorphism</h></idx>
                  <idx><h>degree of a graded module homomorphism</h></idx>
                  <idx><h>degree-preserving homomorphism</h></idx>
                </p>
              </statement>
            </definition>
    
            <example xml:id="shift"><title>Shift</title>
              <p>
                <ol>
                  <li>
                    Consider the ring map <m>k[x,y,z]\to k[s,t]</m> given by <m>x\mapsto s^2, y\mapsto st, z\mapsto t^2</m>. 
                    If <m>k[s,t]</m> has the fine grading, meaning <m>|s|=(1,0)</m> and <m>|t|=(0,1)</m>, then the given map is degree preserving if and only if <m>k[x,y,z]</m> is graded by 
                    <me>|x|=(2,0), |y|=(1,1), |z|=(0,2).</me>
                  </li>
    
                  <li>
                    Let <m>k</m> be a field, and let <m>R=k[x_1,\dots,x_n]</m> be a polynomial ring with the standard grading. 
                    Given <m>c\in k=R_0</m>, the homomorphism of <m>R</m>-modules <m>R\to R</m> given by <m>f\mapsto cf</m> is degree preserving. 
                    However, if instead we take <m>g\in R_d</m> for some <m>d&gt;0</m>, then the map 
                    <me>
                      \begin{CD}
                        R@&gt;&gt;&gt; R\\\\
                        f@&gt;&gt;&gt; gf
                      \end{CD}
                    </me> 
                    is not degree preserving, although it is a graded map of degree <m>d</m>. 
                    We can make this a degree-preserving map if we shift the grading on <m>R</m> by defining <m>R(-d)</m> to be the <m>R</m>-module <m>R</m> but with the <m>\Z</m>-grading given by <m>R(-d)_t=R_{t-d}</m>. 
                    With this grading, the component of degree <m>d</m> of <m>R(-d)</m> is <m>R(-d)_d=R_0=k</m>. 
                    Now the map 
                    <me>
                      \begin{CD}
                        R(-d)@&gt;&gt;&gt; R\\\\
                        f@&gt;&gt;&gt; gf
                      \end{CD}
                    </me> 
                    is degree preserving.
                  </li>
                </ol>
             </p>
            </example>
            
          </subsection>
  
        </section>

        <section xml:id="sec-finite-conditions-graded-algebras"><title>Finiteness Conditions for Graded Algebras</title>
          
          <blockquote>
            <p>
              <q>Do not wait until the conditions are perfect to begin. Beginning makes the conditions perfect.</q>
            </p>
            <attribution>Alan Cohen</attribution>
          </blockquote>

          <remark>
            <p>
              We observed earlier an important relationship between algebra-finiteness and noetherianity that followed from the Hilbert basis theorem: 
              if <m>R</m> is noetherian, then any algebra-finite extension of <m>R</m> is also noetherian. 
              There isn't a converse to this in general: there are lots of algebras over fields <m>k</m> that are noetherian but not algebra-finite over <m>k</m>. 
              However, for graded rings, this converse relation holds.
            </p>
          </remark>

          <proposition xml:id="prop-graded-f.g.-algebra"><title>Graded F.G. Algebra</title>
            <statement>
              <p>
                Let <m>R</m> be an <m>\N</m>-graded ring, and let <m>f_1,\dots,f_n \in R</m> be homogeneous elements of positive degree. 
                Then <m>f_1,\dots,f_n</m> generate the ideal <m>R_+ := \bigoplus_{d&gt;0} R_d</m> if and only if <m>f_1,\dots,f_n</m> generate <m>R</m> as an <m>R_0</m>-algebra.
              </p>
            </statement>
  
            <proof>
              <p>
                Suppose <m>R=R_0[f_1,\dots,f_n]</m>. 
                Any element <m>r\in R_+</m> can be written as a polynomial expression <m>r=P(f_1,\dots,f_n)</m> for some <m>P\in R_0[x_1,\dots,x_n]</m> with no constant term. 
                Each monomial of <m>P</m> is a multiple of some <m>x_i</m>, and thus each term in <m>r=P(f_1,\dots,f_n)</m> is a multiple of <m>f_i</m>. 
                Thus <m>r \in R f_1 + \cdots + R f_n = (f_1,\dots,f_n)</m>.
              </p>
  
              <p>
                To show that <m>R_+= (f_1,\dots,f_n)</m> implies <m>R=R_0[f_1,\dots,f_n]</m>, it suffices to show that any homogeneous element <m>r\in R</m> can be written as a polynomial expression in <m>f_1, \ldots, f_n</m> with coefficients in <m>R_0</m>. 
                We will use induction on the degree of <m>r</m>, with degree <m>0</m> as a trivial base case. 
                For <m>r</m> homogeneous of positive degree, we must have <m>r\in R_+</m>, so by assumption we can write <m>r= a_1 f_1 + \dots + a_n f_n</m>. 
                Moreover, since <m>r</m> and <m>f_1, \ldots, f_n</m> are all homogeneous, we can choose each coefficient <m>a_i</m> to be homogeneous of degree <m>|r|-|f_i|</m>. 
                By the induction hypothesis, each <m>a_i</m> is a polynomial expression in <m>f_1, \ldots, f_n</m>, so we are done.
              </p>
            </proof>
          </proposition>
  
          <corollary xml:id="cor-characterization-of-noetherian-graded-rings"><title>Characterization of Noetherian Graded Rings</title>
            <statement>
              <p>
                An <m>\N</m>-graded ring <m>R</m> is noetherian if and only if <m>R_0</m> is noetherian and <m>R</m> is algebra-finite over <m>R_0</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                If <m>R_0</m> is noetherian and <m>R</m> is algebra-finite over <m>R_0</m>, then <m>R</m> is noetherian by the <xref text="title" ref="hilbert-basis-theorem"/>. 
                On the other hand, if <m>R</m> is noetherian then any quotient of <m>R</m> is also noetherian, and in particular <m>R_0 \cong R/R_+</m> is noetherian. 
                Moreover, <m>R_+</m> is generated as an ideal by finitely many homogeneous elements by noetherianity; 
                by <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Proposition - Graded F.G. Algebra|Proposition]], we get a finite algebra generating set for <m>R</m> over <m>R_0</m>.
              </p>
            </proof>
          </corollary>

          <remark>
            <p>
              There are many interesting examples of <m>\N</m>-graded algebras with <m>R_0 = k</m>; 
              in that case, <m>R_+</m> is the largest homogeneous ideal in <m>R</m>. 
              In fact, <m>R_0</m> is the only maximal ideal of <m>R</m> that is also homogeneous, so we can call it <em>the</em> <term>homogeneous maximal ideal</term>; 
              it is sometimes also called the <term>irrelevant maximal ideal</term> of <m>R</m>. 
              This ideal plays a very important role: in many ways, <m>R</m> and <m>R_+</m> behave similarly to a local ring <m>R</m> and its unique maximal ideal. 
              We will discuss this further when we learn about local rings.
            </p>
          </remark>
      
        </section>

        <section xml:id="sec-inv-rings-2"><title>Invariant Rings: Application II</title>
          
          <blockquote>
            <p>
              <q>There is changeability in process bu invariance in outcome.</q>
            </p>
            <attribution>Paul Watzlawick</attribution>
          </blockquote>

          <remark>
            <p>
              If <m>R</m> is a graded ring, and <m>G</m> is a group acting on <m>R</m> by degree-preserving automorphisms, then <m>R^G</m> is a graded subring of <m>R</m>, meaning <m>R^G</m> is graded with respect to the same grading monoid. 
              In particular, if <m>G</m> acts <m>k</m>-linearly on a polynomial ring over <m>k</m>, the invariant ring is <m>\N</m>-graded.
            </p>
    
            <p>
              Using this perspective, we can now give a different proof of the finite generation of invariant rings that works under different hypotheses. 
              The proof we will discuss now is essentially Hilbert's proof. 
              To do that, we need another notion that is very useful in commutative algebra.
            </p>
          </remark>
  
          <definition xml:id="defn-direct-summand"><title>Direct Summand</title>
            <statement>
              <p>
                Let <m>\varphi\!:R \to S</m> be a ring homomorphism. 
                We say that <m>R</m> is a <em>direct summand</em>  of <m>S</m> if the map <m>\varphi</m> <em>splits</em> as a map of <m>R</m>-modules, meaning there is an <m>R</m>-module homomorphism 
                <me>\begin{CD}
                  R@&gt;\varphi&gt;&gt; S\\\\
                  R@&lt;&lt;\rho&lt; S
                  \end{CD}
                </me> 
                such that <m>\rho \varphi</m> is the identity on <m>R</m>.
                <idx><h>direct summand</h></idx>
              </p>
            </statement>
          </definition>

          <remark>
            <p>
              First, observe that the condition on <m>\rho</m> implies that <m>\varphi</m> must be injective, so we can assume that <m>R \subseteq S</m>, perhaps after renaming some elements. 
              The condition on <m>\rho</m> is that <m>\rho|_R</m> is the identity and <m>\rho(rs)= r\rho(s)</m> for all <m>r \in R</m> and <m>s\in S</m>. 
              We call the map <m>\rho</m> the <em>splitting</em>  of the inclusion <m>R \subseteq S</m>. 
              Note that given any <m>R</m>-linear map <m>\rho\!: S \to R</m>, if <m>\rho(1)=1</m> then <m>\rho</m> is a splitting: 
              indeed, <m>\rho(r)=\rho(r \cdot 1) = r \rho(1)=r</m> for all <m>r \in R</m>.
              <idx><h>splitting</h></idx>
            </p>
          </remark>
  
          <remark>
            <p>
              The subring <m>R</m> of <m>S</m> is a direct summand of <m>S</m> if and only if there exists an <m>R</m>-submodule of <m>S</m> such that <m>S = R \oplus M</m>. 
              In the language above, <m>M = \ker \rho</m>. 
              Conversely, given a direct sum decomposition <m>S = R \oplus M</m>, the quotient map onto the first component is a splitting.
            </p>
          </remark>
        
          <definition xml:id="defn-expansion-contraction"><title>Expansion and Contraction</title>
            <statement>
              <p>
                Let <m>\varphi\! : R \to S</m> be a ring homomorphism. 
                Given an ideal <m>I</m> in <m>S</m>, we write <m>I \cap R</m> for the <em>contraction</em> of <m>R</m> back into <m>R</m>, meaning the preimage of <m>I</m> via <m>\varphi</m>. 
                In particular, if <m>R \subseteq S</m> is a ring extension, then <m>I \cap R</m> denotes the preimage of <m>I</m> via the inclusion map <m>R \subseteq S</m>. 
                Given a ring map <m>R \to S</m>, and an ideal <m>I</m> in <m>R</m>, the <em>expansion</em> of <m>I</m> in <m>S</m> is the ideal of <m>S</m> generated by the image of <m>I</m> via the given ring map; 
                we naturally denote this by <m>IS</m>.
                <idx><h><m>I\cap R</m></h></idx> 
                <idx><h>contracion</h></idx>
                <idx><h>expansion of an ideal</h>
                </idx> <idx><h><m>IS</m></h></idx>
              </p>
            </statement>
          </definition>
  
          <lemma xml:id="lem-direct-summand-of-ideals-contract"><title>Direct Summand of Ideals Contract</title>
            <statement>
              <p>
                Let <m>R</m> be a direct summand of <m>S</m>. 
                Then, for any ideal <m>I \subseteq R</m>, we have <m>IS \cap R=I</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                Let <m>\pi</m> be the corresponding splitting. 
                Clearly, <m>I \subseteq IS \cap R</m>. 
                Conversely, if <m>r \in IS \cap R</m>, we can write <m>r = s_1 f_1 + \cdots + s_t f_t</m> for some <m>f_i \in I</m>, <m>s_i \in S</m>. 
                Applying <m>\pi</m>, we have 
                <me>r = \pi(r) = \pi \left( \sum_{i=1}^t s_i f_i \right) = \sum_{i=1}^t \pi\left( s_i f_i \right) = \sum_{i=1}^t \pi \left( s_i \right) f_i \in I.</me>
              </p>
            </proof>
          </lemma>
  
          <proposition xml:id="prop-direct-summand-noetherian"><title>Direct Summand Noetherian</title>
            <statement> 
              <p>
                Let <m>R</m> be a direct summand of <m>S</m>. If <m>S</m> is noetherian, then so is <m>R</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                Let 
                <me>I_1\subseteq I_2 \subseteq I_3 \subseteq \cdots</me>
                be a chain of ideals in <m>R</m>. 
                The chain of ideals in <m>S</m> 
                <me>I_1 S \subseteq I_2 S \subseteq I_3 S \subseteq \cdots</me> 
                stabilizes, so there exist <m>J</m>, <m>N</m> such that <m>I_n R = J</m> for <m>n \geqslant N</m>. 
                Contracting to <m>R</m>, we get that <m>I_n = I_n S \cap R = J \cap R</m> for <m>n\geqslant N</m>, so the original chain also stabilizes.
              </p>
            </proof>
          </proposition>

          <p>
            Notice in general a subring of a noetherian ring does not have to be noetherian.
          </p>
  
          <example xml:id="ex-non-noeth-subring"><title>Non-Noetherian Subring of Noetherian Ring</title>
            <p>
              If <m>k</m> is a field, <m>S = k[x,y]</m> is noetherian by <xref text="title" ref="hilbert-basis-theorem"/> , but we claim that the subring 
              <me>R = k[xy,xy^2,xy^3,\ldots]</me> 
              of <m>S = k[x,y]</m> is not noetherian. Indeed,
              <me>(xy) \subseteq (xy,xy^2) \subseteq (xy,xy^2,xy^3) \subseteq \cdots</me>
              is an ascending chain of ideals of <m>R</m> that does not stabilize. 
              Notice that if we considered the same chain of ideals in <m>S</m>, then it does stabilize, and in fact it is the constant chain <m>(xy)</m>.
            </p>
          </example>
  
          <proposition xml:id="prop-k-linear-action-and-direct-summand"><title><m>K</m>-Linear Action and Direct Summand</title>
            <statement>
              <p>
                Let <m>k</m> be a field, and <m>R</m> be a polynomial ring over <m>k</m>. 
                Let <m>G</m> be a finite group acting <m>k</m>-linearly on <m>R</m>. 
                Assume that the characteristic of <m>k</m> does not divide <m>|G|</m>. 
                Then <m>R^G</m> is a direct summand of <m>R</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                We consider the map <m>\rho\!: R \to R^G</m> given by 
                <me>\rho(r)=\frac{1}{|G|} \sum_{g\in G} g\cdot r.</me>
                First, note that the image of this map lies in <m>R^G</m>, since acting by <m>g</m> just permutes the elements in the sum, so the sum itself remains the same. 
                We claim that this map <m>\rho</m> is a splitting for the inclusion <m>R^G \subseteq R</m>. 
                To see that, let <m>s\in R^G</m> and <m>r\in R</m>. 
                We have 
                <me>\rho(sr)=\frac{1}{|G|} \sum_{g\in G} g\cdot (sr) =\frac{1}{|G|} \sum_{g\in G} (g\cdot s)(g\cdot r) =\frac{1}{|G|} \sum_{g\in G} s(g\cdot r) = s \frac{1}{|G|} \sum_{g\in G} (g\cdot r) = s \rho(r),</me>
                so <m>\rho</m> is <m>R^G</m>-linear, and for <m>s\in R^G</m>, 
                <me>\rho(s)=\frac{1}{|G|} \sum_{g\in G} g\cdot s=s.</me>
              </p>
            </proof>
          </proposition>

          <remark>
            <p>
              The condition that the characteristic of <m>k</m> does not divide the order of <m>G</m> is trivially satisfied if <m>k</m> has characteristic zero.
            </p>
          </remark>
  
          <theorem xml:id="thm-hilberts-finiteness-theorem-for-invariants"><title>Hilbert's Finiteness Theorem for Invariants</title>
            <statement>
              <p>
                Let <m>k</m> be a field, and <m>R</m> be a polynomial ring over <m>k</m>. 
                Let <m>G</m> be a group acting <m>k</m>-linearly on <m>R</m>. 
                Assume that <m>G</m> is finite and that the characteristic of <m>k</m> does not divide <m>|G|</m>, or more generally, that <m>R^G</m> is a direct summand of <m>R</m>. 
                Then <m>R^G</m> is a finitely generated <m>k</m>-algebra.
              </p>
            </statement>
  
            <proof>
              <p>
                Since <m>G</m> acts linearly on <m>R</m>, <m>R^G</m> is an <m>\N</m>-graded subring of <m>R</m> with <m>R_0=k</m>. 
                Since <m>R^G</m> is a direct summand of <m>R</m>, <m>R^G</m> is noetherian by . 
                By our characterization of noetherian graded rings in , <m>R^G</m> is finitely generated over <m>R_0=k</m>.
              </p>
            </proof>
          </theorem>

          <remark>
            <p>
              One important thing about this proof is that it applies to many infinite groups. 
              In particular, for any <em>linearly reductive group</em>, including <m>\mathrm{GL}_n(\C)</m>, <m>\mathrm{SL}_n(\C)</m>, and <m>(\C^{\times})^n</m>, we can construct a splitting map <m>\rho</m>.
              <idx><h>linearly reductive group</h></idx>
            </p>
          </remark>
      
        </section>
  
      </chapter>

      <chapter xml:id="ch-local-rings"><title>Local Rings</title>

        <section xml:id="sec-local-rings"><title>Local Rings</title>
          
          <blockquote>
            <p>
              <q>Virtue is too often merely local.</q>
            </p>
            <attribution>Samuel Johnson</attribution>
          </blockquote>

          <remark>
            <p>
              The study of local rings is central to commutative algebra. 
              As we will see, life is easier in a local ring, so much so that we often want to localize so we can be in a local ring. 
              A lot of the things we will say in this chapter have graded analogues: in some ways, <m>\N</m>-graded <m>k</m>-algebras and their homogeneous ideals behave like a local ring, where the homogenous maximal ideal plays the role of the maximal ideal.
            </p>
          </remark>
  
          <definition xml:id="defn-local-ring"><title>Local Ring</title>
            <statement>
              <p>
                A ring <m>R</m> is a <em>local ring</em> <idx><h>local ring</h></idx> if it has exactly one maximal ideal. 
                We often use the notation <m>(R,\fm)</m> <idx><h><m>(R,\fm)</m></h></idx> to denote <m>R</m> and its maximal ideal, or <m>(R,\fm,k)</m><idx><h><m>(R,\fm,k)</m></h></idx> to also specify the residue field <m>k=R/\fm</m>.
              </p>
    
              <p>
                Some people reserve the term <em>local ring</em> for a noetherian local ring, and call what we have defined a <em>quasilocal ring</em><idx><h>quasilocal ring</h></idx>; 
                we will not follow this convention here.
              </p>
            </statement>
          </definition>
  
          <lemma xml:id="lem-local-if-nonunits-form-an-ideal"><title>Local if Nonunits Form an Ideal</title>
            <statement>
              <p>
                A ring <m>R</m> is local if and only if the set of non-units of <m>R</m> forms an ideal.
              </p>
            </statement>
  
            <proof>
              <p>
                If <m>R</m> is a local with maximal ideal <m>\fm</m>, then every nonunit must be in <m>\fm</m>, and <m>\fm</m> contains no nonunits, so <m>\fm</m> must be the set of nonunits. 
                Conversely, if the set of nonunits is an ideal, that must be the only maximal ideal, since any other element in <m>R</m> is a unit.
              </p>
            </proof>
          </lemma>
  
          <example xml:id="ex-zpn-is-local"><title><m>\Z/(p^n)</m> is Local</title>
            <statement>
              <p>
                The ring <m>\Z/(p^n)</m> is local with maximal ideal <m>(p)</m>.
              </p>
            </statement>
  
            <solution>
              <p>
                Let <m>R = \mathbb{Z}/(p^n)</m> for some prime <m>p</m> and <m>n\geqslant 1</m>. 
                We want to show that <m>R</m> has a unique maximal ideal.
              </p>
  
              <p>
                Recall that a proper ideal <m>M</m> in <m>R</m> is maximal if and only if <m>R/M</m> is a field. 
                Let <m>M</m> be a proper ideal of <m>R</m>. Since <m>\mathbb{Z}</m> is a PID, it follows that <m>M = (m)</m> for some <m>0 \leqslant m \leqslant p^n-1</m>.
              </p>
  
              <p>
                Now, note that <m>R/M</m> is an integral domain since <m>M</m> is a prime ideal of <m>R</m>. 
                By the <xref provisional="cite"/> [[Mathematics/Number Theory/Results/Theorem - Sunzi's Remainder Theorem|Chinese Remainder Theorem]], we have the following isomorphism of rings: 
                <me>R/M \cong \mathbb{Z}/(p^{n_1}) \times \cdots \times \mathbb{Z}/(p^{n_k}),</me> 
                where <m>n_1,\ldots,n_k</m> are positive integers such that <m>n_1 + \cdots + n_k = n</m>, and <m>k</m> is the number of distinct prime factors of <m>m</m>.
              </p>
  
              <p>
                Since <m>R/M</m> is a product of fields, it follows that <m>M</m> is maximal in <m>R</m>. 
                Hence, <m>R</m> has a unique maximal ideal <m>(p)</m>, since <m>(p)</m> is the only proper ideal of <m>R</m> that contains <m>p</m>.
              </p>
            </solution>
          </example>
  
          <example xml:id="ex-power-series-ring-over-field-is-local"><title>Power Series Ring over Field is Local</title>
            <statement>
              <p>
                The ring of power series <m>k[[ \vx ]]</m> over a field <m>k</m> is local.
              </p>
            </statement>
  
            <solution>
              <p>
                Indeed, one can show that a power series has an inverse if and only if its constant term is nonzero; 
                this can be done explicitly, by writing down the conditions for a power series to be the inverse of another. 
                The unique maximal ideal is <m>(\vx)</m>. 
                More generally, <m>[[k x_1, \ldots, x_d ]]</m> is local with maximal ideal <m>(x_1, \ldots, x_d)</m>.
              </p>
            </solution>
          </example>
  
          <example xml:id="ex-z_p-is-local"><title>Z_(p) is Local</title>
            <statement>
              <p>
                The ring <m>\Z_{(p)} = \{ \frac{a}{b} \in \Q \ | \ p\nmid b \text{ when in lowest terms}\}</m> is a local ring with maximal ideal <m>(p)</m>.
              </p>
            </statement>
          </example>
  
          <example xml:id="ex-polynomial-rings-are-not-local"><title>Polynomial Rings are not Local</title>
            <statement>
              <p>
                A polynomial ring over a field is certainly not local; 
                we have seen it has so many maximal ideals!
              </p>
            </statement>
          </example>
  
          <definition xml:id="defn-ring-characteristic"><title>Ring Characteristic</title>
          <statement>
            <p>
              Let R be a commutative ring. 
              The <em>characteristic</em> <idx><h>characteristic of a ring</h></idx> of <m>R</m>, written <m>\char(R)</m>, is the unique non-negative generator of the kernel of the unique ring homomorphism <m>\varphi: \Z \to R</m>. 
              (Recall <m>\varphi(n) = n \cdot 1_R</m>.)
            </p>
  
            <p>
              Equivalently, <m>\char(R)</m> is the smallest positive integer <m>n</m> such that <m>n\cdot 1_R=\underbrace{1_R+\cdots+1_R}_{n}=0_R</m>, if such and integer exists, and <m>\char(R) = 0</m> otherwise.
            </p>
          </statement>
          </definition>
  
          <proposition xml:id="prop-characteristic-in-local-rings"><title>Characteristic in Local Rings</title>
            <statement>
              <p>
                Let <m>(R,\fm,k)</m> be a local ring. Then one of the following holds: 
                <ol>
                  <li>
                    <p>
                      <m>\char(R)=\char(k)=0</m>. We say that <m>R</m> has <em>equal characteristic zero</em>. 
                      <idx><h>equal characteristic zero</h></idx>
                    </p>
                  </li>
                  
                  <li>
                    <p>
                      <m>\char(R)=0</m>, <m>\char(k)=p</m> for a prime <m>p</m>, so <m>R</m> has <em>mixed characteristic</em> <m>(0,p)</m>
                      <idx><h>mixed characteristic <m>(0,p)</m></h></idx>
                    </p>
                  </li>

                  <li>
                    <p>
                      <m>\char(R)=\char(k)=p</m> for a prime <m>p</m>, so <m>R</m> has <em>equal characteristic</em> <m>p</m>. 
                      <idx><h>equal characteristic <m>p</m></h></idx>
                    </p>
                  </li>

                  <li>
                    <p>
                      <m>\char(R)=p^n</m>, <m>\char(k)=p</m> for a prime <m>p</m> and an integer <m>n&gt;1</m>. 
                      If <m>R</m> is reduced, then one of the first three cases holds.
                    </p>
                  </li>
                </ol>
              </p>
            </statement>
  
            <proof>
              <p>
                Since <m>k</m> is a quotient of <m>R</m>, the characteristic of <m>R</m> must be a multiple of the characteristic of <m>k</m>, since the map <m>\Z\longrightarrow k</m> factors through <m>R</m>. 
                We must think of <m>0</m> as a multiple of any integer for this to make sense. 
                Now <m>k</m> is a field, so its characteristic is <m>0</m> or <m>p</m> for a prime <m>p</m>. 
                If <m>\char(k)=0</m>, then necessarily <m>\char(R)=0</m>.
                If <m>\char(k)=p</m>, we claim that <m>\char(R)</m> must be either <m>0</m> or a power of <m>p</m>. 
                Indeed, if we write <m>\char(R)=p^n \cdot a</m> with <m>a</m> coprime to <m>p</m>, note that <m>p\in \fm</m>, so if <m>a \in \fm</m>, we have <m>1\in (p,a)\subseteq \fm</m>, which is a contradiction. 
                Since <m>R</m> is local, this means that <m>a</m> is a unit. 
                But then, <m>p^n a=0</m> implies <m>p^n=0</m>, so the characteristic must be <m>p^n</m>.
              </p>
            </proof>
          </proposition>

          <remark>
            <p>
              If <m>R</m> is an <m>\N</m>-graded <m>k</m>-algebra with <m>R_0 = k</m>, and <m>\fm = \bigoplus_{n &gt; 0} R_0</m> is the homogeneous maximal ideal, <m>R</m> and <m>\fm</m> behave a lot like a local ring and its maximal ideal, and we sometimes use the suggestive notation <m>(R,\fm)</m> to refer to it. 
              Many properties of local rings also apply to the graded setting, so given a statement about local rings, you might take it as a suggestion that there might be a corresponding statement about graded rings — a statement that, nevertheless, still needs to be proved. 
              There are usually some changes one needs to make to the statement; 
              for example, if a theorem makes assertions about the ideals in a local ring, the corresponding graded statement will likely only apply to homogeneous ideals, and a theorem about finitely generated modules over a local ring will probably translate into a theorem about graded modules in the graded setting.
            </p>
          </remark>
    
        </section>

        <section xml:id="sec-localizations"><title>Localization</title>

          <blockquote>
            <p>
              <q>The best way to be global is to be local.</q>
            </p>
            <attribution>Alex Atala</attribution>
          </blockquote>

          <example xml:id="ex-powers-of-element-is-multiplicatively-closed"><title>Powers of Element is Multiplicatively Closed</title>
            <statement>
              <p>
                Let <m>R</m> be a ring. For any <m>f\in R</m>, the set <m>W=\{1, f, f^2, f^3, \dots\}</m> is a multiplicative set.
              </p>
            </statement>
          </example>
    
          <example xml:id="ex-complement-of-prime-ideal-is-multiplicative"><title>Complement of Prime Ideal is Multiplicative</title>
            <statement>
              <p>
                Let <m>R</m> be a ring. 
                If <m>P \subseteq R</m> is a prime ideal, the set <m>W=R \setminus P</m> is multiplicative.
              </p>
            </statement>
          </example>
  
          <definition xml:id="defn-regular-element"><title>Regular Element</title>
            <statement>
              <p>
                Let <m>R</m> be a ring. 
                An element that is not a zerodivisor is called a <em>nonzerodivisor</em><idx><h>nonzerodivisor</h></idx> or a <em>regular element</em><idx><h>regular element</h></idx>.
              </p>
            </statement>
          </definition>
  
          <example xml:id="ex-regular-elements-are-multiplicative"><title>Regular Elements are Multiplicative</title>
            <statement>
              <p>
                Let <m>R</m> be a ring. 
                The set of regular elements in <m>R</m> forms a multiplicatively closed subset.
              </p>
            </statement>
          </example>
  
          <example xml:id="ex-intersection-of-multiplicative-sets-is-multiplicative"><title>Intersection of Multiplicative Sets is Multiplicative</title>
            <statement>
              <p>
                An arbitrary intersection of multiplicatively closed subsets is multiplicatively closed. 
                In particular, for any family of primes <m>\{\fp _{\lambda} \}</m>, the complement of <m>\bigcup_{\lambda} \fp _{\lambda}</m> is multiplicatively closed.
              </p>
            </statement>
          </example>
  
          <definition xml:id="defn-localization"><title>Localization of a Ring</title>
            <statement>
              <p>
                Let <m>R</m> be a ring, and <m>W</m> be a multiplicative set with <m>0\notin W</m>. 
                The <em>localization</em><idx><h>localization of a ring</h></idx> of <m>R</m> at <m>W</m> is the ring 
                <me>W^{-1} R :=  \left\{ \frac{r}{w} \ \Big| \ r\in R, w\in W \right\} / \sim</me>
                where <m>\sim</m> is the equivalence relation 
                <me>\displaystyle \frac{r}{w}\sim \frac{r'}{w'} \textrm{ if there exists } u\in W : u(rw'-r'w)=0.</me> 
                The operations are given by 
                <me>\frac{r}{v}+\frac{s}{w}=\frac{rw+sv}{vw} \quad \text{and} \quad  \frac{r}{v}\frac{s}{w}=\frac{rs}{vw}.</me>
                The zero in <m>W^{-1}R</m> is <m>\frac{0}{1}</m> and the identity is <m>\frac{1}{1}</m>.
              </p>

              <p>
                EMPTY <idx><h><m>I\cap R</m></h></idx>
              </p>
            </statement>
          </definition>

          <remark>
            <p>
              Note that we write elements in <m>W^{-1}R</m> in the form <m>\frac{r}{w}</m> even though they are equivalence classes of such expressions.
            </p>
          </remark>
  
          <example xml:id="ex-field-of-fractions-is-a-localization"><title>Field of Fractions is a Localization</title>
            <statement>
              <p>
                Note that if <m>R</m> is a domain, the equivalence relation simplifies to <m>rw'=r'w</m>, so <m>R \subseteq W^{-1}R \subseteq \mathrm{Frac}(R)</m>, and in particular <m>W^{-1}R</m> is a domain too. 
                In particular, <m>\mathrm{Frac}(R)</m> is a localization of <m>R</m>.
              </p>
            </statement>
          </example>

          <remark>
            <p>
              In the localization of <m>R</m> at <m>W</m>, every element of <m>W</m> becomes a unit. 
              The following universal property says roughly that <m>W^{-1}R</m> is the smallest <m>R</m>-algebra in which every element of <m>W</m> is a unit.
            </p>
          </remark>
  
          <proposition xml:id="prop-ump-of-localizations"><title>UMP of Localizations</title>
            <statement>
              <p>
                Let <m>R</m> be a ring, and <m>W</m> a multiplicative set with <m>0\notin W</m>. 
                Let <m>S</m> be an <m>R</m>-algebra in which every element of <m>W</m> is a unit. 
                Then there is a unique homomorphism <m>\alpha</m> such that the following diagram commutes:
                <me>
                  \begin{CD}
                  R@&gt;&gt;&gt;W\inv R\\
                  @VVV \\ 
                  S
                  \end{CD}
                </me> 
                #fix where the vertical map is the structure homomorphism and the horizontal map is the canonical homomorphism.
              </p>
  
            </statement>
          </proposition>
  
          <example xml:id="ex-localization-of-powers-of-element"><title>Localization of Powers of Element</title>
            <statement>
              <p>
                For <m>f\in R</m> and <m>W=\{1, f, f^2, f^3, \dots\} = \{ f^n \mid n \geqslant 0 \}</m>, we usually write <m>R_f</m><idx><h><m>R_f</m></h></idx> for <m>W^{-1}R</m>.
              </p>
            </statement>
          </example>
  
          <example xml:id="ex-total-ring-of-fractions"><title>Total Ring of Fractions</title>
            <statement>
              <p>
                When <m>W</m> is the set of nonzerodivisors on <m>R</m>, we call <m>W^{-1}R</m> <em>the total ring of fractions</em><idx><h>total ring of fractions</h></idx> of <m>R</m>. 
                When <m>R</m> is a domain, this is just the fraction field of <m>R</m>, and in this case this coincides with the localization at the prime <m>(0)</m>.
              </p>
            </statement>
          </example>
  
          <example xml:id="ex-localization-at-a-prime"><title>Localization at a Prime</title>
            <statement>
              <p>
                For a prime ideal <m>P</m> in <m>R</m>, we generally write <m>R_{P}</m><idx><h><m>R_P</m></h></idx> for <m>(R\setminus P)^{-1} R</m>, and call it the <em>localization</em> of <m>R</m> at <m>P</m><idx><h>localization at a prime</h></idx>. 
                Given an ideal <m>I</m> in <m>R</m>, we sometimes write <m>I_P</m> to refer to <m>I R_P</m>, the image of <m>I</m> via the canonical map <m>R \to R_P</m>. 
                Notice that when we localize at a prime <m>P</m>, the resulting ring is a local ring <m>(R_P,P_{P})</m>. 
                We can think of the process of localization at <m>P</m> as <em>zooming in</em> at the prime <m>P</m>. 
                Many properties of an ideal <m>I</m> can be checked <em>locally</em>, by checking them for <m>I R_P</m> for each prime <m>P \in V(I)</m>.
              </p>
            </statement>
          </example>
  
          <example xml:id="ex-kx_1dotsx_d_x_1dotsx_d-is-local"><title><m>k[x_1,\dots,x_d]_{(x_1,\dots,x_d)}</m> is Local</title>
            <statement>
              <p>
                A local ring one often encounters is <m>k[x_1,\dots,x_d]_{(x_1,\dots,x_d)}</m>. 
                We can consider this as the ring of rational functions that in lowest terms have a denominator with nonzero constant term. 
                Note that we can talk about lowest terms since the polynomial ring is a UFD.
              </p>
            </statement>
          </example>
  
          <example xml:id="ex-local-ring-of-the-point"><title>Local Ring of the Point</title>
            <statement>
              <p>
                If <m>k</m> is algebraically closed and <m>I</m> is a radical ideal, then <m>k[x_1,\dots,x_d]/I= k[X]</m> is the coordinate ring of some affine variety, and <m>(x_1,\dots,x_d)=\fm_{\underline{0}}</m> is the ideal defining the origin (as a point in <m>X \subseteq \mathbb{A}^d</m>). 
                Then we call 
                <me>k[X]_{\fm_{\underline{0}}} :=  (k[x_1,\dots,x_d]/I)_{(x_1,\dots,x_d)}</me>
                the <em>local ring of a point</em><idx><h>local ring of a point</h></idx> <m>\underline{0} \in X</m>; 
                some people write this as <m>\mathcal{O}_{X,\underline{0}}</m>. 
                The radical ideals of this ring consist of radical ideals of <m>k[X]</m> that are contained in <m>\fm_{\underline{0}}</m>, which by the Nullstellensatz correspond to subvarieties of <m>X</m> that contain <m>\underline{0}</m>. 
                Similarly, we can define the local ring at any point <m>\underline{a} \in X</m>.
              </p>
            </statement>
          </example>
  
          <lemma xml:id="lem-localization-ideals"><title>Localization Ideals</title>
            <statement>
              <p>
                Let <m>W</m> be multiplicatively closed in <m>R</m>. 
                <ol>
                  <li>
                    <p>
                      If <m>I</m> is an ideal in <m>R</m>, then <m>W^{-1} I = I W^{-1} R</m>. 
                    </p>
                  </li>

                  <li>
                    <p>
                      If <m>I</m> is an ideal in <m>R</m>, then <m>W^{-1} I \cap R = \{ r \in R \ | \  wr\in I \textrm{ for some } w\in W\}</m>. 
                    </p>
                  </li>

                  <li>
                    <p>
                      If <m>J</m> is an ideal in <m>W^{-1}R</m>, then <m>W^{-1}(J \cap R) = J</m>. 
                    </p>
                  </li>

                  <li>
                    <p>
                      If <m>\fp</m> is prime and <m>W \cap \fp=\es</m>, then <m>W^{-1}\fp =\fp (W^{-1}R)</m> is prime. 
                    </p>
                  </li>

                  <li>
                    <p>
                      The map <m>\Spec(W^{-1} R) \to \Spec(R)</m> is injective, with image 
                      <me>\{\fp \in \Spec(R) \ | \ \fp \cap W = \varnothing\}.</me>
                    </p>
                  </li>
                </ol>
              </p>
            </statement>
  
            <proof>
              <p>
                <ol>
                  <li>
                    <p>
                      Note that 
                      <me>W^{-1} I = \left\{ \frac{a}{w} \mid a \in I, w \in W \right\},</me>
                      while <m>I W^{-1}</m> is the ideal generated by all the elements of the form 
                      <me>a \cdot \frac{s}{w} \quad \textrm{where } s \in R, w \in W, a \in I.</me>
                      Since we can rewrite 
                      <me>a \cdot \frac{s}{w} = \frac{sa}{w}</me>
                      and <m>sa \in I</m>, we conclude that <m>W^{-1} I = I W^{-1} R</m>.
                    </p>
                  </li>
  
                  <li>
                    <p>
                      If <m>wr \in I</m> for some <m>w \in W</m>, then 
                      <me>\frac{r}{1} = \frac{wr}{w} \in W^{-1} I.</me>
                      Conversely, if <m>r \in W^{-1} I \cap R</m>, then that means that 
                      <me>\frac{r}{1} = \frac{a}{w} \textrm{ for some } a \in I, w \in W.</me>
                      By definition of the equivalence relation defining <m>W^{-1}R</m>, this means that there exists <m>u \in W</m> such that
                      <me>u(rw - a \cdot 1) = 0 \Leftrightarrow  r(uw) = wa \in I.</me>
                      Since <m>W</m> is multiplicatively closed, <m>uw \in W</m>, and thus the element <m>t := uw \in W</m> satisfies <m>tr \in I</m>.
                    </p>
                  </li>
    
                  <li>
                    <p>
                      The containment <m>W^{-1}(J \cap R) \subseteq J</m> holds for general reasons: 
                      given any map <m>f</m>, and a subset <m>J</m> of the target of <m>f</m>, <m>f(f^{-1}(J)) \subseteq J</m>. 
                      On the other hand, if <m>\frac{a}{w} \in J</m>, then <m>\frac{a}{1} \in J</m>, since its a unit multiple of an element of <m>J</m>, and thus <m>a \in J \cap R</m>, so <m>\frac{a}{w} \in W^{-1}(J \cap R)</m>.
                    </p>
                  </li>
    
                  <li>
                    <p>
                      First, since <m>W\cap P =\varnothing</m>, and <m>P</m> is prime, no element of <m>W</m> kills <m>\bar{1}=1 + P</m> in <m>R/P</m>, so <m>\bar{1}/1</m> is nonzero in <m>W^{-1}(R/P)</m>. 
                      Thus, <m>W^{-1}R / W^{-1}P \cong W^{-1}(R/P)</m> is nonzero, and a localization of a domain, hence is a domain. 
                      Thus, <m>W^{-1}P</m> is prime.
                    </p>
                  </li>
    
                  <li>
                    <p>
                      First, by part 2), the map <m>P \mapsto W^{-1}P</m>, for <m>S=\{P \in \Spec(R) \ | \ P \cap W = \varnothing\}</m> sends primes to primes. 
                      We claim that
                    </p>
                    <p>
                      <m>\Spec(W^{-1} R)</m> <m>Q</m> <m>W^{-1}P</m>
                    </p>
        
                    <p>
                      #empty
                    </p>
        
                    <p>
                      <m>S</m> <m>Q \cap R</m> <m>P</m> are inverse maps.
                    </p>
        
                    <p>
                      We have already seen that <m>J=(J\cap R) W^{-1}R</m> for any ideal <m>J</m> in <m>W^{-1}R</m>.
                    </p>
        
                    <p>
                      If <m>W\cap P=\varnothing</m>, then using part a) and the definition of prime, we have that <me>W^{-1}P \cap R = \lbrace r \in R \, \mid \, rw \in P \textrm{ for some } w \in W \rbrace = \lbrace r \in R \, \mid \, r \in P \rbrace = P.</me>
                    </p>
                  </li>
                </ol>
              </p>
            </proof>
          </lemma>
  
          <corollary xml:id="cor-map-on-spec-localization-prime"><title>Map on Spec Localization Prime</title>
            <statement>
              <p>
                Let <m>R</m> be a ring and <m>P</m> be a prime ideal in <m>R</m>. 
                The map on spectra induced by the canonical map <m>R \to R_P</m> corresponds to the inclusion 
                <me>\{ \fq \in \Spec(R) \, \mid \, \fq \subseteq P \} \subseteq \Spec(R).</me>
              </p>
            </statement>
          </corollary>
  
          <definition xml:id="defn-module-localization"><title>Module Localization</title>
            <statement>
              <p>
                Let <m>R</m> be a ring, <m>W</m> be a multiplicative set, and <m>M</m> an <m>R</m>-module. 
                The <em>localization</em><idx><h>localization of a module</h></idx><idx><h><m>W\inv M</m></h></idx> of <m>M</m> at <m>W</m> is the <m>W^{-1}R</m>-module 
                <me>W^{-1} M := \left\{ \frac{m} {w} \ \Big| \ m\in M, w\in W \right\} / \sim</me>
                where <m>\sim</m> is the equivalence relation <m>\displaystyle \frac{m}{w}\sim \frac{m'}{w'}</m> if <m>u(mw'-m'w)=0</m> for some <m>u\in W</m>. 
                The operations are given by 
                <me>\frac{m}{v}+\frac{n}{w}=\frac{mw+nv}{vw} \quad \text{and} \quad \frac{r}{v} \frac{m}{w}=\frac{rm}{vw}.</me>
              </p>
            </statement>
          </definition>

          <p>
            We will use the notations <m>M_f</m><idx><h><m>M_f</m></h></idx> and <m>M_P</m><idx><h><m>M_P</m></h></idx> analagously to <m>R_f</m> and <m>R_P</m>.
          </p>

          <p>
            If <m>R</m> is not a domain, the canonical map <m>R\to W\inv R</m> is not necessarily injective.
          </p>
  
          <example xml:id="ex-kxyxy-has-non-injective-canonical-maps"><title><m>k[x,y]/(xy)</m> has Non Injective Canonical Maps</title>
            <statement>
              <p>
                Consider <m>R = k[x,y]/(xy)</m>. 
                The canonical maps <m>R \longrightarrow R_{(x)}</m> and <m>R \longrightarrow R_y</m> are not injective, since in both cases <m>y</m> is invertible in the localization, and thus
                <me>x \mapsto \frac{x}{1} = \frac{xy}{y} = \frac{0}{y} = \frac{0}{1}.</me>
              </p>
            </statement>
          </example>
  
          <definition xml:id="defn-annihilator"><title>Annihilator</title>
            <statement>
              <p>
                The <em>annihilator</em> of a module <m>M</m> is the ideal
                <me>\ann(M) :=  \lbrace r \in R \mid rm = 0 \textrm{ for all } m \in M \rbrace.</me>
                <idx><h>annihilator</h></idx><idx><h><m>\ann(M)</m></h></idx>
              </p>
            </statement>
          </definition>
  
          <definition xml:id="defn-colon-ideal"><title>Colon Ideal</title>
            <statement>
              <p>
                Let <m>I</m> and <m>J</m> be ideals in a ring <m>R</m>. 
                The <em>colon</em> of <m>I</m> and <m>J</m> is the ideal
                <me>(J : I) :=  \lbrace r \in R \mid rI \subseteq J \rbrace.</me>
                More generally, if <m>M</m> and <m>N</m> are submodules of some <m>R</m>-module <m>A</m>, the colon of <m>N</m> and <m>M</m> is
                <me>(N :_R M) :=  \lbrace r \in R \mid rM \subseteq N \rbrace.</me>
                <idx><h>colon</h></idx>
              </p>
            </statement>
          </definition>
  
          <example xml:id="ex-annihilators-and-colons-are-ideals"><title>Annihilators and Colons are Ideals</title>
            <statement>
              <p>
                The annihilator of <m>M</m> is an ideal in <m>R</m>, and
                <me>\ann (M) = (0 :_R M).</me>
                Moreover, any colon <m>(N :_R M)</m> is an ideal in <m>R</m>.
              </p>
            </statement>
          </example>
  
          <example xml:id="ex-mcong-rannm"><title><m>M\cong R/\ann(M)</m></title>
            <statement>
              <p>
                If <m>M = R m</m> is a cyclic <m>R</m>-module, then <m>M \cong R/I</m> for some ideal <m>I</m>.
              </p>
            </statement>
  
            <solution>
              <p>
                Notice that <m>I \cdot (R/I) = 0</m>, and that given an element <m>g \in R</m>, we have <m>g (R/I) = 0</m> if and only if <m>g \in I</m>. 
                Therefore, <m>M \cong R/\ann(M)</m>.
              </p>
            </solution>
          </example>
  
          <example xml:id="ex-ideals-contained-in-annihilator"><title>Ideals Contained in Annihilator</title>
            <statement>
              <p>
                Let <m>M</m> be an <m>R</m>-module. 
                If <m>I</m> is an ideal in <m>R</m> such that <m>I \subseteq \ann(M)</m>, then <m>I M = 0</m>, and thus <m>M</m> is naturally an <m>R/I</m>-module with the <em>same</em> structure it has as an <m>R</m>-module, meaning
                <me>(r+I) \cdot m = rm</me>
                for each <m>r \in R</m>.
              </p>
            </statement>
          </example>
  
          <example xml:id="ex-annihilator-of-quotient-is-colon"><title>Annihilator of Quotient is Colon</title>
            <statement>
              <p>
                If <m>N \subseteq M</m> are <m>R</m>-modules, then <m>\ann(M/N) = (N :_R M)</m>.
              </p>
            </statement>
          </example>
  
          <lemma xml:id="lem-zero-in-localization"><title>Zero in Localization</title>
            <statement>
              <p>
                Let <m>M</m> be an <m>R</m>-module, and <m>W</m> a multiplicative set. 
                Then the following are equivalent: 
                <ol>
                  <li>
                    <p>
                      <m>\frac{m}{w}\in W^{-1}M \ \text{ is zero}</m> 
                    </p>
                  </li>

                  <li>
                    <p>
                      <m>vm=0 \textrm{ for some } v\in W</m> 
                    </p>
                  </li>

                  <li>
                    <p>
                      <m>\ann_R(m) \cap W \neq \es.</m> 
                    </p>
                  </li>
                </ol>
                Note in particular that this holds for <m>w=1</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                For the first equivalence, we use the equivalence relation defining <m>W^{-1}R</m> to note that <m>\frac{m}{w}=\frac{0}{1}</m> in <m>W^{-1}M</m> if and only if there exists some <m>v\in W</m> such that <m>0=v(1m-0w)=vm</m>. 
                The second equivalence just comes from the definition of the annihilator.
              </p>
            </proof>
          </lemma>
  
          <example xml:id="ex-canonical-localization-map-and-injectivity"><title>Canonical Localization Map and Injectivity</title>
            <statement>
              <p>
                As a consequence of  <xref ref="lem-zero-in-localization"/>, it follows that if <m>R</m> is a domain, then the canonical map <m>R \to W^{-1}R</m> is always injective for any multiplicatively closed set <m>W</m>, since every nonzero <m>r \in R</m> has <m>\ann(r) = 0</m>.
              </p>
  
              <p>
                Notice, however, that even when <m>R</m> is a domain, the elements in a module <m>M</m> may still have nontrivial annihilators, and thus <m>M \to W^{-1} M</m> may fail to be injective.
              </p>
            </statement>
          </example>
  
          <example xml:id="ex-induced-localization-module-homomorphism"><title>Induced Localization Module Homomorphism</title>
            <statement>
              <p>
                If <m>M\xrightarrow{\alpha} N</m> is an <m>R</m>-module homomorphism, then there is a <m>W^{-1}R</m>-module homomorphism <m>W^{-1}M \xrightarrow{W^{-1}\alpha} W^{-1}N</m>given by the rule <m>W^{-1}\alpha (\frac{m}{w}) = \frac{\alpha(m)}{w}</m>.
                <idx><h><m>W\inv\a</m></h></idx> 
              </p>
            </statement>
  
            <solution>
              <p>
                Proving this lemma actually requires some homological algebra that we do not have, so for now we will just believe it.
              </p>
            </solution>
          </example>

          <lemma xml:id="lem-hom-localization"><title>Hom and Localization</title>
            <statement>
              <p>
                Let <m>R</m> be a noetherian ring, <m>W</m> be a multiplicative set, <m>M</m> be a finitely generated <m>R</m>-module, and <m>N</m> an arbitrary <m>R</m>-module. 
                Then, 
                <me>\Hom_{W^{-1}R}(W^{-1}M , W^{-1}N) \cong W^{-1} \Hom_R(M,N).</me> 
                In particular, if <m>P</m> is prime, 
                <me>\Hom_{R_{P}}(M_{P} , N_{P}) \cong \Hom_R(M,N)_{P}.</me>
              </p>
            </statement>
          </lemma>
  
          <theorem xml:id="thm-localization-is-exact"><title>Localization is Exact</title>
            <statement>
              <p>
                Given a short exact sequence of <m>R</m>-modules 
                <me>
                  \begin{CD}
                  0@&gt;&gt;&gt;A@&gt;&gt;&gt;B@&gt;&gt;&gt;C@&gt;&gt;&gt;0
                  \end{CD}</me>and a multiplicative set <m>W</m>, the sequence <me>\begin{CD}
                  0@&gt;&gt;&gt;W\inv A@&gt;f&gt;&gt;W\inv B@&gt;g&gt;&gt;W\inv C@&gt;&gt;&gt;0
                  \end{CD}
                </me>
                is also exact.
              </p>
            </statement>
          </theorem>
  
          <example xml:id="ex-localization-preserves-inclusions"><title>Localization Preserves Inclusions</title>
            <statement>
              <p>
                It follows from this <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Zero in Localization|Lemma]] that if <m>\begin{CD}N@&gt;\a&gt;&gt;M\end{CD}</m> is injective, then <m>W^{-1}\alpha</m> is also injective, since
                <me>0=W^{-1}\alpha \left( \frac{n}{w} \right) = \frac{\alpha(n)}{w} \ \implies \ 0=u\alpha(n)=\alpha(un) \textrm{ for some }  u \in W \implies un=0 \implies \frac{n}{w}=0.</me>
                So this explains some of <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Localization is Exact|Theorem]], since it shows that localization preserves inclusions.
              </p>
            </statement>
          </example>
  
          <example xml:id="ex-localizations-and-quotients-commute"><title>Localizations and Quotients Commute</title>
            <statement>
              <p>
                Given a submodule <m>N</m> of <m>M</m>, we can apply the <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Localization is Exact|Theorem]] to the short exact sequence
                <me>
                  \begin{CD}
                  0@&gt;&gt;&gt;N@&gt;&gt;&gt;M@&gt;&gt;&gt;M/N@&gt;&gt;&gt;0
                  \end{CD}
                </me>
                and conclude that that <m>W^{-1}(M/N) \cong W^{-1}M / W^{-1}N</m>.
              </p>
            </statement>
          </example>
  
          <lemma xml:id="lem-localization-commutes-with-finite-intersections"><title>Localization Commutes with Finite Intersections</title>
            <statement>
              <p>
                Let <m>M</m> be a module, and <m>N_1,\dots,N_t</m> be a finite collection of submodules. 
                Let <m>W</m> be a multiplicative set. 
                Then,
                <me>W^{-1} (N_1 \cap \cdots \cap N_t) = W^{-1} N_1 \cap \cdots \cap W^{-1} N_t \subseteq W^{-1}M.</me> 
              </p>
            </statement>

            <proof>
              <p>
                The containment <m>W^{-1} (N_1 \cap \cdots \cap N_t) \subseteq W^{-1} N_1 \cap \cdots \cap W^{-1} N_t</m> is clear. 
                Elements of <m>W^{-1} N_1 \cap \cdots \cap W^{-1} N_t</m> are of the form <m>\frac{n_1}{w_1}= \cdots = \frac{n_t}{w_t}</m>; 
                we can find a common denominator to realize this in <m>W^{-1} (N_1 \cap \cdots \cap N_t)</m>.
              </p>
            </proof>
          </lemma>

        </section>

        <section xml:id="sec-nak"><title>NAK</title>
          
          <blockquote>
            <p>
              <q>The fundamental result of commutative algebra, and its power and elegance are second to none.</q>
            </p>
            <attribution>Jürgen Herzog, on NAK</attribution>
          </blockquote>
          
          <remark>
            <p>
              We will now show a very simple but extremely useful result known as Nakayama's Lemma. 
              Nakayama himself claimed that this should be attributed to Krull and Azumaya, but it's not clear which of the three actually had the commutative ring statement first. 
              So some authors (e.g., Matsumura) prefer to refer to it as NAK. 
              There are actually a range of statements, rather than just one, that go under the banner of Nakayama's Lemma a.k.a. NAK.
            </p>
          </remark>

          <proposition xml:id="prop-nak-1"><title>NAK 1</title>
            <statement>
              <p>
                Let <m>R</m> be a ring, <m>I</m> an ideal, and <m>M</m> a finitely generated <m>R</m>-module. 
                If <m>IM = M</m>, then: 
                <ol>
                  <li>
                    <p>
                      there is an element <m>r\in 1 + I</m> such that <m>rM=0</m>, and 
                    </p>
                  </li>

                  <li>
                    <p>
                      there is an element <m>a\in I</m> such that <m>am=m</m> for all <m>m\in M</m>.
                    </p>
                  </li>
                </ol>
              </p>
            </statement>
  
            <proof>
              <p>
                Let <m>M = R m_1 + \cdots + R m_s</m>. 
                By assumption, we have equations 
                <me>m_1 = a_{11} m_1 + \cdots + a_{1s} m_s \ , \ \dots \ , \ m_s = a_{s1} m_1 + \cdots + a_{ss} m_s,</me>
                with <m>a_{ij}\in I</m>. 
                Setting <m>A=[a_{ij}]</m> and <m>v=[m_i]</m>, we have a matrix equation <m>Av=v</m>. 
                By the <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Determinantal Technique|Determinantal Technique]], the element <m>\det(I_{s \times s} - A) \in R</m> kills each <m>m_i</m>, and hence it kills <m>M</m>. 
                Since <m>\det(I_{s \times s}-A)\equiv \det(I_{s \times s}) \equiv 1 (\!\pmod I)</m>, this determinant is the element <m>r</m> we seek for the first statement. 
                For the latter statement, set <m>a=1-r</m>, which is in <m>I</m> and satisfies <m>am=m-rm=m</m> for all <m>m\in M</m>.
              </p>
            </proof>
          </proposition>
  
          <theorem xml:id="thm-nak-2"><title>NAK 2</title>
            <statement>
              <p>
                Let <m>(R,\fm,k)</m> be a local ring, and <m>M</m> be a finitely generated module. 
                If <m>M=\fm M</m>, then <m>M=0</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                By <xref ref="prop-nak-1"/>, there exists an element <m>r\in 1+\fm</m> that annihilates <m>M</m>. 
                Notice that <m>1 \notin \fm</m>, so any such <m>r</m> must be outside of <m>\fm</m>, and thus a unit.
                Multiplying by its inverse, we conclude that <m>1</m> annihilates <m>M</m>, or equivalently, that <m>M=0</m>.
              </p>
            </proof>
          </theorem>
  
          <theorem xml:id="thm-nak-3"><title>NAK 3</title>
            <statement>
              <p>
                Let <m>(R,\fm,k)</m> be a local ring, and <m>M</m> be a finitely generated module, and <m>N</m> a submodule of <m>M</m>. 
                If <m>M = N + \fm M</m>, then <m>M = N</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                By taking the quotient by <m>N</m>, we see that 
                <me>M/N = (N + \fm M)/N = \fm \left( M/N\right).</me> 
                By <xref ref="thm-nak-2"/>, <m>M = N</m>.
              </p>
            </proof>
          </theorem>
  
          <theorem xml:id="thm-nak-4"><title>NAK 4</title>
            <statement>
              <p>
                Let <m>(R,\fm,k)</m> be a local ring, and <m>M</m> be a finitely generated module. 
                For <m>m_1,\dots,m_s\in M</m>, 
                <me>m_1,\dots, m_s \text{ generate } M \Longleftrightarrow \overline{m_1},\dots,\overline{m_s} \text{ generate } M/\fm M.</me> 
                Thus, any generating set for <m>M</m> consists of at least <m>\dim_k (M/\fm M)</m> elements.
              </p>
            </statement>
  
            <proof>
              <p>
                The implication <m>(\implies)</m> is clear. 
                If <m>m_1,\dots, m_s \in M</m> are such that <m>\overline{m_1},\dots,\overline{m_s}</m> generate <m>M/\fm M</m>, consider <m>N= R m_1 + \dots + R m_s \subseteq M</m>. 
                Since <m>M/\fm M</m> is generated by the image of <m>N,</m> we have <m>M= N + \fm M</m>. 
                By <xref ref="thm-nak-2"/>, <m>M=N</m>.
              </p>
            </proof>
          </theorem>

          <remark>
            <p>
              Since <m>R/\fm</m> is a field, <m>M/\fm M</m> is a vector space over the field <m>R/\fm</m>.
            </p>
          </remark>
  
          <definition xml:id="defn-minimal-generators"><title>Minimal Generators</title>
            <statement>
              <p>
                Let <m>(R,\fm)</m> be a local ring, and <m>M</m> a finitely generated module. 
                A set of elements <m>\{m_1,\dots,m_t\}</m> is a <em>minimal generating set</em> of <m>M</m> if the images of <m>m_1,\dots,m_t</m> form a basis for the <m>R/\fm</m> vector space <m>M/\fm M</m>.
                <idx><h>minimal generators</h></idx>
                <idx><h>minimal generating set</h></idx>
              </p>
            </statement>
          </definition>
  
          <lemma xml:id="lem-min-gen-sets-have-same-cardinality"><title>Min Gen Sets have Same Cardinality</title>
            <statement>
              <p>
                Let <m>(R,\fm,k)</m> be a local ring and <m>M</m> be a finitely generated module. 
                Any generating set for <m>M</m> contains a minimal generating set, and every minimal generating set has the same cardinality.
              </p>
            </statement>
  
            <proof>
              <p>
                As a consequence of basic facts about basis for vector spaces
              </p>
            </proof>
          </lemma>
  
          <definition xml:id="defn-minimal-number-of-generators"><title>Minimal Number of Generators</title>
            <statement>
              <p>
                Let <m>(R,\fm)</m> be a local ring and <m>N</m> an <m>R</m>-module. 
                The <em>minimal number of generators</em> of <m>M</m> is 
                <me>\mu(M) :=  \dim_{R/\fm} \left( M / \fm M \right).</me>
                Equivalently, this is the number of elements in a minimal generating set for <m>M</m>.
                <idx><h>minimal number of generators</h></idx>
              </p>
            </statement>
          </definition>
  
          <definition xml:id="defn-minimal-number-of-generators-graded"><title>Minimal Number of Generators (Graded)</title>
            <statement>
              <p>
                Let <m>R</m> be an <m>\N</m>-graded ring with <m>R_0</m> a field, and <m>M</m> a finitely generated <m>\Z</m>-graded <m>R</m>-module. 
                The <em>minimal number of generators</em> of <m>M</m> is 
                <me>\mu(M) :=  \dim_{R/R_+} \left( M / R_+ M \right).</me>
                <idx><h>minimal number of generators</h></idx>
              </p>
            </statement>
          </definition>
  
          <proposition xml:id="prop-gnak-1"><title>GNAK1</title>
            <statement>
              <p>
                Let <m>R</m> be an <m>\N</m>-graded ring, and <m>M</m> a <m>\Z</m>-graded module such that <m>M_{&lt;a}=0</m> for some <m>a</m>. 
                If <m>M= (R_+) M</m>, then <m>M=0</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                If <m>M \neq 0</m>, then <m>M</m> has a nonzero homogeneous element. 
                Suppose <m>M_a \neq 0</m>. On the one hand, the homogeneous elements in <m>M</m> live in degrees at least <m>a</m>, but <m>(R_+)M</m> lives in degrees strictly bigger than <m>a</m>. 
                Thus <m>(R_+)M \neq M</m>.
              </p>
            </proof>
          </proposition>

          <remark>
            <p>
              If <m>M</m> is finitely generated, then it can be generated by finitely many homogeneous elements, the homogeneous components of some finite generating set. 
              If <m>a</m> is the smallest degree of a homogeneous element in a homogeneous generating set, since <m>R</m> lives only in positive degrees we must have <m>M \subseteq R M_{\geqslant a} \subseteq M_{\geqslant a}</m>, so <m>M_{&lt;a} = 0</m>.
            </p>
          </remark>
  
          <proposition xml:id="prop-graded-rings-and-generators"><title>Graded Rings and Generators</title>
            <statement>
              <p>
                Let <m>R</m> be an <m>\N</m>-graded ring, with <m>R_0</m> a field, and <m>M</m> a <m>\Z</m>-graded module such that <m>M_{&lt;a}=0</m> for some degree <m>a</m>. 
                A set of elements of <m>M</m> generates <m>M</m> if and only if their images in <m>M/(R_+)M</m> span <m>M/(R_+)M</m> as a vector space over <m>R_0</m>. 
                Since <m>M</m> and <m>(R_+)M</m> are graded, <m>M/(R_+)M</m> admits a basis of homogeneous elements.
              </p>
            </statement>
  
            <proof>
              <p>
                Just as above, we obtain the following:
              </p>
            </proof>
          </proposition>

          <paragraphs><title>Macaulay2</title>
            <p>
              In Macaulay2, the command <c>mingens</c> returns the a minimal generating set of the given module (as a list), while <c>numgens</c> returns the minimal number of generators. 
              Notice that this computation is only reliable if the ring and module you are considering are defined to be graded.
            </p>
          </paragraphs>

          <remark>
            <p>
              Note that we can use <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Proposition - GNAK1|NAK]] to prove that certain modules are finitely generated in the graded case; 
              in the local case, we cannot.
            </p>
          </remark>

        </section>
  
      </chapter>

      <chapter xml:id="ch-prime-ideals"><title>Prime Ideals</title>
  
        <section xml:id="sec-prime-maximal-ideals"><title>Prime and Maximal Ideals</title>
          
          <blockquote>
            <p>
              <q>Fate rarely calls upon us at a moment of our choosing.</q>
            </p>
            <attribution>Optimus Prime</attribution>
          </blockquote>

          <definition xml:id="defn-prime-ideal"><title>Prime Ideal</title>
          <idx><h>prime ideal</h></idx>
          <statement>
            <p>
              A <em>prime ideal</em> of a commutative ring <m>R</m> is a proper ideal <m>P</m> such that whenever <m>xy \in P</m> for <m>x, y \in R</m>, we have <m>x \in P</m> or <m>y \in P</m>.
            </p>
          </statement>
          </definition>
    
          <example xml:id="ex-prime-ideals-in-z"><title>Prime Ideals in <m>\Z</m></title>
            <statement>
              <p>
                The prime ideals in <m>\mathbb{Z}</m> are those of the form <m>(p)</m> for <m>p</m> a prime integer, and <m>(0)</m>.
              </p>
            </statement>
          </example>
  
          <example xml:id="ex-prime-ideals-in-kx"><title>Prime Ideals in <m>k[x]</m></title>
            <statement>
              <p>
                When <m>k</m> is a field, prime ideals in <m>k[x]</m> are easy to describe: <m>k[x]</m> is a principal ideal domain, and <m>(f)\neq 0</m> is prime if and only if <m>f</m> is an irreducible polynomial. Moreover, <m>(0)</m> is also a prime ideal, since <m>k[x]</m> is a domain.
              </p>
            </statement>
          </example>
  
          <example xml:id="ex-x3-y2-in-kxy-is-prime"><title><m>(x^3-y^2)</m> in <m>k[x,y]</m> is Prime</title>
            <statement>
              <p>
                Let <m>k</m> be a field. 
                The ideal <m>P = (x^3-y^2)</m> in <m>R=k[x,y]</m> is prime: 
                one can show that <m>R/P \cong k[t^2,t^3] \subseteq k[t]</m>, which is a domain.
              </p>
            </statement>
          </example>

          <example><title>Primes, Presentations, and Macaulay2</title>
            <p>
              The <m>k</m>-algebra <m>R = k[t^3,t^4,t^5] \subseteq k[t]</m> is a domain, so its defining ideal <m>P</m> in <m>k[x,y,z,]</m> is prime. 
              This is the kernel of the presentation of <m>R</m> sending <m>x,y,z</m> to each of our 3 algebra generators, which we can compute with Macaulay2:
            </p>

            <sage language="macaulay2">
              <input>
                k = QQ
                f = map(k[t],k[x,y,z],{t^3,t^4,t^5})
                P = ker f
              </input>
            </sage>

            <pre>
              i1 : k = QQ

              o1 = QQ

              o1 : Ring

              i2 : f = map(k[t],k[x,y,z],{t^3,t^4,t^5})
                                          3   4   5
              o2 = map (QQ[t], QQ[x..z], {t , t , t })

              o2 : RingMap QQ[t] &lt;--- QQ[x..z]

              i3 : P = ker f
                          2         2     2   3
              o3 = ideal (y  - x*z, x y - z , x  - y*z)

              o3 : Ideal of QQ[x..z]	
            </pre>
          </example>
  
          <definition xml:id="defn-maximal-ideal"><title>Maximal Ideal</title>
          <idx><h>maximal ideal</h></idx>
            <statement>
              <p>
                A <em>maximal ideal</em> of an arbitrary ring <m>R</m> is a proper ideal <m>M</m> such that the only ideals of <m>R</m> containing <m>M</m> are <m>M</m> and <m>R</m>.
              </p>
            </statement>
          </definition>
  
          <definition xml:id="defn-residue-field"><title>Residue Field</title>
            <statement>
              <p>
                Given a maximal ideal <m>\fm</m> in <m>R</m>, the <em>residue field</em> <idx><h>residue field</h></idx> of <m>\fm</m> is the field <m>R/\fm</m>. A field <m>k</m> is a residue field of <m>R</m> if <m>k \cong R/\fm</m> for some maximal ideal <m>\fm</m>.
              </p>
            </statement>
          </definition>

          <remark>
            <p>
              A ring may have many different residue fields. For example, the residue fields of <m>\mathbb{Z}</m> are all the finite fields with a prime numbers of elements, <m>\mathbb{F}_p \cong \mathbb{Z}/p</m>.
            </p>
          </remark>
    
          <theorem xml:id="thm-prime-maximal-domain-field"><title>Prime, Maximal, Domain, Field</title>
            <statement>
              <p>
                Let <m>R</m> be a commutative ring with <m>1\neq 0</m>, and let <m>I</m> be an ideal of <m>R</m>. 
                1. The ideal <m>I</m> is maximal if and only if <m>R/I</m> is a field. 
                2. The ideal <m>I</m> is prime if and only if <m>R/I</m> is an integral domain. 
                3. Every maximal ideal of <m>R</m> is prime.
              </p>
            </statement>

            <proof>
              <p>
                The first assertion follows immediately from the Lattice Isomorphism Theorem and the fact that <m>R/I</m> is a field if and only if its only ideals are <m>0</m> and <m>R/I</m>.
              </p>
  
              <p>
                Suppose <m>I</m> is prime. 
                If <m>(r + I)(r' + I) = 0 + I</m>, then <m>rr' \in I</m> and hence either <m>r \in I</m> or <m>r' \in I</m>, so that either <m>r + I = 0</m> or <m>r'+ I = 0</m>. 
                This proves <m>R/I</m> is a domain. 
                Suppose <m>R/I</m> is a domain and that <m>xy \in I</m>. 
                Then <m>(x + I)(y + I) = 0</m> in <m>R/I</m> and hence either <m>x+ I = 0</m> or <m>y + I = 0</m>. 
                It follows <m>x \in I</m> or <m>y \in I</m>, so that <m>I</m> is prime.
              </p>
  
              <p>
                If <m>I</m> is maximal, then <m>R/I</m> is a field, which in particular implies that <m>R/I</m> is a domain, so <m>I</m> is prime.
              </p>
  
            </proof>
          </theorem>
  
          <theorem xml:id="thm-every-ideal-contained-in-a-maximal-ideal"><title>Every Ideal Contained in a Maximal Ideal</title>
  
            <statement>
              <p></p>
  
            </statement>
  
            <proof>

  
              <p>
                Fix a ring <m>R</m> and a proper ideal <m>I</m>. Let <m>S</m> be the set of all proper ideals <m>J</m> in <m>R</m> such that <m>J \supseteq I</m>, which is partially ordered with the inclusion order <m>\subseteq</m>. We claim that <xref provisional="cite"/> [[Mathematics/Foundations/Results/Theorem - Zorn's Lemma|Zorn's Lemma]] applies to <m>S</m>. First, <m>S</m> is nonempty, since it contains <m>I</m>. Now consider a chain of proper ideals in <m>R</m>, say <m>\{ J_i \}_i</m>, all of which contain <m>I</m>. Notice that <m>J := \bigcup_i J_i</m> is an ideal as well (exercise!), and moreover <m>J \neq R</m> since <m>1 \notin J_i</m> for all <m>i</m>. Since each <m>J_i \supseteq I</m>, we conclude that <m>J \supseteq I</m>. Thus we have checked that <m>J \in S</m>. Now this ideal <m>J \in S</m> is an upper bound for our chain <m>\{ J_i \}_i</m>, and thus  applies to <m>S</m>. We conclude that <m>S</m> has a maximal element.
              </p>
  
              <p>
                There is a subtle point missing: we have shown that there is a maximal element <m>M</m> in <m>S</m> containing <m>I</m>, but we have yet to show that this maximal element is a maximal ideal of <m>R</m>. Finally, suppose that <m>L</m> is an ideal in <m>R</m> with <m>L \supseteq M</m>. Since <m>M</m> contains <m>J</m>, so does <m>L</m>. If <m>L \in S</m>, by the maximality of <m>M</m> we must have <m>L = M</m>. Since <m>L</m> already satisfies <m>L \supseteq J</m>, if <m>L \notin S</m> then we must have <m>L = R</m>.
              </p>
  
            </proof>
          </theorem>
  
          <theorem xml:id="thm-zorns-lemma"><title>Zorn's Lemma</title>
            <idx><h>Zorn's Lemma</h></idx>
  
            <p>
              Let <m>P</m> be a non-empty family of sets. Suppose that for each chain <m>C</m> in <m>P</m>, the set <m>\bigcup_{C_{i}\in C}C_{i}</m> is in <m>P</m>. Then <m>P</m> has a maximal element.
            </p>
  
          </theorem>

        </section>

        <section xml:id="sec-spectrum"><title>The Spectrum of a Ring</title>
          
          <blockquote>
            <p>
              <q>What is life but a spectrum and what is music but life itself.</q>
            </p>
            <attribution>Billy Cobham</attribution>
          </blockquote>

          <definition xml:id="defn-prime-spectrum"><title>Prime Spectrum</title>
            <statement>
              <p>
                Let <m>R</m> be a ring. 
                The <em>prime spectrum</em>  of <m>R</m>, denoted <m>\Spec(R)</m>, is the set of prime ideals of <m>R</m>. 
                The set of maximal ideals of <m>R</m> is denoted <m>\mSpec(R)</m> 
                <idx><h>prime spectrum</h></idx>
                <idx><h><m>\Spec(R)</m></h></idx>
                <idx><h><m>\mSpec(R)</m></h></idx>.
              </p>
            </statement>
          </definition>
  
          <definition xml:id="defn-vi"><title><m>V(I)</m></title>
            <statement>
              <p>
                For a ring <m>R</m> and an ideal <m>I</m>, we set <idx><h><m>V(I)</m></h></idx> 
                <me>V(I) :=  \{ P \in \Spec(R) \ \mid \ I \sse P\}.</me>
              </p>
            </statement>
          </definition>
  
          <proposition xml:id="prop-properties-of-v"><title>Properties of V</title>
            <statement>
              <p>
                Let <m>R</m> be a ring, and <m>I_{\lambda},J</m> be ideals, not necessarily proper. 
                <ol>
                  <li>
                    <p>
                      <m>V(R) = \varnothing</m> and <m>V(0) = \Spec(R)</m>. 
                    </p>
                  </li>

                  <li>
                    <p>
                      If <m>I \subseteq J</m>, then <m>V(J)\subseteq V(I)</m>. 
                    </p>
                  </li>

                  <li>
                    <p>
                      <m>V(I) \cup V(J) = V(I \cap J)=V(IJ)</m>. 
                    </p>
                  </li>

                  <li>
                    <p>
                      <m>\bigcap_{\lambda} V(I_{\lambda}) =V(\sum_{\lambda} I_{\lambda})</m>.
                    </p>
                  </li>
                </ol>
              </p>
            </statement>
  
            <proof>
              <p>
                Both <m>(a)</m> and <m>(b)</m> are straightforward, so we just prove <m>(c)</m>.
              </p>
  
              <p>
                To see <m>V(I)\cup V(J) \subseteq V(I \cap J)</m>, just observe that if <m>I \sse P</m> or <m>J \sse P</m>, then <m>I \cap J \sse P</m>.
              </p>
  
              <p>
                Since <m>IJ \subseteq I \cap J</m>, we have <m>V(I \cap J) \subseteq V(IJ)</m>. 
                To show <m>V(IJ) \subseteq V(I) \cup V(J)</m>, if <m>P</m> is a prime and <m>P \notin V(I) \cup V(J)</m>, then <m>P \not\supseteq I, P \not\supseteq J</m>. 
                Thus we can find <m>f \in I</m>, and <m>g \in J</m> such that <m>f, g \notin P</m>. 
                Since <m>P</m> is prime, <m>fg \notin P</m>, while also <m>fg \in IJ</m>. 
                Therefore, <m>P \nsubseteq IJ</m>.
              </p>
  
              <p>
                To show <m>(d)</m>, since ideals are closed for sums, if <m>P \supseteq I_\lambda</m> for all <m>\lambda</m>, then <m>P \supseteq \sum_{\lambda} I_{\lambda}</m>. 
                Moreover, if <m>P \supseteq \sum_{\lambda} I_{\lambda}</m>, then in particular <m>P \supseteq I_\lambda</m>.
              </p>
            </proof>
          </proposition>
  
          <example xml:id="ex-poset-structure-of-spec"><title>Poset Structure of Spec</title>
            <statement>
              <p>
                Note that <m>\Spec(R)</m> is also a poset under inclusion. 
                Show that the poset structure of <m>\Spec(R)</m> can be recovered from the topology as follows: 
                <me>P \subseteq Q \quad \Leftrightarrow \quad Q \in \overline{\{ P \}}.</me>
              </p>
            </statement>
          </example>
  
          <example xml:id="ex-spectrum-of-z"><title>Spectrum of Z</title>
            <statement>
              <p>
                The spectrum of <m>\mathbb{Z}</m> is, as a poset:
              </p>
            </statement>
  
            <solution>
  
              <p>
                #empty
              </p>
  
              <p>
                The closed sets are of the form <m>V((n))</m>, which are the whole space when <m>n=0</m>, the empty set when <m>n=1</m>, and any finite union of things in the top row. Any closed set that contains <m>(0)</m> must be all of <m>\Spec(\Z)</m>.
              </p>
  
            </solution>
          </example>
  
          <definition xml:id="defn-radical-ideal"><title>Radical Ideal</title>
            <statement>
              <p>
                The <em>radical</em> <idx><h>radical of an ideal</h></idx> of an ideal <m>I</m> <idx><h><m>\sqrt I</m></h></idx> in a ring <m>R</m> is the ideal 
                <me>\sqrt{I} :=  \{f\in R \ | \ f^n\in I \textrm{ for some } n\}.</me> 
                An ideal is a <em>radical ideal</em> <idx><h>radical ideal</h></idx> if <m>I=\sqrt{I}</m>.
              </p>
            </statement>
          </definition>
  
          <proposition xml:id="prop-radical-ideal-is-an-ideal"><title>Radical Ideal is an Ideal</title>
            <statement>
              <p>
                To see that <m>\sqrt{I}</m> is an ideal, note that if <m>f^m, g^n \in I</m>, then 
                <me>
                  \begin{aligned} (f+g)^{m+n-1} 
                  &amp;= \sum_{i=0}^{m+n-1} \binom{m+n-1}{i} f^i g^{m+n-1-i} \\
                  &amp;= f^m \left(f^{n-1} + \binom{m+n-1}{1} f^{n-2}g + \cdots + \binom{m+n-1}{n-1} g^{n-1}\right) \\
                  &amp;+ g^n \left(\binom{m+n-1}{n} f^{m-1} + \binom{m+n-1}{n+1} f^{m-2} g + \cdots + g^{m-1} \right) \in I,
                  \end{aligned}
                </me> 
                and <m>(rf)^m=r^m f^m \in I</m>.
              </p>
            </statement>
          </proposition>
  
          <definition xml:id="defn-reduced-ring"><title>Reduced Ring</title>
            <statement>
              <p>
                A ring <m>R</m> is <em>reduced</em> if it has no nonzero nilpotents.
              </p>
            </statement>
          </definition>
  
          <example xml:id="ex-ideal-radical-iff-ri-reduced"><title>Ideal Radical iff R/I Reduced</title>
            <statement>
              <p>
                An ideal <m>I</m> in <m>R</m> is radical if and only if <m>R/I</m> is reduced.
              </p>
            </statement>
          </example>
  
          <lemma xml:id="lem-v-and-radical-ideals"><title><m>V</m> and Radical Ideals</title>
            <statement>
              <p>
                Let <m>R</m> be a ring. For any ideal <m>I</m>, <m>V(I)=V(\sqrt{I})</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                The containment <m>I \subseteq \sqrt{I}</m> is immediate from the definition of radical, and thus we have <m>V(I) \subseteq V(\sqrt{I})</m>. 
                Now let <m>P \supseteq I</m> be a prime ideal, and let <m>f \in \sqrt{I}</m>. 
                By definition, there exists some <m>n</m> such that <m>f^n \in I \subseteq P</m>, but since <m>P</m> is prime, we conclude that <m>f \in P</m>. 
                Therefore, <m>V(\sqrt{I}) \subseteq V(I)</m>, and we are done.
              </p>
            </proof>
          </lemma>
  
          <lemma xml:id="lem-preimage-of-prime-is-prime"><title>Preimage of Prime is Prime</title>
            <statement>
              <p>
                Let <m>R \xrightarrow{\varphi} S</m> be a ring homomorphism and <m>P \subset S</m> be prime. 
                Then <m>P \cap R</m> is also prime.
              </p>
            </statement>
  
            <proof>
              <p>
                Let <m>P</m> be a prime ideal in <m>S</m>. 
                Given elements <m>f, g \in R</m> such that <m>fg \in P \cap R</m>, then <m>\varphi(f)\varphi(g)=\varphi(fg) \in P</m>, and since <m>P</m> is prime, we conclude that <m>\varphi(f) \in P</m> or <m>\varphi(g) \in P</m>. 
                Therefore, <m>f \in P \cap R</m> or <m>g \in P \cap R</m>.
              </p>
            </proof>
          </lemma>
  
          <definition xml:id="defn-induced-map-on-spec"><title>Induced Map on <m>\Spec</m></title>
            <statement>
              <p>
                Each ring homomorphism <m>\varphi\!: R\to S</m> induces a map on spectra <m>\varphi^*\!:\Spec(S)\to\Spec(R)</m> given by <m>\varphi^*(P)=\varphi^{-1}(P) = P \cap R</m>.
                <idx><h>map on <m>\Spec</m></h></idx>
              </p>
            </statement>
          </definition>
  
          <example xml:id="ex-induced-map-on-spec-continuous"><title>Induced Map on Spec Continuous</title>
            <statement>
              <p>
                The induced map on spectra is not only an order-preserving map, but also it is continuous:
                if <m>U\subseteq \Spec(R)</m> is open, we have <m>U=\Spec(R) \setminus V(I)</m> for some ideal <m>I</m>; then for a prime <m>Q</m> of <m>S</m>, 
                <me>Q \in (\varphi^*)^{-1}(U) \quad \Longleftrightarrow \quad Q \cap R \not\supseteq I  \quad \Longleftrightarrow  \quad Q \not\supseteq IS  \quad \Longleftrightarrow  \quad Q \notin V(IS).</me> 
                So <m>(\varphi^*)^{-1}(U)</m> is the complement of <m>V(IS)</m>, and thus open.
              </p>
            </statement>
          </example>
  
          <definition xml:id="defn-minimal-prime-2"><title>Minimal Prime</title>
            <statement>
              <p>
                Let <m>I</m> be an ideal in a ring <m>R</m>. 
                A prime <m>P</m> is a <em>minimal prime</em> of <m>I</m> if <m>P</m> is minimal in <m>V(I)</m>. A <em>minimal prime</em> of <m>R</m> is a minimal element in <m>\Spec(R)</m>.
                <idx><h>minimal prime of an ideal</h></idx>
                <idx><h>minimal prime of a ring</h></idx>
              </p>
            </statement>
          </definition>
  
          <definition xml:id="defn-minimal-prime-3"><title>Minimal Prime</title>
            <statement>
              <p>
                Let <m>I</m> be an ideal in a ring <m>R</m>. A <em>minimal prime</em> of <m>I</m> is a minimal element (with respect to containment) in <m>V(I)</m>. 
                More precisely, <m>P</m> is a minimal prime of <m>I</m> if the following hold: 
                - <m>P</m> is a prime ideal, 
                - <m>P \supseteq I</m>, and 
                - if <m>Q</m> is also a prime ideal and <m>I \subseteq Q \subseteq P</m>, then <m>Q = P</m>.
              </p>
    
              <p>
                The set of minimal primes of <m>I</m> is denoted <m>\Min(I)</m> 
                <idx><h><m>\Min(I)</m></h></idx>.
              </p>
            </statement>
          </definition>
  
          <lemma xml:id="lem-every-prime-contains-minimal-prime"><title>Every Prime Contains Minimal Prime</title>
            <statement>
              <p>
                Let <m>R</m> be a ring, and <m>I</m> an ideal. 
                Every prime <m>P</m> that contains <m>I</m> contains a minimal prime of <m>I</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                Fix an ideal <m>I</m> and a prime <m>P \supseteq I</m>, and consider the set
                <me>S = \lbrace Q \in V(I) \mid P \supseteq Q \rbrace,</me>
                which is partially ordered with <m>\supseteq</m>. 
                On the one hand, <m>P \in S</m>, so <m>S</m> is nonempty. 
                On the other hand, given any chain <m>\{ Q_i \}_i</m> in <m>S</m>, <m>Q := \bigcap_i Q_i</m> is a prime ideal in <m>R</m> ( #prove !). 
                Moreover, <m>Q</m> contains <m>I</m>, since every <m>Q_i</m> contain <m>I</m>, and <m>Q</m> is contained in <m>P</m>, since every <m>P_i \subseteq Q</m>. 
                Therefore, <m>Q \in S</m>, and Zorn's Lemma applies to <m>S</m>. By <xref provisional="cite"/> [[Mathematics/Foundations/Results/Theorem - Zorn's Lemma]], <m>S</m> contains a maximal element for <m>\supseteq</m>, say <m>Q</m>.
              </p>
  
              <p>
                Notice that <m>Q</m> is equivalently a minimal element for <m>\subseteq</m>. 
                Now if <m>Q'</m> is a prime ideal with <m>I \subseteq Q' \subseteq Q</m>, then <m>Q' \subseteq Q \subseteq P</m>, and thus <m>Q' \in S</m>. 
                Therefore, we must have <m>Q' = Q</m>, by maximality of <m>Q</m> with respect to <m>\supseteq</m>. 
                We conclude that <m>Q</m> is a minimal prime of <m>I</m>, and by definition <m>Q</m> is contained in <m>P</m>.
              </p>
            </proof>
          </lemma>
  
          <definition xml:id="defn-multiplicatively-closed-set"><title>Multiplicatively Closed Set</title>
            <statement>
              <p>
                Suppose <m>R</m> is a commutative ring and <m>S \subseteq R</m> is a subset such that 
                1. <m>1 \in S</m>, 
                2. <m>S</m> is closed under multiplication (i.e., if <m>x,y \in S</m>, then <m>xy \in S</m>), and 
                3. <m>S</m> does not contain <m>0</m> nor any zerodivisors. 
                Such a subset <m>S</m> is called a <em>multiplicatively closed subset of non zero divisors</em> <idx><h>multiplicatively closed subset</h></idx> of <m>R</m>.
              </p>
            </statement>
          </definition>
  
          <lemma xml:id="lem-spec-strong-nullstellensatz"><title>Spec Strong Nullstellensatz</title>
            <statement>
              <p>
                Let <m>R</m> be a ring, <m>I</m> an ideal, and <m>W</m> a multiplicatively closed subset. 
                If <m>W \cap I = \es</m>, then there is a prime ideal <m>P</m> with <m>P \supseteq I</m> and <m>P \cap W= \es</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                Consider the family of ideals <m>\mathcal{F} := \{ J \ | \ J \supseteq I, J \cap W=\varnothing\}</m> ordered with inclusion. 
                This is nonempty, since it contains <m>I</m>, and any chain <m>J_1 \subseteq J_2 \subseteq \cdots</m> has an upper bound <m>\cup_i J_i</m>. 
                Therefore, <m>\mathcal{F}</m> has some maximal element <m>\A</m> by a basic application of <xref provisional="cite"/> [[Mathematics/Foundations/Results/Theorem - Zorn's Lemma|Zorn's Lemma]]. 
                We claim <m>\A</m> is prime. 
                Suppose <m>f,g\notin \A</m>. 
                By maximality, <m>\A+(f)</m> and <m>\A+(g)</m> both have nonempty intersection with <m>W</m>, so there exist <m>r_1f+a_1</m>, <m>r_2 g+a_2 \in W</m>, with <m>a_1,a_2\in \A</m>. 
                If <m>fg\in \A</m>, then
                <me>\underset{\in W}{(r_1f+a_1)}\underset{\in W}{(r_2g+a_2)} = r_1 r_2 fg + r_1 f \underset{\in \mathbb{A}}{a_2} + r_2 g \underset{\in \mathbb{A}}{a_1} + \underset{\in \mathbb{A}}{a_1 a_2} \in W \cap \A,</me>
              </p>
            </proof>
          </lemma>
  
          <theorem xml:id="thm-spectrum-analogue-of-strong-nullstellensatz"><title>Spectrum Analogue of Strong Nullstellensatz</title>
            <statement>
              <p>
                Let <m>R</m> be a ring, and <m>I</m> be an ideal. 
                For <m>f\in R</m>,
                <me>V(I) \subseteq V(f) \Longleftrightarrow f\in \sqrt{I}.</me>
                Moreover,
                <me>\sqrt{I} = \bigcap_{P \in V(I)} P = \bigcap_{P \in \Min(I)} P.</me>  
              </p>
            </statement>

            <proof>
              <p>
                First to justify the equivalence of the two statements we observe: 
                <me>V(I) \subseteq V(f) \Longleftrightarrow f\in P \ \text{for all} \ P \in V(I)  \Longleftrightarrow f \in \bigcap_{P \in V(I)} P.</me> 
                Now we will show that <m>\displaystyle\bigcap_{P \in V(I)} P = \sqrt{I}</m>:
              </p>

              <p>
                <m>(\supseteq)</m>: 
                It suffices to show that <m>P \supseteq I</m> implies <m>P \supseteq \sqrt{I}</m>, and indeed 
                <me>f \in \sqrt{I} \implies f^n\in I \subseteq P \implies f\in P.</me>
              </p>
  
              <p>
                <m>(\subseteq)</m>: 
                If <m>f\notin \sqrt{I}</m>, consider the multiplicatively closed set <m>W=\{1,f,f^2,f^3,\ldots\}</m>. 
                We have <m>W\cap I=\varnothing</m> by hypothesis. 
                There is a prime <m>P</m> in <m>V(I)</m> that does not intersect <m>W</m>, and hence <m>P</m> does not contain <m>f.</m>
              </p>
  
              <p>
                Finally, <m>\Min(I) \subseteq V(I)</m>, and since every prime in <m>V(I)</m> contains a minimal prime of <m>I</m>, we conclude that 
                <me>\bigcap_{P \in V(I)} P = \bigcap_{P \in \Min(I)} P.</me>
              </p>
            </proof>
          </theorem>
  
          <example xml:id="ex-radical-of-x2-is-x"><title>Radical of <m>(x^2)</m> is <m>(x)</m></title>
            <statement>
              <p>
                Let <m>k</m> be a field, <m>R = k[x]</m>, and <m>I = (x^2)</m>. 
                On the one hand, it is immediate form the definition that <m>x \in \sqrt{I}</m>, and thus <m>(x) \subseteq \sqrt{I}</m>.
                On the other hand, <m>(x)</m> is a prime ideal that contains <m>I</m>, and thus by <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Spectrum Analogue of Strong Nullstellensatz|Theorem]] we must have <m>\sqrt{I} = (x)</m>.
              </p>
  
            </statement>
          </example>
  
          <corollary xml:id="cor-vivj-iff-radicals-are-equal"><title><m>V(I)=V(J)</m> iff Radicals are Equal</title>
            <statement>
              <p>
                Let <m>R</m> a ring. 
                There is an order-reversing bijection 
                <me>\{ \text{closed subsets of } \Spec(R) \}\longleftrightarrow\{\text{radical ideals } I\subseteq R\}</me> 
                In particular, for two ideals <m>I</m> and <m>J</m>, we have <m>V(I)=V(J)</m> if and only if <m>\sqrt{I}=\sqrt{J}</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                The closed sets of <m>\Spec(R)</m> are precisely the sets of the form <m>V(I)</m> for some ideal <m>I</m>. 
                As <m>V(I) = V(\sqrt{I})</m> the closed sets of <m>\Spec(R)</m> are given by <m>V(I)</m> where <m>I</m> ranges over all radical ideals. 
                We showed in <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Proposition - Properties of V|Proposition]] that the map
                <me>V: \{\text{radical ideals } I\subseteq R\} \longrightarrow \{ \text{closed subsets of } \Spec(R) \}</me>
                is order-reversing. 
                Finally, suppose that <m>I</m> and <m>J</m> are ideals such that <m>V(I) = V(J)</m>. 
                By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Spectrum Analogue of Strong Nullstellensatz|Theorem]],
                <me>\sqrt{I} = \bigcap_{P \in V(I)} P = \bigcap_{P \in V(J)} P = \sqrt{J}.</me>
                Conversely, suppose that <m>\sqrt{I} = \sqrt{J}</m>. 
                Given a prime <m>P \in V(I)</m>, we also have <m>P \in V(\sqrt{I})</m>, and thus
                <me>P \supseteq \sqrt{I} = \sqrt{J} \supseteq J,</me>
                so <m>P \in V(I)</m>. 
                Since the same argument applies to show that <m>V(J) \supseteq V(I)</m>, we conclude that <m>V(I) = V(J)</m>.
              </p>
            </proof>
          </corollary>
  
          <example xml:id="ex-properties-of-radical-ideals"><title>Properties of Radical Ideals</title>
            <statement>
              <p>
                Let <m>I</m> and <m>J</m> be ideals in a ring <m>R</m>. 
                (a) Show that <m>\sqrt{\sqrt{I}} = \sqrt{I}</m>. 
                (b) Show that if <m>I \subseteq J</m>, then <m>\sqrt{I} \subseteq \sqrt{J}</m>. 
                (c) Show that <m>\sqrt{I \cap J} = \sqrt{I} \cap \sqrt{J}</m>. 
                (d) Show that <m>\sqrt{I^n} = \sqrt{I}</m> for all <m>n \geqslant 1</m>. 
                (e) Show that if <m>P</m> is a prime ideal, then <m>\sqrt{P^n} = P</m> for all <m>n \geqslant 1</m>.
              </p>
            </statement>
          </example>

        </section>

        <section xml:id="sec-ops"><title>Operations</title>

          <subsection xml:id="subsec-colon-annihilator"><title>Colons and Annihilators</title>

            <p>
              
            </p>
            
          </subsection>

          <subsection xml:id="sec-prime-avoidance"><title>Prime Avoidance</title>
          
            <blockquote>
              <p>
                <q>Only by avoiding the beginning of things can we escape their end.</q>
              </p>
              <attribution>Cyril Connolly</attribution>
            </blockquote>
  
            <!--
            <blockquote>
              <p>
                <q>A person often meets his destiny on the road he took to avoid it.</q>
              </p>
              <attribution>Jean de La Fontaine</attribution>
            </blockquote>
            -->
  
            <remark>
              <p>
                We will now discuss an important lemma known as Prime Avoidance. 
                This is an elementary fact, but it is very helpful. 
                Prime Avoidance says that if an ideal <m>I</m> is not contained in any of the primes <m>P_1, \ldots, P_n</m>, then <m>I</m> cannot be contained in their union. 
                Set-theoretically this is possible, of course; 
                but if the ideals <m>P_1, \ldots, P_n</m> are all prime, then it is actually not possible for <m>I \subseteq P_1 \cup \cdots \cup P_n</m> unless <m>I</m> is contained in one of the <m>P_i</m>. 
                In fact, for this to work we can even allow two of the <m>P_i</m> to be just any ideals, as long as the remaining <m>P_i</m> are prime.
              </p>
            </remark>
        
            <lemma xml:id="lem-prime-avoidance"><title>Prime Avoidance</title>
            <idx><h>Prime Avoidance</h></idx>
              <statement>
                <p>
                  Let <m>R</m> be a ring, <m>I_1,\dots,I_n,J</m> be ideals, and suppose that <m>I_i</m> is prime for <m>i&gt;2</m>. 
                  If <m>J\not\subseteq I_i</m> for all <m>i</m>, then <m>J\not\subseteq \bigcup_i I_i</m>. 
                  Equivalently, if <m>J\subseteq \bigcup_i I_i</m>, then <m>J\subseteq I_i</m> for some <m>i</m>.
                </p>
    
                <p>
                  Moreover, if <m>R</m> is <m>\N</m>-graded, and all of the ideals are homogeneous, all <m>I_i</m> are prime, and <m>J\not\subseteq I_i</m> for all <m>i</m>, then there is a homogeneous element in <m>J</m> that is not in <m>\bigcup_i I_i</m>.
                </p>
              </statement>
    
              <proof>
                <p>
                  We proceed by induction on <m>n</m>. 
                  If <m>n=1</m>, there is nothing to show. 
                  When <m>n=2</m>, we have two ideals <m>I_1</m> and <m>I_2</m> and an ideal <m>J</m> such that <m>J \nsubseteq I_1</m> and <m>J \nsubseteq I_2</m>, and we want to show that <m>J \nsubseteq I_1 \cup I_2</m>. 
                  By assumption there exist elements <m>a_1, a_2 \in J</m> with <m>a_1 \notin I_1</m> and <m>a_2 \notin I_2</m>. 
                  If <m>a_2 \notin I_1</m> or <m>a_1 \notin I_2</m>, then we have an element that is not in <m>I_1 \cup I_2</m>, and we are done. 
                  On the other hand, if <m>a_2 \in I_1</m> and <m>a_1 \in I_2</m>, then consider <m>c = a_1 + a_2 \in J</m>. 
                  Since <m>a_1 \in I_1</m> but <m>a_2 \notin I_1</m>, then <m>c \notin I_1</m>. 
                  Similarly, <m>c \notin I_2</m>. 
                  Therefore, <m>c \notin I_1 \cup I_2</m>.
                </p>
    
                <p>
                  Now suppose that the statement holds for some <m>n-1 \geq 2</m>, and consider ideals <m>I_1, \ldots, I_{n}</m> with <m>I_i</m> prime for all <m>i \geq3</m> such that <m>J \notin I_i</m> for any <m>i</m>. 
                  By induction hypothesis, for each <m>i</m> we have 
                  <me>J \notin \bigcup_{j \neq i} I_j,</me>
                  so we can find elements <m>a_i</m> such that 
                  <me>a_i \notin \bigcup_{j\neq i} I_j \textrm{ and } a_i \in J.</me> 
                  If some <m>a_i\notin I_i</m>, we are done, so let's assume that <m>a_i\in I_i</m> for each <m>i</m>. 
                  Consider 
                  <me>a :=  a_n + a_1 \cdots a_{n-1} \in J.</me>
                  Notice that <m>a_1\cdots a_{n-1}=a_i(a_1\cdots \widehat{a_i} \cdots a_{n-1})\in I_i</m>. 
                  If <m>a\in I_i</m> for <m>i&lt;n</m>, then we also have <m>a_n\in I_i</m>, a contradiction. 
                  If <m>a\in I_n</m>, then we also have <m>a_1\cdots a_{n-1} = a - a_n \in I_n</m>, since <m>a_n\in I_n</m>. 
                  Since <m>n&gt;2</m>, our assumption is that <m>I_n</m> is prime, so one of <m>a_1,\dots,a_{n-1}\in I_n</m>, which is a contradiction. 
                  So <m>a \notin I_i</m> for all <m>i</m>, and thus <m>a</m> is the element we were searching for.
                </p>
    
                <p>
                  If all <m>I_i</m> are homogeneous and prime, then we proceed as above but replacing <m>a_n</m> and <m>a_1,\dots,a_{n-1}</m> with suitable powers so that <m>a_n + a_1 \cdots a_{n-1}</m> is homogeneous. 
                  For example, we could take
                  <me>a :=  a_n^{\deg(a_1) + \cdots + \deg(a_{n-1})} + \left( a_1 \cdots a_{n-1} \right)^{\deg(a_n)}.</me>
                  The primeness assumption guarantees that noncontainments in ideals is preserved.
                </p>
              </proof>
            </lemma>
    
            <theorem xml:id="thm-stronger-prime-avoidance"><title>Stronger Prime Avoidance</title>
              <statement>
                <p>
                  Let <m>R</m> be a ring, <m>P_1, \ldots, P_n</m> prime ideals, <m>x \in R</m> and <m>I</m> be an ideal in <m>R</m>. 
                  If <m>(x) + I \not\subseteq P_i</m> for each <m>i</m>, then there exists <m>y \in J</m> such that 
                  <me>x + y \notin \bigcup_{i=1}^n P_i.</me> 
                </p>
              </statement>
  
              <proof>
                <p>
                  We proceed by induction on <m>n</m>. 
                  When <m>n=1</m>, if every element of the form <m>x+y</m> with <m>y \in R</m> is in <m>P= P_1</m>, then multiplying by <m>r \in R</m> we conclude that every <m>rx + y \in P</m>, meaning <m>(x) + I \subseteq P</m>.
                </p>
  
                <p>
                  Now suppose <m>n&gt;1</m> and that we have shown the statement for <m>n-1</m> primes. 
                  If <m>P_i \subseteq P_j</m> for some <m>i \neq j</m>, then we might as well exclude <m>P_i</m> from our list of primes, and the statement follows by induction. 
                  So assume that all our primes <m>P_i</m> are incomparable.
                </p>
    
                <p>
                  If <m>x \notin P_i</m> for all <m>i</m>, we are done, since we can take <m>x+0</m> for the element we are searching for. 
                  So suppose <m>x</m> is in some <m>P_i</m>, which we assume without loss of generality to be <m>P_n</m>. 
                  Our induction hypothesis says that we can find <m>y \in I</m> such that <m>x+y \notin P_1 \cup \cdots \cup P_{n-1}</m>. 
                  If <m>x+y \notin P_n</m>, we are done, so suppose <m>x+y \in P_n</m>. 
                  Since we assumed <m>x \in P_n</m>, we must have <m>I \not\subseteq P_n</m>, or else we would have had <m>(x) + I \subseteq P_n</m>. 
                  Now <m>P_n</m> is a prime ideal that does not contain <m>P_1, \ldots, P_{n-1}</m>, nor <m>I</m>, so 
                  <me>P \not\supseteq I P_1 \cdots P_{n-1}.</me>
                  Choose <m>z \in I P_1 \cdots P_{n-1}</m> not in <m>P_n</m>. 
                  Then <m>x+y+z \notin P_n</m>, since <m>z \notin P_n</m> but <m>x+y \in P_n</m>. 
                  Moreover, for all <m>i&lt;n</m> we have <m>x+y+z \notin P_i</m>, since <m>z\in P_i</m> and <m>x+y \notin P_i</m>.
                </p>
              </proof>
            </theorem>
  
          </subsection>
          
        </section>

      </chapter>

      <chapter xml:id="ch-decomposing-ideals"><title>Decomposing Ideals</title>
  
        <section xml:id="sec-min-support"><title>Minimal Primes and Support</title>

          <blockquote>
            <p>
              <q>There is no support so strong as the strength that enables one to stand alone.</q>
            </p>
            <attribution>Ellen Glasgow</attribution>
          </blockquote>
  
          <definition xml:id="defn-minimal-prime"><title>Minimal Prime</title>
          <statement>
            <p>
              Let <m>I</m> be an ideal in a ring <m>R</m>. A prime <m>P</m> is a <em>minimal prime</em><idx><h>minimal prime</h></idx> of <m>I</m> if <m>P</m> is minimal in <m>V(I)</m>. A <em>minimal prime</em> of <m>R</m> is a minimal element in <m>\Spec(R)</m>.
            </p>
          </statement>
          </definition>
  
          <definition xml:id="defn-minimal-prime-1"><title>Minimal Prime</title>
          <statement>
            <p>
              Let <m>I</m> be an ideal in a ring <m>R</m>. A <em>minimal prime</em> of <m>I</m> is a minimal element (with respect to containment) in <m>V(I)</m>. More precisely, <m>P</m> is a minimal prime of <m>I</m> if the following hold: - <m>P</m> is a prime ideal, - <m>P \supseteq I</m>, and - if <m>Q</m> is also a prime ideal and <m>I \subseteq Q \subseteq P</m>, then <m>Q = P</m>.
            </p>
  
            <p>
              The set of minimal primes of <m>I</m> is denoted <m>\Min(I)</m><idx><h><m>\Min(I)</m></h></idx>
            </p>

            <p>FIX</p>
          </statement>
          </definition>
  
          <definition xml:id="defn-nilradical"><title>Nilradical</title>
          <statement>
            <p>
              The nilpotent elements of a ring <m>R</m> are exactly the elements in every minimal prime of <m>R</m>. The radical of <m>(0)</m> is often called the <em>nilradical</em><idx><h>nilradical</h></idx> of <m>R</m>, denoted <m>\mathcal{N}(R)</m><idx><h><m>\cN(R)</m></h></idx>.
            </p>
          </statement>
          </definition>
  
          <example xml:id="ex-minimal-primes-and-radical-ideals"><title>Minimal Primes and Radical Ideals</title>
  
  
            <statement>
              
  
              <p>
                If <m>P</m> is prime, then <m>\Min(P)=\{P\}</m>. Also, since <m>V(I)=V(\sqrt{I})</m>, we have <m>\Min(I)=\Min(\sqrt{I})</m>.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-minimal-primes-of-x2xy"><title>Minimal Primes of <m>(x^2,xy)</m></title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be a field and <m>R = k[x,y]</m>. Every prime containing <m>I = (x^2, xy)</m> must contain <m>x^2</m>, and thus <m>x</m>. On the other hand, <m>(x)</m> is a prime ideal containing <m>I</m>. Therefore, <m>I</m> has a unique minimal prime, and <m>\Min(I) = \{ (x) \}</m>.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-nilradical-of-x2xy"><title>Nilradical of <m>(x^2,xy)</m></title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be a field. The radical of the ideal <m>I = (x^2, xy)</m> in the ring <m>R = k[x,y]</m> is <m>\sqrt{I} = (x).</m> We saw before that <m>\Min(I) = \{ (x) \}</m>. The nilradical of <m>R = k[x,y]/(x^2,xy)</m> corresponds to the radical of <m>(x^2,xy)</m> is <m>k[x,y]</m>, so it is the ideal <m>(x)/(x^2,xy)</m>.
              </p>
  
            </statement>
          </example>
  
          <theorem xml:id="thm-finite-minimal-primes"><title>Finite Minimal Primes</title>
  
  
            <statement>
              
  
              <p>
                Over a noetherian ring <m>R</m>, every ideal <m>I</m> has finitely many minimal primes, and thus <m>\sqrt{I}</m> is a finite intersection of primes.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                Let <m>S=\{ \text{ideals} \ I \subseteq R \ | \ \Min(I) \ \text{is infinite} \}</m>, and suppose, to obtain a contradiction, that <m>S\neq \es</m>. Since <m>R</m> is noetherian, <m>S</m> has a maximal element <m>J</m>. If <m>J</m> was a prime ideal, then <m>\Min(J) = \{ J \}</m> would be finite, by , so <m>J</m> is not prime. However, <m>\Min(J)=\Min(\sqrt{J})</m>, and thus <m>\sqrt{J} \supseteq J</m> is also in <m>S</m>, so we conclude that <m>J</m> is radical. Since <m>J</m> is not prime, we can find some <m>a, b \notin J</m> with <m>ab \in J</m>. Then <m>J \subsetneq J + (a) \subseteq \sqrt{J + (a)}</m> and <m>J \subsetneq \sqrt{J + (b)}</m>. Since <m>J</m> is maximal in <m>S</m>, we conclude that <m>\sqrt{J + (a)}</m> and <m>\sqrt{J + (b)}</m> have finitely many minimal primes, so we can write <me>\sqrt{J + (a)} = P_1 \cap \cdots \cap P_t \textrm{ and } \sqrt{J + (b)} = P_{t+1} \cap \cdots \cap P_s</me>for some prime ideals <m>P_i</m>.
              </p>
  
              <p>
                Let <m>f \in \sqrt{J + (a)} \cap \sqrt{J + (b)}</m>. Some sufficiently high power of <m>f</m> is in both <m>J + (a)</m> and <m>J + (b)</m>, so there exist <m>n, m \geq 1</m> such that<me>f^n \in J + (a) \quad \textrm{ and } \quad f^m \in J + (b).</me>Thus<me>f^{n+m} \in (J + (a))(J + (b)) \subseteq J^2 + J(a) + J(b) + (\underset{\in J}{ab}) \subseteq J.</me>Therefore, <m>f \in \sqrt{J} = J</m>. This shows that <me>J = \sqrt{J + (a)} \cap \sqrt{J + (b)} = P_1\cap \cdots \cap P_t \cap P_{t+1} \cap \cdots \cap P_s.</me>By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Intersection of Primes are Min Primes|Lemma]], we see that <m>\Min(J)</m> must be a subset of <m>\{P_1,\dots,P_s\}</m>, so it is finite.
              </p>
  
            </proof>
          </theorem>
  
          <lemma xml:id="lem-min-primes-intersection-all-important"><title>Min Primes Intersection All Important</title>
  
  
            <statement>
              
  
              <p>
                If <m>\Min(I) = \{ P_1, \ldots, P_n \}</m>, no <m>P_i</m> can be deleted in the intersection <m>P_1 \cap \cdots \cap P_n</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                Suppose that we can delete <m>P_i</m>, meaning that <me>\bigcap_{j=1}^n P_j = \bigcap_{j \neq i} P_j.</me>Then <me>P_i \supseteq \bigcap_{j=1}^n P_j = \bigcap_{j \neq i} P_j \supseteq \prod_{j \neq i} P_j.</me>Since <m>P_i</m> is prime, this implies that <m>P_i \supseteq P_j</m> for some <m>j \neq i</m>, but this contradicts the assumption that the primes are incomparable.
              </p>
  
            </proof>
          </lemma>
  
          <lemma xml:id="lem-intersection-of-primes-are-min-primes"><title>Intersection of Primes are Min Primes</title>
  
  
            <statement>
              
  
              <p>
                Let <m>I</m> be an ideal in <m>R</m>. If <m>I = P_1 \cap \cdots \cap P_n</m> where each <m>P_i</m> is prime and <m>P_i \not\subseteq P_j</m> for each <m>i \neq j</m>, then <m>\Min(I)=\{ P_1, \ldots, P_n\}</m>. Moreover, <m>I</m> must be radical.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                If <m>Q</m> is a prime containing <m>I</m>, then <m>Q \supseteq (P_1 \cap \cdots \cap P_n)</m>. We claim that <m>Q</m> must contain one of the <m>P_i</m>. Indeed, if <m>Q \not\supseteq P_i</m> for all <m>i</m>, then there are elements <m>f_i \in P_i</m> such that <m>f_i \notin Q</m>, so their product satisfies <m>f_1 \cdots f_n \in (P_1 \cap \cdots \cap P_n)</m> but <m>f_1 \cdots f_n \notin Q</m>. This is a contradiction, so indeed any prime containing <m>I</m> must contain some <m>P_i</m>. Therefore, any minimal prime of <m>I</m> must be one of the <m>P_i</m>. Since we assumed that the <m>P_i</m> are incomparable, these are exactly all the minimal primes of <m>I.</m> By assumption, <m>I</m> coincides with the intersection of its minimal primes, which is <m>\sqrt{I}</m> by <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Spectrum Analogue of Strong Nullstellensatz|Theorem]]. Therefore, <m>I = \sqrt{I}</m>.
              </p>
  
            </proof>
          </lemma>
  
          <example xml:id="ex-ideal-is-finite-intersection-of-primes-iff-i-is-radical"><title>Ideal is Finite Intersection of Primes iff I is Radical</title>
  
  
            <statement>
              
  
              <p>
                If <m>I = P_1 \cap \cdots \cap P_n</m> for some primes <m>P_i</m>, we can always delete unnecessary components until no component can be deleted. Therefore, <m>\Min(I) \subseteq \{ P_1, \ldots, P_n \}</m>.
              </p>
  
              <p>
                As a consequence of <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Min Primes Intersection All Important|Lemma]] and <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Intersection of Primes are Min Primes|Lemma]], if <m>I</m> is a radical ideal, there is a unique way to write <m>I</m> as a finite intersection of incomparable prime ideals. Moreover, <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Intersection of Primes are Min Primes|Lemma]], <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Finite Minimal Primes|Theorem]], and <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Spectrum Analogue of Strong Nullstellensatz|Spectrum Analogue]] also imply that an ideal <m>I</m> is equal to a finite intersection of primes if and only if <m>I</m> is radical.
              </p>
  
            </statement>
          </example>
  
          <definition xml:id="defn-support"><title>Support</title>
          <statement>
            <p>
              If <m>M</m> is an <m>R</m>-module, the <em>support</em><idx><h>support</h></idx> of <m>M</m> is <idx><h><m>\Supp(M)</m></h></idx> <me>\Supp(M) :=  \{ P \in \Spec(R) \ | \ M_P \neq 0\}.</me>
            </p>
          </statement>
          </definition>

          <theorem xml:id="thm-support-and-annihilator"><title> <m>\Supp(M) = \ann(M)</m> </title>
            <statement>
              <p>
                Given <m>M</m> a finitely generated <m>R</m>-module over a ring <m>R</m>, <me>\Supp(M)=V(\ann_R(M)).</me> In particular, <m>\Supp(R/I)=V(I)</m>.
              </p>
            </statement>

            <proof>
  
              <p>
                Let <m>M= R m_i + \cdots + R m_n</m>. We have <me>\ann_R(M)=\bigcap_{i=1}^n \ann_R(m_i),</me> so by <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Proposition - Properties of V|Proposition]], <me>V(\ann_R(M))=\bigcup_{i=1}^n V( \ann_R(m_i)).</me> Notice that we need finiteness here. Also, we claim that <me>\Supp(M) = \bigcup_{i=1}^n \Supp(R m_i).</me> To show <m>(\supseteq)</m>, notice that <m>(R m_i)_P \subseteq M_P</m>, so <me>P \in \Supp(R m_i) \implies 0 \neq (R m_i)_P \subseteq M_P \implies P \in \Supp(M).</me> On the other hand, the images of <m>m_1, \ldots, m_n</m> in <m>M_P</m> generate <m>M_P</m> for each <m>P</m>, and thus <m>P \in \Supp(M)</m> if and only if <m>P \in \Supp(R m_i)</m> for some <m>m_i</m>. Thus, we can reduce the equality <m>\Supp(M)=V(\ann_R(M))</m> to the case of a cyclic module <m>R m</m>. By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Zero in Localization|Lemma]], <m>\frac{m}{1}=0</m> in <m>M_P</m> if and only if <m>(R\setminus P) \cap \ann_R (m) \neq \varnothing</m>, which is equivalent to <m>\ann_R (m) \not\subseteq P</m>.
              </p>
  
            </proof>
          </theorem>
  
          <example xml:id="ex-specific-direct-sum-and-support"><title>Specific Direct Sum and Support</title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be a field, and <m>R=k[x]</m>. Take <me>M=R_x / R = \bigoplus_{i&gt;0} k \cdot x^{-i}.</me>With this <m>k</m>-vector space structure, the action is given by multiplication in the obvious way, then killing any nonnegative degree terms.
              </p>
  
              <p>
                Any element of <m>M</m> is killed by a large power of <m>x</m>, so <m>W^{-1}M=0</m> whenever <m>W</m> is a multiplicatively closed subset of <m>R</m> with <m>W \ni x</m>. Therefore, if <m>P \in \Supp(M)</m>, then <m>x \in P</m>, and thus <m>\Supp(M) \subseteq \{ (x)\}</m>. We will soon see, in , that the support of a nonzero module is nonempty, and thus <m>\Supp(M) = \{(x)\}</m>.
              </p>
  
              <p>
                On the other hand, the annihilator of the class of <m>x^{-n}</m> is <m>x^n</m>, so <me>\ann_R(M) \subseteq \bigcap_{n \geqslant 1}(x^n) = 0.</me>In particular, <m>V(\ann_R(M)) = \Spec(R)</m>, while <m>\Supp(M) = \{ (x) \} \neq \Spec(R)</m>.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-support-of-direct-sum-in-cx"><title>Support of Direct Sum in <m>\C[x]</m></title>
  
  
            <statement>
              
  
              <p>
                Let <m>R=\C[x]</m>, and <m>M= \displaystyle\bigoplus_{n\in \Z} R/(x-n)</m>. First, note that <m>M_\fp = \displaystyle\bigoplus_{n\in \Z} (R/(x-n))_{\fp}</m>, so <me>\Supp(M)= \bigcup_{n\in \Z} \Supp(R/(x-n))= \bigcup_{n\in \Z} V((x-n))=\{(x-n) \ | \ n \in \Z\}.</me>On the other hand, <me>\ann_R(M)=\bigcap_{n\in \Z} \ann_R(R/(x-n)) = \bigcap_{n\in \Z} (x-n) = 0.</me>Note that in this example the support is not even closed.
              </p>
  
            </statement>
          </example>
  
          <lemma xml:id="lem-ses-support"><title>SES Support</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a ring, <m>L,M,N</m> be modules. If <me>\begin{CD}
  0@&gt;&gt;&gt;L@&gt;&gt;&gt;M@&gt;&gt;&gt;N@&gt;&gt;&gt;0
  \end{CD}</me> is exact, then <m>\Supp(L) \cup \Supp(N) = \Supp(M)</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                localization is exact, so for any <m>P</m>, <me>\begin{CD}
  0@&gt;&gt;&gt;L_{p}@&gt;&gt;&gt;M_{p}@&gt;&gt;&gt;N_{p}@&gt;&gt;&gt;0
  \end{CD}</me>is exact. If <m>P \in \Supp(L) \cup \Supp(N)</m>, then <m>L_P</m> or <m>N_P</m> is nonzero, so <m>M_P</m> must be nonzero as well. On the other hand, if <m>P \notin \Supp(L) \cup \Supp(N)</m>, then <m>L_P = N_P =0</m>, so <m>M_P=0</m>.
              </p>
  
            </proof>
          </lemma>
  
          <example xml:id="ex-supports-preserve-containment"><title>Support's Preserve Containment</title>
  
  
            <statement>
              
  
              <p>
                As a corollary of this <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - SES Support|Lemma]], given modules <m>L \subseteq M</m>, <m>\Supp(L) \subseteq \Supp (M)</m>.
              </p>
  
            </statement>
          </example>
  
          <lemma xml:id="lem-nonzero-element-localizes"><title>Nonzero Element Localizes</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a ring, <m>M</m> an <m>R</m>-module, and <m>m\in M</m>. The following are equivalent: (a) <m>m=0</m> in <m>M</m>. (b) <m>\frac{m}{1}=0</m> in <m>M_P</m> for all <m>P \in \Spec(R)</m>. (c) <m>\frac{m}{1}=0</m> in <m>M_P</m> for all <m>P \in \mSpec(R)</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                The implications <m>1) \Rightarrow 2) \Rightarrow 3)</m> are clear. To show <m>3) \Rightarrow 1)</m>, we prove the contrapositive. Given <m>m \neq 0</m>, its annihilator is a proper ideal, which must be contained in a maximal ideal. In particular, <m>V(\ann_R m)=\Supp(Rm)</m> contains a maximal ideal, say <m>P</m>, so <m>\frac{m}{1} \neq 0</m> in <m>M_P</m>.
              </p>
  
            </proof>
          </lemma>
  
          <corollary xml:id="cor-support-of-nonzero-module-nonempty"><title>Support of Nonzero Module Nonempty</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a ring, <m>M</m> an <m>R</m>-module, and <m>m\in M</m>. The following are equivalent: (a) <m>M=0</m>. (b) <m>M_P=0</m> in <m>M_P</m> for all <m>P \in \Spec(R)</m>. (c) <m>M_P=0</m> in <m>M_P</m> for all <m>P \in \mSpec(R)</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                The implications <m>\Rightarrow</m> are clear. To show <m>3) \Rightarrow 1)</m>, we show the contrapositive. If <m>m\neq 0</m>, consider <m>Rm \subseteq M</m>. By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Nonzero Element Localizes|Lemma]], there is a maximal ideal in <m>\Supp(Rm)</m>, and by <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - SES Support|Lemma]] applied to the inclusion <m>Rm \subseteq M</m>, this maximal ideal is in <m>\Supp(M)</m> as well.
              </p>
  
            </proof>
          </corollary>

        </section>

        <section xml:id="sec-ass-primes"><title>Associated Primes</title>

          
          <blockquote>
            <p>
              <q>People just kind of associate me with kicking some ass.</q>
            </p>
            <attribution>Yancy Butler</attribution>
          </blockquote>
  
          <example xml:id="ex-map-from-quotient-to-module-injective-iff-i-annihilates"><title>Map from Quotient to Module Injective iff I Annihilates</title>
  
  
            <statement>
              <p>
                Let <m>R</m> be a ring, <m>I</m> be an ideal in <m>R</m>, and <m>M</m> be an <m>R</m>-module. To give an <m>R</m>-module homomorphism <m>R \longrightarrow M</m> is the same as choosing an element <m>m</m> of <m>M</m> (the image of <m>1</m> via our map) or equivalently, to choose a cyclic submodule of <m>M</m> (the submodule generated by <m>m</m>).
              </p>
    
              <p>
                To give an <m>R</m>-module homomorphism <m>R/I \longrightarrow M</m> is the same as giving an <m>R</m>-module homomorphism <m>R \longrightarrow M</m> whose image is killed by <m>I</m>. Thus giving an <m>R</m>-module homomorphism <m>R/I \longrightarrow M</m> is to choose an element <m>m \in M</m> that is killed by <m>I</m>, meaning <m>I \subseteq \ann(m)</m>. The kernel of the map <m>R \to M</m> given by <m>1 \mapsto m</m> is precisely <m>\ann(m)</m>, so a well-defined map <m>R/I \to M</m> given by <m>1 \mapsto m</m> is injective if and only if <m>I = \ann(m)</m>.
              </p>
            </statement>
  
          </example>
  
          <definition xml:id="defn-associated-prime"><title>Associated Prime</title>
          <statement>
            <p>
              Let <m>R</m> be a ring and <m>M</m> an <m>R</m>-module. We say that <m>P \in \Spec(R)</m> is an <em>associated prime</em><idx><h>associated prime</h></idx> of <m>M</m> if <m>P = \ann_R(m)</m> for some <m>m \in M</m>. Equivalently, <m>P</m> is associated to <m>M</m> if there is an injective homomorphism <m>R/P \longrightarrow M</m>. We write <m>\Ass_R(M)</m><idx><h><m>\Ass_R(M)</m></h></idx> for the set of associated primes of <m>M</m>.
            </p>
  
            <p>
              If <m>I</m> is an ideal, by the <em>associated primes</em><idx><h>associated primes of an ideal</h></idx> of <m>I</m> we (almost always) mean the associated primes of the <m>R</m>-module <m>R/I</m>.
            </p>
          </statement>
          </definition>
  
          <example xml:id="ex-associated-primes-of-x2-xy-in-kxy"><title>Associated Primes of <m>(x^2, xy)</m> in <m>k[[x,y]]</m></title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be a field and let <m>R = k[[x,y]]</m>. Consider ideal <m>I = (x^2, xy)</m> and the <m>R</m>-module <m>M = R/I.</m> The element <m>x + I</m> in <m>M</m> is killed by both <m>x</m> and <m>y</m>, and thus <m>(x,y) \subseteq \ann (x+I)</m>. On the other hand, <m>x+I \neq 0</m>, so <m>\ann(x+I) \neq R</m>. Since <m>(x,y)</m> is the unique maximal ideal in <m>R,</m> we conclude that <m>\ann(x+I) = (x,y)</m>. In particular, <m>(x,y) \in \Ass(M)</m>. Since <m>M = R/I</m>, this also says that <m>(x,y)</m> is an associated prime of <m>I</m>.
              </p>
  
            </statement>
          </example>
  
          <lemma xml:id="lem-associated-primes-and-localization"><title>Associated Primes and Localization</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a noetherian ring and <m>M</m> be an <m>R</m>-module. A prime <m>P</m> is associated to <m>M</m> if and if and only if <m>P_P \in \Ass(M_P)</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                localization is exact, so any inclusion <m>R/P \subseteq M</m> localizes to an inclusion <m>R_P/P_P \subseteq M_P</m>.
              </p>
  
              <p>
                Conversely, suppose that <m>P_P = \ann(\frac{m}{w})</m> for some <m>\frac{m}{w} \in M_P</m>. Let <m>P = (f_1, \ldots, f_n)</m>. For each <m>i</m>, since <m>\frac{f_i}{1} \frac{m}{w} = \frac{0}{1}</m>, there exists <m>u_i \notin P</m> such that <m>u_i f_i m = 0</m>. Then <m>u = u_1 \cdots u_n</m> is not in <m>P</m>, since <m>P</m> is prime, and <m>u f_i m = 0</m> for all <m>i</m>. Since the <m>f_i</m> generate <m>P</m>, we have <m>P (um) = 0</m>. On the other hand, if <m>r \in \ann(um)</m>, then <m>\frac{ru}{1} \in \ann(\frac{m}{w}) = P_P</m>. We conclude that <m>ru \in P_P \cap R = P</m>. Since <m>u \notin P</m> and <m>P</m> is prime, we conclude that <m>r \in P</m>.
              </p>
  
            </proof>
          </lemma>
  
          <lemma xml:id="lem-associated-primes-and-quotients"><title>Associated Primes and Quotients</title>
  
  
            <statement>
              
  
              <p>
                If <m>P</m> is prime, <m>\Ass_R(R/P)=\{ P \}</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                For any nonzero <m>r + P \in R/P</m>, we have <m>\ann_R(r+P) = \{ s \in R \ | \ rs \in P\} = P</m> by definition of prime ideal.
              </p>
  
            </proof>
          </lemma>
  
          <example xml:id="ex-associated-primes-of-x2-in-kx"><title>Associated Primes of <m>(x^{2})</m> in <m>k[[x]]</m></title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be a field and <m>R = k[[x]]</m>. Consider the ideal <m>I = (x^2)</m>, and the <m>R</m>-module <m>M = R/I</m>. If <m>P</m> is a prime ideal in <m>R</m> and <m>P</m> is associated to <m>M</m>, then <m>P = \ann(r+I)</m> for some <m>r \in R</m>.
              </p>
  
            </statement>
  
            <solution>
  
              <p>
                Since <m>I = \ann(M)</m>, <m>P</m> must contain <m>I</m>; since <m>P</m> is prime and <m>x^2 \in P</m>, we conclude that <m>P \supseteq (x)</m>. On the other hand, <m>(x)</m> is a maximal ideal, so <m>P = (x)</m>. Thus <m>\Ass(M) \subseteq \{ (x) \}</m>. Moreover, by an argument similar to the one we used in , we can show that <m>(x) = \ann(x+I)</m>. Therefore, <m>\Ass(M) = \{ (x) \}</m>, and <m>(x)</m> is the unique associated prime of <m>(x^2)</m>. However, <m>(x^2)</m> is not a prime ideal.
              </p>
  
            </solution>
          </example>
  
          <lemma xml:id="lem-graded-primes"><title>Graded Primes</title>
  
  
            <statement>
              
  
              <p>
                If <m>R</m> is a <m>\Z</m>-graded ring, then any ideal <m>I</m> with the property <me>
  \text{ for any homogeneous elements }r,s\in R, \quad rs\in I \Rightarrow r\in I \ \text{or} \ s\in I
  </me> is prime.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                We need to show that this property implies that for any <m>a,b\in R</m> not necessarily homogeneous, <m>ab\in I</m> implies <m>a\in I</m> or <m>b\in I</m>. We do this by induction on the number of nonzero homogeneous components of <m>a</m> plus the number of nonzero homogeneous components of <m>b</m>. This is not interesting if <m>a = 0</m> or <m>b=0</m>, so the base case is when this is two. In that case, both <m>a</m> and <m>b</m> are homogeneous, so the hypothesis already gives us this case. For the induction step, write <m>a=a' + a_m</m> and <m>b=b'+b_n</m>, where <m>a_m,b_n</m> are the nonzero homogeneous components of <m>a</m> and <m>b</m> of largest degree, respectively. We have <m>ab=(a'b'+a_m b' + b_n a') + a_m b_n</m>, where <m>a_m b_n</m> is either the largest homogeneous component of <m>ab</m> or zero. Either way, <m>a_m b_n\in I</m>, so <m>a_m\in I</m> or <m>b_n\in I</m>; without loss of generality, we can assume <m>a_m\in I</m>. Then <m>a b= a' b + a_m b</m>, and <m>ab, a_m b\in I</m>, so <m>a' b\in I</m>, and the total number of homogeneous pieces of <m>a'b</m> is smaller, so by induction, either <m>a'\in I</m> so that <m>a\in I</m>, or else <m>b\in I</m>.
              </p>
  
            </proof>
          </lemma>
  
          <definition xml:id="defn-module-zerodivisor"><title>Module Zerodivisor</title>
          <statement>
            <p>
              Let <m>M</m> be an <m>R</m>-module. An element <m>r \in R</m> is a <em>zerodivisor</em><idx><h>zerodivisor</h></idx> on <m>M</m> if <m>rm = 0</m> for some nonzero <m>m \in M</m>. We denote the set of zerodivisors of <m>M</m> by <m>\mathcal{Z}(M)</m><idx><h><m>\cZ(M)</m></h></idx>.
            </p>
          </statement>
          </definition>
  
          <lemma xml:id="lem-every-ann-contained-in-ass-prime"><title>Every Ann Contained in Ass Prime</title>
  
  
            <statement>
              
  
              <p>
                If <m>R</m> is noetherian, and <m>M</m> is an arbitrary <m>R</m>-module, then for any nonzero <m>m \in M</m>, <m>\ann_R(m)</m> is contained in an associated prime of <m>M</m>. If <m>R</m> and <m>M</m> are graded and <m>m</m> is a homogeneous element, then <m>\ann_R(m)</m> is contained in a homogeneous prime.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                The set of ideals <m>S := \{ \ann_R(m) \ | \ m\in M, m \neq0\}</m> is nonempty, and any element in <m>S</m> is contained in a maximal element. Note in fact that any element in <m>S</m> must be contained in a maximal element of <m>S</m>. Let <m>I=\ann(m)</m> be any maximal element, and let <m>rs\in I</m>, <m>s\notin I</m>. We always have <m>\ann(sm)\supseteq \ann(m)</m>, and equality holds by the maximality of <m>\ann(m)</m> in <m>S</m>. Then <m>r(sm)=(rs)m=0</m>, so <m>r\in \ann(sm)=\ann(m)=I</m>. We conclude that <m>I</m> is prime, and therefore it is an associated prime of <m>M</m>.
              </p>
  
              <p>
                The same argument above works if we take <m>\{ \ann_R(m) \ | \ m\in M, m \neq 0 \ \text{homogeneous} \}</m>, using <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Graded Primes|Lemma]].
              </p>
  
            </proof>
          </lemma>
  
          <theorem xml:id="thm-associated-primes-nonzero"><title>Associated Primes Nonzero</title>
  
  
            <statement>
              
  
              <p>
                If <m>R</m> is noetherian, and <m>M</m> is an arbitrary <m>R</m>-module, then <me>\Ass(M)= \varnothing \Longleftrightarrow M=0.</me> If <m>R</m> and <m>M</m> are <m>\Z</m>-graded and <m>M\neq 0</m>, then <m>M</m> has an associated prime that is homogeneous.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                Even if <m>R</m> is not noetherian, <m>M = 0</m> implies <m>\Ass(M) = \es</m> by definition. So we focus on the case when <m>M \neq 0</m>. If <m>M \neq 0</m>, then <m>M</m> contains a nonzero element <m>m</m>, and <m>\ann(m)</m> is contained in an associated prime of <m>M</m>. In particular, <m>\Ass(M) \neq 0</m>. In the graded setting, <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Every Ann Contained in Ass Prime|Lemma]] gives us a homogeneous associated prime.
              </p>
            </proof>
          </theorem>

          <theorem xml:id="thm-zerodivisors-associated-primes"><title>Zerodivisors Associated Primes</title>
            <statement>
              <p>
                If <m>R</m> is noetherian, and <m>M</m> is an arbitrary <m>R</m>-module, then <me>\bigcup\limits_{P \in \Ass(M)} P = \mathcal{Z}(M).</me> 
              </p>
            </statement>

            <proof>
              <p>
                If <m>r \in \mathcal{Z}(M)</m>, then by definition we have <m>r \in \ann(m)</m> for some nonzero <m>m \in M</m>. Since <m>\ann(m)</m> is contained in some associated prime of <m>M</m>, then <m>r</m> is also contained in some associated prime of <m>M</m>. On the other hand, if <m>P</m> is an associated prime of <m>M</m>, then by definition all elements in <m>P</m> are zerodivisors on <m>M</m>.
              </p>

              <p>
                For the graded case, replace the set of zerodivisors with the annihilators of homogeneous elements. Such annihilator is homogeneous, since if <m>m</m> is homogeneous, and <m>fm=0</m>, writing <m>f=f_{a_1}+\dots+f_{a_b}</m> as a sum of homogeneous elements of different degrees <m>a_i</m>, then <m>0=fm=f_{a_1}m+\dots+f_{a_b}m</m> is a sum of homogeneous elements of different degrees, so <m>f_{a_i}m=0</m> for each <m>i</m>.
              </p>
            </proof>
          </theorem>
          
          <lemma xml:id="lem-associated-primes-and-ses"><title>Associated Primes and SES</title>
  
  
            <statement>
              
  
              <p>
                If <me>\begin{CD}
  0@&gt;&gt;&gt;L@&gt;&gt;&gt;M@&gt;&gt;&gt;N@&gt;&gt;&gt;0
  \end{CD}</me>is an exact sequence of <m>R</m>-modules, then <m>\Ass(L) \subseteq \Ass(M) \subseteq \Ass(L) \cup \Ass(N)</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                If <m>R/P</m> includes in <m>L</m>, then composition with the inclusion <m>L\hookrightarrow M</m> gives an inclusion <m>R/P \hookrightarrow M</m>. Therefore, <m>\Ass(L) \subseteq \Ass(M)</m>.
              </p>
  
              <p>
                Now let <m>P \in \Ass(M)</m>, and let <m>m \in M</m> be such that <m>P=\ann(m)</m>. First, note that <m>P \subseteq \ann(rm)</m> for all <m>r \in R</m>.
              </p>
  
              <p>
                Thinking of <m>L</m> as a submodule of <m>M</m>, suppose that there exists <m>r \notin P</m> such that <m>rm \in L</m>. Then <me>s(rm) = 0 \Longleftrightarrow (sr)m = 0 \implies sr \in P \implies s \in P.</me>So <m>P = \ann(rm)</m>, and thus <m>P \in \Ass(L)</m>.
              </p>
  
              <p>
                If <m>rm \notin L</m> for all <m>r \notin P</m>, let <m>n</m> be the image of <m>m</m> in <m>N</m>. Thinking of <m>N</m> as <m>M/L</m>, if <m>rn = 0</m>, then we must have <m>rm \in L</m>, and by assumption this implies <m>r \in P</m>. Since <m>P = \ann(m) \subseteq \ann(n)</m>, we conclude that <m>P = \ann(n)</m>. Therefore, <m>P \in \Ass(N)</m>.
              </p>
  
            </proof>
          </lemma>
  
          <example xml:id="ex-strict-containment-in-ass-ses"><title>Strict Containment in Ass SES</title>
  
  
            <statement>
              
  
              <p>
                If <m>M</m> is a module with at least two associated primes, and <m>P</m> is an associated prime of <m>M</m>, then <me>\begin{CD}
  0@&gt;&gt;&gt;R/P@&gt;&gt;&gt;M
  \end{CD}</me> is exact, but <m>\{ P \} = \Ass(R/P) \subsetneq \Ass(M)</m>.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-strict-containment-in-ass-ses-1"><title>Strict Containment in Ass SES (2)</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R = k[x]</m>, where <m>k</m> is a field, and consider the short exact sequence of <m>R</m>-modules <me>\begin{CD}
  0@&gt;&gt;&gt;(x)@&gt;&gt;&gt;R@&gt;&gt;&gt;R/(x)@&gt;&gt;&gt;0
  \end{CD}</me>Then one can check that: - <m>\Ass(R/(x)) = \Ass(k) = \{ (x) \}</m>. - <m>\Ass(R) = \Ass((x)) = \{ (0) \}</m>. In particular, <m>\Ass(R) \subsetneq \Ass(R/(x)) \cup \Ass((x))</m>.
              </p>
  
            </statement>
          </example>
  
          <corollary xml:id="cor-ass-direct-sum"><title>Ass Direct Sum</title>
  
  
            <statement>
              
  
              <p>
                Let <m>A</m> and <m>B</m> be <m>R</m>-modules. Then <m>\Ass(A \oplus B) = \Ass(A) \cup \Ass(B)</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                Apply this <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Associated Primes and SES|Lemma]] to the short exact sequence <me>\begin{CD}
  0@&gt;&gt;&gt;A@&gt;&gt;&gt;A\oplus B@&gt;&gt;&gt;B@&gt;&gt;&gt;0
  \end{CD}</me>We obtain <m>\Ass(A) \subseteq \Ass(A \oplus B) \subseteq \Ass(A) \cup \Ass(B)</m>. Repeat with <me>\begin{CD}
  0@&gt;&gt;&gt;B@&gt;&gt;&gt;A\oplus B@&gt;&gt;&gt;A@&gt;&gt;&gt;0
  \end{CD}</me>to conclude that <m>\Ass(B) \subseteq \Ass(A \oplus B)</m>. So we have shown both <m>\Ass(A) \subseteq \Ass(A \oplus B)</m> and <m>\Ass(B) \subseteq \Ass(A \oplus B)</m>, so <m>\Ass(A) \cup \Ass(B) \subseteq \Ass(A \oplus B)</m>. Since we have also already shown <m>\Ass(A \oplus B) \subseteq \Ass(A) \cup \Ass(B)</m>, we must have <m>\Ass(A \oplus B) = \Ass(A) \cup \Ass(B)</m>.
              </p>
  
            </proof>
          </corollary>
  
          <definition xml:id="defn-shift"><title>Shift</title>
          <statement>
            <p>
              Let <m>R</m> and <m>M</m> be <m>T</m>-graded, and <m>t\in T</m>. The <em>shift</em><idx><h>shift</h></idx><idx><h><m>M(t)</m></h></idx> of <m>M</m> by <m>t</m> is the graded <m>R</m>-module <m>M(t)</m> with graded pieces <m>M(t)_i:=M_{t+i}</m>. This is isomorphic to <m>M</m> as an <m>R</m>-module, when we forget about the graded structure.
            </p>
          </statement>
          </definition>
  
          <theorem xml:id="thm-filtration"><title>Filtration</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a noetherian ring, and <m>M</m> is a finitely generated module. There exists a <em>filtration</em><idx><h>filtration</h></idx> of <m>M</m> <me>M=M_t \supsetneq M_{t-1} \supsetneq M_{t-2} \supsetneq \cdots \supsetneq  M_1 \supsetneq M_0 = 0</me> such that <m>M_i / M_{i-1} \cong R/P_i</m> for primes <m>P_i\in \Spec(R)</m>. This is a <em>prime filtration</em><idx><h>prime filtration</h></idx> of <m>M</m>.
              </p>
  
              <p>
                If <m>R</m> and <m>M</m> are <m>\Z</m>-graded, there exists a prime filtration of <m>M</m> where the quotients <m>M_i / M_{i-1} \cong (R/P_i)(t_i)</m> are graded modules, the <m>P_i</m> are homogeneous primes, and <m>t_i \in \Z</m>.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                If <m>M\neq 0</m>, then <m>M</m> has at least one associated prime, by , so there is an inclusion <m>R/P_1 \subseteq M</m>. Let <m>M_1</m> be the image of this inclusion. If <m>M/M_1\neq 0</m>, it has an associated prime, so there is an <m>M_2 \subseteq M</m> such that <m>R/P_2 \cong M_2/M_1 \subseteq R/M_1</m>. Continuing this process, we get a strictly ascending chain of submodules of <m>M</m> where the successive quotients are of the form <m>R/P_i</m>. If we do not have <m>M_t=M</m> for some <m>t</m>, then we get an infinite strictly ascending chain of submodules of <m>M</m>, which contradicts that <m>M</m> is a noetherian module.
              </p>
  
              <p>
                In the graded case, if <m>P_i</m> is the annihilator of an element <m>m_i</m> of degree <m>t_i</m>, we have a degree-preserving map <m>(R/P_i)(t_i)\cong R m_i</m> sending the class of <m>1</m> to <m>m_i</m>.
              </p>
  
            </proof>
          </theorem>

          <example><title>Building Prime Filtration</title>

            <p>
              Let's build a prime filtration for the module <m>M = R/I</m>, where <m>I = (x^2,yz)</m> and <m>R = \mathbb{Q}[x,y,z]</m>. With a little help from Macaulay2, we find that
            </p>

            <pre>
            i4 : associatedPrimes M

            o4 = {ideal (y, x), ideal (z, x)}

            o4 : List
            </pre>

            <p>
              So our first goal is to find <m>m \in M</m> such that <m>\operatorname{ann}(m) = (x,z)</m> or <m>\operatorname{ann}(m) = (x,y)</m>. Let's start from <m>(x,z)</m>. To find such an element, we can start by searching for all the elements killed by <m>(x,z)</m>:
            </p>

            <pre>
              i5 : I : ideal"x,z"
                                    2
              o5 = ideal (y*z, x*y, x )

              o5 : Ideal of R
            </pre>

            <p>
              Now <m>yz</m> and <m>x^2</m> are both <m>0</m> in <m>M</m>, so the submodule of <m>M</m> generated by <m>xy</m> is precisely the set of elements killed by <m>(x,z)</m>. Is <m>\operatorname{ann}(R \cdot xy) = (x,z)</m>?
            </p>

            <pre>
              i6 : ann ((I + ideal(x*y))/I)

              o6 = ideal (z, x)

              o6 : Ideal of R
            </pre>

            <p>
              Yes, it is! So our prime filtration starts with <me>M_0 = 0 \subseteq M_1 = \frac{I + (xy)}{I},</me> where our computations so far show that <m>\operatorname{ann}(M_1) = (x,z)</m>. For step <m>2</m>, we start from scratch, and compute the associated primes of <m>M/M_1 \cong R/(I+(y))</m>:
            </p>

            <pre>
              i7 : associatedPrimes (R^1/(I + ideal"xy"))

              o7 = {ideal (y, x), ideal (z, x)}

              o7 : List   
            </pre>

            <p>
              Unfortunately, we will again have to find another element killed by <m>(x,z)</m>. So we repeat the process:
            </p>

            <pre>
              i8 : (I + ideal"xy") : ideal"x,z"
                              2
              o8 = ideal (y, x )

              o8 : Ideal of R

              i9 : ann((I + ideal"y")/(I + ideal"xy"))

              o9 = ideal (z, x)

              o9 : Ideal of R
            </pre>

            <p>
              So in <m>M_1</m>, <m>\operatorname{ann}(y) = (x,z)</m>, so we can take the submodule generated by <m>y</m> for our next step, so our prime filtration for now looks like <me>M_0 = 0 \underset{R/(x,z)}{\subseteq} M_1 = \frac{I + (xy)}{I} \underset{R/(x,z)}{\subseteq} M_2 = \frac{I + (y)}{I}.</me> So now we repeat the process with <m>M/M_2 \cong R/(I + (y))</m>:
            </p>

            <pre>
              i10 : associatedPrimes (R^1/(I + ideal"y"))

              o10 = {ideal (y, x)}

              o10 : List

              i11 : (I + ideal"y") : ideal"x,y"

              o11 = ideal (y, x)

              o11 : Ideal of R

              i12 : ann((I + ideal"x")/(I + ideal"y"))

              o12 = ideal (y, x)

              o12 : Ideal of R
            </pre>

            <p>
              This gives us <me>M_0 = 0 \underset{R/(x,z)}{\subseteq} M_1 = \frac{I + (xy)}{I} \underset{R/(x,z)}{\subseteq} M_2 = \frac{I + (y)}{I} \underset{R/(x,y)}{\subseteq} M_3 = \frac{I + (x,y)}{I}.</me> Next, we take <m>M/M_3 \cong R/(I + (x,y))</m> and find that
            </p>

            <pre>
              i13 : associatedPrimes (R^1/(I + ideal"x,y"))

              o13 = {ideal (y, x)}

              o13 : List

              i14 : (I + ideal"x,y") : ideal"x,y"

              o14 = ideal 1

              o14 : Ideal of R
            </pre>

            <p>
              This last computation actually says we are done: since <m>(x,y)</m> kills everything inside <m>M/M_3</m>, we can now complete our prime filtration with <me>0 \underset{R/(x,z)}{\subseteq} M_1 = \frac{I + (xy)}{I} \underset{R/(x,z)}{\subseteq} M_2 = \frac{I + (y)}{I} \underset{R/(x,y)}{\subseteq} M_3 = \frac{I + (x,y)}{I} \underset{R/(x,y)}{\subseteq} M_4 = R/I.</me>
            </p>

            <p>
              The prime ideals that appear in this filtration are <m>(x,y)</m> and <m>(x,z)</m>. From the computation in the beginning, these are precisely the associated primes of <m>M</m>. 
            </p>

          </example>
  
          <corollary xml:id="cor-ass-finite"><title>Ass Finite</title>
  
  
            <statement>
              
  
              <p>
                If <m>R</m> is a noetherian ring, and <m>M</m> is a finitely generated module, and <me>M=M_t \supsetneq M_{t-1} \supsetneq M_{t-2} \supsetneq \cdots \supsetneq  M_1 \supsetneq M_0 = 0</me> is a prime filtration of <m>M</m> with <m>M_i/M_{i-1}\cong R/P_i</m>, then <me>\Ass_R(M)\subseteq \{ P_1, \dots, P_t \}.</me>Therefore, <m>\Ass_R(M)</m> is finite. Moreover, if <m>M</m> is graded, then <m>\Ass_R(M)</m> is a finite set of homogeneous primes.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                For each <m>i</m>, we have a short exact sequence <me>\begin{CD}
  0@&gt;&gt;&gt;M_{i-1}@&gt;&gt;&gt;M_{i}@&gt;&gt;&gt;M_{i}/M_{i-1}@&gt;&gt;&gt;0
  \end{CD}</me> By , <m>\Ass(M_i) \subseteq \Ass(M_{{i-1}})\cup \Ass(M_i/M_{i-1}) = \Ass(M_{{i-1}}) \cup \{P_i\}</m>. Inductively, we have <m>\Ass(M_i)\subseteq\{P_1,\dots,P_i\}</m>, and <m>\Ass_R(M) = \Ass_R(M_t) \subseteq \{ P_1, \dots, P_t \}</m>. This immediately implies that <m>\Ass(M)</m> is finite. In the graded case,  gives us a filtration where all the <m>P_i</m> are homogeneous primes, and those include all the associated primes.
              </p>
  
            </proof>
          </corollary>
  
          <example xml:id="ex-prime-ideals-are-assm-for-some-m"><title>Prime Ideals are Ass(M) for some M</title>
  
  
            <statement>
              
  
              <p>
                Any subset <m>X\subseteq\Spec(R)</m> (for any <m>R</m>) can be realized as <m>\Ass(M)</m> for some module <m>M</m>: take <m>M=\displaystyle\bigoplus_{P \in X} R/P</m>. However, <m>M</m> is not finitely generated when <m>X</m> is infinite.
              </p>
  
            </statement>
  
            <solution>

  
              <p>
                Let <m>X</m> be a subset of <m>\Spec(R)</m>. We construct an <m>R</m>-module <m>M</m> such that <m>\Ass(M) = X</m>.
              </p>
  
              <p>
                Let <m>I = \bigcap_{\fp \in X} \fp</m> and consider the <m>R</m>-module <m>M = R/I</m>. Then for any prime ideal <m>\fp \in \Spec(R)</m>, we have <m>\fp \in \Ass(M)</m> if and only if <m>\fp \supseteq I</m>. Thus, we have <m>\Ass(M) = { \fp \in \Spec(R) \mid \fp \supseteq I }</m>.
              </p>
  
              <p>
                It remains to show that <m>I</m> is an ideal in <m>R</m>. Since <m>X</m> is a subset of <m>\Spec(R)</m>, we have <m>R \setminus X \subseteq \bigcup_{\fp \in X} \fp^c</m>, where <m>\fp^c</m> denotes the complement of <m>\fp</m> in <m>R</m>. Taking the intersection of both sides with <m>X</m>, we have <m>X \subseteq \bigcup_{\fp \in X} \fp^c \cap X</m>. Since <m>\fp^c \cap X</m> is closed under finite intersection and contains the empty set, it is a closed set of <m>\Spec(R)</m>. Hence, we can apply the prime avoidance lemma to get <m>I = \bigcap_{\fp \in X} \fp \subseteq \bigcap_{\fp \in X} \fp^c \cap X = \emptyset</m>. Thus, <m>I</m> is an ideal in <m>R</m>.
              </p>
  
            </solution>
          </example>
  
          <example xml:id="ex-module-with-no-associated-primes"><title>Module with no Associated Primes</title>
  
            <statement>
              <p>
                If <m>R</m> is not noetherian, then there may be modules (or ideals even) with no associated primes. Let <m>R=\bigcup_{n\in \N} \C[[x^{1/n}]]</m> be the ring of nonnegatively-valued Puiseux series. We claim that <m>R/(x)</m> is a cyclic module with no associated primes, i.e., the ideal <m>(x)</m> has no associated primes.
              </p>
            </statement>
  
            <solution>
  
              <p>
                First, observe that any element of <m>R</m> can be written as a unit times <m>x^{m/n}</m> for some <m>m,n</m>, so any associated prime of <m>R/(x)</m> must be the annihilator of <m>x^{m/n}+(x)</m> for some <m>m \leq n</m>. However, we claim that these are never prime. Indeed, we have <m>\ann(x^{m/n}+(x))=(x^{1-m/n})</m>, which is not prime since <m>(x^{1/2-m/2n})^2 \in (x^{1-m/n})</m> but <m>x^{1/2-m/2n} \notin (x^{1-m/n})</m>.
              </p>

            </solution>
          </example>

          <theorem xml:id="thm-local-ass-in-noeth"><title>Associated Primes Localize in Noetherian Rings</title>
            <statement>
              <p>
                Let <m>R</m> be a noetherian ring, <m>W</m> a multiplicative set, and <m>M</m> a module. Then <me>\Ass_{W^{-1}R}(W^{-1}M)=\{W^{-1}P  \ | \ P \in \Ass_R(M), \, P \cap W = \varnothing\}.</me> 
                
              </p>
            </statement>

            <proof>
              <p>
                Given <m>P \in \Ass_R(M)</m> such that <m>P \cap W= \varnothing</m>, <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Localization Ideals|Lemma]] says that <m>W^{-1}P</m> is a prime in <m>W^{-1}R</m>. Then <m>W^{-1}R /W^{-1}P \cong W^{-1}(R/P) \hookrightarrow W^{-1}M</m> by exactness, so <m>W^{-1}P</m> is an associated prime of <m>W^{-1} M</m>.
              </p>

              <p>
                Now suppose that <m>Q \in \Spec(W^{-1}R)</m> is associated to <m>W^{-1}M</m>. By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Localization Ideals|Lemma]], we know this is of the form <m>W^{-1}P</m> for some prime <m>P</m> in <m>R</m> such that <m>P \cap W = \varnothing</m>. Since <m>R</m> is noetherian, <m>P</m> is finitely generated, say <m>P = (f_1, \ldots, f_n)</m> in <m>R</m>, and so <m>Q = \left( \frac{f_1}{1}, \ldots, \frac{f_n}{1} \right)</m>.
              </p>
  
              <p>
                By assumption, <m>Q = \ann(\frac{m}{w})</m> for some <m>m \in M</m>, <m>w \in W</m>. Since <m>w</m> is a unit in <m>W^{-1}R</m>, we can also write <m>Q = \ann(\frac{m}{1})</m>. By definition, this means that for each <m>i</m><me>\frac{f_i}{1} \frac{m}{1} = \frac{0}{1} \, \Longleftrightarrow \, u_i f_i m = 0 \textrm{ for some } u_i \in W.</me>Let <m>u = u_1 \cdots u_n \in W</m>. Then <m>u f_i m = 0</m> for all <m>i</m>, and thus <m>P u m = 0</m>. We claim that in fact <m>P = \ann(um)</m> in <m>R</m>. Consider <m>v \in \ann(um)</m>. Then <m>u (vm) = 0</m>, and since <m>u \in W</m>, this implies that <m>\frac{vm}{1} = 0</m>. Therefore, <m>\frac{v}{1} \in \ann(\frac{m}{1}) = W^{-1}P</m>, and <m>vw \in P</m> for some <m>w \in W</m>. But <m>P \cap W = \varnothing</m>, and thus <m>v \in P</m>. Thus <m>P \in \Ass(M)</m>.
              </p>
            </proof>
          </theorem>
  
          <theorem xml:id="thm-support-and-associated-primes"><title>Support and Associated Primes</title>
  
            <statement>
  
              <p>
                Let <m>R</m> be noetherian and <m>M</m> be an <m>R</m>-module. <me>\Supp(M) \,\, = \displaystyle\bigcup_{P \in \Ass(M)} V(P).</me> 
              </p>
  
            </statement>

            <proof>
              <p>
                Let <m>P \in \Ass_R(M)</m>, and fix <m>m \in M</m> such that <m>P = \ann_R(m)</m>. Let <m>Q \in V(P)</m>. By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Proposition - Supp(M) = Ann(M)|Proposition]], <m>Q \in \Supp(R/P)</m>. Since <m>0 \to R/P \xrightarrow{m} M</m> is exact and localization is exact, <m>0 \to (R/P)_Q \to M_{Q}</m> is also exact. Since <m>(R/P)_Q \neq 0</m>, we must also have <m>M_{Q} \neq 0</m>, and thus <m>Q \in \Supp(M)</m>. This shows <m>\Supp(M) \, \supseteq \displaystyle\bigcup_{P \in \Ass(M)} V(P)</m>. Now let <m>Q</m> be a prime ideal and suppose that <me>Q \notin \bigcup_{P\in \Ass(M)} V(P).</me>In particular, <m>Q</m> does not contain any associated prime of <m>M</m>. Then there is no associated prime of <m>M</m> that does not intersect <m>R \setminus Q</m>, so <m>\Ass_{R_{Q}}(M_{Q})=\varnothing</m>. By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Nonzero Element Localizes|Lemma]], <m>M_{Q}=0</m>.
              </p>
            </proof>
          </theorem>
  
          <theorem xml:id="thm-min-contained-in-ass"><title>Min Contained in Ass</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be noetherian and <m>M</m> be an <m>R</m>-module. If <m>M</m> is a finitely generated <m>R</m>-module, then <m>\Min(\ann_R(M))\subseteq \Ass_R(M)</m>. In particular, <m>\Min(I)\subseteq \Ass_R(R/I)</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Support and Associated Primes|Theorem]],<me>V(\ann_R(M))=\Supp_R(M)=\bigcup_{P \in \Ass(M)} V(P),</me> so the minimal elements of both sets agree. In particular, the right hand side has the minimal primes of <m>\ann_R(M)</m> as minimal elements, and they must be associated primes of <m>M</m>, or else this would contradict minimality.[^3
              </p>
  
            </proof>
          </theorem>
  
          <definition xml:id="defn-embedded-prime"><title>Embedded Prime</title>
          <statement>
            <p>
              If <m>I</m> is an ideal, then an associated prime of <m>I</m> that is not a minimal prime of <m>I</m> is called an <em>embedded prime</em><idx><h>embedded prime</h></idx> of <m>I</m>.
            </p>
          </statement>
          </definition>
  
          <theorem xml:id="thm-ideal-of-zerodivisors"><title>Ideal of Zerodivisors</title>
  
  
            <statement>
              
  
              <p>
                Let <m>I</m> be an ideal and <m>M</m> a finitely generated module over a noetherian ring <m>R</m>. If <m>I</m> consists of zerodivisors on <m>M</m>, then <m>Im=0</m> for some nonzero <m>m\in M</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                The assumption says that <me>I\subseteq \displaystyle\bigcup_{P \in \Ass(M)}(P).</me>By the assumptions, <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Corollary - Ass Finite|Corollary]] applies, and it guarantees that this is a finite set of primes. By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Prime Avoidance|prime avoidance]], <m>I \subseteq P</m> for some <m>P \in \Ass(M)</m>. Equivalently, <m>I\subseteq \ann_R(m)</m> for some nonzero <m>m\in M</m>.
              </p>
  
            </proof>
          </theorem>

        </section>

        <section xml:id="sec-primary-decomp"><title>Primary Decomposition</title>
          
          <blockquote>
            <p>
              <q>How weird was it that so many bits and pieces, all diverse, could make someting whole. Something with potential. Perfect.</q>
            </p>
            <attribution>Sarah Dessen</attribution>
          </blockquote>

          <remark>
            <p>
              We refine our decomposition theory once again, and introduce primary decompositions of ideals. One of the fundamental classical results in commutative algebra is the fact that every ideal in any noetherian ring has a primary decomposition. This can be thought of as a generalization of the Fundamental Theorem of Arithmetic:
            </p>
          </remark>
      
          <theorem xml:id="thm-fundamental-theorem-of-arithmetic"><title>Fundamental Theorem of Arithmetic</title>
  
  
            <statement>
              
  
              <p>
                Every nonzero integer <m>n \in \mathbb{Z}</m> can be written as a product of primes: there are distinct prime integers <m>p_1, \ldots, p_n</m> and integers <m>a_1, \ldots, a_n \geqslant 1</m> such that <me>n = p_1^{a_1} \cdots p_n^{a_n}.</me>Moreover, such a a product is unique up to sign and the order of the factors.
              </p>

              
  
              
  
            </statement>

          </theorem>

          <remark>
                <p>
                  We will soon discover that such a product  a primary decomposition, perhaps after some light rewriting. But before we get to the  and the  of primary decomposition, it is worth discussing the . If we wanted to extend the Fundamental Theorem of Arithmetic to other rings, our first attempt might involve irreducible elements. Unfortunately, we don't have to go far to find rings where we  write elements as a unique product of irreducibles up to multiplying by a unit.
                </p>
          </remark>

          <example><title></title>
  
            <p>
              In <m>\mathbb{Z}[\sqrt{-5}]</m>, <me>6 = 2 \cdot 3 = (1 + \sqrt{-5}) (1 - \sqrt{-5})</me>are two  ways to write <m>6</m> as a product of irreducible elements. In fact, we cannot obtain <m>2</m> or <m>3</m> by multiplying <m>1 + \sqrt{-5}</m> or <m>1 - \sqrt{-5}</m> by a unit.
            </p>
  
          </example>
  
          <definition xml:id="defn-primary-ideal"><title>Primary Ideal</title>
          <statement>
            <p>
              We say that an ideal is <em>primary</em><idx><h>primary ideal</h></idx> if <me>xy\in I \implies x\in I \text{ or } y\in \sqrt{I}.</me> We say that an ideal is <m>P</m>-<em>primary</em><idx><h><m>P</m>-primary ideal</h></idx>, where <m>P</m> is prime, if <m>I</m> is primary and <m>\sqrt{I}=P</m>.
            </p>
          </statement>
          </definition>
  
          <lemma xml:id="lem-radical-of-primary-ideal-is-prime"><title>Radical of Primary Ideal is Prime</title>
  
  
            <statement>
              
  
              <p>
                The radical of a primary ideal is prime.
              </p>
  
            </statement>
  
            <proof>
  
  
              <p>
                Suppose that <m>Q</m> is primary and <m>xy \in \sqrt{Q}</m>. Then <m>x^n y^n\in Q</m> for some <m>n</m>. If <m>y\notin \sqrt{Q}</m>, then <m>y^n\notin \sqrt{Q}</m>. Since <m>Q</m> is primary, we must have <m>x^n\in Q</m>, so <m>x\in \sqrt{Q}</m>.
              </p>
  
            </proof>
          </lemma>
  
          <example xml:id="ex-prime-ideals-are-primary"><title>Prime Ideals are Primary</title>
  
  
            <statement>
              
  
              <p>
                Any prime ideal is also primary.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-principal-primary-ideals-in-ufds"><title>Principal Primary Ideals in UFDs</title>
  
  
            <statement>
              
  
              <p>
                If <m>R</m> is a UFD, we claim that a principal ideal is primary if and only if it is generated by a power of a prime element.
              </p>
  
            </statement>
  
            <solution>

  
              <p>
                Indeed, if <m>a=f^n</m>, with <m>f</m> irreducible, then <me>xy\in (f^n) \Longleftrightarrow f^n | xy \Longleftrightarrow f^n | x \text{ or } f| y \Longleftrightarrow x\in (f^n) \text{ or } y\in \sqrt{(f^n)} = (f).</me>Conversely, if <m>a</m> is not a prime power, then <m>a=gh</m>, for some <m>g</m>, <m>h</m> nonunits with no common factor, then take <m>gh\in (a)</m> but <m>g\notin (a)</m> and <m>h\notin \sqrt{(a)}</m>.
              </p>
  
            </solution>
          </example>
  
          <example xml:id="ex-primary-ideals-in-z"><title>Primary Ideals in <m>\Z</m></title>
  
  
            <statement>
              
  
              <p>
                The nonzero primary ideals in <m>\mathbb{Z}</m> are of the form <m>(p^n)</m> for some prime <m>p</m> and some <m>n \geqslant 1</m>. This example is a bit misleading, as it suggests that primary ideals are the same as powers of primes. We will soon see that it not the case.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-y2yzz2-primary-in-rkxyz"><title><m>(y^2,yz,z^2)</m> Primary in <m>R=k[x,y,z]</m></title>
  
  
            <statement>
              
  
              <p>
                In <m>R=k[x,y,z]</m>, the ideal <m>I=(y^2,yz,z^2)</m> is primary.
              </p>
  
            </statement>
  
            <solution>

  
              <p>
                Give <m>R</m> the grading with weights <m>\deg(y)=\deg(z)=1</m> and <m>\deg(x)=0</m>. If <m>g\notin \sqrt{I}=(y,z)</m>, then <m>g</m> has a degree zero term. If <m>f\notin I</m>, then <m>f</m> has a term of degree zero or one. The product <m>fg</m> has a term of degree zero or one, so is not in <m>I</m>.
              </p>
  
            </solution>
          </example>
  
          <example xml:id="ex-x2xy-not-primary-in-rkxyz"><title><m>(x^2,xy)</m> Not Primary in <m>R=k[x,y,z]</m></title>
  
  
            <statement>
              
  
              <p>
                In <m>R=k[x,y,z]</m>, the ideal <m>Q =(x^2,xy)</m> is not primary, even though <m>\sqrt{Q}=(x)</m> is prime.
              </p>
  
            </statement>
  
            <solution>
      
  
              <p>
                The offending product is <m>xy</m>: we have <m>x \notin Q</m> and <m>y \notin \sqrt{Q}</m>.
              </p>
  
            </solution>
          </example>

          <remark>
            <p>
              One thing that can be confusing about primary ideals is that the definition is not symmetric. For <m>Q</m> to be a primary ideal, given a product <m>xy \in Q</m>, the definition says that if <m>x \notin Q</m>, then <m>y \in \sqrt{Q}</m>, and it <em>also</em> says that if <m>y \notin Q</m>, then <m>x \in \sqrt{Q}</m>. In , we found that <m>x \notin Q</m> and <m>y \notin \sqrt{Q}</m>, so <m>Q</m> is not primary. Notice that if we switch the roles of <m>x</m> and <m>y</m>, we <em>do</em> have <m>x \in \sqrt{Q}</m>, but that is not sufficient to make <m>Q</m> a primary ideal.
            </p>
          </remark>
  
          <theorem xml:id="thm-characterization-of-primary-ideals"><title>Characterization of Primary Ideals</title>
  
  
            <statement>
              
  
              <p>
                If <m>R</m> is noetherian, the following are equivalent: (a) <m>Q</m> is primary. (b) Every zerodivisor in <m>R/Q</m> is nilpotent on <m>R/Q</m>. (c) <m>\Ass(R/Q)</m> is a singleton. (d) <m>Q</m> has exactly one minimal prime, and no embedded primes. (e) <m>\sqrt{Q} = P</m> is prime and for all <m>r, w \in R</m> with <m>w \notin P</m>, <m>rw \in Q \Rightarrow r \in Q</m>. (f) <m>\sqrt{Q}= P</m> is prime, and <m>Q R_{P} \cap R = Q</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                <m>(1) \iff (2)</m>: Saying <m>y</m> is a zerodivisor modulo <m>Q</m> if there is some <m>x\notin Q</m> with <m>xy\in Q</m>. So the condition that every zerodivisor on <m>R/Q</m> must be nilpotent is equivalent to<me>\exists x \notin Q : xy \in Q \implies y^n \in Q.</me>This is exactly the condition that <m>Q</m> is a primary ideal.
              </p>
  
              <p>
                <m>(2) \iff (3)</m>: First, note that the associated primes of <m>R/Q</m> are the associated primes of the ideal <m>Q</m>, while the minimal primes of <m>R/Q</m> are the minimal primes of <m>Q</m>. By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Zerodivisors Associated Primes|Theorem]], <me>\bigcup_{P \in \Ass(Q)} P \, = \, \mathcal{Z}(R/Q).</me>Every minimal prime of <m>Q</m> is associated to <m>Q</m>, so<me>\bigcap_{P \in \Min(Q)} P = \bigcap_{P \in \Ass(Q)} P.</me>Finally, every nilpotent element is always a zerodivisor. Putting all these together, we always have the following:<me>\bigcup_{P \in \Ass(Q)} P \, = \, \mathcal{Z}(R/Q) \, \supseteq  \{ r \in R \mid r + Q \in \mathcal{N}(R/Q) \} \, = \bigcap_{P \in \Min(Q)} P = \bigcap_{P \in \Ass(Q)} P.</me> On the one hand, (2) says that the set of zerodivisors on <m>R/Q</m> coincides with the elements in the nilradical of <m>R/Q</m>; thus (2) is the statement that we have equality throughout. So (2) holds if and only if<me>\bigcup_{P \in \Ass(Q)} P \, = \bigcap_{P \in \Ass(Q)} P.</me>The rest of the proof is elementary set theory: the intersection and union of a collection of sets agree if and only if there is only one set. More precisely, we have equality above if and only if there is only one associated prime.
              </p>
  
              <p>
                <m>(3) \iff (4)</m> is clear, given that every ideal has a minimal prime and minimal primes are always associated, so having a single associated prime means having only one minimal prime and no embedded primes.
              </p>
  
              <p>
                <m>(1) \iff (5)</m>: Given the observation that the radical of a primary ideal is prime, this is just a rewording of the definition.
              </p>
  
              <p>
                <m>(5) \iff (6)</m>: By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Localization Ideals|Lemma]], we have the following characterization:<me>Q R_P \cap R = \lbrace r \in R \mid sr \in Q \textrm{ for some } s \notin P \rbrace.</me>Thus the second condition in <m>(5)</m> is equivalent to <m>Q R_Q \cap R = Q</m>.
              </p>
  
            </proof>
          </theorem>
  
          <lemma xml:id="lem-radical-max-implies-primary"><title>Radical Max Implies Primary</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a noetherian ring and <m>I</m> be an ideal. If <m>\sqrt{I}=\fm</m> a maximal ideal, then <m>I</m> is a primary ideal.
              </p>
  
            </statement>
  
            <proof>
  
  
              <p>
                By <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Support and Associated Primes|Theorem]], <m>\Ass(R/I)</m> is nonempty and contained in <m>\Supp(R/I)=V(I)=\{\fm\}</m>, so <m>\Ass(R/I) = \{ \fm \}</m>, and hence by <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Characterization of Primary Ideals|Proposition]] <m>I</m> is primary.
              </p>
  
            </proof>
          </lemma>

          <remark>
            <p>
              Note that the assumption that <m>\fm</m> is maximal was necessary here. Indeed, having a prime radical does not guarantee an ideal is primary, as we saw <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Exercise - <m>(x2,xy)</m> Not Primary in <m>R=kx,y,z</m>|here]]. Moreover, even the powers of a prime ideal may fail to be primary.
            </p>
          </remark>
        
          <example xml:id="ex-powers-of-prime-not-primary"><title>Powers of Prime not Primary</title>
  
  
            <statement>
              
  
              <p>
                Fix a field <m>k</m> and an integer <m>n \geqslant 2</m>, and let <m>R = k[x,y,z]/(xy-z^n)</m>. Consider the prime ideal <m>P = (x,z)</m> in <m>R</m>. On the one hand, <m>xy = z^n \in P^n</m>, while <m>x \notin P^n</m> and <m>y \notin \sqrt{P^n} = P</m>. Therefore, <m>P^n</m> is not primary, even though its radical is the prime <m>P</m>.
              </p>
  
            </statement>
          </example>
  
          <lemma xml:id="lem-contraction-of-primary-ideals-is-primary"><title>Contraction of Primary Ideals is Primary</title>
  
  
            <statement>
              
  
              <p>
                Let <m>f:R\to S</m> be a ring homomorphism. If <m>Q</m> is a primary ideal in <m>S</m>, then <m>Q \cap R</m> is a primary ideal in <m>R</m>.
              </p>
  
            </statement>
  
            <proof>
  
  
              <p>
                if <m>xy \in Q \cap R</m>, and <m>x \notin Q \cap R</m>, then <m>f(x) \notin Q</m>, so <m>f(y^n) = f(y)^n \in Q</m> for some <m>n</m>. Therefore, <m>y^n \in Q \cap R</m>, and <m>Q \cap R</m> is indeed primary.
              </p>
  
            </proof>
          </lemma>
  
          <lemma xml:id="lem-ass-intersection"><title>Ass Intersection</title>
  
  
            <statement>
              
  
              <p>
                If <m>I_1,\dots,I_t</m> are ideals, then <me>\Ass \left( R/ \bigcap_{j=1}^t I_j \right) \subseteq \bigcup_{j=i}^t \Ass(R/I_j).</me> 
                
              </p>

              </statement>

              <proof>
                <p>
                  The canonical map <m>R \to R/I_1 \oplus R/I_2</m> sending <m>r \mapsto (r+I_1, r+I_2)</m> has kernel <m>I_1 \cap I_2</m>, so there is an inclusion <m>R/(I_1 \cap I_2) \subseteq R/I_1 \oplus R/I_2</m>. Hence, by  and , <me>\Ass(R/(I_1\cap I_2)) \subseteq \Ass(R/I_1 \oplus R/I_2) = \Ass(R/I_1) \cup \Ass(R/I_2).</me>The statement for larger <m>t</m> follows by an easy induction.
                </p>
              </proof>
  
          </lemma>
  
          <corollary xml:id="cor-intersections-primary"><title>Intersections Primary</title>
  
  
            <statement>
              
  
              <p>
                A finite intersection of <m>P</m>-primary ideals is <m>P</m>-primary.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                Let <m>I_1, \ldots, I_t</m> be <m>P</m>-primary ideals. Then by ,<me>\Ass \left( \bigcap_{j=1}^t I_j \right) \subseteq \bigcup_{j=i}^t \Ass(I_j) = \{ P \}.</me>On the other hand, <me>\bigcap_{j=1}^t I_j \subseteq I_1 \neq R \quad \textrm{so} \quad R/(\bigcap_{j=1}^t I_j) \neq 0.</me> By , <m>\Ass(I_1 \cap \cdots \cap I_t)</m> is nonempty, and thus <m>\Ass(I_1 \cap \cdots \cap I_t) = \{ P \}</m>. Then <m>I_1 \cap \cdots \cap I_t</m> is <m>P</m>-primary by the characterization of primary in  (3) above.
              </p>
  
            </proof>
          </corollary>
  
          <definition xml:id="defn-primary-decomposition"><title>Primary Decomposition</title>
          <statement>
            <p>
              A <em>primary decomposition</em><idx><h>primary decompostion</h></idx><idx><h>irredundant primary decompostion</h></idx> of an ideal <m>I</m> is an expression of the form <me>I = Q_1 \cap \cdots \cap Q_t</me>with each <m>Q_i</m> primary. A primary decomposition is <em>irredundant</em> if <me>\sqrt{Q_i} \neq \sqrt{Q_j} \textrm{ for } i\neq j \quad \textrm{ and } \quad Q_i \not\supseteq \displaystyle\bigcap_{j\neq i} Q_j \textrm{ for all } i.</me>
            </p>
          </statement>
          </definition>

          <remark>
            <p>
              By <xref ref="cor-intersections-primary"/>, the intersection of <m>P</m>-primary ideals is <m>P</m>-primary. Thus we can turn any primary decomposition into an irredundant one by combining the terms with the same radical, then removing redundant terms.
            </p>
          </remark>
        
          <example xml:id="primary-decomposition-in-mathbbz"><title>Primary decomposition in <m>\mathbb{Z}</m></title>
  
            <p>
              Given a decomposition of <m>n \in \mathbb{Z}</m> as a product of distinct primes, say <m>n = p_1^{a_1} \cdots p_k^{a_k}</m>, then the primary decomposition of the ideal <m>(n)</m> is <m>(n) = (p_1^{a_1}) \cap \cdots \cap (p_k^{a_k})</m>. However, this example can be deceiving, in that it suggests that primary ideals are just powers of primes; as we saw in <xref ref="ex-powers-of-prime-not-primary"/>, powers of primes may fail to be primary! Moreover, an ideal might be primary but not a power of a prime.
            </p>
  
          </example>

          <remark>
            <p>
              The existence of primary decompositions was first shown by Emanuel Lasker (yes, the chess champion!) for polynomial rings and power series rings in 1905, and then extended to any noetherian ring (which were not called that yet at the time) by Emmy Noether in 1921.
            </p>
          </remark>
        
          <theorem xml:id="thm-lasker-1905-noether-1921"><title>Lasker, 1905, Noether, 1921</title>
  
  
            <statement>
              
  
              <p>
                Every ideal in a noetherian ring admits a primary decomposition.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                We will say that an ideal is irreducible <idx><h>irreducible ideal</h></idx> if it cannot be written as a proper intersection of larger ideals. If <m>R</m> is noetherian, we claim that any ideal of <m>R</m> can be expressed as a finite intersection of irreducible ideals. If the set of ideals that are not a finite intersection of irreducibles were nonempty, then by noetherianity there would be an ideal maximal with the property of not being an intersection of irreducible ideals. Such a maximal element must be an intersection of two larger ideals, each of which are finite intersections of irreducibles, giving a contradiction.
              </p>
  
              <p>
                We claim that every irreducible ideal is primary. If we show this, any decomposition into an intersection of irreducible ideals will be a primary decomposition. To prove the contrapositive, suppose that <m>Q</m> is not primary, and take <m>xy\in Q</m> with <m>x\notin Q</m>, <m>y\notin \sqrt{Q}</m>. The ascending chain of ideals <me>(Q : y) \subseteq (Q : y^2) \subseteq (Q : y^3) \subseteq \cdots</me>stabilizes for some <m>n</m>, since <m>R</m> is moetherian. Note that this means that for any element <m>f \in R</m>, we have <m>y^{n+1} f\in Q \implies y^n f\in Q</m>. Using this, we will show that <me>{(Q + (y^n))\cap( Q +(x)) = Q},</me>proving that <m>Q</m> is not irreducible. The containment <m>Q \subseteq (Q + (y^n))\cap( Q + (x))</m> is clear. On the other hand, if <me>a \in (Q + (y^n))\cap( Q + (x)),</me> we can write <m>a=q+by^n</m> for some <m>q \in Q</m>, and <me>a\in Q + (x) \implies ay \in Q + (xy) = Q.</me>So<me>b y^{n+1} = ay - qy \in Q \implies b \in (Q : y^{n+1}) = (Q : y^n).</me>By definition, this means that <m>by^n \in Q</m>, and thus <m>a = q+by^n \in Q</m>. This shows that <m>Q</m> is not irreducible, concluding the proof.
              </p>
  
            </proof>
          </theorem>
  
          <example xml:id="ex-irredundant-decompositions-for-ix2xy"><title>Irredundant Decompositions for <m>I=(x^2,xy)</m></title>
  
  
            <statement>
              
  
              <p>
                Let <m>R=k[x,y]</m>, where <m>k</m> is a field, and <m>I=(x^2,xy)</m>. We can write <me>I = (x) \cap (x^2,xy,y^2) = (x) \cap (x^2,y).</me>These are two different irredundant primary decompositions of <m>I</m>.
              </p>
  
            </statement>
  
            <solution>

  
              <p>
                To check this, we just need to see that each of the ideals <m>(x^2,xy,y^2)</m> and <m>(x^2,y)</m> are primary. Observe that each has radical <m>\fm=(x,y)</m>, which is maximal, so these ideals are both primary. In fact, our ideal <m>I</m> has infinitely many minimal primary decompositions: given any <m>n \geqslant 1</m>, <me>I = (x) \cap (x^2, xy, y^n)</me>is an irredundant primary decomposition. One thing all of these have in common is the radicals of the primary components: they are always <m>(x)</m> and <m>(x,y)</m>.
              </p>
  
            </solution>
          </example>
  
          <theorem xml:id="thm-1st-uniqueness-theorem-for-primary-decompositions"><title>1st Uniqueness Theorem for Primary Decompositions</title>
  
  
            <statement>
              
  
              <p>
                Suppose <m>I</m> is an ideal in a noetherian ring <m>R</m>. Given any irredundant primary decomposition of <m>I</m>, say <me>I = Q_1 \cap \cdots \cap Q_t,</me>we have <me>\{ \sqrt{Q_1}, \ldots, \sqrt{Q_t}\}=\Ass(I).</me> In particular, this set is the same for all irredundant primary decompositions of <m>I</m>.
              </p>
  
            </statement>
  
            <proof>
              
  
              <p>
                For any primary decomposition, irredundant or not, by  we have <me>\Ass(I) \subseteq \bigcup_i \Ass(Q_i) = \{ \sqrt{Q_1},\dots,\sqrt{Q_t}\}.</me> We just need to show that in an irredundant decomposition as above, every <m>P_j := \sqrt{Q_j}</m> is indeed an associated prime of <m>I</m>. So fix <m>j</m>, and let <me>I_j = \displaystyle\bigcap_{i\neq j} Q_i \supseteq I.</me>Since the decomposition is irredundant, the module <m>I_j/I</m> is nonzero. By , <m>I_j/I</m> has an associated prime, say <m>\mathfrak{a}</m>. Fix <m>x_j\in R</m> such that <m>\mathfrak{a}</m> is the annihilator of <m>x_j+I</m> in <m>I_j/I</m> for some <m>x_j \in I_j</m>. Since <me>Q_j x_j \subseteq Q_j \cdot \displaystyle\bigcap_{i\neq j} Q_i \subseteq Q_1 \cap \cdots \cap Q_n = I,</me> we conclude that <m>Q_j \subseteq \ann(x_j+I) = \mathfrak{a}</m>. Since <m>P_j</m> is the unique minimal prime of <m>Q_j</m> and <m>\mathfrak{a}</m> is a prime containing <m>Q_j</m>, we must have <m>P_j \subseteq \mathfrak{a}</m>. On the other hand, for any <m>r\in \mathfrak{a}</m>, we have <m>rx_j\in I \subseteq Q_j</m>, and since <m>x_j\notin Q_j</m>, we must have <m>r \in \sqrt{Q_j} = P_j</m> by the definition of primary ideal. Thus <m>\mathfrak{a} \subseteq P_j</m>, so we can now conclude that <m>\mathfrak{a} = P_j</m>. This shows that <m>P_j</m> is an associated prime of <m>I_j/I</m> for all <m>j</m>. But this is a submodule of <m>R/I</m>, and thus <m>P_j</m> is associated to <m>R/I</m>.<me>\{ \sqrt{Q_1}, \ldots, \sqrt{Q_t}\}=\Ass(I).</me>
              </p>
  
            </proof>
          </theorem>
  
          <theorem xml:id="thm-2nd-uniqueness-theorem-for-primary-decompositions"><title>2nd Uniqueness Theorem for Primary Decompositions</title>
  
  
            <statement>
              
  
              <p>
                If <m>I</m> is an ideal in a noetherian ring <m>R</m>, then the minimal components in any irredundant primary decomposition of <m>I</m> are unique. More precisely, if <me>I = Q_1 \cap \cdots \cap Q_t</me> is an irredundant primary decomposition, and <m>\sqrt{Q_i} \in \Min(I)</m>, then <m>Q_i</m> is given by the formula <me>Q_i = I R_{\sqrt{Q_i}} \cap R,</me>which does not depend on our choice of irredundant decomposition.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                Let <m>Q</m> be a primary ideal, and let <m>P</m> be any prime. If <m>Q \subseteq P</m>, then <m>\sqrt{Q} \subseteq P</m>. Since the associated primes of an ideal localize well, by , <m>Q_P</m> will still have a unique associated prime. Thus, the localization <m>Q_P</m> is either: - the unit ideal, if <m>Q \not\subseteq P</m>, or - a primary ideal, if <m>Q \subseteq P</m>. Finite intersections commute with localization, by , so for any prime <m>P</m>, <me>I_{P} = (Q_1)_{P} \cap \cdots \cap (Q_t)_{P}</me>is a primary decomposition, although not necessarily irredundant. Fix a minimal prime <m>P=P_i</m> of <m>I</m>, and let <m>Q = Q_i</m>. When we localize at <m>P</m>, all the other components become the unit ideal, since their radicals are not contained in <m>P</m>, and thus <m>I_{P} = Q_P</m>. We can then contract to <m>R</m> to get <m>I_{P} \cap R = (Q_i)_{P_i} \cap R = Q_i</m>, since <m>Q_i</m> is <m>P_i</m>-primary and we can then apply  (6).
              </p>
  
            </proof>
          </theorem>

          <remark>
            <p>
              If <m>R</m> is not noetherian, we may or may not have a primary decomposition for a given ideal. It is true that if an ideal <m>I</m> in a general ring has a primary decomposition, then the primes occurring are the same in any irredundant decomposition. However, they are not the associated primes of <m>I</m> in general; rather, they are the primes that occur as radicals of annihilators of elements.
            </p>
          </remark>
        
          <example xml:id="ex-decomposition-of-radical-ideal-is-unique"><title>Decomposition of Radical Ideal is Unique</title>
  
            <p>
              If <m>R</m> is noetherian, and <m>I</m> is a radical ideal, then we have seen that <m>I</m> coincides with the intersection of its minimal primes <m>P_i</m>, meaning <m>I=P_1 \cap \cdots \cap P_t</m>. This is the <em>only</em> primary decomposition of a radical ideal.
            </p>
  
            <p>
              For a more concrete example, take the ideal <m>I = \left( xy, xz, yz \right)</m> in <m>k[x,y,z]</m>. This ideal is radical, so we just need to find its minimal primes. And indeed, one can check that <m>\left( xy, xz, yz \right) = \left( x, y \right) \cap \left( x, z \right) \cap \left( y, z \right)</m>. More generally, the radical monomial ideals are precisely those that are squarefree, and the primary components of a monomial ideal are also monomial.
            </p>
  
          </example>
  
          <example xml:id="ex-decomposition-of-6-in-zsqrt-5-unique"><title>Decomposition of <m>(6)</m> in <m>\Z[\sqrt{-5}]</m> Unique</title>
  
            <p>
              Let's get back to our motivating example in <m>\mathbb{Z}[\sqrt{-5}]</m>, where some elements can be written as products of irreducible elements in more than one way. For example, we saw that<me>6 = 2 \cdot 3 = (1 + \sqrt{-5}) (1 - \sqrt{-5}).</me>So <m>(6) = (2) \cap (3)</m>, but while <m>(2)</m> is primary, <m>(3)</m> is not. In fact, <m>(3)</m> has two distinct minimal primes, and the following is a minimal primary decomposition for <m>(6)</m>:<me>(6) = (2) \cap (3, 1+\sqrt{-5}) \cap (3, 1 - \sqrt{-5}).</me>In fact, all of these come components are minimal, and so this primary decomposition is unique. Primary decomposition saves the day!
            </p>
  
          </example>
  
          <definition xml:id="defn-symbolic-power"><title>Symbolic Power</title>
          <statement>
            <p>
              If <m>P</m> is a prime ideal in a ring <m>R</m>, the <m>n\th</m> <em>symbolic power</em><idx><h>symbolic power</h></idx><idx><h><m>P^{(n)}</m></h></idx> of <m>P</m> is <m>P^{(n)} := P^n R_{P} \cap R</m>.
            </p>
          </statement>
          </definition>
  
          <proposition xml:id="prop-characterizations-of-symbolic-powers"><title>Characterizations of Symbolic Powers</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be noetherian, and <m>P</m> a prime ideal of <m>R</m>. (a) <m>P^{(n)}=\{ r\in R \ \mid \ rs\in P^n \textrm{ for some } s\notin P \}</m>. (b) <m>P^{(n)}</m> is the unique smallest <m>P</m>-primary ideal containing <m>P^n</m>. (c) <m>P^{(n)}</m> is the <m>P</m>-primary component in any minimal primary decomposition of <m>P^n</m>.
              </p>
  
            </statement>
  
            <proof>
    
  
              <p>
                The first characterization follows from the definition, and the fact that expanding and contraction to/from a localization is equivalent to saturating with respect to the multiplicative set, which we proved in .
              </p>
  
              <p>
                We know that <m>P^{(n)}</m> is <m>P</m>-primary from one of the characterizations of primary we gave in . Any <m>P</m>-primary ideal satisfies <m>\fq R_{P} \cap R = \fq</m>, and if <m>\fq\supseteq P^{n}</m>, then <m>P^{(n)} = P^n R_{P} \cap R \subseteq \fq R_{P} \cap R = \fq</m>. Thus, <m>P^{(n)}</m> is the unique smallest <m>P</m>-primary ideal containing <m>P^n</m>.
              </p>
  
              <p>
                The last characterization follows from the second uniqueness theorem, .
              </p>
  
            </proof>
          </proposition>
  
          <example><title></title>
  
            <p><ol>
              <li>
              In <m>R=k[x,y,z]</m>, the prime <m>P=(y,z)</m> satisfies <m>P^{(n)}=P^n</m> for all <m>n</m>. This follows along the same lines as .
              </li>
  
              <li>
              In <m>R=k[x,y,z]=(xy-z^n)</m>, where <m>n \geqslant 2</m>, we have seen in Example  that the square of <m>P=(y,z)</m> is not primary, and therefore <m>P^{(2)}\neq P^2</m>. Indeed, <m>xy=z^n \in P^2</m>, and <m>x\notin P</m>, so <m>y\in P^{(2)}</m> but <m>y \notin P^2</m>.
              </li>
  
              <li>
              Let <m>X=X_{3\times 3}</m> be a <m>3\times 3</m> matrix of indeterminates, and <m>k[X]</m> be a polynomial ring over a field~<m>k</m>. Let <m>P=I_2(X)</m> be the ideal generated by <m>2\times 2</m> minors of <m>X</m>. Write <m>\Delta_{\substack{i|k \\j |l}}</m> for the determinant of the submatrix with rows <m>i,j</m> and columns <m>k,l</m>. We find <me>\begin{align*} x_{11} \det(X) = &amp; \, x_{11}x_{31} \Delta_{\substack{1|2 \\2 |3}} - x_{11}x_{32} \Delta_{\substack{1|1 \\2 |3}} + x_{11}x_{33} \Delta_{\substack{1|1 \\2 |2}} \\
              =&amp; \, (x_{11}x_{31} \Delta_{\substack{1|2 \\2 |3}} - x_{11}x_{32} \Delta_{\substack{1|1 \\2 |3}} + x_{11}x_{33} \Delta_{\substack{1|1 \\2 |2}} ) \\
              -&amp;\, (x_{11}x_{31} \Delta_{\substack{1|2 \\2 |3}} - x_{12}x_{31} \Delta_{\substack{1|1 \\2 |3}} + x_{13}x_{31} \Delta_{\substack{1|1 \\2 |2}} )\\
              =&amp;\,  -\Delta_{\substack{1|1 \\3 |2}} \Delta_{\substack{1|1 \\2 |3}} + \Delta_{\substack{1|1 \\3 |3}} \Delta_{\substack{1|1 \\2 |2}}\in I_2(X)^2.
              \end{align*}</me> Note that in the second row, we subtracted the Laplace expansion of the determinant of the matrix with row 3 replaced by another copy of row 1. That is, we subtracted zero.
              </li>
  
            </ol></p>
  
          </example>

          <remark>
            <p>
              While we will not discuss symbolic powers in detail, they are ubiquitous in commutative algebra. They show up as tools to prove various important theorems of different flavors, and they are also interesting objects in their own right. In particular, symbolic powers can be interpreted from a geometric perspective, via the Zariski-Nagata Theorem. Roughly, this theorem says that when we consider symbolic powers of prime ideals over <m>\mathbb{C}[x_1, \ldots, x_d]</m>, the polynomials in <m>P^{(n)}</m> are precisely the polynomials that vanish  on the variety corresponding to <m>P</m>. This result can be made sense of more generally, for any radical ideal in <m>\mathbb{C}[x_1, \ldots, x_d]</m> over any perfect field <m>k</m>, and even when <m>k = \mathbb{Z}</m>.
            </p>
          </remark>

        </section>

        <section xml:id="sec-krull-intersection"><title>The Krull Intersection Theorem</title>
 
          <blockquote>
            <p>
              <q>Life happens at intersections.</q>
            </p>
            <attribution>Jack Dorsey</attribution>
          </blockquote>

          
          <p>Coming soon to an OER near you!</p>
        </section>
  
      </chapter>

      <chapter xml:id="ch-integral-extensions"><title>Integral Extensions</title>

        <section xml:id="sec-integral-extensions"><title>Integral Extensions</title>
          
          <blockquote>
            <p>
              <q>
                What you do not wish upon yourself, extend not to others.
              </q>
            </p><attribution>Confucius</attribution>
          </blockquote>

          <p>
            In field theory, there is a close relationship between (vector space-)finite field extensions and algebraic equations. 
            The situation for rings is similar, but much more subtle.
          </p>
      
          <definition xml:id="defn-integral-element"><title>Integral Element</title>
            <statement>
              <p>
                Let <m>R</m> be a ring, <m>S</m> an <m>R</m>-algebra, and <m>I</m> an ideal. 
                An element <m>r</m> of <m>R</m> is <em>integral</em> over <m>I</m> if it satisfies an equation of the form 
                <me>r^n + a_1 r^{n-1} + \cdots + a_{n-1} r + a_n = 0 \quad \text{with} \ a_i \in I^i \ \text{for all} \  i.</me> 
                An element of <m>S</m> is <em>integral</em> over <m>I</m> if 
                <me>s^n + a_1 s^{n-1} + \cdots + a_{n-1} s + a_n = 0 \quad \text{with} \ a_i \in I^i \ \text{for all} \  i.</me> 
                In both cases, we say that <m>r</m> and <m>s</m> satisfy an <em>equation of integral dependence</em> over <m>I.</m>
              </p>
            </statement>
          </definition>

          <p>
            FIX
          </p>

          <remark>
            <p>
              Integral automatically implies algebraic, but the condition that there exists an equation of algebraic dependence that is <em>monic</em> is stronger in the setting of rings. 
              This is very different to what happens over fields, where algebraic and integral are equivalent conditions.
            </p>
          </remark>
  
          <example xml:id="ex-sqrt2-integral-in-z"><title><m>\sqrt{2}</m> Integral in <m>\Z</m></title>
            <statement>
              <p>
                Consider the <m>\Z</m>-algebra <m>R = \Z[\sqrt{2}] = \{ a + b \sqrt{2} \mid a, b \in \Z \}</m>. 
                The element <m>\sqrt{2}</m> is integral over <m>\Z.</m>
              </p>
            </statement>
  
            <solution>
              <p>
                since it satisfies the equation of integral dependence <m>x^2-2 = 0</m>.
              </p>
            </solution>
          </example>
  
          <example xml:id="ex-frac12-in-q-not-integral-in-z"><title><m>\frac{1}{2}</m> in <m>\Q</m> Not Integral in <m>\Z</m></title> 
            <statement>
              <p>
                Prove <m>\frac{1}{2} \in \mathbb{Q}</m> is not integral over <m>\mathbb{Z}.</m>
              </p>
            </statement>

            <solution>
              <p>
                If <m>a_0, \ldots, a_{n-1} \in \Z</m> are such that 
                <me>\left( \frac{1}{2} \right)^n + a_{n-1} \left( \frac{1}{2} \right)^{n-1} + \cdots + a_0 = 0,</me>
                then multiplying by <m>2^n</m> gives 
                <me>1 + 2a_{n-1} + \cdots + 2^n a_0 = 0,</me>
                which is impossible for parity reasons (the left hand-side is odd!). 
                Notice, in contrast, that <m>\frac{1}{2}</m> is algebraic over <m>\Z</m>, since it satisfies <m>2x-1=0</m>.
              </p>
            </solution>
          </example>
  
          <definition xml:id="defn-integrally-closed"><title>Integrally Closed</title>
            <statement>
              <p>
                Consider an an inclusion of rings <m>A \subseteq R</m>. 
                The <em>integral closure</em> <idx><h>integral closure</h></idx>of <m>A</m> in <m>R</m> is the set of elements in <m>R</m> that are integral over <m>A</m>. 
                We say <m>A</m> is <em>integrally closed</em> <idx><h>integrally closed</h></idx> in <m>R</m> if <m>A</m> is its own integral closure in <m>R</m>. 
                The integral closure of a domain <m>R</m> in its field of fractions is usually denoted by <m>\overline{R}.</m> <idx><h><m>\overline{R}</m></h></idx></p>
            </statement>
          </definition>
  
          <definition xml:id="defn-normal-domain"><title>Normal Domain</title>
            <statement>
              <p>
                A <em>normal domain</em> is a domain <m>R</m> that is integrally closed in its field of fractions, meaning <m>R = \overline{R}.</m>
              </p>
            </statement>
          </definition>
  
          <example xml:id="ex-integers-are-a-normal-domain"><title>Integers are a Normal Domain</title>
            <statement>
              <p>
                The ring of integers <m>\mathbb{Z}</m> is a integrally closed, meaning its integral closure in its fraction field <m>\mathbb{Q}</m> is <m>\mathbb{Z}</m> itself. 
                The key idea to show this is similar to the argument we used <xref ref="ex-frac12-in-q-not-integral-in-z"/> is not integral over <m>\Z</m>.</p>
            </statement>
          </example>

          <p>
            In fact, this is a special case of the fact that every UFD is normal.
          </p>
  
          <example xml:id="ex-ufds-are-normal"><title>UFDs are Normal</title>
            <statement>
              <p>
                Show that every UFD is normal.
              </p>
            </statement>
          </example>

          <remark>
            <p>
              We cannot talk about the integral closure of a ring <m>R</m> without specifying in what extension; 
              the integral closures of <m>R</m> in different extension can be very different. 
              In <xref ref="ex-frac12-in-q-not-integral-in-z"/>, we saw that the integral closure of <m>\Z</m> in <m>\Z[\sqrt{2}]</m> contains at least <m>\Z</m> and <m>\sqrt{2}</m>, while <xref ref="ex-integers-are-a-normal-domain"/> says that the integral closure of <m>\Z</m> in <m>\Q</m> is <m>\Z</m>.
            </p>
  
            <p>
              When <m>R</m> is a domain, if we ever refer to <em>the</em> integral closure of <m>R</m>, it is understood that we mean the integral closure of <m>R</m> in its field of fractions, <m>\overline{R}</m>.
            </p>
          </remark>
      
          <remark>
            <p>
              An element <m>r \in R</m> is integral over <m>A</m> if and only if <m>r</m> is integral over the subring <m>\varphi(A)\subseteq R</m>, so we might as well assume that <m>\varphi</m> is injective.
            </p>
          </remark>
            
          <proposition xml:id="prop-f.g.-by-intl-modfin"><title>F.G.-by-Intl-Modfin</title>
            <statement>
              <p>
                Consider a ring extension <m>A\subseteq R</m>. 
                <ol>
                  <li>
                    <p>
                      If <m>r \in R</m> is integral over <m>A</m>, then <m>A[r]</m> is module-finite over <m>A</m>. 
                    </p>
                  </li>

                  <li>
                    <p>
                      If <m>r_1,\dots,r_t \in R</m> are integral over <m>A</m>, then <m>A[r_1,\dots,r_t]</m> is module-finite over <m>A</m>.
                    </p>
                  </li>
                </ol>
              </p>
            </statement>
  
            <proof>
              <p>
                <ol>
                  <li>
                    Let <m>r</m> be integral over <m>A</m>, with <m>r^n + a_{n-1} r^{n-1} + \cdots + a_1 r + a_0 = 0</m> for some <m>a_i \in A</m>. We claim that <m>A[r] = A + Ar + \cdots + A r^{n-1}</m>. 
                    Since <m>A[r]</m> is generated by all the powers <m>r^m</m> of <m>r</m> as an <m>A</m>-module, to show that any polynomial <m>p(r) \in A[r]</m> is in <m>A + Ar + \cdots + A r^{n-1}</m> it is enough to show that <m>r^m \in A + Ar + \cdots + A r^{n-1}</m> for all <m>m</m>.
                  </li>
                </ol>
              </p>
  
              <p>
                Using induction on <m>m</m>, the base cases <m>1, r, \ldots, r^{n-1} \in A + Ar + \cdots + A r^{n-1}</m> follow from the fact that <m>r^{k}</m> is contained in the <m>Ar^{k}</m>-th component. 
                For the induction step, we need to show that <m>r^m \in A + Ar + \cdots + A r^{n-1}</m> for all <m>m \geq n-1</m>; 
                we can do this by induction because we can use the equation above to rewrite <m>r^m</m> as 
                <me>\begin{aligned}r^m &amp; = - r^{m-n}(a_{n-1} r^{n-1} + \cdots + a_1 r + a_0) \\&amp; = - a_{n-1} r^{m-1} - \cdots a_1 r^{m-n+1} - a_0 r^{m-n},\end{aligned}</me> 
                which is a linear combination of powers of <m>r</m> of degree up to <m>m-1</m>.
              </p>
  
              <p>
                <ol>
                  <li>
                    Write 
                    <me>A_0 :=  A \subseteq A_1 :=  A[r_1] \subseteq A_2 :=  A[r_1,r_2] \subseteq \cdots \subseteq A_t :=  A[r_1,\dots,r_t].</me>
                    Since <m>r_i</m> is integral over <m>A</m>, it is also integral over <m>A_{i-1}</m>, via the same monic equation that <m>r_i</m> satisfies over <m>A</m>. 
                    By Part (a), we conclude that the each extension <m>A_{i-1} \subseteq A_i</m> is module-finite. 
                    Thus the inclusion <m>A \subseteq A[r_1,\dots,r_t]</m> is a composition of module-finite maps, and thus by this <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Lemma - Compositions Preserve Module Finite|Lemma]] it is also module-finite.
                  </li>
                </ol>
              </p>
            </proof>
          </proposition>

          <p>
            In what follows, we will need the following elementary linear algebra fact, which is actually very useful in various contexts within commutative algebra. 
            In fact, later in this class we will use this useful fact again, perhaps when you least expect it. 
            This is a nice example of an algebra fact that holds over any ring that we can actually reduce to the case of fields.
          </p>
  
          <definition xml:id="defn-classical-adjoint"><title>Classical Adjoint</title>
            <statement>
              <p>The <em>classical adjoint</em> of an <m>n\times n</m> matrix <m>B=[b_{ij}]</m> is the matrix <m>\mathrm{adj}(B)</m> with entries <me>\mathrm{adj}(B)_{ij}=(-1)^{i+j} \det(\widehat{B_{{ji}}}),</me> where <m>\widehat{B_{{ji}}}</m> <idx><h><m>\widehat{B_{ij}}</m></h></idx>is the matrix obtained from <m>B</m> by deleting its <m>j</m>th row and <m>i</m>th column. <idx><h>classical adjoint</h></idx><idx><h><m>\mathrm{adj}(B)</m></h></idx></p>
            </statement>
          </definition>
  
          <lemma xml:id="lem-determinantal-technique"><title>Determinantal Technique</title>
          <idx><h>determinantal technique</h></idx>
            <statement>
              <p>Let <m>R</m> be a ring, <m>B \in M_{n\times n}(R)</m>, <m>v\in R^n</m>, and <m>r\in R</m>. (a) <m>\mathrm{adj}(B) B = \det(B) I_{n\times n}</m>. (b) If <m>B v = r v</m>, then <m>\det(r I_{n\times n} - B) v=0</m>.</p>
            </statement>
  
            <proof>
  
              <p><ol>
                <li>
                When <m>R</m> is a field, this is a basic linear algebra fact. We will deduce the case of a general ring from the field case. The ring <m>R</m> is a <m>\Z</m>-algebra, so we can write <m>R</m> as a quotient of some polynomial ring <m>\Z[X]</m>. Let <m>\psi:\Z[X]\to R</m> be a surjection, <m>a_{ij}\in \Z[X]</m> be such that <m>\psi(a_{ij})=b_{ij},</m> and let <m>A=[a_{ij}]</m>. Note that <me>\psi(\mathrm{adj}(A)_{ij})=\mathrm{adj}(B)_{ij} \quad \textrm{ and } \quad \psi((\mathrm{adj}(A) A)_{ij}) = (\mathrm{adj}(B) B)_{ij},</me>since <m>\psi</m> is a homomorphism, and the entries are the same polynomial functions of the entries of the matrices <m>A</m> and <m>B</m>, respectively. Thus, it suffices to establish <me>\mathrm{adj}(B) B = \det(B) I_{n\times n}</me>in the case when <m>R=\Z[X]</m>, and we can do this entry by entry. Now, <m>R=\Z[X]</m> is an integral domain, hence a subring of a field (its fraction field). Since both sides of the equation <me>\left( \mathrm{adj}(B) B \right)_{ij} = \left( \det(B) I_{n\times n}\right)_{ij}</me> live in <m>R</m> and are equal in the fraction field (by linear algebra) they are equal in <m>R</m>. This holds for all <m>i, j</m>, and thus 1) holds.
                </li>
  
                <li>
                By assumption, we have <m>(r I_{n\times n} - B) v=0</m>, so by part 1)<me>\det(r I_{n\times n} - B) v=\mathrm{adj}(r I_{n\times n} - B) (r I_{n\times n} - B) v = 0.</me>
                </li>
  
              </ol></p>
  
            </proof>
          </lemma>
  
          <theorem xml:id="thm-module-finite-implies-integral"><title>Module Finite Implies Integral</title>
            <statement>
              <p>Let <m>A\subseteq R</m> be module-finite. Then <m>R</m> is integral over <m>A</m>.</p>
            </statement>
  
            <proof>
              <p>Given <m>r\in R</m>, we want to show that <m>r</m> is integral over <m>A</m>. The idea is to show that multiplication by <m>r</m>, realized as a linear transformation over <m>A</m>, satisfies the characteristic polynomial of that linear transformation.</p>
  
              <p>Suppose that <m>R = A f_1 + \cdots + A f_n</m>. We may assume that <m>f_1=1</m>, perhaps by adding a module generator. Since every element in <m>R</m> is an <m>A</m>-linear combination of <m>f_1, \ldots, f_n</m>, this is in particular true for the elements <m>rf_1, \ldots, r f_n</m>. Thus we can find <m>a_{ij} \in A</m> such that <me>r f_i = \sum_{j=1}^t a_{ij} f_j</me>for each <m>i</m>. Consider the matrix <m>C=[a_{ij}]</m> and the column vector <m>v=(f_1,\dots,f_n)</m>. We can now write the equalities above more compactly as <m>r v = C v</m>. By the Determinantal Technique, <m>\det(r I_{n\times n} - C)v=0</m>. Since we chose one of the entries of <m>v</m> to be <m>1</m>, we have in particular that <m>\det(r I_{n\times n} - C)=0</m>. Expanding this determinant as a polynomial in <m>r</m>, this is a monic equation with coefficients in <m>A</m>.</p>
            </proof>
          </theorem>

          <p>We are now ready to show the following important characterization of module-finite extensions, which tells us exactly what we need besides algebra-finite to force an extension to be module-finite:</p>
  
          <corollary xml:id="cor-mod-fin-iff-integral-and-alg-fin"><title>Mod Fin iff Integral and Alg Fin</title>
            <statement>
              <p>An <m>A</m>-algebra <m>R</m> is module-finite over <m>A</m> if and only if <m>R</m> is integral and algebra-finite over <m>A</m>.</p>
            </statement>

            <proof>
              <p>
                (<m>\Rightarrow</m>): Module-finite implies integral, and algebra-finite.
              </p>

              <p>
                (<m>\Leftarrow</m>): If <m>R=A[r_1,\dots,r_t]</m> is integral over <m>A</m>, then each <m>r_i</m> is integral over <m>A</m>, and this implies <m>R</m> is module-finite over <m>A</m>.
              </p>
            </proof>
          </corollary>
  
          <corollary xml:id="cor-extensions-gen-by-integral-elements-are-integral"><title>Extensions Gen by Integral Elements are Integral</title>
            <statement>
              <p>If <m>R</m> is generated as an algebra over <m>A</m> by integral elements, then <m>R</m> is integral over <m>A</m>.</p>
            </statement>
  
            <proof>
              <p>
                Let <m>R=A[\Lambda]</m>, with <m>\lambda</m> integral over <m>A</m> for all <m>\lambda\in\Lambda</m>. Given <m>r\in R</m>, there is a finite subset <m>L\subseteq \Lambda</m> such that <m>r\in A[L]</m>. This <m>A[L]</m> is now a finitely-generated algebra generated by integral elements, and thus it must be module-finite over <m>A</m>. Module-finite implies integral, and thus <m>A[L]</m> is an integral extension of <m>A</m>. In particular, <m>r \in A[L]</m> is integral over <m>A</m>.
              </p>
            </proof>
          </corollary>
  
          <corollary xml:id="cor-integral-elements-form-subring"><title>Integral Elements form Subring</title>
            <statement>
              <p>
                Given any ring extension <m>A\subseteq S</m>, the set of elements of <m>S</m> that are integral over <m>A</m> form a subring of <m>S</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                By <xref provisional="cor"/> the <m>A</m>-subalgebra of <m>R</m> generated by all elements in <m>R</m> that are integral over <m>A</m> is integral over <m>A</m>, so it is contained in the set of all elements that are integral over <m>A</m>: this means that 
                <me>
                  \{\text{integral elements}\} \subseteq A[\{\text{integral elements}\}] \subseteq \{\text{integral elements}\}, 
                </me>
                so equality holds throughout, and <m>\{\text{integral elements}\}</m> is a ring contained in <m>S</m> by definition.
              </p>
  
            </proof>
          </corollary>

          <p>
            In other words, the integral closure of <m>A</m> in <m>R</m> is a subring of <m>R</m> containing <m>A</m>.
          </p>
      
          <example xml:id="ex-integral-examples">
            <title><m>\Z[\sqrt{d}]</m> Integral Over <m>\Z</m></title>
  
            <statement>
              
              <p>
                <ol>
                  <li>
                    <p>
                      The ring <m>\mathbb{Z}[\sqrt{d}]</m>, where <m>d \in \mathbb{Z}</m> is not a perfect square, is integral over <m>\mathbb{Z}</m>.                 Indeed, <m>\sqrt{d}</m> satisfies the monic polynomial <m>x^2-d</m>, and since the integral closure of <m>\mathbb{Z}</m> is a ring containing <m>\mathbb{Z}</m> and <m>\sqrt{d}</m>, and <m>\mathbb{Z}[\sqrt{d}]</m> is the smallest such ring, we conclude that every element in <m>\Z[\sqrt{d}]</m> is integral over <m>\mathbb{Z}</m>.
                    </p>
                  </li>

                  <li>
                    <p>
                      Let <m>R=\C[x,y] \subseteq S=\C[x,y,z]/(x^2+y^2+z^2)</m>. Then we claim that <m>S</m> is module-finite over <m>R.</m> To see this we first need to realize <m>R</m> as a subring of <m>S</m>. To do that, consider the <m>\C</m>-algebra homomorphism <me>\begin{CD}
                        R@&gt;\varphi&gt;&gt; S\\\\
                        (x,y)@&gt;&gt;&gt; (x,y)
                        \end{CD}</me>The kernel of <m>\varphi</m> consists of the polynomials in <m>x</m> and <m>y</m> that are multiples of <m>x^2+y^2+z^2</m>, but any nonzero multiple of <m>x^2+y^2+z^2</m> in <m>\C[x,y,z]=R[z]</m> must have <m>z</m>-degree at least <m>2</m>, which implies it involves <m>z</m> and thus it is not in <m>\C[x,y]</m>. We conclude that <m>\varphi</m> is injective, and thus <m>R \subseteq S.</m>
                    </p>

                    <p>
                      Now <m>S</m> is generated over <m>R</m> as an algebra by one element, <m>z</m>, and <m>z</m> satisfies the monic equation <m>t^2 + (x^2+y^2) = 0</m>, so <m>S</m> is integral over <m>R</m>.
                    </p>
                  </li>
                </ol>
              </p>
  
            </statement>
  
          </example>

          <p>
            Note, however, that not all integral extensions are module-finite. 
          </p>
  
          <example xml:id="ex-integral-but-not-algebra-or-module-finite">
            <title>Integral but Not Algebra or Module Finite</title>
  
  
            <statement>
              
              <p>
                Let <m>k</m> be a field, and consider the <m>k[x]</m>-algebra <m>R</m> given by <me>k[x] \subseteq R=k[x,x^{1/2},x^{1/3},x^{1/4},x^{1/5},\ldots].</me> Note that <m>x^{1/n}</m> satisfies the monic polynomial <m>t^n - x</m>, and thus it is integral over <m>k[x]</m>. Since <m>R</m> is generated by elements that are integral over <m>k[x]</m>, by  it must be an integral extension of <m>A</m>. However, <m>k[x] \subseteq R</m> is not algebra-finite, and thus it is also not module-finite.
              </p>
  
            </statement>
          </example>
  
          <example xml:id="ex-tower-integral-iff-each-piece-integral">
            <title>Tower Integral iff Each Piece Integral</title>
  
  
            <statement>
              
  
              <p>
                Given ring extensions <m>A \subseteq B \subseteq C</m>, the extensions <m>A \subseteq B</m> and <m>B \subseteq C</m> are integral if and only if <m>A \subseteq C</m> is integral.
              </p>
  
            </statement>
          </example>

          <p>
            Finally, here is a useful fact about integral extensions that we will use multiple times.
          </p>
  
          <theorem xml:id="thm-int-ext-domains-field">
            <title>Int Ext Domains Field</title>
  
  
            <statement>
              
  
              <p>
                If <m>R \subseteq S</m> is an integral extension of domains, then <m>R</m> is a field if and only if <m>S</m> is a field.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                Suppose that <m>R</m> is a field, and let <m>s \in S</m> be a nonzero element, which is necessarily integral over <m>R</m>. The ring <m>R[s]</m> is algebra-finite over <m>R</m> by construction, and integral over <m>R</m>. Since <m>R \subseteq R[s]</m> is integral and algebra-finite, it must also be module-finite. Since <m>R</m> is a field, this means that <m>R[s]</m> is a finite-dimensional vector space over <m>R</m>. Since <m>R[s] \subseteq S</m> is a domain, the map <m>R[s] \xrightarrow{\, s \,} R[s]</m> is injective. Notice that this is a map of finite-dimensional <m>R</m>-vector spaces, and thus it must also be surjective. In particular, there exists an element <m>t \in R[s]</m> such that <m>st = 1,</m> and thus <m>s</m> is invertible. We conclude that <m>S</m> must be a field.
              </p>
  
              <p>
                Now suppose that <m>S</m> is a field, and let <m>r \in R</m>. Since <m>r \in R \subseteq S</m>, there exists an inverse <m>r^{-1}</m> for <m>r</m> in <m>S</m>, which must be integral over <m>R</m>. Given any equation of integral dependence for <m>r^{-1}</m> over <m>R</m>, say<me>(r^{-1})^n + a_{n-1} (r^{-1})^{n-1} + \cdots + a_0 = 0</me>with <m>a_i \in R</m>, we can multiply by <m>r^{n-1}</m> to obtain<me>r^{-1} = -a_{n-1} - \cdots -a_0 r^{n-1} \in R.</me>Therefore, <m>r</m> is invertible in <m>R</m>, and <m>R</m> is a field.
              </p>
  
            </proof>
          </theorem>

          <p>
            Before we move on from algebra-finite and module-finite extensions, we should remark on what the situation looks like over fields. First, note that over a field, module-finite just means finite dimensional vector space. While over a general ring the notions of algebra-finite and module-finite are quite different, they are actually equivalent over a field. This is a very deep fact, and we will unfortunately skip its proof — since it is a key ingredient in proving a fundamental result in algebraic geometry, we will leave it for the algebraic geometry class next semester. This is a nice application of the Artin-Tate Lemma, which we are going to discuss shortly, together with some facts about transcendent elements.
          </p>
  
          <theorem xml:id="thm-zariskis-lemma">
            <title>Zariski's Lemma</title>
  
  
            <statement>
              
  
              <p>
                A field extension <m>k \subseteq L</m> is algebra-finite if and only if it is module-finite.
              </p>
  
            </statement>
          </theorem>

          <p>
            The following corollary follows immediately from what we proved in this section:
          </p>
  
          <corollary xml:id="cor-alg-fin-ext-of-alg-closed-field">
            <title>Alg-Fin Ext of Alg Closed Field</title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be an algebraically closed field. If the field extension <m>k \subseteq L</m> is algebra-finite, then <m>k = L</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                By Zariski's Lemma, <m>k \subseteq L</m> must be module-finite, making the extension integral. When we are over a field, integral is the same as algebraic, but integrally closed fields have no nontrivial algebraic extensions.
              </p>
  
            </proof>
          </corollary>

        </section>

        <section xml:id="sec-over-up-down"><title>Over, Up, and Down</title>
          
          <blockquote>
            <p>
              <q>You're either down or you're up.</q>
            </p>
            <attribution>Shaun White</attribution>
          </blockquote>

          <remark>
            <p>
              In this section, we will collect theorems about the spectrum of a ring: theorems that assert that the map on Spec is surjective, and theorems about lifting chains of primes. 
              Given a ring homomorphism <m>R \to S</m>, we want to study the behavior of chains of primes: how chains in <m>R</m> behave under expansion to <m>S</m> and how chains in <m>S</m> behave under contraction to <m>R</m>.
            </p>
          </remark>

          <definition xml:id="defn-fiber"><title>Fiber</title>
            <statement>
              <p>
                For a map of topological spaces <m>f: X\to Y</m> and <m>y \in Y</m>, the <em>fiber</em><idx><h>fiber of a map</h></idx> over <m>y</m> is the subspace 
                <me>f^{-1}(y)= \{x\in X \ | \ f(x)=y\} \subseteq X.</me>
              </p>
            </statement>
          </definition>
  
          <definition xml:id="defn-fiber-ring"><title>Fiber Ring</title>
            <statement>
              <p>
                Let <m>\psi:R\to S</m> be a ring homomorphism and <m>P \in \Spec(R)</m>. 
                The <em>fiber ring</em><idx><h>fiber ring</h></idx><idx><h><m>\kappa_{\psi}(\fp)</m></h></idx> of <m>\psi</m> over <m>P</m> is 
                <me>\kappa_{\psi}(P) :=  (R \setminus P)^{-1}(S/P S),</me> 
                where by abuse of notation we write <m>R \setminus P</m> for the image of <m>R \setminus P</m> in <m>S</m>, and <m>P S</m> for <m>\psi(P) S</m>.
              </p>
            </statement>
          </definition>

          <p>EMPTY<idx><h><m>\kappa(P)</m></h></idx></p> 
  
          <lemma xml:id="lem-primes-contracting-to-p-fiber-ring"><title>Primes Contracting to p Fiber Ring</title>
            <statement>
              <p>
                Let <m>\psi:R\to S</m> be a ring homomorphism and <m>P \in \Spec(R)</m> be a prime ideal. The natural map <m>S \to \kappa_{\psi}(P)</m> induces a homeomorphism (in particular, an order-preserving bijection) <me>\Spec( \kappa_{\psi}(P) ) \cong \{ Q \in \Spec(S) \ | \ \psi^*(Q) = P \},</me> where the right-hand side has the subspace topology induced by the Zariski topology on <m>\Spec(S).</m>
              </p>
            </statement>

            <proof>
              <p>
                Consider the maps 
                <me>
                  \begin{CD}
                  S@&gt;\pi&gt;&gt;S/PS@&gt;g&gt;&gt;(R\setminus P)\inv(S/PS).
                  \end{CD}
                </me>
                For any localization map or any quotient map, the induced map on Spec is a homeomorphism onto its image. 
                The map on spectra induced by <m>\pi</m> can be identified with the inclusion of <m>V(P S)</m> into <m>\Spec(S)</m>. 
                For the second map, <m>g</m>, we saw in  that the map on spectra can be identified with the inclusion of the set of primes that do not intersect <m>R \setminus P</m>, i.e., those whose contraction is contained in <m>P</m>. 
                Therefore, <m>(g \circ \pi)^*</m> is injective, since it is the composition of two injective maps.
              </p>
  
              <p>
                On the one hand, if a prime <m>Q</m> contains <m>PS</m>, then <m>Q \cap R \supseteq PS \cap R \supseteq P</m>. 
                If moreover <m>Q \cap R \subseteq P</m>, we must have <m>Q \cap R = P</m>.
              </p>
  
              <p>
                We have thus shown that the image of <m>(g \circ \pi)^*</m> is the set of primes in <m>S</m> that contract to <m>P</m>. 
                %So <m>Q</m> is in the image if and only if <m>\psi^{-1}(Q) = P</m>.
              </p>
            </proof>
          </lemma>
  
          <lemma xml:id="lem-image-criterion"><title>Image Criterion</title>
            <statement>
              <p>
                Let <m>R \xrightarrow{\varphi} S</m> be a ring homomorphism. 
                For any <m>P \in \Spec(R)</m>, <m>P \in \im(\varphi^*)</m> if and only if 
                <me>P S \cap R = P.</me>
              </p>
            </statement>
  
            <proof>
              <p>
                If <m>P S \cap R = P</m>, then <me>\frac{R}{P} = \frac{R}{P S \cap R} \hookrightarrow \frac{S}{P S},</me> so localizing at <m>(R \setminus P)</m>, we get an inclusion <m>\kappa(P) \subseteq \kappa_{\varphi}(P)</m>. 
                Since <m>\kappa(P)</m> is nonzero, so is <m>\kappa_{\varphi}(P).</m> and thus its spectrum is nonempty. 
                By , there is a prime mapping to <m>P</m>.
              </p>
  
              <p>
                If <m>P S \cap R \neq P</m>, then <m>P S \cap R \supsetneq P</m>. 
                If <m>Q \cap R = P</m>, then <m>Q \supseteq P S</m>, so <m>Q \cap R \supsetneq P</m>. 
                So no prime contracts to <m>P</m>.
              </p>
  
            </proof>
          </lemma>
  
          <example><title></title>
            <p>
              Let <m>R = \C[x^n] \subseteq S = \C[x]</m>. 
              The ideal <m>x^n R</m> is prime, while <m>x^n S</m> is not even radical. 
              Nevertheless, <m>x^n S \cap R = (x) \cap R = x^n R</m>.
            </p>
          </example>
  
          <example xml:id="inclusion-triangle"><title>Inclusion Triangle</title>
            <p>
              Consider the inclusion <m>R:=k[xy,xz,yz]\to S:=k[x,y,z]</m> and the prime <m>P = (xy)</m> in <m>R</m>. 
              Notice that <m>(xz)(yz) \in P S \cap R</m>, but <em>not</em> in <m>P</m>, so <m>P S \cap R \supsetneq P</m>, and thus <m>P \notin \im(\varphi^*)</m>. 
              We can check this more directly, by noting that any prime <m>Q</m> in <m>S</m> contracting to <m>P</m> would contain <m>P S = (x) \cap (y)</m>, so <m>Q \supseteq (x)</m> or <m>Q \supseteq (y)</m>. 
              But <m>(x) \cap R = (xy,xz) \supsetneq P</m> and <m>(y) \cap R = (xy,yz) \supsetneq P</m>, so no prime in <m>S</m> contracts to <m>P</m>.
            </p>
          </example>
  
          <corollary xml:id="cor-direct-summand-and-surj-spec-map"><title>Direct Summand and Surj Spec Map</title>
            <statement>
              <p>
                If <m>R\subseteq S</m> is a direct summand, the map <m>\Spec(S) \to \Spec(R)</m> is surjective.
              </p>
            </statement>

            <proof>

  
              <p>
                By , we know <m>I S \cap R = I</m> for all ideals in this case, so  says the map on Spec is surjective.
              </p>
            </proof>
          </corollary>
  
          <definition xml:id="defn-integral-element-1"><title>Integral Element</title><statement>
            <p>
              Let <m>R</m> be a ring, <m>S</m> an <m>R</m>-algebra, and <m>I</m> an ideal. 
              An element <m>r</m> of <m>R</m> is <em>integral</em><idx><h>integral over an ideal</h></idx> over <m>I</m> if it satisfies an equation of the form 
              <me>r^n + a_1 r^{n-1} + \cdots + a_{n-1} r + a_n = 0 \quad \text{with} \ a_i \in I^i \ \text{for all} \  i.</me> 
              An element of <m>S</m> is <em>integral</em> over <m>I</m> if 
              <me>s^n + a_1 s^{n-1} + \cdots + a_{n-1} s + a_n = 0 \quad \text{with} \ a_i \in I^i \ \text{for all} \  i.</me> 
              In both cases, we say that <m>r</m> and <m>s</m> satisfy an <em>equation of integral dependence</em> over <m>I.</m>
            </p>

            <p>FIX <idx><h>integral closure of an ideal</h></idx><idx><h><m>\overline I</m></h></idx><idx><h><m>\overline{I}^S</m></h></idx></p>
          </statement>
          </definition>

          <remark>
            <p>
              Notice that <m>\overline{I}^S \cap R = \overline{I}</m> is immediate from the definition.
            </p>
          </remark>

          <example xml:id="ex-rees-algebra"><title>Rees Algebra</title>
            <p>
              Let <m>R\subseteq S</m>, <m>I</m> be an ideal of <m>S</m>, and <m>t</m> be an indeterminate. Consider the rings <m>R[It]\subseteq R[t] \subseteq S[t].</m> Here <m>R[It]</m> is the subalgebra of <m>R[t]</m> generated by elements of the form <m>at</m> for all <m>a \in I</m>. Notice that we can give this a structure of a graded ring by setting all elements in <m>R</m> to have degree <m>0</m> and <m>t</m> to have degree <m>1</m>, so<me>R[It] = \bigoplus_{n \geqslant 0} I^n t^n.</me> This is usually called the <em>Rees algebra</em><idx><h>Rees algebra</h></idx> of <m>I</m>. 
              - <m>\overline{I}^S =\{ s \in S \ | \ st\in S[t] \ \text{is integral over the ring} \ R[It]\}</m>. 
              - <m>\overline{I}^S</m> is an ideal of <m>S</m>.
            </p>
          </example>
  
          <lemma xml:id="lem-extension-contraction-lemma-for-int.-ext."><title>Extension-Contraction Lemma for Int. Ext.</title>
            <statement>
              <p>
                Let <m>R \subseteq S</m> be integral, and <m>I</m> be an ideal of <m>R</m>. Then <m>IS \subseteq\overline{I}^S</m>, and hence <m>I S \cap R \subseteq \overline{I}</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                Let <m>x\in IS</m>. 
                We can write <m>x = a_1 s_1 + \cdots + a_t s_t</m> for some <m>a_i\in I</m>. 
                Moreover, taking <m>S'=R[s_1,\dots,s_t]</m>, we also have <m>x\in IS'</m>. We will show that <m>x \in \overline{I}^{S'}</m>, so <m>x \in \overline{I}^{S}</m> follows as a corollary. So we might as well replace <m>S</m> with <m>S'</m>, so that <m>R \subseteq S</m> is also integral and module-finite. By , the extension is also module-finite.
              </p>
  
              <p>
                Let <m>S= R b_1 + \cdots + R b_n</m>. 
                We can write 
                <me>x b_i = \left(\sum_{k=1}^t a_k s_k \right) b_i = \sum_j a_{ij} b_j</me> 
                with <m>a_{ij}\in I</m>. 
                We can write these equations in the form <m>x v = Av</m>, where <m>v=(b_1,\dots,b_u)</m>, and <m>A=[a_{ij}]</m>. 
                By the determinantal trick, , we have <m>\det(xI-A)v=0</m>. 
                Since we can assume <m>b_1=1</m>, we have <m>\det(xI-A)=0</m>. 
                The fact that this is the type of equation we want follows from the monomial expansion of the determinant: any monomial is a product of <m>n</m> terms where some of them are copies of <m>x</m>, and the rest are elements of <m>I</m>. 
                Since this is a product of <m>n</m> terms, a term in <m>x^i</m> has a coefficient coming from a product of <m>n-i</m> elements of <m>I</m>.
              </p>
  
              <p>
                So this shows that <m>IS \subseteq\overline{I}^S</m>. 
                Now notice that <m>\overline{I}^S \cap R = \overline{I}</m> is immediate from the definition, as noted in .
              </p>
            </proof>
          </lemma>
  
          <theorem xml:id="thm-lying-over"><title>Lying Over</title>
            <idx><h>Lying Over Theorem</h></idx>
            <statement>
              <p>
                If <m>R\subseteq S</m> is an integral extension, then <m>P S \cap R = P</m> for every <m>P \in \Spec(R)</m>, and the induced map <m>\Spec(S) \longrightarrow \Spec(R)</m> is surjective.
              </p>
            </statement>
  
            <proof>
              <p>
                Let <m>I</m> be any ideal in <m>R</m>. 
                Given any <m>r \in \overline{I}</m>, we have
                <me>r^n + a_1 r^{n-1} + \cdots + a_{n-1} r + a_n = 0</me>
                for some <m>n</m> and some <m>a_i \in I^i</m> for all <m>i</m>, so
                <me>r^n = - a_1 r^{n-1} - \cdots - a_{n-1} r - a_n \in I.</me>
                Thus <m>\overline{I} \subseteq \sqrt{I}</m>. 
                Therefore, if <m>P</m> is a prime in <m>R</m>, by  we have <m>P S \cap R \subseteq \overline{P}</m>, and
                <me>P S \cap R \subseteq \overline{P} \subseteq \sqrt{P} = P.</me>
                Then <m>P S \cap R = P</m>, and by  we conclude that <m>P</m> is in the image of the map on Spec.
              </p>
            </proof>
          </theorem>

          <remark>
            <p>
              Both assumptions that the extension is integral and that it is an inclusion are needed in <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Lying Over|Lying Over]]; 
              we cannot reduce to the case of an integral inclusion. 
              The point is that <m>R \to S</m> being an inclusion does not translate into a property of the induced map on Spec.
            </p>
          </remark>
  
          <example><title></title>
            <p>
              We saw in  that the map induced on Spec by the inclusion <m>k[xy,xz,yz] \subseteq k[x,y,z]</m> is not surjective. 
              So  does not apply — indeed, this inclusion is not module-finite, and thus by  it is not integral. 
              For example, the infinite set <m>\{ 1, x^n, y^n, z^n \mid n \geqslant 1\}</m> is a minimal generating set for <m>k[x,y,z]</m> over <m>k[xy,xz,yz]</m>.
            </p>
          </example>
  
          <example><title></title>
            <p>
              Suppose <m>f</m> is a regular element on <m>R</m>, but not a unit. 
              Since <m>f</m> is regular, the map <m>R \longrightarrow R_f</m> is an inclusion, but we claim it is not integral. 
              If <m>\frac{1}{f}</m> is integral over <m>R</m>, there would be <m>a_i \in R</m> such that 
              <me>\frac{1}{f^n} + \frac{a_{n-1}}{f^{n-1}} + \cdots + \frac{a_1}{f} + a_0 = 0.</me> 
              After multiplying by <m>f^n</m> all terms are of the form <m>\frac{r}{1}</m>, and thus in <m>R</m>, since the localization map is injective. So 
              <me>1 = -( a_{n-1} f + \cdots + a_1 f^{n-1} + a_0 f^n) \in (f),</me> 
              and <m>f</m> must be a unit. 
              So whenever <m>f</m> is a regular element but not a unit, <m>R \longrightarrow R_f</m> is an example of an inclusion that is not integral. 
              Note that the image of the map on Spec is the complement of <m>V(f)</m>, so in particular the map is not surjective.
            </p>
  
            <p>
              In contrast, the map <m>R \longrightarrow R/(f)</m> is integral, since it is module-finite, but it is not an inclusion. 
              The map on Spec is again not surjective: its image is <m>V(f)</m>.
            </p>
          </example>

          <remark>
            <p>
              Let <m>I</m> be an ideal in <m>S</m>. 
              Suppose <m>R \to S</m> is an integral extension. 
              There is an induced map <m>R/(I \cap R) \to S/I</m>, and that map is integral: an equation of integral dependance for <m>s \in S</m> over <m>R</m> gives an equation for integral dependance of its class in <m>S/I</m> over <m>R/(I \cap R)</m>.
            </p>
          </remark>

          <lemma xml:id="lem-integral-extension-maximal-contracts-to-maximal"><title>Integral Extension Maximal Contracts to Maximal</title>
            <statement>
              <p>
                If <m>\varphi: R\to S</m> is integral, <m>Q \cap R</m> is maximal if and only if <m>Q</m> is maximal in <m>S</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                By , the induced map <m>R/(Q \cap R) \subseteq S/Q</m> is an integral extension of domains, and <m>Q</m> (respectively, <m>Q \cap R</m>) is maximal if and only if <m>S/Q</m> (respectively, <m>R/(Q \cap R)</m>) is a field. 
                So this follows by .
              </p>
            </proof>
          </lemma>
  
          <lemma xml:id="lem-integral-preserved-by-localization"><title>Integral Preserved by Localization</title>
            <statement>
              <p>
                Let <m>R \to S</m> be integral, and let <m>W</m> be a multiplicatively closed subset of <m>R</m>. 
                Then <m>W^{-1}R \to W^{-1}S</m> is integral.
              </p>
            </statement>
  
            <proof>
              <p>
                Since <m>W</m> is a multiplicatively closed subset of <m>R</m>, its image in <m>S</m> is also multiplicatively closed. 
                Given <m>x\in S</m> and <m>w\in W</m>, then we have equations of the form 
                <me>x^n + r_1 x^{n-1} + \cdots + r_n = 0 \implies \left( \frac{x}{w} \right)^n + \frac{r_1}{w} \left( \frac{x}{w} \right)^{n-1} + \cdots + \frac{r_n}{w^n}  =0.</me> 
                Thus <m>\frac{x}{w}</m> is integral over <m>W^{-1}S</m>, and <m>S</m> is integral over <m>R</m>.
              </p>
            </proof>
          </lemma>
  
          <theorem xml:id="thm-incomparability"><title>Incomparability</title>
            <idx><h>Incomparability</h></idx>
            <statement>
              <p>
                If <m>R \longrightarrow S</m> is integral and <m>P \subseteq Q</m> are primes in <m>S</m> that satisfy <m>P \cap R = Q \cap R</m>, then <m>P = Q</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                In this case we can reduce to the case of an inclusion: <m>f\!: R \to S</m> factors through <m>R/\ker f</m>, and the map induced on Spec factors as 
                <me>\Spec(S) \longrightarrow \Spec(R) = \Spec(S) \longrightarrow \Spec(R/\ker f) \longrightarrow \Spec(R).</me> 
                Since the map on spectra induced by <m>R \longrightarrow R/\ker(f)</m> is injective, we can replace <m>R</m> by the quotient and assume <m>\varphi</m> is an integral inclusion.
              </p>
  
              <p>
                So suppose <m>R \subseteq S</m> is integral, and let <m>\fa = P \cap R = Q \cap R</m>. 
                By , localizing at <m>(R\setminus \fa)</m> preserves integrality. 
              </p>
  
              <p>
                By localizing <m>R</m> at <m>(R \setminus \fa)</m>, the image of <m>\fa</m> is a maximal ideal. 
                So we can reduce to the situation where <m>R \cap P = R \cap Q</m> is a maximal ideal. 
                By , <m>P \subseteq Q</m> are both maximal ideals. 
                Therefore, <m>P = Q</m>.
              </p>
            </proof>
          </theorem>
  
          <corollary xml:id="cor-finite-contractions-in-int-noeth-alg"><title>Finite Contractions in Int Noeth Alg</title>
            <statement>
              <p>
                Let <m>S</m> be an integral <m>R</m>-algebra. 
                If <m>S</m> is noetherian, then only finitely many primes contract to each <m>P \in \Spec(R)</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                If <m>Q' \in \Spec(S)</m> contracts to <m>P</m>, then <m>Q' \supseteq P S</m>, so in particular <m>Q'</m> contains some prime <m>Q</m> minimal over <m>P S</m>. 
                Then 
                <me>P S \subseteq Q \subseteq Q' \implies P \subseteq Q \cap R \subseteq Q' \cap R = P,</me>
                so <m>Q' \cap R = Q \cap R</m>. 
                By , <m>Q = Q'</m>. 
                So all the primes contracting to <m>P</m> are in <m>\Min(P S)</m>, which is a finite set since <m>R</m> is noetherian, by .
              </p>
            </proof>
          </corollary>
  
          <corollary xml:id="cor-integral-dim-inequality"><title>Integral Dim Inequality</title>
            <statement>
              <p>
                If <m>R \longrightarrow S</m> is integral, then for any <m>Q \in \Spec(S)</m> we have 
                <me>\ht(Q) \leqslant \ht(Q \cap R)</me> 
                In particular, <m>\dim(S) \leqslant \dim(R)</m>.
              </p>
  
            </statement>
  
            <proof>
              <p>
                Given a chain of primes <m>P_0 \subsetneq \cdots \subsetneq P_n = Q</m> in <m>\Spec(S)</m>, we can contract to <m>R</m>, and by  we get a chain of distinct primes in <m>\Spec(R)</m>.
              </p>
            </proof>
          </corollary>
  
          <theorem xml:id="thm-going-up"><title>Going Up</title>
            <idx><h>Going Up Theorem</h></idx>
            <statement>
              <p>
                If <m>R \longrightarrow S</m> is integral, then for every <m>P \subsetneq P'</m> in <m>\Spec(R)</m> and <m>Q \in \Spec(S)</m> with <m>Q \cap R = P</m>, there is some <m>Q' \in \Spec(S)</m> with <m>Q \subsetneq Q'</m> and <m>Q' \cap R = P'</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                Consider the map <m>R / P \to S / Q</m>. 
                This is integral, as we observed in . 
                It is also injective, so  applies. 
                Thus, there is a prime <m>\fa</m> of <m>S/Q</m> that contracts to the prime <m>P' / P</m> in <m>\Spec(R/P)</m>. 
                We can write <m>\fa = Q' / Q</m> for some <m>Q' \in \Spec(S)</m>, and we must have that <m>Q'</m> contracts to <m>P'</m>.
              </p>
            </proof>
          </theorem>
  
          <corollary xml:id="cor-integral-dim-equality"><title>Integral Dim Equality</title>
            <statement>
              <p>
                If <m>R\subseteq S</m> is integral, then <m>\dim(R)=\dim(S)</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                We have already shown that <m>\dim(S) \leqslant \dim(R)</m> in , so we just need to show that <m>\dim(R) \leqslant \dim(S)</m>. 
                Fix a chain of primes <m>P_0 \subsetneq \cdots \subsetneq P_n</m> in <m>\Spec(R)</m>. 
                By Lying Over, , there is a prime <m>Q_0 \in \Spec(S)</m> contracting to <m>P_0</m>. 
                Then by Going up, , we have <m>Q_0 \subsetneq Q_1</m> with <m>Q_1 \cap R = P_1</m>. 
                Continuing, we can build a chain of distinct primes in <m>S</m> of length <m>n</m>. So <m>\dim(R) \leqslant \dim(S)</m>, and equality follows.
              </p>
            </proof>
          </corollary>
  
          <lemma xml:id="lem-lemma-minimal-polynomial"><title>Lemma Minimal Polynomial</title>
            <statement>
              <p>
                Let <m>R</m> be a integrally closed and let <m>x</m> be an element in some larger domain that is integral over <m>R</m>. 
                Let <m>k</m> be the fraction field of <m>R</m>, and <m>f(t)\in k[t]</m> be the minimal polynomial of <m>x</m> over <m>k</m>. 
                (a) If <m>x</m> is integral over <m>R</m>, then <m>f(t) \in R[t]\subseteq k[t]</m>. 
                (b) If <m>x</m> is integral over a prime <m>P</m>, then <m>f(t)</m> has all of its nonleading coefficients in <m>P</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                Let <m>x</m> be integral over <m>R</m>. 
                Fix an algebraic closure of <m>k</m> containing <m>x</m>, and let <m>x_1~=~x</m>, <m>x_2,\ldots,x_u</m> be the roots of <m>f</m>. 
                Since <m>f(t)</m> divides any polynomial with coefficients in <m>k</m> that <m>x</m> satisfies, it also divides a monic equation of integral dependance for <m>x</m> over <m>R</m>. 
                Therefore, each <m>x_i</m> is a solution to such an equation of integral dependence, and thus must be integral over <m>R</m>.
              </p>
  
              <p>
                Let <m>S=R[x_1,\dots,x_u] \subseteq \overline{k}</m>. 
                This is a module-finite extension of <m>R</m>, so all of its elements are integral over <m>R</m>. 
                The leading coefficient of <m>f(t)</m> is 1, and the remaining coefficients of <m>f(t)</m> are polynomials in the <m>x_i</m>, hence they lie in <m>S</m>. 
                On the other hand, <m>R</m> is normal, so <m>S \cap k = R</m>. 
                We conclude that all the coefficients of <m>f</m> are in <m>R</m>, and <m>f \in R[t]</m>.
              </p>
  
              <p>
                Now let <m>x</m> be integral over <m>P</m>. 
                By the same argument as above, all of the <m>x_i</m> are integral over <m>P</m>. 
                Since each <m>x_i \in \overline{P}^S</m>, any polynomial in the <m>x_i</m> lies in <m>\overline{P}^S</m>. 
                So the nonleading coefficients of <m>f</m> lie in <m>\overline{P}^S \cap R = P</m>, by <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Lying Over|Lying Over]].
              </p>
            </proof>
          </lemma>
  
          <theorem xml:id="thm-going-down"><title>Going Down</title>
            <idx><h>Going Down Theorem</h></idx>
            <statement>
              <p>
                Suppose that <m>R</m> is a integrally closed, <m>S</m> is a domain, and <m>R\subseteq S</m> is integral. 
                Then, for every <m>P \subsetneq P'</m> in <m>\Spec(R)</m> and <m>Q'</m> in <m>\Spec(S)</m> with <m>Q' \cap R = P'</m>, there is some <m>Q \in \Spec(S)</m> with <m>Q \subsetneq Q'</m> and <m>Q \cap R = P</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                Let <m>W=(S \setminus Q')(R \setminus P)</m> be the multiplicative set in <m>S</m> consisting of products of elements in <m>S \setminus Q'</m> and <m>R \setminus P</m>. 
                Note that each of the sets <m>S \setminus Q'</m> and <m>R \setminus P</m> contains <m>1</m>, so <m>S \setminus Q'</m> and <m>R \setminus P</m> are both contained in <m>W</m>. 
                We will show that <m>W \cap P S</m> is empty. 
                Once we do that, it will follow from  that there is a prime ideal <m>Q</m> in <m>S</m> containing <m>P S</m> such that <m>W \cap Q</m> is empty. 
                Since <m>S \setminus Q' \subseteq W</m>, our new prime <m>Q</m> must necessarily be contained in <m>Q'</m>.
              </p>
  
              <p>
                Moreover, <m>R \setminus P \subseteq W</m>, so <m>(Q \cap R) \cap (R \setminus P)</m> is empty, or equivalently, <m>Q \cap R \subseteq P</m>. 
                Since <m>Q \cap R \subseteq P</m> and <m>Q \cap R \supseteq P</m>, we conclude that <m>Q \cap R = P</m>.
              </p>
  
              <p>
                So our goal is to show that <m>W \cap P S</m> is empty. 
                We proceed by contradiction, and assume there is some <m>x \in P S \cap W</m>. 
                We can write <m>x=rs</m> for some <m>r\in R \setminus P</m> and <m>s \in S \setminus Q'</m>. 
                Moreover, since <m>x \in P S</m>, <m>x</m> is integral over <m>P</m>, by .
              </p>
  
              <p>
                Consider the minimal polynomial of <m>x</m> over <m>\mathrm{frac}(R)</m>, say
                <me>h(x) = x^n + a_1 x^{n-1} + \cdots + a_n = 0.</me>
                By , each <m>a_i\in P' \subseteq R</m>. 
                Then substituting <m>x=rs</m> in <m>\textrm{frac}(R)</m> and dividing by <m>r^n</m> yields 
                <me>g(s) = s^n + \frac{a_1}{r} s^{n-1} + \cdots + \frac{a_n}{r^n} = 0.</me>
                We claim that this is the minimal polynomial of <m>s</m>. 
                If <m>s</m> satisfied a monic polynomial of degree <m>d &lt; n</m>, multiplying by <m>r^d</m> would give us a polynomial of degree <m>d</m> that <m>x</m> satisfies, which is impossible. 
                So indeed, this is the minimal polynomial of <m>s</m>.
              </p>
  
              <p>
                Since <m>s\in S</m>, and thus integral over <m>R</m>,  says that each <m>\frac{a_i}{r^i} =: v_i\in R</m>. 
                Since <m>r \notin P</m> and <m>r^i v_i =a_i \in P</m>, we must have <m>v_i\in P</m>. 
                The equation <m>g(s)=0</m> then shows that <m>s \in \sqrt{P S}</m>. 
                Since <m>Q' \in \Spec(S)</m> contains <m>P' S</m> and hence <m>P S</m>, we have <m>s \in \sqrt{P S} \subseteq Q'</m>. 
                This is the desired contradiction, since <m>s \notin Q'</m> by construction.
              </p>
  
            </proof>
          </theorem>
  
          <corollary xml:id="cor-height-in-normal-domains"><title>Height in Normal Domains</title>
            <statement>
              <p>
                If <m>R</m> is a integrally closed, <m>S</m> is a domain, and <m>R \subseteq S</m> is integral, then <m>\ht(Q) = \ht(Q \cap R)</m> for any <m>Q \in \Spec(S)</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                We already know from  that <m>\ht(Q) \leqslant \ht(Q \cap R)</m>. 
                To show that <m>\ht(Q) \geqslant \ht(Q \cap R)</m>, given a saturated chain up to <m>Q \cap R</m>, we can apply  to get a chain just as long that goes up to <m>Q</m>.
              </p>
            </proof>
          </corollary>

        </section>
        
      </chapter>

      <chapter xml:id="ch-dim-theory"><title>Dimension Theory</title>
  
        <section xml:id="sec-dim-height"><title>Dimension and Height</title>
          
          <blockquote>
            <p>
              <q>I don't like heights. This is why I stopped growing at fifth grade.</q>
            </p>
            <attribution>Billy Crystal</attribution>
          </blockquote>

          <remark>
            <p>
              We will now spend a while discussing the notion of dimension of a ring and dimension of a variety. 
              To motivate the definition, let's first think in terms of varieties.
            </p>
    
            <p>
              We take our inspiration from the fundamental setting of dimension theory: vector spaces. 
              The notion of basis doesn't make sense for varieties (What does it mean to span? Where is zero?), but one relevant thing we do have for both vector spaces and for varieties is subobjects.
            </p>
    
            <p>
              One way to characterize the dimension of a vector space <m>V</m> is the the largest number <m>d</m> such that there is a proper chain of subspaces 
              <me>\{0\} = V_0 \subsetneq V_1 \subsetneq V_2 \subsetneq \cdots \subsetneq V_d = V.</me> 
              We can try something similar for varieties, but for a reducible variety, this is not a very good notion. 
              For example, for a union of <m>m</m> points, we can cook up a chain of <m>m</m> proper subvarieties by adding one more point each time, but a point should be zero-dimensional by any reasonable measure.
              So, if we want this approach to work, we should stick to chains of irreducible subvarieties.
            </p>

          </remark>

          <definition xml:id="defn-dimension-of-variety"><title>Dimension of Variety</title>
            <statement>
              <p>
                The <em>dimension</em><idx><h>dimension of a variety</h></idx> of an affine variety<m>X</m> is defined as 
                <me>\sup \{ d \ | \ \exists \ \text{a strictly decreasing chain of irreducible subvarieties of $X$:} \ \ X_d \supsetneq X_{d-1} \supsetneq \cdots \supsetneq X_0\}.</me>
              </p>
            </statement>
          </definition>
  
          <definition xml:id="defn-krull-dimension-of-a-ring"><title>Krull Dimension of a Ring</title>
          <statement>
            <p>
              The <em>Krull dimension</em><idx><h>Krull dimension</h></idx><idx><h>dimension</h></idx><idx><h><m>\dim(R)</m></h></idx> of a ring <m>R</m> is
              <me>\dim(R) :=  \sup \{d \mid \exists \text{ a strictly increasing chain of prime ideals } P_0 \subsetneq \cdots \subsetneq P_d\}.</me>
              We often call it simply the <em>dimension</em> of <m>R</m>. 
              Alternatively, <m>\dim(R)</m> is the supremum of the lengths of saturated chains of primes of <m>R</m>.
            </p>
          </statement>
          </definition>
  
          <definition xml:id="defn-dimension-of-a-module"><title>Dimension of a Module</title>
          <statement>
            <p>
              The <em>dimension</em><idx><h>dimension of a module</h></idx> of an <m>R</m>-module <m>M</m> is defined as <m>\dim(R/\ann_R(M))</m>.
            </p>
          </statement>
          </definition>

          <example>
            <statement>
              <p>
                <ul>
                  <li>
                    <p>
                      The dimension of any field is zero.
                    </p>
                  </li>

                  <li>
                    <p>
                      A ring is zero-dimensional if and only if every minimal prime of <m>R</m> is a maximal ideal.
                    </p>
                  </li>

                  <li>
                    <p>
                      The ring of integers <m>\Z</m> has dimension <m>1</m>, since there is one minimal prime <m>(0)</m> and every other prime is maximal. 
                      Likewise, any PID that is not a field has dimension one.
                    </p>
                  </li>
                </ul>
              </p>
            </statement>
          </example>
  
          <lemma xml:id="lem-ufd-height-1"><title>UFD height 1</title>
            <statement>
              <p>
                Let <m>R</m> be a ring and <m>I</m> be an ideal in <m>R</m>. 
                If <m>R</m> is a UFD, <m>I</m> is a prime of height one if and only if <m>I=(f)</m> for a prime element <m>f</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                If <m>I=(f)</m> with <m>f</m> irreducible, and <m>0 \subsetneq P \subseteq I</m>, then <m>P</m> contains some nonzero multiple of <m>f</m>, say <m>af^n</m> with <m>a</m> and <m>f</m> coprime. 
                Since <m>a \notin I</m>, <m>a \notin P</m>, so we must have <m>f \in P</m>, so <m>P = (f)</m>. 
                Thus, <m>I</m> has height one. 
                On the other hand, if <m>I</m> is a prime of height one, we claim <m>I</m> contains an irreducible element. 
                Indeed, <m>I</m> is nonzero, so contains some <m>f \neq 0</m>, and primeness implies one of the prime factors of <m>f</m> is contained in <m>I</m>. 
                Thus, any nonzero prime contains a prime ideal of the form <m>(f)</m>, so a height one prime must be of this form.
              </p>
            </proof>
          </lemma>
  
          <example xml:id="ex-dim-of-kx_1x_2dotsx_12x_22dots-is-zero"><title>Dim of <m>k[x_1,x_2,\dots]/(x_1^2,x_2^2,\dots)</m> is Zero</title>
            <p>
              For a field <m>k</m>, the ring <m>R = k[x_1,x_2,\dots]/(x_1^2,x_2^2,\dots)</m> is not noetherian, as 
              <me>(x_1) \subsetneq (x_1,x_2) \subsetneq (x_1,x_2,x_3) \subsetneq \cdots</me> is an infinite ascending chain, so <m>R</m> is not noetherian. 
              However, <m>\sqrt{(0)} = (x_1,x_2,\dots)</m> is a maximal ideal, and hence <m>(x_1,x_2,\dots)</m> is the unique minimal prime of <m>R</m>, which is also maximal. 
              Therefore, <m>\dim(R) = 0</m>.
            </p>
          </example>
  
          <example xml:id="nagata"><title>Nagata</title>
            <p>
              Let <m>R = k[x_{11},x_{21},x_{22}, x_{31}, x_{32}, x_{33},\ldots]</m> be a polynomial ring in infinitely many variables, which we are thinking of as arranged in an infinite triangle. 
              The ring <m>R</m> is clearly infinite-dimensional and not noetherian. 
              Let 
              <me>W = R \setminus \big((x_{11}) \cup (x_{21},x_{22}) \cup (x_{31},x_{32},x_{33})  \cup \cdots \big) = \bigcap_{n \geqslant 1} \big(R \setminus (x_{n1},\dots,x_{nn})\big)</me>
              and <m>S=W^{-1}R</m>. 
              Note that <m>W</m> is an intersection of multiplicatively closed subsets, so this is a valid localization of <m>R</m>.
            </p>
  
            <p>
              For any <m>n</m>, we have a chain of primes 
              <me>(x_{n1}) \subsetneq (x_{n1},x_{n2}) \subsetneq \cdots \subsetneq (x_{n1},\ldots, x_{nn})</me>
              in <m>R</m>. 
              As these primes are all contained in <m>(x_{n1},\ldots, x_{nn})</m>, none of these intersects <m>W</m>, so the expansion to <m>S</m> of the chain above yields a proper chain of primes in <m>S</m>. 
              It follows that <m>\dim(S) \geqslant n</m> for all <m>n \geqslant 1</m>, so <m>S</m> is infinite-dimensional.
            </p>
  
            <p>
              It turns out that <m>S</m> is noetherian, which is not at all obvious and a bit technical, so we will not prove it.
            </p>
          </example>
  
          <lemma xml:id="lem-properties-of-dimension-and-height"><title>Properties of Dimension and Height</title>
            <statement>
              <p>
                Let <m>R</m> be a ring. 
                <ol>
                  <li>
                    <p>
                      A prime has height zero if and only if it is a minimal prime of <m>R</m>. 
                    </p>
                  </li>

                  <li>
                    <p>
                      An ideal has height zero if and only if it is contained in a minimal prime of <m>R</m>. 
                      In particular, in a domain, every nonzero ideal has positive height. 
                    </p>
                  </li>

                  <li>
                    <p>
                      <m>\dim(R) = \sup \{ \dim(R/P) \mid P \in \Spec(R) \} = \sup\{ \dim(R/P) \mid P \in \Min(R) \}</m>. 
                    </p>
                  </li>

                  <li>
                    <p>
                      <m>\dim(R) = \sup \{ \ht(P) \mid P \in \Spec(R) \}=\sup\{ \mathrm{height}(Q) \mid Q \in \mSpec(R) \}</m>. 
                    </p>
                  </li>

                  <li>
                    <p>
                      If <m>I</m> is an ideal, then <m>\dim(R/I) = \sup \{ n \mid \exists P_0 \subsetneq P_1 \subsetneq \cdots \subsetneq P_n, P_i \in V(I) \}</m>. 
                    </p>
                  </li>

                  <li>
                    <p>
                      If <m>P</m> is prime, <me>\dim(R/P) + \ht(P) \leqslant \dim(R).</me> 
                    </p>
                  </li>

                  <li>
                    <p>
                      If <m>I</m> is an ideal, <me>\dim(R/I) + \ht(I) \leqslant \dim(R).</me> 
                    </p>
                  </li>

                  <li>
                    <p>
                      If <m>W</m> is a multiplicative set, then <m>\dim(W^{-1}R) \leqslant \dim(R)</m>. 
                    </p>
                  </li>

                  <li>
                    <p>
                      If <m>P</m> is prime, then <m>\ht(P)=\dim(R_P)</m>. 
                    </p>
                  </li>

                  <li>
                    <p>
                      If <m>P \subseteq Q</m> are primes, then <m>\dim(R_Q/ P R_Q)</m> is the supremum of the lengths of saturated chains of primes in <m>R</m> of the form <m>P = P_0 \subsetneq P_1 \subsetneq \cdots \subsetneq P_n = Q</m>.
                    </p>
                  </li>
                </ol>
              </p>
            </statement>
  
            <proof>
              <p>
                We will prove some of these and leave the rest as an exercise.
              </p>
  
              <p>
                A prime has height <m>0</m> if and only if it contains no other prime, which is equivalent being a minimal prime of <m>R</m>.
              </p>
  
              <p>
                If <m>I</m> is contained in a minimal prime <m>Q</m> of <m>R</m>, then <m>\ht(Q)=0</m> by (1), so <m>\ht(I)=0</m> by definition. 
                Conversely, if <m>\ht(I)=0</m>, by definition, there is a minimal prime of <m>I</m> of height <m>0</m>, so some minimal prime of <m>I</m> is a minimal prime of <m>R</m>, so <m>I</m> is contained in a minimal prime of <m>R</m>.
              </p>
  
              <p>
                It suffices to show that if <m>\dim(R/P) \geqslant a</m> and <m>\ht(P) \geqslant b</m> then <m>\dim(R) \geqslant a+b</m>. 
                By definition, <m>\ht(P) \geqslant b</m> means that there is a chain of primes 
                <me>Q_0 \subsetneq Q_1 \subsetneq \cdots \subsetneq Q_b = P.</me> 
                By (5), <m>\dim(R/P) \geqslant a</m> means that there is a chain of primes 
                <me>\mathfrak{a}_0 \subsetneq \mathfrak{a}_1 \subsetneq \cdots \subsetneq \mathfrak{a}_a</me> with <m>\mathfrak{a}_0 \supseteq P</m>. 
                We can assume without loss of generality that <m>\mathfrak{a}_0 = P</m>, since if not, we can add it to the bottom of the chain. 
                Putting these chains together, we get a chain of length <m>a+b</m> in <m>\Spec(R)</m>, so <m>\dim(R) \geqslant a+b</m>.
              </p>
  
              <p>
                Let <m>\dim(R/I) \geqslant a</m> and <m>\ht(I) \geqslant b</m>. 
                The inequality <m>\ht(I) \geqslant b</m> means that for every minimal prime <m>P</m> of <m>I</m>, <m>\ht(P) \geqslant b</m>. 
                The inequality <m>\dim(R/I) \geqslant a</m> implies that there exists a minimal prime of <m>P</m> of <m>I</m> such that <m>\dim(R/P) \geqslant a</m>. 
                For such a minimal prime as in the latter statement, using (5), we get the desired conclusion.
              </p>
            </proof>
          </lemma>

          <remark>
            <p>
              We know that in noetherian rings, there can be arbitrarily long chains of primes, since the dimension can be infinite as in Nagata's. 
              On the other hand, any ascending proper chain of primes is finite, as a consequence of the definition. 
              Does this imply that every prime has finite height? 
              This does not prevent that possibility that there could be an infinite descending chain of primes, which would then give any of the primes in the chain infinite height. 
              (This seems strange in conjunction with the fact that in any ring, any prime contains a minimal prime, but it does not contradict this.) 
              Another possible problem is there being two primes <m>P \subseteq Q</m> such that for all <m>n \geqslant 1</m> there exists a chain of primes of length <m>n</m> from <m>P</m> to <m>Q</m>.
            </p>
  
            <p>
              However, we will later show that the height of any ideal in a noetherian ring is finite.
            </p>
          </remark>
  
          <example xml:id="ex-int-extension-of-domains-nonzero-multiple"><title>Int Extension of Domains Nonzero Multiple</title>
            <p>
              Let <m>R \subseteq S</m> be an integral extension of domains. 
              Show that every nonzero <m>s \in S</m> has a nonzero multiple in <m>R</m>, meaning that there exists <m>t \in S</m> such that <m>ts \neq 0</m> and <m>ts \in R</m>.
            </p>
          </example>
  
          <example><title></title>
            <p>
              Let <m>k</m> be an infinite field and <m>R = k[t^3,t^4,t^5]</m>. 
              We have shown that 
              <me>\displaystyle R\cong \frac{k[x,y,z]}{(x^3-yz,y^2-xz,z^2-x^2y)},</me> 
              and that <m>R</m> is the coordinate ring of the curve 
              <me>X = \{ (t^3,t^4,t^5) \ | t\in k\}.</me> 
              As <m>X</m> is a curve (meaning it is parameterized by a single parameter), we should expect the dimension of the variety <m>X</m>, and equivalently of the ring <m>R</m>, to be <m>1</m>. 
              Let's prove this.
            </p>
  
            <p>
              On the one hand, <m>R</m> is a domain, so <m>(0)</m> is the unique minimal prime. 
              To show that <m>\dim(R) = 1</m>, we need to show that any nonzero prime ideal is maximal.
            </p>
  
            <p>
              Set <m>S = k[t^3]\subseteq R</m>. 
              We note that <m>t^3</m> does not satisfy any algebraic relation over <m>k</m>, so <m>S</m> is isomorphic to a polynomial ring in one variable, where that one variable corresponds to <m>t^3</m>. 
              Moreover, note that the inclusion <m>S \subseteq R</m> is integral, since <m>t^4</m> satisfies the monic polynomial <m>(T^4)^3- (t^3)^4=0</m> and <m>t^5</m> satisfies the monic polynomial <m>(T^5)^3 - (t^3)^5=0</m>. 
              Polynomial rings in one variable have dimension <m>1</m>, so <m>\dim(S) = 1</m>.
            </p>
  
            <p>
              Let <m>P \in \Spec(R)</m> be nonzero.
              Note first that <m>P \cap S \neq 0</m>, since if <m>f \in P</m>, then there is some nonzero multiple of <m>f</m> in <m>S</m> by . 
              Since <m>\dim(S)=1</m>, <m>P \cap S</m> is maximal. 
              The inclusion<me>\frac{S}{P \cap S} \hookrightarrow \frac{R}{P}</me> is integral: 
              a dependence relation for any representative yields a dependence relation. 
              Since <m>\frac{S}{P \cap S}</m> is a field, <m>\frac{R}{P}</m> is a domain, and the inclusion is integral, by  we can conclude that <m>R/P</m> is a field, so <m>P</m> is a maximal ideal. 
              This shows that every nonzero prime in <m>R</m> is maximal, and thus <m>\dim(R) = 1</m>.
            </p>
          </example>
  
          <definition xml:id="defn-catenary-ring"><title>Catenary Ring</title>
            <statement>
              <p>
                A ring is <em>catenary</em><idx><h>caternary ring</h></idx> if for every pair of primes <m>Q \supseteq P</m>, every saturated chain of primes 
                <me>P = P_0 \subsetneq P_1  \subsetneq \cdots \subsetneq P_n = Q</me>
                has the same length.
              </p>
            </statement>
          </definition>
  
          <definition xml:id="defn-equidimensional-ring"><title>Equidimensional Ring</title>
            <statement>
              <p>
                A ring is <em>equidimensional</em><idx><h>equidimensional ring</h></idx> if every maximal ideal has the same finite height, and every minimal prime has the same dimension.
              </p>
            </statement>
          </definition>
  
          <example><title></title>
            <p>
              Consider the ring 
              <me>R = \displaystyle \frac{k[x,y,z]}{(xy,xz)}.</me>
              We can find the minimal primes of <m>R</m> by computing <m>\Min((xy,xz))</m> in <m>k[x,y,z]</m>. 
              The prime ideals <m>(x)</m> and <m>(y,z)</m> are incomparable, and <m>(x)\cap(y,z)=(xy,xz)</m>, so <m>\Min(R)=\{(x),(y,z)\}</m>. 
              We claim that the height of <m>(x-1,y,z)</m> is one: it contains the minimal prime <m>(y,z)</m>, and any saturated chain from <m>(y,z)</m> to <m>(x-1,y,z)</m> corresponds to a saturated chain from <m>(0)</m> to <m>(x-1)</m> in <m>k[x]</m>, which must have length 1 since this is a PID. 
              The height of <m>(x,y-1,z)</m> is at least 2, as witnessed by the chain <m>(x) \subseteq (x,y-1) \subseteq (x,y-1,z)</m>. 
              So <m>R</m> is not equidimensional.
            </p>
          </example>
  
          <example><title></title>
            <p>
              The ring <m>\Z_{(2)}[x]</m> is a domain that is not equidimensional. 
              On the one hand, the maximal ideal <m>(2,x)</m> has height at least two, which we see from the chain 
              <me>(0) \subsetneq (x) \subseteq (x,2).</me> 
              Thus <m>\dim(R) \geqslant 2</m>. 
              On the other hand, we will show later that the prime ideal <m>P = (2x-1)</m> has height 1, and it is maximal since <m>R/P \cong \Q</m>. 
              Therefore, <m>\dim(R/P)=0</m>, and thus 
              <me>\dim(R/P)+ \ht(P)=1</me> 
              whereas <m>\dim R \geqslant 2</m>. 
              In fact, <m>\dim R=2</m>, but I won't justify this.
            </p>
  
            <p>
              The ring <m>R</m> in this example is in fact a catenary domain, which we will not justify. 
              Notice that there are maximal ideals of distinct heights in this ring, for example the ideal <m>P</m> given above is a prime of height 1 whereas and the maximal ideal <m>\fm=(2,x)</m> has height 2. 
              Thus this ring is not equidimensional.
            </p>
          </example>

        </section>  

        <section xml:id="sec-noether-normalizations"><title>Noether Normalizations</title>

          <blockquote>
            <p>
              <q>I think normalization is a good thing.</q>
            </p>
            <attribution>Jamie Dimon</attribution>
          </blockquote>
  
  
          <lemma xml:id="lem-making-a-pure-power-leading-term"><title>Making a Pure-Power Leading Term</title>
    
    
            <statement>
              
    
              <p>
                Let <m>A</m> be a domain, <m>R=A[x_1,\dots,x_n]</m>, and let <m>f\in R</m> be a polynomial of degree at most <m>N</m>. The <m>A</m>-algebra automorphism of <m>R</m> given by <me>\phi(x_i)=x_i + x_n^{N^{n-i}} \textrm{ for } i&lt;n \quad \textrm{ and } \quad \phi(x_n)=x_n</me>maps <m>f</m> to a polynomial that, viewed as a polynomial in <m>x_n</m> with coefficients in <m>A[x_1,\dots,x_{n-1}]</m>, has leading term <m>d x_n^a</m> for some <m>d\in A</m> and <m>a\in \N</m>.
              </p>

            </statement>
    
    
              <proof>

    
                <p>
                  The map <m>\phi</m> sends a monomial term <m>d x_1^{a_1} \cdots x_n^{a_n}</m> to a polynomial with unique highest degree term <m>d x_n^{a_1 N^{n-1} + a_2 N^{n-2} + \cdots + a_{n-1} N + a_n}</m>. For each of the monomials <m>d x_1^{a_1} \cdots x_n^{a_n}</m> in <m>f</m> with nonzero coefficient <m>d \neq 0</m>, we must have each <m>a_i \leqslant N</m>, so the map <me>(a_1,\dots,a_n) \mapsto a_1 N^{n-1} + a_2 N^{n-2} + \cdots + a_{n-1} N + a_n</me> is injective when restricted to the set of exponent tuples of <m>f</m>. Therefore, none of the terms can cancel. We find that the leading term is of the promised form.
                </p>
    
              </proof>
          </lemma>
  
          <lemma xml:id="lem-making-a-pure-power-leading-term-graded-version"><title>Making a Pure-Power Leading Term (Graded Version)</title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be an infinite field, and let <m>R=k[x_1,\dots,x_n]</m> be standard graded, meaning <m>\deg(x_i)=1</m>. Let <m>f\in R</m> be a homogeneous polynomial of degree <m>N</m>. There is a degree-preserving <m>k</m>-algebra automorphism of <m>R</m> given by <m>\phi(x_i) = x_i + a_i x_n</m> for <m>i&lt;n</m> and <m>\phi(x_n)=x_n</m> that maps <m>f</m> to a polynomial that viewed as a polynomial in <m>x_n</m> with coefficients in <m>k[x_1,\dots,x_{n-1}]</m>, has leading term <m>a x_n^N</m> for some (nonzero) <m>a\in k</m>.
              </p>
  
            </statement>
  
            <proof>
  
  
              <p>
                Given , we just need to show that the <m>x^N</m> coefficient of <m>\phi(f)</m> is nonzero for some choice of <m>a_i</m>. One can check that the coefficient of the <m>x^N</m> term is <m>f(-a_1,\dots,-a_{n-1},1)</m>. But <m>f(-a_1,\dots,-a_{n-1},1)</m>, when thought of as a polynomial in the <m>a_i</m>, is identically zero, then <m>f</m> must be the zero polynomial.
              </p>
  
            </proof>
          </lemma>
  
          <theorem xml:id="thm-noether-normalization"><title>Noether Normalization</title>
            <idx><h>Noether normalization</h></idx>
  
  
            <statement>
              
  
              <p>
                Let <m>A</m> be a domain, and <m>R</m> be a finitely generated <m>A</m>-algebra. There is some nonzero <m>a\in A</m> and <m>x_1,\dots,x_t\in R</m> algebraically independent over <m>A</m> such that <m>R_a</m> is module-finite over <m>A_a[x_1,\dots,x_t]</m>.
              </p>
  
              <p>
                In particular, if <m>k</m> is a field and <m>R</m> is a finitely generated <m>k</m>-algebra, then there exist <m>x_1, \ldots, x_t \in R</m> algebraically independent over <m>k</m> such that <m>k[x_1,\ldots,x_t] \subseteq R</m> is module-finite.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                We proceed by induction on the number of algebra generators <m>n</m> of <m>R</m> over <m>A</m>. There is nothing to prove in the case when <m>n=0</m>.
              </p>
  
              <p>
                Now suppose that we know the result holds for <m>A</m>-algebras generated by at most <m>n-1</m> elements, and let <m>R=A[r_1,\dots,r_n]</m>. If <m>r_1,\dots,r_n</m> are algebraically independent over <m>A</m>, we are done: <m>R</m> is module-finite over <m>R = A[r_1,\dots,r_n]</m>. If not, there is some algebraic relation among the generators <m>r_1, \ldots, r_n</m>, meaning there exists <m>f(x_1,\dots,x_n) \in A[x_1,\dots,x_n]</m> such that <m>f(r_1,\dots,r_n)=0</m>. After possibly applying  to change our choice of algebra generators, we can assume that <m>f</m> has leading term <m>a x_n^N</m> for some <m>a</m>. Then <m>f</m> is monic in <m>x_n</m> after inverting <m>a</m>, so <m>r_n</m> is integral over <m>A_a[r_1,\dots,r_{n-1}]</m>, and thus <m>R_a</m> is module-finite over <m>A_a[r_1,\dots,r_{n-1}]</m> by . By hypothesis, <m>A_{ab}[r_1,\dots,r_{n-1}]</m> is module-finite over <m>A_{ab}[x_1,\dots,x_s]</m> for some <m>b\in A</m> and <m>x_1,\dots,x_s</m> that are algebraically independent over <m>A</m>. Since <m>R_{ab}</m> is module-finite over <m>A_{ab}[r_1,\dots,r_{n-1}]</m>, then by  <m>R_{ab}</m> must also be module-finite over <m>A_{ab}[x_1,\dots,x_s]</m>, and we are done.
              </p>
  
            </proof>
          </theorem>
  
          <definition xml:id="defn-noether-normalization"><title>Noether Normalization</title>
          <statement>
            <p>
              Let <m>R</m> be a finitely generated algebra for some field <m>k</m>. Then a <em>noether normalization</em><idx><h>Noether normalization</h></idx> of <m>R</m> is a polynomial ring <m>A=k[x_1,\ldots, x_t]\subseteq R</m> such that <m>x_1,\ldots, x_t</m> are algebraically independent over <m>k</m> and <m>R</m> is module-finite over <m>A</m>.
            </p>
          </statement>
          </definition>
  
          <theorem xml:id="thm-graded-noether-normalization"><title>Graded Noether Normalization</title>
  
  
            <statement>
              
  
              <p>
                Let <m>k</m> be an infinite field, and <m>R</m> be a finitely generated <m>\N</m>-graded <m>k</m>-algebra with <m>R_0=k</m> and <m>R=k[R_1]</m>. There are homogeneous elements <m>x_1,\dots,x_t\in R_1</m> algebraically independent over <m>k</m> such that <m>R</m> is module-finite over <m>k[x_1,\dots,x_t]</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                We repeat the proof of  but use  in place of .
              </p>
  
            </proof>
          </theorem>

          <remark>
            <p>
              There also exist Noether normalizations for quotients of power series rings over fields: the key change is that after a change of coordinates, one can rewrite any nonzero power series in <m>k [[ x_1,\dots, x_n \Rbracket</m> as a series of the form <m>u (x_n^d + a_{d-1} x_n^{d-1} + \cdots + a_0)</m> for a unit <m>u</m> and <m>a_0,\dots,a_{d-1}\in k [[ x_1,\dots,x_{n-1}\Rbracket</m>. This is called . The rest of the proof of the Noether normalization theorem proceeds in essentially the same way. Thus, given <m>k[[ x_1,\dots, x_n \Rbracket / I</m>, we have some module-finite inclusion of another power series ring <m>k[[ z_1,\dots, z_d \Rbracket \subseteq k[[ x_1,\dots, x_n \Rbracket/I</m>.
            </p>
          </remark>

          <theorem xml:id="thm-noether-normalization-height-and-dimension"><title>Noether Normalization Height and Dimension</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a domain that is a finitely generated algebra over a field <m>k</m>, or a quotient of a power series ring over a field. Let <m>k[z_1,\dots,z_d]</m> be any noether normalization for <m>R</m>. For any maximal ideal <m>\fm</m> of <m>R</m>, the length of any saturated chain of primes from <m>0</m> to <m>\fm</m> is <m>d</m>. In particular, <m>\dim(R) = d</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                We will show the proof in the case when <m>R</m> is a finitely generated domain over a field <m>k</m>; the power series case is similar, and left as an exercise. We will prove by induction on~<m>d</m> that for any finitely generated domain with a Noether normalization with <m>d</m> algebraically independent elements, any saturated chain of primes ending in a maximal ideal has length~<m>d</m>.
              </p>
  
              <p>
                When <m>d=0</m>, <m>R</m> is a domain that is integral over a field, hence <m>R</m> is a field by . Now suppose the statement holds for <m>d-1</m>, and let <m>R</m> be a finitely generated domain over some field <m>k</m> with Noether normalization <m>A = k[z_1, \ldots, z_d]</m>. Consider a maximal ideal <m>\fm</m> of <m>R</m> and a saturated chain <me>0 \subsetneq Q_1 \subsetneq \cdots \subsetneq  Q_s = \fm.</me>By , its contraction to <m>A=k[z_1,\dots,z_d]</m> is a chain of <m>s</m> distinct primes in <m>R</m>: <me>0 \subsetneq P_1 :=  Q_1 \cap A \subsetneq \cdots \subsetneq P_s :=  Q_s \cap A.</me>Our assumption that the original chain is saturated implies that <m>Q_1</m> has height 1. Suppose that <m>P_1</m> had height <m>2</m> or more. By , we would be able to construct a chain up to $Q_1 $ of length <m>2</m> or more, but <m>Q_1</m> has height <m>1</m>. Thus <m>P_1</m> has height <m>1</m>. Since <m>k[z_1,\dots,z_d]</m> is a UFD, <m>P_1=(f)</m> for some prime element <m>f</m>, by . After a change of variables, as in , we can assume that <m>f</m> is monic in <m>z_d</m> with coefficients in <m>k[z_1,\dots,z_{d-1}]</m>. So <m>k[z_1,\dots,z_{d-1}] \subseteq A/(f) \subseteq R/Q_1</m> are module-finite extensions, and the induction hypothesis applies to <m>R/Q_1</m>. Now <me>0 = Q_1/Q_1 \subsetneq Q_2/Q_1 \subsetneq \cdots\subsetneq Q_s/Q_1 = \fm/Q_1</me>is a saturated chain in the domain <m>R/Q_1</m> going up to the maximal ideal <m>\fm/Q_1</m>. The induction hypothesis then says that this chain has length <m>d-1</m>, so <m>k-1=d-1</m>, and <m>k=d</m>.
              </p>
  
            </proof>
          </theorem>
  
          <corollary xml:id="cor-dimension-of-polynomial-ring"><title>Dimension of Polynomial Ring</title>
  
  
            <statement>
              
  
              <p>
                The dimension of the polynomial ring <m>k[x_1,\dots,x_d]</m> is <m>d</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                The polynomial ring <m>k[x_1,\dots,x_d]</m> is a Noether normalization of itself, so  says that it must have dimension <m>d</m>.
              </p>
  
            </proof>
          </corollary>
  
          <corollary xml:id="cor-dimension-of-algebra"><title>Dimension of Algebra</title>
  
  
            <statement>
              
  
              <p>
                If <m>R</m> is a <m>k</m>-algebra, the dimension of <m>R</m> is less than or equal to the minimal size of an algebra generating set for <m>R</m> over <m>k</m>. If <m>R = k[f_1, \ldots, f_d]</m> and <m>\dim(R) = d</m>, then <m>R</m> is isomorphic to a polynomial ring over <m>k</m>, and the generators <m>f_i</m> are algebraically independent.
              </p>
  
            </statement>
  
            <proof>
  
              <p>
                The first statement is trivial unless <m>R</m> is finitely generated, in which case we can write <m>R=k[f_1,\dots,f_s] \cong k[x_1,\dots,x_s]/I</m> for some ideal <m>I</m>, so <me>\dim(R) \leqslant \dim(k[x_1,\dots,x_s]) = d.</me> Suppose we chose <m>s</m> to be minimal. If <m>I\neq 0</m>, then <m>\dim(R)&lt; s</m>, since the zero ideal is not contained in <m>I</m>.
              </p>
  
            </proof>
          </corollary>
  
          <corollary xml:id="cor-f.g.-algebra-catenary-domain"><title>F.G. Algebra Catenary Domain</title>
  
  
            <statement>
              
  
              <p>
                Let <m>R</m> be a finitely generated algebra or a quotient of a power series ring over a field. (a) <m>R</m> is catenary. If additionally <m>R</m> is a domain, then (b) <m>R</m> is equidimensional, and (c) <m>\ht(I)=\dim(R)-\dim(R/I)</m> for all ideals <m>I</m>.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                Let <m>P \subseteq Q</m> be primes in <m>R</m>. After quotient out by <m>P</m>, we can assume that <m>R</m> is a domain and <m>P=0</m>. Fix a saturated chain <m>C</m> from <m>Q</m> to a maximal ideal <m>\fm</m>. Given two saturated chains <m>C'</m>, <m>C''</m> from <m>0</m> to <m>Q</m>, the concatenations <m>C'|C</m> and <m>C''|C</m> are saturated chains from <m>0</m> to <m>\fm</m>, so by  they must have the same length. It follows that <m>C'</m> and <m>C''</m> have the same length.
              </p>
  
              <p>
                Equidimensionality is immediate from .
              </p>
  
              <p>
                We have <me>\ht(I) = \min\{\ht(P) \mid P\in \Min(I)\}</me> and <me>\dim(R/I) = \max\{\dim(R/P) \mid P \in \Min(I)\}.</me> Therefore, it suffices to show the equality for prime ideals, since if <m>P \in \Min(I)</m> attains <m>\ht(I)</m>, which is the minimal value of <m>\ht(Q)</m> for <m>Q \in \Min(I)</m>, then it also attains the maximal value of <m>\dim(R/Q)</m> for <m>Q \in \Min(I)</m>. Now, take a saturated chain of primes <m>C</m> from <m>0</m> to <m>P</m>, and a saturated chain <m>C'</m> from <m>P</m> to a maximal ideal <m>\fm</m>. Since <m>R</m> is catenary, <m>C</m> has length <m>\ht(P)</m>. Moreover, <m>C'</m> has length <m>\dim(R/P)</m> by , and <m>C|C'</m> has length <m>\dim(R)</m> by .
              </p>
  
            </proof>
          </corollary>
  
          <definition xml:id="defn-transcendence-basis"><title>Transcendence Basis</title>
          <statement>
            <p>
              Let <m>K\subseteq L</m> be an extension of fields. A <em>transcendence basis</em><idx><h>transcendence basis</h></idx> for <m>L</m> over <m>K</m> is a maximal algebraically independent subset of <m>L</m> over <m>K</m>.
            </p>
          </statement>
          </definition>
  
          <lemma xml:id="lem-transcendence-basis-well-defined-1"><title>Transcendence Basis Well-Defined 1</title>
  
  
            <statement>
              
  
              <p>
                Let <m>\{x_1,\dots,x_m\}</m> and <m>\{y_1,\dots,y_n\}</m> be two transcendence bases for <m>L</m> over <m>K</m>. Then, there is some <m>i</m> such that <m>\{x_i,y_2,\dots,y_n\}</m> is a transcendence basis.
              </p>
  
            </statement>
  
            <proof>

  
              <p>
                Since <m>L</m> is algebraic over <m>K(y_1,\dots,y_n)</m>, for each <m>i</m> there is some <m>p_i(t)\in K(y_1,\dots,y_n)[t]</m> such that <m>p_i(x_i)=0</m>. We can clear denominators to assume without loss of generality that <m>p_i(x_i)\in K[y_1,\dots,y_n][t]</m>.
              </p>
  
              <p>
                We claim that there is some <m>i</m> such that <m>p_i(t) \notin K[y_2,\dots,y_n][t]</m>. If not, then <me>p_i(t) \in K[y_2,\dots,y_n][t]</me>for all <m>i</m>, and thus that each <m>x_i</m> is algebraic over <m>K(y_2,\dots,y_n)</m>. Thus, <m>K(x_1,\dots,x_m)</m> is algebraic over <m>K(y_2,\dots,y_n)</m>, and since <m>L</m> is algebraic over <m>K(x_1,\dots,x_m)</m>, <m>y</m> is algebraic over <m>K(y_2,\dots,y_n)</m>, which contradicts that <m>\{y_1,\dots,y_n\}</m> is a transcendence basis. This shows the claim.
              </p>
  
              <p>
                Now, we claim that for such <m>i</m>, <m>\{x_i,y_2,\dots,y_n\}</m> is a transcendence basis. Thinking of the equation <m>p_i(x_i)=0</m> as a polynomial expression in <m>K[x_i,y_2,\dots,y_n][y_1]</m>, <m>y_1</m> is algebraic over <m>K(x_i,y_2,\dots,y_n)</m>, hence <m>K(y_1,\dots,y_n)</m> is algebraic over <m>K(x_i,y_2,\dots,y_n)</m>, and <m>L</m> as well.
              </p>
  
              <p>
                If <m>\{x_i,y_2,\dots,y_n\}</m> were algebraically dependent, then there is some polynomial equation <m>p(x_i,y_2,\dots,y_n)=0</m>. This equation must involve <m>x_i</m>, since <m>y_2,\dots,y_n</m> are algebraically independent. We would then have <m>K(x_i,y_2,\dots,y_n)</m> is algebraic over <m>K(y_2,\dots,y_n)</m>. But since <m>y_1</m> is algebraic over <m>K(x_i,y_2,\dots,y_n)</m>, we would have that <m>K(y_1,\dots,y_n)</m> is algebraic over <m>K(y_2,\dots,y_n)</m>, which would contradict that <m>y_1,\dots,y_n</m> is a transcendence basis.
              </p>
  
            </proof>
          </lemma>
  
          <lemma xml:id="lem-transcendence-basis-well-defined-2"><title>Transcendence Basis Well-Defined 2</title>
  
  
            <statement>
              
  
              <p>
                If <m>\{x_1,\dots,x_m\}</m> and <m>\{y_1,\dots,y_n\}</m> are two transcendence bases for <m>L</m> over <m>K</m>, then <m>m=n</m>.
              </p>
  
            </statement>
  
            <proof>
        
  
              <p>
                Say that <m>m\leqslant n</m>. If the intersection has <m>s&lt;m</m> elements, then without loss of generality <m>y_1\notin \{x_1,\dots,x_m\}</m>. Then, for some <m>i</m>, <m>\{x_i, y_2\dots,y_n\}</m> is a transcendence basis, and <m>\{x_1,\dots,x_m\} \cap \{x_i, y_2\dots,y_n\}</m> has <m>s+1</m> elements. Replacing <m>\{y_1,\dots,y_n\}</m> with <m>\{x_i, y_2\dots,y_n\}</m> and repeating this process, we obtain a transcendence basis with <m>n</m> elements such that <m>\{x_1,\dots,x_m\} \subseteq \{y_1,\dots,y_n\}</m>. But we must then have that these two transcendence bases are equal, so <m>m=n</m>.
              </p>
  
            </proof>
          </lemma>

          <p>EMPTY <idx><h>transcendence degree</h></idx><idx><h><m>\mathrm{trdeg}_K(L)</m></h></idx></p>
  
          <corollary xml:id="cor-dimension-in-f.g.-domain"><title>Dimension in F.G. Domain</title>
  
            <statement>
              
              <p>
                If <m>R</m> is a finitely generated domain over a field <m>k</m>, then <me>\dim(R) = \mathrm{trdeg}_k(\mathrm{frac}(R)).</me> 
              </p>
  
            </statement>

            <proof>
              <p>
                If <m>S \subseteq R</m> is module-finite, then by  <m>\mathrm{frac}(S)\subseteq \mathrm{frac}(R)</m> is integral, or equivalently algebraic. Hence <m>\mathrm{frac}(S)</m> and <m>\mathrm{frac}(R)</m> have the same transcendence degree over~<m>k</m>. In particular, if <m>A = k[z_1,\dots,z_d]</m> is a Noether normalization for <m>R</m>, <me>\mathrm{trdeg}_k(\mathrm{frac}(R))= \mathrm{trdeg}_k(\mathrm{frac}(A)) = \mathrm{trdeg}_k(k(z_1,\dots,z_d)) = d = \dim(A) = \dim(R).</me>
              </p>
            </proof>
          </corollary>
  
          <example><title></title>
  
            <p>
              Let <m>R = k[xu,xv,yu,yv] \subseteq k[x,y,u,v]</m>, where <m>k</m> is an algebraically closed field and <m>x,y,u,v</m> are indeterminates. Then <me>\mathrm{frac}(R) = k(xu,xv,yu,yv) = k \left( xu, \frac{v}{u},\frac{y}{x},\frac{yv}{xu} \right) = k\left(xu,\frac{v}{u},\frac{y}{x}\right),</me> and these last three are algebraically independent over <m>k</m>. Thus, <m>\dim(R)=3</m>.
            </p>
  
          </example>
  
          <example><title></title>
  
            <p>
              Let us use our dimension theorems to give two different proofs that over any field <m>k</m>, <m>\displaystyle R=k[x,y,z]/(y^2-xz)</m> has dimension 2.
            </p>
  
            <p>
              First, we claim that <m>A = k[x,z]</m> is a Noether normalization of <m>R</m>. First, note that <m>x</m> and <m>z</m> are algebraically independent over <m>k</m>. Moreover, <m>R = A[y]</m> and <m>y</m> satisfies the monic polynomial <m>t^2-xz \in A[t]</m>, so <m>A \subseteq R = A[y]</m> is integral, and thus module-finite by . Therefore, <m>\dim(R) = 2</m>.
            </p>
  
            <p>
              Alternatively, one can show that <m>y^2-xz</m> is irreducible, e.g., by thinking of it as a polynomial in <m>y</m> and applying Eisenstein's criterion. Then <m>(y^2-xz)</m> is a prime of height one, so by  the dimension of <m>R</m> is <me>\dim(R) = \dim(k[x,y,z])-\ht((y^2-xz))=3-1=2.</me>
            </p>
  
          </example>
  
          <example><title></title>
  
            <p>
              Let us compute the dimension of the ring <m>R = k[a,b,c,d]/I</m>, where <me>I=(b^2-ac,c^2-bd,bc-ad).</me> We claim that <m>A = k[a,d]\subseteq R</m> is a Noether normalization. The inclusion is integral, since <me>b^2=ac \implies b^4=a^2 c^2 = a^2bd,</me>so <m>b</m> satisfies <m>t^4 - a^2d t =0</m>. Similarly, one can show that <m>c</m> satisfies <m>t^4-ad^2t</m>. <me>c^2=bd \implies c^4 = b^2 d^2 = acd^2,</me> so <m>c</m> satisfies <m>t^4-ad^2t</m>.
            </p>
  
            <p>
              We also need to show that <m>a,d</m> are algebraically independent over <m>k</m>, or equivalently that the map from the polynomial ring <m>\psi\! : k[u,v] \to R</m> with <m>\psi(u)=a</m>, <m>\psi(v)=d</m> is injective.
            </p>
  
            <p>
              First assume that <m>k=\overline{k}</m> is algebraically closed. Observe that the map #empty
            </p>
  
            <p>
              is surjective: given <m>a,d \in k</m>, write <m>a=\alpha^3, d=\delta^3</m>, and note that <m>(\alpha^3, \alpha^2 \delta, \alpha \delta^2, \delta^3)</m> is an element of <m>X=\cZ(I)</m> that maps to <m>(a,d)</m>. Thus, the kernel of the induced map on coordinate rings <m>k[\mathbb{A}^2] \to k[X]</m> is <m>\cI(\mathbb{A}^2) = 0</m>; i.e, the map is injective. By the Nullstellensatz, <m>\mathcal{I}(\cZ(I))= \sqrt{I}</m>, and our induced map on coordinate rings is the map #empty Since this map is injective, and this factors as #empty the first map is injective.
            </p>
  
          </example>
  
        </section>

        <section xml:id="sec-height-generators"><title>Height and Number of Generators</title>
          
          <blockquote>
            <p>
              <q>
                You are not judged by the height you have risen, but from the deoth you have climbed.
              </q>
            </p>
            <attribution>Fredrick Douglass</attribution>
          </blockquote>
  
          <theorem xml:id="thm-krulls-principal-ideal-theorem"><title>Krull's Principal Ideal Theorem</title>
            <idx><h>Krull's Principal Ideal Theorem</h></idx>
            <statement>
              <p>Let <m>R</m> be a noetherian ring, and <m>f\in R</m>. Then, every minimal prime of <m>(f)</m> has height at most one.</p>
            </statement>

            <proof>
              <p>Suppose the theorem is false, so that there is some ring <m>R</m>, a prime <m>P</m>, and an element <m>f</m> such that <m>P</m> is minimal over <m>(f)</m> and <m>\ht(P)&gt;1</m>. If we localize at <m>P</m> and then mod out by an appropriate minimal prime, we obtain a noetherian local domain <m>(R,\fm)</m> of dimension at least two in which <m>\fm</m> is the unique minimal prime of <m>(f)</m>. Let's work over that noetherian local domain <m>(R, \fm)</m>. Note that <m>\overline{R} = R/(f)</m> is zero-dimensional, since <m>\fm</m> is the only minimal prime over <m>(f)</m>. Back in <m>R</m>, let <m>Q</m> be a prime strictly in between <m>(0)</m> and <m>\fm</m>, and notice that we necessarily have <m>f \notin Q</m>.</p>

              <p>Consider the symbolic powers <m>Q^{(n)}</m> of <m>Q</m>. We will show that these stabilize in <m>R</m>. Since <m>\overline{R} = R/(f)</m> is Artinian, the descending chain of ideals <me>Q \overline{R} \supseteq Q^{(2)}\overline{R} \supseteq Q^{(3)}\overline{R} \supseteq \cdots</me>stabilizes. We then have some <m>n</m> such that <m>Q^{(n)} \overline{R} = Q^{(m)} \overline{R}</m> for all <m>m \geqslant n</m>, and in particular, <m>Q^{(n)} \overline{R} = Q^{(n+1)} \overline{R}</m>. Pulling back to <m>R</m>, we get <m>Q^{(n)} \subseteq Q^{(n+1)} + (f)</m>. Then any element <m>a \in Q^{(n)}</m> can be written as <m>a = b + fr</m>, where <m>b \in Q^{(n+1)} \subseteq Q^{(n)}</m> and <m>r \in R</m>. Notice that this implies that <m>fr \in Q^{(n)}</m>. Since <m>f\notin Q</m>, we must have <m>r\in Q^{(n)}</m>. This yields <m>Q^{(n)} = \fq^{(n+1)} + f \fq^{(n)}</m>. Thus, <m>Q^{(n)} / Q^{(n+1)} = f(Q^{(n)} / \fq^{(n+1)})</m>, so <m>Q^{(n)} / Q^{(n+1)} = \fm(Q^{(n)} / Q^{(n+1)})</m>. By , <m>Q^{(n)} = Q^{(n+1)}</m> in <m>R</m>. Similarly, we obtain <m>Q^{(n)} = Q^{(m)}</m> for all <m>m \geqslant n</m>.</p>
  
              <p>Now, if <m>a \in Q</m> is nonzero, we have <m>a^n\in Q^n \subseteq Q^{(n)} = Q^{(m)}</m> for all <m>m</m>, so <me>\bigcap_{m \geqslant 1} Q^{(m)} = \bigcap_{m \geqslant n} Q^{(m)} = Q^{(n)}.</me>Notice that <m>Q^n \neq 0</m> because <m>R</m> is a domain, and so <m>Q^{(n)} \supseteq Q^n</m> is also nonzero. So<me>\bigcap_{m \geqslant 1} Q^{(m)} = Q^{(n)} \neq 0.</me>On the other hand, <m>Q^{(m)} = Q^m R_Q \cap R</m> for all <m>m</m>, and <me>\bigcap_{m \geqslant 1} Q^{(m)} R_Q \subseteq \bigcap_{m \geqslant 1} Q^m R_{Q} = \bigcap_{m \geqslant 1} (Q R_{Q})^m = 0</me> by . Since <m>R</m> is a domain, the contraction of <m>(0)</m> in <m>R_Q</m> back in <m>R</m> is <m>(0)</m>. This is the contradiction we seek. So no such <m>Q</m> exists, so that <m>R</m> has dimension <m>1</m>, and in the original ring, all the minimal primes over <m>f</m> must have height at most <m>1</m>.</p>
            </proof>
          </theorem>

          <remark><p>Note that this is stronger than the statement that the height of <m>(f)</m> is at most one: that would only mean that some minimal prime of <m>(f)</m> has height at most one.</p></remark>
          
          <p>Noetherianity is necessary, as the next example shows.</p>

          <example><title>Noetherianity is Necessary</title>
            <p>
              <m>R = k[x,xy,xy^2,\ldots] \subseteq k[x,y]</m>. Note that <m>(x)</m> is not prime: for <m>a&gt;0</m>, <m>xy^a \notin (x)</m>, since <m>y^a\notin R</m>, but <m>(xy^a)^2 = x \cdot x y^{2a} \in (x)</m>. Thus, <m>\fm = (x,xy,xy^2,\dots) \subseteq \sqrt{(x)}</m>, and since <m>\fm</m> is a maximal ideal, we have equality, so <m>\Min{(x)} = \{ \fm \}</m>. However, the ideal <m>P = (xy,xy^2, xy^3,\dots) = (y) k[x,y] \cap R</m> is prime, and the chain <m>(0) \subsetneq P \subsetneq \fm</m> shows that <m>\ht(\fm)&gt;1</m>.
            </p>
          </example>
  
          <lemma xml:id="lem-proper-containment-of-ideals-in-noetherian-ring"><title>Proper Containment of Ideals in Noetherian Ring</title>
            <statement>     
              <p>Let <m>R</m> be noetherian, <m>P \subsetneq Q \subsetneq \fa</m> be primes, and <m>f \in \fa</m>. Then there is some <m>Q'</m> with <m>P \subsetneq Q'\subsetneq \fa</m> and <m>f \in Q'</m>.</p>
            </statement>
  
            <proof>
              <p>If <m>f \in P</m>, there is nothing to prove, since we can simply take <m>Q' = Q</m>. Suppose <m>f \notin P</m>. After we quotient out by <m>P</m> and localize at <m>\fa</m>, we may assume that <m>\fa</m> is the unique maximal ideal and that our ring is a domain. Thus all we need is to find a nonzero prime <m>Q'</m> which is not maximal. Note that by assumption <m>\ht(\fa) \geqslant 2</m>. Our assumption implies that <m>f \neq 0</m>, and then by the principal ideal theorem <xref provisional="cite"/> [[Mathematics/Commutative Algebra/Results/Theorem - Krull's Principal Ideal Theorem|Krull's Principal Ideal Theorem]], minimal primes of <m>(f)</m> have height one, hence are not maximal nor <m>0</m>. We can take <m>Q'</m> to be one of the minimal primes of <m>f</m>.</p>
            </proof>
          </lemma>
  
          <theorem xml:id="thm-krulls-height-theorem"><title>Krull's Height Theorem</title>
            <idx><h>Krull's Height Theorem</h></idx>
            <statement>
              <p>Let <m>R</m> be a noetherian ring. If <m>I</m> is an ideal generated by <m>n</m> elements, then every minimal prime of <m>I</m> has height at most <m>n</m>.</p>
            </statement>
  
            <proof>
              <p>By induction on <m>n</m>. The case <m>n=1</m> is .</p>
  
              <p>Let <m>I=(f_1,\dots,f_n)</m> be an ideal, <m>P</m> a minimal prime of <m>I</m>, and <m>P_0 \subsetneq P_1 \subsetneq \cdots \subsetneq P_{h} = P</m> be a saturated chain of length <m>h</m> ending at <m>P</m>. If <m>f_1 \in P_1</m>, then we can apply the induction hypothesis to the ring <m>\overline{R} = R/((f_1) + P_0)</m> and the ideal <m>(f_2,\dots,f_n)\overline{R}</m>. Then by induction hypothesis, the chain <m>P_1 \overline{R} \subsetneq \cdots \subsetneq P_{h} \overline{R}</m> has length at most <m>n-1</m>, so <m>h-1 \leqslant n-1</m> and <m>P</m> has height at most <m>n.</m></p>
  
              <p>If <m>f_1 \notin P_1</m>, we use the previous lemma to replace our given chain with a chain of the same length but such that <m>f_1 \in P_1</m>. To do this, note that <m>f_1 \in P_i</m> for some <m>i</m>; after all, <m>f_1 \in I \subseteq P</m>. So in the given chain, suppose that <m>f_1 \in P_{i+1}</m> but <m>f_1 \notin P_i</m>. If <m>i&gt;0</m>, apply the previous lemma with <m>\fa = P_{i+1}</m>, <m>Q = P_i</m>, and <m>P = P_{i-1}</m> to find <m>Q_i</m> such that <m>f_1 \in Q_i</m>. Replace the chain with <me>P_0 \subsetneq P_1 \subsetneq \cdots \subsetneq P_{i-1} \subsetneq Q_i \subsetneq P_i \subsetneq \cdots \subsetneq P_{h} = P.</me> Repeat until <m>f_1 \in P_1</m>.</p>
            </proof>
          </theorem>
  
          <example><title></title>
            <p>If <m>k</m> is a field and <m>R = k[x_1, \ldots, xn]</m>, the ideal <m>(x_1,x_2,\dots,x_n)</m> generated by <m>n</m> variables has height~<m>n</m>. There are many other ideals that attain the bound given by . For example, <m>(u^3-xyz,x^2+2xz-6y^5,vx+7vy)\in k [u,v,w,x,y,z]</m>. An ideal of height <m>n</m> generated by <m>n</m> elements is called a <em>complete intersection</em><idx><h>complete intersection</h></idx>.</p>
          </example>
  
          <example><title></title>
            <p>The ideal <m>(xy,xz)</m> in <m>k[x,y,z]</m> has minimal primes of heights 1 and 2.</p>
          </example>
  
          <example><title></title>
            <p>In <m>R=k[x,y]/(x^2,xy)</m>, the ideal generated by zero elements (the zero ideal) has an associated prime of height two, namely <m>(x,y)</m>. The same phenomenon can happen even in a nice polynomial ring. For example, consider the ideal <m>I=(x^3, y^3, x^2 u + xy v + y^2 w) \subseteq R= k[u,v,w,x,y]</m>. Note that <m>(u,v,w,x,y) = (I : x^2 y^2)</m>, so <m>I</m> has an associated prime of height 5.</p>
          </example>

          <example><title></title>
            <p>Let <m>R=k[x,xy,xy^2,\dots] \subseteq k[x,y]</m>. For all <m>a \geqslant 1</m>, <m>xy^a \notin (x)</m>, since <m>y^a\notin R</m>, but <m>(xy^a)^2 = x \cdot x y^{2a}\in (x)</m>. Then <m>(x)</m> is not prime in <m>R</m>, and moreover <m>\fm=(x,xy,xy^2,\dots) \subseteq \sqrt{(x)}</m>. Since <m>\fm</m> is a maximal ideal, we have equality, so <m>\Min{(x)}=\{\fm\}</m>. However, <m>\p=(xy,xy^2, xy^3,\dots) = (y) k[x,y] \cap R</m> is prime, and the chain <m>(0) \subsetneq \p \subsetneq \fm</m> shows that <m>\ht(\fm)&gt;1</m>.</p>
          </example>
  
          <corollary xml:id="cor-ideals-in-noeth-rings-have-finite-height"><title>Ideals in Noeth Rings have Finite Height</title>
            <statement>
              <p>If <m>R</m> is a noetherian ring, then any ideal has finite height. If <m>(R,\fm,k)</m> is also local, then <m>\dim(R) \leqslant \dim_k(\fm/\fm^2) &lt;\infty</m>.</p>
            </statement>
  
            <proof>
              <p>If <m>R</m> is noetherian, then every ideal is finitely generated, by , and thus by  every ideal has finite height.</p>
  
              <p>Now suppose that <m>(R,\fm,k)</m> is a noetherian local ring. By , <m>\fm</m> is generated by <m>\dim_k(\fm/\fm^2)</m> elements, so <me>\dim(R) = \ht(m) \leqslant \dim_k(\fm/\fm^2).</me></p>
  
            </proof>
          </corollary>
  
          <definition xml:id="defn-embedding-dimension"><title>Embedding Dimension</title>
          <statement>
            <p>The <em>embedding dimension</em><idx><h>embedding dimension</h></idx> of a local ring <m>(R, \fm)</m> is the minimal number of generators of <m>\fm</m>, <m>\mu(\fm)</m>. We write <m>\textrm{embdim}(R) := \mu(\fm)</m> for the embedding dimension of <m>R</m>.<idx><h><m>\textrm{embdim}(R)</m></h></idx></p>
          </statement>
          </definition>
  
          <definition xml:id="defn-regular-local-ring"><title>Regular Local Ring</title>
            <statement>
              <p>A noetherian local ring <m>(R, \fm)</m> is <em>regular</em><idx><h>regular local ring</h></idx> if <m>\dim(R) = \edim(R)</m>.</p>
            </statement>
          </definition>

          <remark><p>Power series rings <m>k [[ x_1, \ldots, x_d ]]</m> are regular local rings. In general, a ring is regular if all its localizations are regular local rings. In order for this definition to make sense, we need to first make sure that regularity localizes, meaning that if <m>(R, \fm)</m> is a regular local ring, then <m>R_P</m> is also regular for all primes <m>P</m>. But to do that, we need some homological algebra. However (spoiler alert!), things do work out alright, and as you might expect, polynomial rings over fields are also regular.</p></remark>

        </section>

        <section xml:id="sec-sops"><title>Systems of Parameters</title>
          
          <blockquote>
            <p>
              <q></q>
            </p>
            <attribution></attribution>
          </blockquote>
  
          <theorem xml:id="thm-existence-of-sops"><title>Existence of SOPs</title>
            <statement>
              <p>
                Let <m>(R,\fm)</m> be a noetherian local ring of dimension <m>d</m>. 
                There there exist <m>x_1,\dots,x_d\in \fm</m> such that <m>\fm= \sqrt{(x_1,\dots,x_d)}</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                Let <m>d := \dim(R)</m>. 
                If <m>d=0</m>, then <m>\fm=\sqrt{(0)}</m>, so the statement holds.
              </p>
  
              <p>
                In general, we will show that we can choose <m>x_1,\dots, x_i\in \fm</m> inductively such that every minimal prime of <m>J_i= (x_1,\dots,x_i)</m> has height <m>i</m>. 
                The case <m>i=0</m> is clear from the comment above. 
                Say that we have chosen the first <m>i</m> elements. 
                If <m>i&lt;d</m>, note that <m>\fm</m> is not a minimal prime of <m>J_i</m>, as this would contradict. 
                Note that <m>R</m> is noetherian and thus <m>J_i</m> has finitely many minimal primes, by . 
                Thus, by , we can choose <m>x_{i+1} \in \fm</m> not in any minimal prime of <m>J_i</m>. 
                Then by  every minimal prime of <m>J_{i+1} := J_i +(x_{i+1})</m> has height at most <m>i+1</m>. 
                On the other hand, every <m>Q \in \Min(J_{i+1})</m> contains some <m>P \in \Min(J_i)</m>, and in fact we must have <m>Q \supsetneq P</m>, since <m>x_{i+1}\in Q \smallsetminus P</m>. 
                Since <m>P</m> has height <m>i</m> and <m>P \supsetneq Q</m>, then <m>Q</m> must have height at least <m>i+1</m>. 
                Therefore, <m>Q</m> must have height exactly <m>i+1</m>, completing the induction.
              </p>
  
              <p>
                Since every minimal prime of <m>J_d = (x_1,\dots,x_d)</m> has height <m>d</m>, its unique minimal prime must be <m>\fm</m>. It follows that <m>\sqrt{J_d}=\fm</m>.
              </p>
            </proof>
          </theorem>
  
          <corollary xml:id="cor-dim-embdim"><title>Dim <m>&lt;</m>= EmbDim</title>
            <statement>
              <p>
                Let <m>(R,\fm,k)</m> be a noetherian local ring. 
                Then 
                <me>\dim(R)=\min\{ n \ | \ \sqrt{(f_1,\dots,f_n)}=\fm \textrm{ for some } f_1,\dots,f_n \} \leqslant \mu(\fm).</me> 
                In particular, a noetherian local ring has finite dimension.
              </p>
            </statement>
  
            <proof>
              <p>
                Suppose that <m>\sqrt{(f_1,\dots,f_n)}=\fm</m>. 
                Then <m>\fm</m> is a minimal prime of <m>(f_1, \ldots, f_n)</m>, and thus <m>\fm</m> has height at most <m>n</m> by. 
                The dimension of a local ring is the height of its maximal ideal, so <m>\dim(R) \leqslant n</m>, and thus <m>\dim(R)</m> is bounded above by the minimum in the middle. 
                On the other hand, if <m>d = \dim(R)</m> then by  there exist <m>f_1, \ldots, f_d</m> such that <m>\fm = (f_1, \ldots, f_d)</m>, which gives the other inequality, showing
                <me>\dim(R)=\min\{ n \ | \ \sqrt{(f_1,\dots,f_n)}=\fm \textrm{ for some } f_1,\dots,f_n \}.</me>
                Finally, since <m>\fm</m> is generated by <m>\mu(\fm)</m> elements, there are in particular <m>\mu(\fm)</m> elements whose radical is <m>\fm</m>.
              </p>
            </proof>
          </corollary>
  
          <definition xml:id="defn-system-of-parameters"><title>System of Parameters</title>
          <statement>
            <p>
              A sequence of <m>d</m> elements <m>x_1,\dots,x_d</m> in a <m>d</m>-dimensional noetherian local ring <m>(R,\fm)</m> is a <em>system of parameters</em><idx><h>system of parameters</h></idx> or <em>SOP</em><idx><h>sop</h></idx> if <m>\sqrt{(x_1,\dots,x_d)}=\fm</m>. 
              If <m>k</m> is a field, a sequence of <m>d</m> homogeneous elements <m>x_1,\dots,x_d</m> in a <m>d</m>-dimensional <m>\N</m>-graded finitely generated <m>k</m>-algebra <m>R</m>, with <m>R_0=k</m>, is a <em>homogeneous system of parameters</em><idx><h>homogeneous system of parameters</h></idx> if <m>\sqrt{(x_1,\dots,x_d)}=R_+</m>.
            </p>
  
            <p>
              We say that elements <m>x_1,\dots,x_t</m> are <em>parameters</em><idx><h>parameters</h></idx> if they are part of a system of parameters; 
              this is a property of the set, not just the elements.
            </p>
          </statement>
          </definition>
  
          <definition xml:id="defn-absolutely-minimal-prime"><title>Absolutely Minimal Prime</title>
            <statement>
              <p>
                Let <m>R</m> be a noetherian ring. 
                A prime <m>P</m> of <m>R</m> is an <em>absolutely minimal prime</em><idx><h>absolutely minimal prime</h></idx> of <m>R</m> if <m>\dim(R)=\dim(R/P)</m>.
              </p>
            </statement>
          </definition>
  
          <theorem xml:id="thm-sop-stuff-theorem"><title>SOP Stuff Theorem</title>
            <statement>
              <p>
                Let <m>(R,\fm)</m> be a noetherian local ring, and <m>x_1,\dots,x_t\in \fm</m>. (a) <m>{\dim(R/(x_1,\dots,x_t))\geqslant \dim(R)-t}.</m> (b) <m>x_1,\dots,x_t</m> are parameters if and only if <m>\dim(R/(x_1,\dots,x_t))=\dim(R)-t</m>. (c) <m>x_1,\dots,x_t</m> are parameters if and only if <m>x_1</m> is not in any absolutely minimal prime of <m>R</m> and <m>x_i</m> is not contained in any absolutely minimal prime of <m>R/(x_1,\dots,x_{i-1})</m> for each <m>i=2,\dots,t</m>.
              </p>
            </statement>
  
            <proof>
              <p>
                If <m>\dim(R/(x_1,\dots,x_t)) = s</m>, then take a system of parameters <m>y_1,\dots,y_s</m> for <m>R/(x_1,\dots,x_t)</m>, and pull back to <m>R</m> to get <m>x_1,\dots,x_t,y'_1,\dots,y'_s</m> in <m>R</m> such that the quotient of <m>R</m> modulo the ideal generated by these elements has dimension zero. 
                By Krull height, we get that <m>t+s\geqslant \dim(R)</m>.
              </p>
  
              <p>
                Let <m>d=\dim(R)</m>. 
                Suppose first that <m>\dim(R/(x_1,\dots,x_t))=d-t</m>. 
                Then, there is a SOP <m>y_1,\dots,y_{d-t}</m> for <m>R/(x_1,\dots,x_t)</m>; lift back to <m>R</m> to get a sequence of <m>d</m> elements <m>x_1,\dots,x_t,y_1,\dots,y_{d-t}</m> that generate an <m>\fm</m>-primary ideal. 
                This is a SOP, so <m>x_1,\dots,x_t</m> are parameters.
              </p>
  
              <p>
                On the other hand, if <m>x_1,\dots,x_t</m>, are parameters, extend to a SOP <m>x_1,\dots,x_d</m>. 
                If <m>I</m> is the image of <m>(x_{t+1},\dots,x_d)</m> in <m>R'=R/(x_1,\dots,x_t)</m>, we have <m>R'/I</m> is zero-dimensional, hence has finite length, so <m>\Ass_{R'}(R'/I)=\{\fm\}</m>, and <m>I</m> is <m>\fm</m>-primary in <m>R'</m>. 
                Thus, <m>\dim(R')</m> is equal to the height of <m>I</m>, which is then <m>\leqslant d-t</m> by Krull height. 
                That is, <m>\dim(R') \leqslant d-t</m>, and using the first statement, we have equality.
              </p>
  
              <p>
                This follows from the previous statement and the observation that <m>\dim(S/(f)) &lt; \dim(S)</m> if and only if <m>f</m> is not in any absolutely minimal prime of <m>S</m>.
              </p>
  
              <p>
                Let <m>R=\Z_{(2)}[x]</m>. 
                This ring has dimension at least two, but <m>R/(2x-1)\cong \mathbb{Q}</m> has dimension zero.
              </p>
  
              <p>
                For an example that is a finitely generated algebra over a field, consider <m>R = S/I</m> with <m>S = k[x,y,z]</m> and <m>I =(xy,xz,x^2-x)</m>. 
                This ring has dimension two: <m>A=k[y,z]</m> is a noether normalization, as <m>x^2-x=0</m> makes <m>x</m> integral over <m>A</m>, and no nonzero polynomial in <m>y,z</m> in <m>k[x,y,z]</m> can belong to the ideal <m>(x) \supseteq (xy,xz,x^2-x)</m>. 
                However, 
                <me>\displaystyle R/(x-1) \cong \frac{k[x,y,z]}{(y,z,x-1)}\cong k</me> 
                has dimension zero.
              </p>
            </proof>
  
          </theorem>
  
        </section>
  
      </chapter>

    </part>

    <part xml:id="part-commutative-algebra-ii"><title>Commutative Algebra II</title>

      <chapter xml:id="ch-domains-ii"><title>Domains II</title>

        <section xml:id="sec-art"><title>Artinian Rings</title>

          <p>
            An Artin ring is one which satisfies the d.c.c. (or equivalently the minimal condition) on ideals.
          </p>

          <p>
            The apparent symmetry with Noetherian rings is however misleading. 
            In fact we will show that an Artin ring is necessarily Noetherian and of a very special kind. 
            In a sense an Artin ring is the simplest kind of ring after a field, and we study them not because of their generality but because of their simplicity.
          </p>

          <proposition xml:id="prop-8.1-at">
            <statement>
              <p>
                In an artinian ring every prime ideal is maximal.
              </p>
            </statement>

            <proof>
              <p>
                Let <m>\mathfrak{p}</m> be a prime ideal of <m>A</m>. 
                Then <m>B=A / \mathfrak{p}</m> is an artinian integral domain. 
                Let <m>x \in B, x \neq 0</m>. 
                By the d.c.c. we have <m>\left(x^{n}\right)=\left(x^{n+1}\right)</m> for some <m>n</m>, hence <m>x^{n}=x^{n+1} y</m> for some <m>y \in B</m>. 
                Since <m>B</m> is an integral domain and <m>x \neq 0</m>, it follows that we may cancel <m>x^{n}</m>, hence <m>x y=1</m>. 
                Hence <m>x</m> has an inverse in <m>B</m>, and therefore <m>B</m> is a field, so that <m>\mathfrak{p}</m> is a maximal ideal.
              </p>
            </proof>
          </proposition>

          <corollary xml:id="cor-8.2-at">
            <statement>
              <p>
                In an artinian ring the nilradical is equal to the Jacobson radical.
              </p>
            </statement>
          </corollary>

          <proposition xml:id="prop-8.3-at">
            <statement>
              <p>
                An artinian ring has only a finite number of maximal ideals. 
              </p>
            </statement>

            <proof>
              <p>
                Consider the set of all finite intersections <m>\mathfrak{m}_{1} \cap \ldots \cap \mathfrak{m}_{r}</m>, where the <m>\mathfrak{m}_{i}</m> are maximal ideals. 
                This set has a minimal element, say <m>\mathfrak{m}_{1} \cap \cdots \cap \mathfrak{m}_{n}</m>; 
                hence for any maximal ideal <m>\mathfrak{m}</m> we have <m>\mathfrak{m} \cap \mathfrak{m}_{1} \cap \cdots \cap \mathfrak{m}_{n}=\mathfrak{m}_{1} \cap \cdots \cap \mathfrak{m}_{n}</m>, and therefore <m>\mathfrak{m} \supseteq \mathfrak{m}_{1} \cap \cdots \cap \mathfrak{m}_{n}</m>. 
                By (1.11) <m>\mathfrak{m} \supseteq \mathfrak{m}_{i}</m> for some <m>i</m>, hence <m>\mathfrak{m}=\mathfrak{m}_{\mathfrak{i}}</m> since <m>\mathfrak{m}_{i}</m> is maximal.
              </p>
            </proof>
          </proposition>

          <proposition xml:id="prop-8.4-at">
            <statement>
              <p>
                In an artinian ring the nilradical <m>\mathfrak{A}</m> is nilpotent.
              </p>
            </statement>

            <proof>
              <p>
                By d.c.c. we have <m>\mathfrak{R}^{k}=\mathfrak{R}^{k+1}=\cdots=\mathfrak{a}</m> say, for some <m>k&gt;0</m>. 
                Suppose <m>\mathfrak{a} \neq 0</m>, and let <m>\Sigma</m> denote the set of all ideals <m>\mathfrak{b}</m> such that <m>\mathfrak{a} \mathfrak{b} \neq 0</m>. 
                Then <m>\Sigma</m> is not empty, since <m>a \in \Sigma</m>. 
                Let <m>\mathrm{c}</m> be a minimal element of <m>\Sigma</m>; 
                then there exists <m>x \in \mathrm{c}</m> such that <m>x \mathfrak{a} \neq 0</m>; 
                we have <m>(x) \subseteq \mathfrak{c}</m>, hence <m>(x)=\mathfrak{c}</m> by the minimality of <m>\mathfrak{c}</m>. 
                But <m>(x \mathfrak{a}) \mathfrak{a}=x \mathfrak{a}^{2}=x \mathfrak{a} \neq 0</m>, and <m>x \mathfrak{a} \subseteq(x)</m>, hence <m>x \mathfrak{a}=(x)</m> (again by minimality). 
                Hence <m>x=x y</m> for some <m>y \in \mathfrak{a}</m>, and therefore <m>x=x y=x y^{2}=\cdots=x y^{n}=\cdots</m>. 
                But <m>y \in \mathfrak{a}=\mathfrak{N}^{k} \supseteq \mathfrak{N}</m>, hence <m>y</m> is nilpotent and therefore <m>x=x y^{n}=0</m>. 
                This contradicts the choice of <m>x</m>, therefore <m>\mathfrak{a}=0</m>.
              </p>
            </proof>
          </proposition>

          <p>
            By a chain of prime ideals of a ring <m>A</m> we mean a finite strictly increasing sequence <m>t_{0} \subset \mathfrak{p}_{1} \subset \ldots \subset \mathfrak{p}_{n}</m>;
            the length of the chain is <m>n</m>. We define the dimension of <m>A</m> to be the supremum of the lengths of all chains of prime ideals in <m>A</m> : it is an integer <m>\geqslant 0</m>, or <m>+\infty</m> (assuming <m>A \neq 0</m> ). 
            A field has dimension 0 ; 
            the ring <m>\mathbf{Z}</m> has dimension 1 .
          </p>

          <theorem xml:id="thm-8.5-at">
            <statement>
              <p>
                A ring <m>A</m> is artinian <m>\Leftrightarrow A</m> is noetherian and <m>\operatorname{dim} A=0</m>.
              </p>
            </statement>

            <proof>
              <p>
                <m>\Rightarrow</m>:
                By (8.1) we have <m>\operatorname{dim} A=0</m>. 
                Let <m>\mathrm{m}_{i}(1 \leqslant i \leqslant n)</m> be the distinct maximal ideals of <m>A(8.3)</m>. 
                Then <m>\prod_{i=1}^{n} \mathfrak{m}_{i}^{k} \subseteq\left(\bigcap_{i=1}^{n} \mathfrak{m}_{i}\right)^{k}=\mathfrak{R}^{k}=0</m>. 
                Hence by (6.11) <m>A</m> is Noetherian.
              </p>
    
              <p>
                <m>\Leftarrow</m>: Since the zero ideal has a primary decomposition (7.13), <m>A</m> has only a finite number of minimal prime ideals, and these are all maximal since <m>\operatorname{din} A=0</m>. 
                Hence <m>\Re=\bigcap_{i=1}^{n} m_{i}</m> say; we have <m>\mathfrak{R}^{k}=0</m> by (7.15), hence <m>\prod_{i=1}^{n} \mathfrak{m}_{l}^{k}=0</m> as in the previous part of the proof. 
                Hence by (6.11) <m>A</m> is an Artin ring.
              </p>
            </proof>
          </theorem>
          
          <p>
            If <m>A</m> is an Artin local ring with maximal ideal <m>m</m>, then <m>m</m> is the only prime ideal of <m>A</m> and therefore <m>\mathfrak{m}</m> is the nilradical of <m>A</m>. 
            Hence every element of <m>\mathfrak{m}</m> is nilpotent, and <m>m</m> itself is nilpotent. 
            Every element of <m>A</m> is either a unit or is nilpotent. 
            An example of such a ring is <m>\mathbf{Z} /\left(p^{n}\right)</m>, where <m>p</m> is prime and <m>n \geqslant 1</m>.
          </p>

          <proposition xml:id="prop-8.6-at">
            <statement>
              <p>
                Let <m>A</m> be a Noetherian local ring, <m>m</m> its maximal ideal. 
                Then exactly one of the following two statements is true: 
                i) <m>\mathfrak{m}^{n} \neq \mathfrak{m}^{n+1}</m> for all <m>n</m>;
                ii) <m>\mathfrak{m}^{n}=0</m> for some <m>n</m>, in which case <m>A</m> is an Artin local ring.
              </p>
            </statement>

            <proof>
              <p>
                Suppose <m>\mathfrak{m}^{n}=\mathfrak{m}^{n+1}</m> for some <m>n</m>. 
                By Nakayama's lemma (2.6) we have <m>\mathfrak{m}^{n}=0</m>. 
                Let <m>\mathfrak{p}</m> be any prime ideal of <m>A</m>. 
                Then <m>\mathfrak{m}^{n} \subseteq \mathfrak{p}</m>, hence (taking radicals) <m>\mathfrak{m}=\mathfrak{p}</m>. 
                Hence <m>\mathfrak{m}</m> is the only prime ideal of <m>A</m> and therefore <m>A</m> is Artinian.
              </p>
            </proof>
          </proposition>

          <theorem xml:id="thm-8.7-at"><title>Structure Theorem for Artinian Rings</title>
            <statement>
              <p>
                An Artin ring <m>A</m> is uniquely (up to isomorphism) a finite direct product of Artin local rings.
              </p>
            </statement>

            <proof>
              <p>
                Let <m>\mathfrak{m}_{i}(1 \leqslant i \leqslant n)</m> be the distinct maximal ideals of <m>A</m>. 
                From the proof of (8.5) we have <m>\prod_{i=1}^{n} \mathfrak{m}_{i}^{k}=0</m> for some <m>k&gt;0</m>. 
                By (1.16) the ideals <m>\mathfrak{m}_{i}^{k}</m> are coprime in pairs, hence <m>\cap \mathfrak{m}_{i}^{k}=\prod \mathfrak{m}_{i}^{k}</m> by (1.10). 
                Consequently by (1.10) again the natural mapping <m>A \rightarrow \prod_{i=1}^{n}\left(A / \mathfrak{m}_{i}^{k}\right)</m> is an isomorphism. 
                Each <m>A / \mathfrak{m}_{i}^{k}</m> is an Artin local ring, hence <m>A</m> is a direct product of Artin local rings.
              </p>
    
              <p>
                Conversely, suppose <m>A \cong \prod_{i=1}^{m} A_{i}</m>, where the <m>A_{i}</m> are Artin local rings. 
                Then for each <m>i</m> we have a natural surjective homomorphism (projection on the <m>i</m> th factor) <m>\phi_{i}: A \rightarrow A_{i}</m>. 
                Let <m>\mathfrak{a}_{i}=\operatorname{Ker}\left(\phi_{i}\right)</m>. 
                By (1.10) the <m>\mathfrak{a}_{i}</m> are pairwise coprime, and <m>\cap a_{i}=0</m>. 
                Let <m>\mathfrak{q}_{i}</m> be the unique prime ideal of <m>A_{i}</m>, and let <m>\mathfrak{p}_{i}</m> be its contraction <m>\phi_{i}^{-1}\left(\mathfrak{q}_{t}\right)</m>. 
                The ideal <m>\mathfrak{p}_{t}</m> is prime and therefore maximal by (8.1). 
                Since <m>\mathfrak{q}_{i}</m> is nilpotent it follows that <m>a_{i}</m> is <m>\mathfrak{p}_{i}</m>-primary, and hence <m>\cap a_{i}=(0)</m> is a primary decomposition of the zero ideal in <m>A</m>. 
                Since the <m>a_{i}</m> are pairwise coprime, so are the <m>\mathfrak{p}_{1}</m>, and they are therefore isolated prime ideals of (0). 
                Hence all the primary components <m>a_{i}</m> are isolated, and therefore uniquely determined by <m>A</m>, by the 2nd uniqueness theorem (4.11). 
                Hence the rings <m>A_{i} \cong A / \mathfrak{a}_{i}</m> are uniquely determined by <m>A</m>.
              </p>
            </proof>
          </theorem>

          <example>
            <p>
              A ring with only one prime ideal need not be Noetherian (and hence not an Artin ring). 
              Let <m>A=k\left[x_{1}, x_{2}, \ldots\right]</m> be the polynomial ring in a countably infinite set of indeterminates <m>x_{n}</m> over a field <m>k</m>, and let a be the ideal <m>\left(x_{1}, x_{2}^{2}, \ldots\right.</m>, <m>x_{n}^{n}, \ldots</m> ). 
              The ring <m>B=A / \mathfrak{a}</m> has only one prime ideal (namely the image of <m>\left(x_{1}, x_{2}, \ldots, x_{n}, \ldots\right)</m> ), hence <m>B</m> is a local ring of dimension 0 . 
              But <m>B</m> is not Noetherian, for it is not difficult to see that its prime ideal is not finitely generated.
            </p>
          </example>

          <p>
            If <m>A</m> is a local ring, <m>\mathfrak{m}</m> its maximal ideal, <m>k=A / \mathfrak{m}</m> its residue field, the <m>A</m>-module <m>\mathfrak{m} / \mathfrak{m}^{2}</m> is annihilated by <m>\mathfrak{m}</m> and therefore has the structure of a <m>k</m>-vector space. 
            If <m>\mathfrak{m}</m> is finitely generated (e.g., if <m>A</m> is Noetherian), the images in <m>\mathfrak{m} / \mathfrak{m}^{2}</m> of a set of generators of <m>\mathfrak{m}</m> will span <m>\mathfrak{m} / \mathfrak{m}^{2}</m> as a vector space, and therefore <m>\operatorname{dim}_{k}\left(\mathrm{~m} / \mathrm{m}^{2}\right)</m> is finite. (See (2.8).)
          </p>

          <proposition xml:id="prop-8.8-at">
            <statement>
              <p>
                Let <m>A</m> be an Artin local ring. 
                Then the following are equivalent:
                <ol>
                  <li>
                    Every ideal in <m>A</m> is principal;
                  </li>

                  <li>
                    The maximal ideal <m>\mathfrak{m}</m> is principal;
                  </li>

                  <li>
                    <m>\operatorname{dim}_{k}\left(\mathfrak{m} / \mathfrak{m}^{2}\right) \leqslant 1</m>.
                  </li>
                </ol>
              </p>
            </statement>

            <proof>
              <p>
                <ol>
                  <li>
                    i) <m>\Rightarrow</m> ii) <m>\Rightarrow</m> iii) is clear.
                  </li>

                  <li>
                    iii) <m>\Rightarrow</m> i): If <m>\operatorname{dim}_{k}\left(\mathfrak{m} / \mathfrak{m}^{2}\right)=0</m>, then <m>\mathfrak{m}=\mathfrak{m}^{2}</m>, hence <m>\mathfrak{m}=0</m> by Nakayama's lemma (2.6), and therefore <m>A</m> is a field and there is nothing to prove.
                    If <m>\operatorname{dim}_{k}\left(\mathfrak{m} / \mathfrak{m}^{2}\right)=1</m>, then <m>\mathfrak{m}</m> is a principal ideal by (2.8) (take <m>M=\mathfrak{m}</m> there), say <m>\mathfrak{m}=(x)</m>. 
                    Let <m>a</m> be an ideal of <m>A</m>, other than (0) or (1). 
                    We have <m>\mathfrak{m}=\mathfrak{N}</m>, hence <m>\mathfrak{m}</m> is nilpotent by (8.4) and therefore there exists an integer <m>r</m> such that <m>a \subseteq \mathfrak{m}^{r}, \mathfrak{a} \subsetneq \mathfrak{m}^{r+1}</m>; 
                    hence there exists <m>y \in \mathfrak{a}</m> such that <m>y=a x^{r}</m>, <m>y \notin\left(x^{r+1}\right)</m>; 
                    consequently <m>a \notin(x)</m> and <m>a</m> is a unit in <m>A</m>. 
                    Hence <m>x^{r} \in \mathfrak{a}</m>, therefore <m>\mathfrak{m}^{r}=\left(x^{r}\right) \subseteq \mathfrak{a}</m> and hence <m>\mathfrak{a}=\mathfrak{m}^{r}=\left(x^{r}\right)</m>. 
                    Hence <m>\mathfrak{a}</m> is principal.
                  </li>
                </ol>
              </p>
            </proof>
          </proposition>

          <example>
            <p>
              The rings <m>\mathbf{Z} /\left(p^{n}\right)</m> ( <m>p</m> prime), <m>k[x] /\left(f^{n}\right)(f</m> irreducible) satisfy the conditions of (8.7). 
              On the other hand, the Artin local ring <m>k\left[x^{2}, x^{3}\right] /\left(x^{4}\right)</m> does not: 
              here <m>\mathfrak{m}</m> is generated by <m>x^{2}</m> and <m>x^{3}\left(\bmod x^{4}\right)</m>, so that <m>\mathfrak{m}^{2}=0</m> and <m>\operatorname{dim}\left(\mathfrak{m} / \mathfrak{m}^{2}\right)=2</m>.
            </p>
          </example>
          
        </section>

        <section xml:id="sec-dvrs"><title>Discrete Valuation Rings and Dedekind Domains</title>

          <subsection xml:id="sec-dvr" ><title>Discrete Valuation Rings</title>

            <p>
              As we have indicated before, algebraic number theory is one of the historical sources of commutative algebra. 
              In this chapter we specialize down to the case of interest in number theory, namely to Dedekind domains. 
              We deduce the unique factorization of ideals in Dedekind domains from the general primary decomposition theorems. 
              Although a direct approach is of course possible one obtains more insight our way into the precise context of number theory in commutative algebra. 
              Another important class of Dedekind domains occurs in connection with non-singular algebraic curves. 
              In fact the geometrical picture of the Dedekind condition is: non-singular of dimension one.
            </p>
        
            <p>
              The last chapter dealt with Noetherian rings of dimension 0 . 
              Here we start by considering the next simplest case, namely Noetherian integral domains of dimension one: i.e., Noetherian domains in which every non-zero prime ideal is maximal. 
              The first result is that in such a ring we have a unique factorization theorem for ideals:
            </p>

            <proposition xml:id="prop-9.1-at">
              <statement>
                <p>
                  Let <m>A</m> be a Noetherian domain of dimension 1. 
                  Then every non-zero ideal a in <m>A</m> can be uniquely expressed as a product of primary ideals whose radicals are all distinct.
                </p>
              </statement>
  
              <proof>
                <p>
                  Since <m>A</m> is Noetherian, a has a minimal primary decomposition <m>\mathfrak{a}=\bigcap_{i=1}^{n} \mathfrak{q}_{i}</m> by (7.13), where each <m>\mathfrak{q}_{1}</m> is say <m>\mathfrak{p}_{1}</m>-primary. 
                  Since <m>\operatorname{dim} A=1</m> and <m>A</m> is an integral domain, each non-zero prime ideal of <m>A</m> is maximal, hence the <m>\mathfrak{p}_{i}</m> are distinct maximal ideals (since <m>\mathfrak{p}_{\mathfrak{i}} \supseteq \mathfrak{q}_{\mathfrak{i}} \supseteq \mathfrak{a} \neq 0</m> ), and are therefore pairwise coprime. Hence by (1.16) the <m>\mathfrak{q}_{1}</m> are pairwise coprime and therefore by (1.10) we have <m>\prod \mathfrak{q}_{\mathfrak{i}}=\bigcap \mathfrak{q}_{\mathfrak{i}}</m>. 
                  Hence <m>\mathfrak{a}=\prod \mathfrak{q}_{\mathfrak{i}}</m>.
                </p>
              </proof>
            </proposition>
        
            <p>
              Conversely, if <m>\mathfrak{a}=\Pi \mathfrak{q}_{\mathfrak{i}}</m>, the same argument shows that <m>\mathfrak{a}=\cap \mathfrak{q}_{i}</m>; 
              this is a minimal primary decomposition of <m>\mathfrak{a}</m>, in which each <m>\mathfrak{a}_{\mathfrak{i}}</m> is an isolated primary component, and is therefore unique by (4.11).
            </p>
        
            <p>
              Let <m>A</m> be a Noetherian domain of dimension one in which every primary ideal is a prime power. 
              By (9.1), in such a ring we shall have unique factorization of non-zero ideals into products of prime ideals. 
              If we localize <m>A</m> with respect to a non-zero prime ideal <m>p</m> we get a local ring <m>A_{p}</m> satisfying the same conditions as <m>A</m>, and therefore in <m>A_{\mathfrak{p}}</m> every non-zero ideal is a power of the maximal ideal. 
              Such local rings can be characterized in other ways.
            </p>    
        
            <p>
              Let <m>K</m> be a field. 
              A discrete valuation on <m>K</m> is a mapping <m>v</m> of <m>K^{*}</m> onto <m>\mathbf{Z}</m> (where <m>K^{*}=K-\{0\}</m> is the multiplicative group of <m>K</m> ) such that
            </p>
        
            <p>
              <ol>
                <li>
                  <p>
                    <m>v(x y)=v(x)+v(y)</m>, i.e., <m>v</m> is a homomorphism;
                  </p>
                </li>
        
                <li>
                  <p>
                    <m>v(x+y) \geqslant \min (v(x), v(y))</m>.
                  </p>
                </li>
              </ol>
            </p>
        
            <p>
              The set consisting of 0 and all <m>x \in K^{*}</m> such that <m>v(x) \geqslant 0</m> is a ring, called the valuation ring of <m>v</m>. 
              It is a valuation ring of the field <m>K</m>. 
              It is sometimes convenient to extend <m>v</m> to the whole of <m>K</m> by putting <m>v(0)=+\infty</m>.
            </p>
        
            <p>
              Examples. The two standard examples are:
            </p>
        
            <p>
              <ol>
                <li>
                  <p>
                    <m>K=\mathbf{Q}</m>. Take a fixed prime <m>p</m>, then any non zero <m>x \in \mathbf{Q}</m> can be written uniquely in the form <m>p^{a} y</m>, where <m>a \in \mathbf{Z}</m> and both numerator and denominator of <m>y</m> are prime to <m>p</m>. Define <m>v_{p}(x)</m> to be <m>a</m>. The valuation ring of <m>v_{p}</m> is the local ring <m>\mathbf{Z}_{(p)}</m>
                  </p>
                </li>
        
                <li>
                  <p>
                    <m>K=k(x)</m>, where <m>k</m> is a field and <m>x</m> an indeterminate. Take a fixed irreducible polynomial <m>f \in k[x]</m> and define <m>v_{f}</m> just as in 1 ). The valuation ring of <m>v_{f}</m> is then the local ring of <m>k[x]</m> with respect to the prime ideal <m>(f)</m>.
                  </p>
                </li>
              </ol>
            </p>
        
            <p>
              An integral domain <m>A</m> is a discrete valuation ring if there is a discrete valuation <m>v</m> of its field of fractions <m>K</m> such that <m>A</m> is the valuation ring of <m>v</m>. 
              By (5.18), <m>A</m> is a local ring, anci its maximal ideal <m>m</m> is the set of all <m>x \in K</m> such that <m>v(x)&gt;0</m>.
            </p>
        
            <p>
              If two elements <m>x, y</m> of <m>A</m> have the same value, that is if <m>v(x)=v(y)</m>, then <m>v\left(x y^{-1}\right)=0</m> and therefore <m>u=x y^{-1}</m> is a unit in <m>A</m>. 
              Hence <m>(x)=(y)</m>.
            </p>
        
            <p>
              If <m>\mathfrak{a} \neq 0</m> is an ideal in <m>A</m>, there is a least integer <m>k</m> such that <m>v(x)=k</m> for some <m>x \in a</m>. 
              It follows that <m>a</m> contains every <m>y \in A</m> with <m>v(y) \geqslant k</m>, and therefore the only ideals <m>\neq 0</m> in <m>A</m> are the ideals <m>\mathfrak{m}_{k}=\{y \in A: v(y) \geqslant k\}</m>. 
              These form a single chain <m>\mathfrak{m} \supset \mathfrak{m}_{2} \supset \mathfrak{m}_{3} \supset \cdots</m>, and therefore <m>A</m> is Noetherian.
            </p>
        
            <p>
              Moreover, since <m>v: K^{*} \rightarrow Z</m> is surjective, there exists <m>x \in \mathfrak{m}</m> such that <m>v(x)=1</m>, and then <m>\mathfrak{m}=(x)</m>, and <m>\mathfrak{m}_{k}=\left(x^{k}\right)(k \geqslant 1)</m>. 
              Hence <m>\mathfrak{m}</m> is the only non-zero prime ideal of <m>A</m>, and <m>A</m> is thus a Noetherian local domain of dimension one in which every non-zero ideal is a power of the maximal ideal. 
              In fact many of these properties are characteristic of discrete valuation rings.
            </p>

            <proposition xml:id="prop-9.2-at">
              <statement>
                <p>
                  Let <m>A</m> be a Noetherian local domain of dimension one, <m>\mathfrak{m}</m> its maximal ideal, <m>k=A / \mathrm{m}</m> its residue field. 
                  Then the following are equivalent: 
                  i) <m>A</m> is a discrete valuation ring;
                  ii) <m>A</m> is integrally closed;
                  iii) <m>\mathfrak{m}</m> is a principal ideal; 
                  iv) <m>\operatorname{dim}_{k}\left(\mathfrak{m} / \mathfrak{m}^{2}\right)=1</m>;
                  v) Every non-zero ideal is a power of <m>\mathfrak{m}</m>;
                  vi) There exists <m>x \in A</m> such that every non-zero ideal is of the form <m>\left(x^{k}\right)</m>, <m>k \geqslant 0</m>.
                </p>
              </statement>
  
              <proof>
                <p>
                  Before we start going the rounds, we make two remarks:
                  (A) If <m>\mathfrak{a}</m> is an ideal <m>\neq 0</m>, (1), then <m>\mathfrak{a}</m> is <m>\mathfrak{m}</m>-primary and <m>\mathfrak{a} \supseteq \mathfrak{m}^{n}</m> for some <m>n</m>. 
                  For <m>r(\mathfrak{a})=\mathfrak{m}</m>, since <m>\mathfrak{m}</m> is the only non-zero prime ideal; now use (7.16).
                  (B) <m>\mathfrak{m}^{n} \neq \mathfrak{m}^{n+1}</m> for all <m>n \geqslant 0</m>. 
                  This follows from (8.6). 

                  i) <m>\Rightarrow</m> ii) 
                  by (5.18).
                  ii) <m>\Rightarrow</m> iii). 
                  Let <m>a \in \mathfrak{m}</m> and <m>a \neq 0</m>. 
                  By remark (A) there exists an integer <m>n</m> such that <m>\mathfrak{m}^{n} \subseteq(a), \mathfrak{m}^{n-1} \ddagger(a)</m>. 
                  Choose <m>b \in \mathfrak{m}^{n-1}</m> and <m>b \notin(a)</m>, and let <m>x=</m> <m>a / b \in K</m>, the field of fractions of <m>A</m>. 
                  We have <m>x^{-1} \notin A</m> (since <m>b \notin(a)</m> ), hence <m>x^{-1}</m> is not integral over <m>A</m>, and therefore by (5.1) we have <m>x^{-1} \mathfrak{m} \ddagger \mathfrak{m}</m> (for if <m>x^{-1} \mathfrak{m} \subseteq \mathfrak{m}</m>, m would be a faithful <m>A\left[x^{-1}\right]</m>-module, finitely generated as an <m>A</m>-module). 
                  But <m>x^{-1} \mathfrak{m} \subseteq A</m> by construction of <m>x</m>, hence <m>x^{-1} \mathfrak{m}=A</m> and therefore <m>\mathfrak{m}=A x=(x)</m>.
                  iii) <m>\Rightarrow</m> iv). 
                  By (2.8) we have <m>\operatorname{dim}_{k}\left(\mathfrak{m} / \mathfrak{m}^{2}\right) \leqslant 1</m>, and by remark (B) <m>\mathfrak{m} / \mathfrak{m}^{2} \neq 0</m>.
                  iv) <m>\Rightarrow v</m> ). 
                  Let <m>\mathfrak{a}</m> be an ideal <m>\neq(0)</m>, (1). 
                  By remark (A) we have <m>\mathfrak{a} \supseteq \mathfrak{m}^{n}</m> for some <m>n</m>; 
                  from (8.8) (applied to <m>A / \mathfrak{m}^{n}</m> ) it follows that <m>\mathfrak{a}</m> is a power of <m>\mathfrak{m}</m>. 
                  v) <m>\Rightarrow</m> vi). 
                  By remark (B), <m>\mathfrak{m} \neq \mathfrak{m}^{2}</m>, hence there exists <m>x \in \mathfrak{m}, x \notin \mathfrak{m}^{2}</m>. 
                  But <m>(x)=\mathfrak{m}^{r}</m> by hypothesis, hence <m>r=1,(x)=\mathfrak{m},\left(x^{k}\right)=\mathfrak{m}^{k}</m>.
                  vi) <m>\Rightarrow</m> i). 
                  Clearly <m>(x)=\mathfrak{m}</m>, hence <m>\left(x^{k}\right) \neq\left(x^{k+1}\right)</m> by remark (B). 
                  Hence if <m>a</m> is any non-zero element of <m>A</m>, we have <m>(a)=\left(x^{k}\right)</m> for exactly one value of <m>k</m>. 
                  Define <m>v(a)=k</m> and extend <m>v</m> to <m>K^{*}</m> by defining <m>v\left(a b^{-1}\right)=v(a)-v(b)</m>. 
                  Check that <m>v</m> is well-defined and is a discrete valuation, and that <m>A</m> is the valuation ring of <m>v</m>.
                </p>
              </proof>
            </proposition>
        
          </subsection>
      
          <subsection xml:id="dedekind-domains" ><title>Dedekind Domains</title>

            <theorem xml:id="thm-9.3-at">
              <statement>
                <p>
                  Let <m>A</m> be a Noetherian domain of dimension one. 
                  Then the following are equivalent: 
                  i) <m>A</m> is integrally closed;
                  ii) Every primary ideal in <m>A</m> is a prime power;
                  iii) Every local ring <m>A_{\mathfrak{p}}(\mathfrak{p} \neq 0)</m> is a discrete valuation ring.
                </p>
              </statement>
  
              <proof>
                <p>
                  i) <m>\Leftrightarrow</m> iii) by (9.2) and (5.13).
                  ii) <m>\Leftrightarrow</m> iii). Use (9.2) and the fact that primary ideals and powers of ideals behave well under localization: (4.8), (3.11).    
                </p>
              </proof>
            </theorem>

            <p>
              A ring satisfying the conditions of (9.3) is called a Dedekind domain.
            </p>

            <corollary xml:id="cor-9.4-at">
              <statement>
                <p>
                  In a Dedekind domain every non-zero ideal has a unique factorization as a product of prime ideals.
                </p>
              </statement>
  
              <proof>
                <p>
                  (9.1) and (9.3).
                </p>
              </proof>
            </corollary>

            <p>
              Examples. 
            </p>
        
            <p>
              <ol>
                <li>
                  <p>
                    1) Any principal ideal domain A. 
                    For <m>A</m> is Noetherian (since every ideal is finitely generated) and of dimension one (Example 3 after (1.6)). 
                    Also every local ring <m>A_{\mathfrak{p}}(\mathfrak{p} \neq 0)</m> is a principal ideal domain, hence by <m>(9.2)</m> a discrete valuation ring; 
                    hence <m>A</m> is a Dedekind domain by (9.3).
                  </p>
                </li>

                <li>
                  <p>
                    Let <m>K</m> be an algebraic number field (a finite algebraic extension of <m>\mathbf{Q}</m> ). 
                    Its ring of integers <m>A</m> is the integral closure of <m>\mathbf{Z}</m> in <m>K</m>. 
                    (For example, if <m>K=\mathbf{Q}(i)</m>, then <m>A=\mathbf{Z}[i]</m>, the ring of Gaussian integers.)
                      Then <m>A</m> is a Dedekind domain:
                  </p>
                </li>
              </ol>
            </p>

            <theorem xml:id="thm-9.5-at">
              <statement>
                <p>
                  The ring of integers in an algebraic number field <m>K</m> is a Dedekind domain.
                </p>
              </statement>
  
              <proof>
                <p>
                  <m>K</m> is a separable extension of <m>\mathbf{Q}</m> (because the characteristic is zero), hence by (5.17) there is a basis <m>v_{1}, \ldots, v_{n}</m> of <m>K</m> over <m>\mathbf{Q}</m> such that <m>A \subseteq \Sigma \mathbf{Z}^{\prime}</m>, 
                  Hence <m>A</m> is finitely generated as a <m>\mathbf{Z}</m>-module and therefore Noetherian. 
                  Also <m>A</m> is integrally closed by (5.5). 
                  To complete the proof we must show that every nonzero prime ideal <m>\mathfrak{p}</m> of <m>A</m> is maximal, and this follows from (5.8) and (5.9): 
                  (5.9) shows that <m>\mathfrak{p} \cap \mathbf{Z} \neq 0</m>, hence <m>\mathfrak{p} \cap \mathbf{Z}</m> is a maximal ideal of <m>\mathbf{Z}</m> and therefore <m>\mathfrak{p}</m> is maximal in <m>A</m> by (5.8).    
                </p>
              </proof>
            </theorem>
        
            <p>
              Remark. 
              The unique factorization theorem (9.4) was originally proved for rings of integers in algebraic number fields. 
              The uniqueness theorems of Chapter 4 may be regarded as generalizations of this result: 
              prime powers have to be replaced by primary ideals, and products by intersections.
            </p>
        
          </subsection>
        
          <subsection xml:id="fractional-ideals"><title>Fractional Ideals</title>
        
            <p>
              Let <m>A</m> be an integral domain, <m>K</m> its field of fractions. 
              An <m>A</m>-submodule <m>M</m> of <m>K</m> is a fractional ideal of <m>A</m> if <m>x M \subseteq A</m> for some <m>x \neq 0</m> in <m>A</m>. 
              In particular, the "ordinary" ideals (now called integral ideals) are fractional ideals (take <m>x=1</m> ). 
              Any element <m>u \in K</m> generates a fractional ideal, denoted by <m>(u)</m> or <m>A u</m>, and called principal. 
              If <m>M</m> is a fractional ideal, the set of all <m>x \in K</m> such that <m>x M \subseteq A</m> is denoted by <m>(A: M)</m>.
            </p>
        
            <p>
              Every finitely generated <m>A</m>-submodule <m>M</m> of <m>K</m> is a fractional ideal. 
              For if <m>M</m> is generated by <m>x_{1}, \ldots, x_{n} \in K</m>, we can write <m>x_{i}=y_{i} z^{-1}(1 \leqslant i \leqslant n)</m> where <m>y_{i}</m> and <m>z</m> are in <m>A</m>, and then <m>z M \subseteq A</m>. 
              Conversely, if <m>A</m> is Noetherian, every fractional ideal is finitely generated, for it is of the form <m>x^{-1} \mathfrak{a}</m> for some integral ideal <m>a</m>.
            </p>
        
            <p>
              An <m>A</m>-submodule <m>M</m> of <m>K</m> is an invertible ideal if there exists a submodule <m>N</m> of <m>K</m> such that <m>M N=A</m>. 
              The module <m>N</m> is then unique and equal to <m>(A: M)</m>, for we have <m>N \subseteq(A: M)=(A: M) M N \subseteq A N=N</m>. 
              It follows that <m>M</m> is finitely generated, and therefore a fractional ideal: 
              for since <m>M \cdot(A: M)=A</m> there exist <m>x_{i} \in M</m> and <m>y_{i} \in(A: M)(1 \leqslant i \leqslant n)</m> such that <m>\sum x_{i} y_{i}=1</m>, and hence for any <m>x \in M</m> we have <m>x=\sum\left(y_{i} x\right) x_{i}</m> : 
              each <m>y_{i} x \in A</m>, so that <m>M</m> is generated by <m>x_{1}, \ldots, x_{n}</m>.
            </p>
        
            <p>
              Clearly every non-zero principal fractional ideal <m>(u)</m> is invertible, its inverse being <m>\left(u^{-1}\right)</m>. 
              The invertible ideals form a group with respect to multiplication, whose identity element is <m>A=</m> (1).
            </p>
        
            <p>
              Invertibility is a local property:
            </p>

            <proposition xml:id="prop-9.6-at">
              <statement>
                <p>
                  For a fractional ideal <m>M</m>, the following are equivalent: 
                  i) <m>M</m> is invertible;
                  ii) <m>M</m> is finitely generated and, for each prime ideal <m>\mathfrak{p}, M_{\mathfrak{p}}</m> is invertible:
                  iii) <m>M</m> is finitely generated and, for each maximal ideal <m>\mathfrak{m}, M_{\mathfrak{m}}</m> is invertible.
                </p>
              </statement>
  
              <proof>
                <p>
                  i) <m>\Rightarrow</m> ii): <m>A_{\mathfrak{p}}=(M \cdot(A: M))_{\mathfrak{p}}=M_{\mathfrak{p}} \cdot\left(A_{\mathfrak{p}}: M_{\mathfrak{p}}\right)</m> by (3.11) and (3.15) (for <m>M</m> is finitely generated, because invertible).
                  ii) <m>\Rightarrow</m> iii) as usual.
                  iii <m>\Rightarrow \mathrm{i})</m> : Let <m>\mathfrak{a}=M \cdot(A: M)</m>, which is an integral ideal. For each maximal ideal <m>\mathfrak{m}</m> we have <m>\mathfrak{a}_{\mathfrak{m}}=M_{\mathfrak{m}} \cdot\left(A_{\mathfrak{m}}: M_{\mathfrak{m}}\right)</m> (by (3.11) and (3.15)) <m>=A_{\mathfrak{n}}</m> because <m>M_{\mathfrak{m}}</m> is invertible. 
                  Hence <m>\mathfrak{a} \neq \mathfrak{m}</m>. 
                  Consequently <m>\mathfrak{a}=A</m> and therefore <m>M</m> is invertible.
                </p>
              </proof>
            </proposition>

            <proposition xml:id="prop-9.7-at">
              <statement>
                <p>
                  Let <m>A</m> be a local domain. 
                  Then <m>A</m> is a discrete valuation ring <m>\Leftrightarrow</m> every non-zero fractional ideal of <m>A</m> is invertible.
                </p>
            
              </statement>
  
              <proof>
                <p>
                <m>\Rightarrow</m>. Let <m>x</m> be a generator of the maximal ideal <m>\mathfrak{m}</m> of <m>A</m>, and let <m>M \neq 0</m> be a fractional ideal. 
                  Then there exists <m>y \in A</m> such that <m>y M \subseteq A</m> : 
                  thus <m>y M</m> is an integral ideal, say <m>\left(x^{r}\right)</m>, and therefore <m>M=\left(x^{r-s}\right)</m> where <m>s=v(y)</m>.
                </p>
            
                <p>
                  <m>\Leftarrow</m> : 
                  Every non-zero integral ideal is invertible and therefore finitely generated; 
                  so that <m>A</m> is Noetherian. 
                  It is therefore enough to prove that every nonzero integral ideal is a power of <m>m</m>. 
                  Suppose this is false; 
                  let <m>\Sigma</m> be the set of nonzero ideals which are not powers of <m>\mathfrak{m}</m>, and let <m>\mathfrak{a}</m> be a maximal element of <m>\Sigma</m>. 
                  Then <m>\mathfrak{a} \neq \mathfrak{m}</m>, hence <m>\mathfrak{a} \subset \mathfrak{m}</m>; 
                  hence <m>\mathfrak{m}^{-1} \mathfrak{a} \subset \mathfrak{m}^{-1} \mathfrak{m}=A</m> is a proper (integral) ideal, and <m>\mathfrak{m}^{-1} \mathfrak{a} \supseteq \mathfrak{a}</m>. 
                  If <m>\mathfrak{m}^{-1} \mathfrak{a}=\mathfrak{a}</m>, then <m>\mathfrak{a}=\mathfrak{m} \mathfrak{a}</m> and therefore <m>\mathfrak{a}=0</m> by Nakayama's lemma (2.6); 
                  hence <m>\mathfrak{m}^{-1} \mathfrak{a} \supset \mathfrak{a}</m> and hence <m>\mathfrak{m}^{-1} \mathfrak{a}</m> is a power of <m>\mathfrak{m}</m> (by the maximality of <m>\mathfrak{a}</m> ). 
                  Hence <m>\mathfrak{a}</m> is a power of <m>\mathfrak{m}</m> : contradiction.
                </p>
              </proof>
            </proposition>
        
            <p>
              The "global" counterpart of (9.7) is
            </p>

            <theorem xml:id="thm-9.8-at">
              <statement>
                <p>
                  Let <m>A</m> be an integral domain. 
                  Then <m>A</m> is a Dedekind domain <m>\Leftrightarrow</m> every non-zero fractional ideal of <m>A</m> is invertible.
                </p>
              </statement>
  
              <proof>
                <p>
                  <m>\Rightarrow</m> : Let <m>M \neq 0</m> be a fractional ideal. 
                  Since <m>A</m> is Noetherian, <m>M</m> is finitely generated. 
                  For each prime ideal <m>\mathfrak{p} \neq 0, M_{\mathfrak{p}}</m> is a fractional ideal <m>\neq 0</m> of the discrete valuation ring <m>A_{\mathfrak{p}}</m>, hence is invertible by (9.7). 
                  Hence <m>M</m> is invertible, by (9.6).
                </p>
            
                <p>
                  <m>\Leftarrow</m>: Every non-zero integral ideal is invertible, hence finitely generated, hence <m>A</m> is Noetherian. 
                  We shall show that each <m>A_{\mathfrak{p}}(\mathfrak{p} \neq 0)</m> is a discrete valuation ring. 
                  For this it is enough to show that each integral ideal <m>\neq 0</m> in <m>A_{\mathfrak{p}}</m> is invertible, and then use (9.7). 
                  Let <m>\mathfrak{b} \neq 0</m> be an (integral) ideal in <m>A_{\mathfrak{p}}</m>, and let <m>\mathfrak{a}=\mathfrak{b}^{\mathfrak{c}}=\mathfrak{b} \cap A</m>. 
                  Then <m>\mathfrak{a}</m> is invertible, hence <m>\mathfrak{b}=\mathfrak{a}_{\mathfrak{p}}</m> is invertible by (9.7).
                </p>
              </proof>
            </theorem>

            <corollary xml:id="cor-9.9-at">
              <statement>
                <p>
                  If <m>A</m> is a Dedekind domain, the non-zero fractional ideals of <m>A</m> form a group with respect to multiplication.
                </p>
              </statement>
  
              <proof>
                <p>
                 
                </p>
              </proof>
            </corollary>
        
            <p>
              This group is called the group of ideals of <m>A</m>; we denote it by <m>I</m>. 
              In this terminology (9.4) says that <m>I</m> is a free (abelian) group, generated by the non-zero prime ideals of <m>A</m>.
            </p>
        
            <p>
              Let <m>K^{*}</m> denote the multiplicative group of the field of fractions <m>K</m> of <m>A</m>. 
              Each <m>u \in K^{*}</m> defines a fractional ideal <m>(u)</m>, and the mapping <m>u \mapsto(u)</m> is a homomorphism <m>\phi: K^{*} \rightarrow I</m>. 
              The image <m>P</m> of <m>\phi</m> is the group of principal fractional ideals: the quotient group <m>H=I / P</m> is called the ideal class group of <m>A</m>. 
              The kernel <m>U</m> of <m>\phi</m> is the set of all <m>u \in K^{*}</m> such that <m>(u)=(1)</m>, so that it is the group of units of <m>A</m>. 
              We have an exact sequence
            </p>
        
            <p>
              <me>1 \rightarrow U \rightarrow K^{*} \rightarrow I \rightarrow H \rightarrow 1 .</me>
            </p>
        
            <p>
              Remark. 
              For the Dedekind domains that arise in number theory, there are classical theorems relating to the groups <m>H</m> and <m>U</m>. 
              Let <m>K</m> be an algebraic number field and let <m>A</m> be its ring of integers, which is a Dedekind domain by (9.5). In this case:
            </p>
        
            <p>
              <ol>
                <li>
                  <p>
                    <m>H</m> is a finite group. Its order <m>h</m> is the class number of the field <m>K</m>. The following are equivalent: (i) <m>h=1</m>; (ii) <m>I=P</m>; (iii) <m>A</m> is a principal ideal domain; (iv) <m>A</m> is a unique factorization domain.
                  </p>
                </li>
        
                <li>
                  <p>
                    <m>U</m> is a finitely-generated abelian group. More precisely, we can specify the number of generators of <m>U</m>. First, the elements of finite order in <m>U</m> are just the roots of unity which lie in <m>K</m>, and they form a finite cyclic group <m>W ; U / W</m> is torsion-free. The number of generators of <m>U / W</m> is given as follows: if <m>(K: \mathbf{Q})=n</m> there are <m>n</m> distinct embeddings <m>K \rightarrow \mathbf{C}</m> (the field of complex numbers). Of these, say <m>r_{1}</m> map <m>K</m> into <m>\mathbf{R}</m>, and the rest pair off (if <m>\alpha</m> is one, then <m>\omega \circ \alpha</m> is a nother, where <m>\omega</m> is the automorphism of <m>\mathbf{C}</m> defined by <m>\omega(z)=\bar{z})</m> into say <m>r_{2}</m> pairs: thus <m>r_{1}+2 r_{2}=n</m>. The number of generators of <m>U / W</m> is then <m>r_{1}+r_{2}-1</m>.
                  </p>
                </li>
              </ol>
            </p>
        
            <p>
              The proofs of these results belong to algebraic number theory and not to commutative algebra: 
              they require techniques of a different nature from those used in this book.
            </p>
        
            <p>
              Examples. 
              1) <m>K=\mathrm{Q}(\sqrt{-1})</m>; <m>n=2, r_{1}=0, r_{2}=1, r_{1}+r_{2}-1=0</m>. 
              The only units in <m>\mathrm{Z}[i]=A</m> are the four roots of unity <m>\pm 1, \pm i</m>. 
              2) <m>K=\mathbf{Q}(\sqrt{2}) ; n=2, r_{1}=2, r_{2}=0, r_{1}+r_{2}-1=1 . \quad W=\{ \pm 1\}</m>, and <m>U / W</m> is infinite cyclic. 
              In fact the units in <m>A=\mathbf{Z}[\sqrt{2}]</m> are <m>\pm(1+\sqrt{2})^{n}</m>, where <m>n</m> is any rational integer.
            </p>
          </subsection>
          
        </section>
        
      </chapter>

      <chapter xml:id="ch-depth-grade"><title>Depth and Grade</title>

        <section xml:id="sec-depth-grade"><title>Depth and Grade</title>

          <definition xml:id="def-48">
            <statement>
              <p>
                Let <m>R</m> be a ring, <m>M</m> an <m>R</m>-module, and <m>{\bf x}=x_1,\dots,x_n\in R</m>.
                We say <m>{\bf x}</m> is a <em>regular sequence on <m>M</m></em>, or simply an <em><m>M</m>-sequence</em>, if <m>(x_1,\dots, x_n)M\neq M</m> and <m>x_i</m> is regular (i.e., a non-zero-divisor) on <m>M/(x_1,\dots,x_{i-1})M</m> for each <m>i=1,\dots,n</m>. 
                An <m>M</m>-sequence <m>{\bf x}</m> is called <em>maximal</em> if <m>{\bf x}</m> cannot be extended to a longer <m>M</m>-sequence.
              </p>
            </statement>
          </definition>

          <example>
            <p>
              <term>Example 49</term>.  Let <m>R=k[x_1,\dots,x_n]</m> be a polynomial ring over the field <m>k</m>. Then <m>x_1,\dots,x_n</m> is a maximal <m>R</m>-sequence.
            </p>
          </example>

          <lemma xml:id="lem-50">
            <statement>
              <p>
                Let <m>R</m> be Noetherian and <m>M</m> a finitely generated <m>R</m>-module. 
                Then
                <ol>
                  <li>
                    <p>
                      The length of every <m>M</m>-sequence is finite.
                    </p>
                  </li>
            
                  <li>
                    <p>
                      Every <m>M</m>-sequence can be extended to a maximal <m>M</m>-sequence.
                    </p>
                  </li>
                </ol>
              </p>
            </statement>

            <proof>
              <p>
                For part (a), note that if <m>x_1,\dots,x_n</m> is an <m>M</m>-sequence then <me>0\subset (x_1)M\subset (x_1,x_2)M\subset \cdots \subset (x_1,\dots,x_n)M</me> is a strictly ascending chain of submodule of <m>M</m>. 
                For if <m>(x_1,\dots,x_i)M=(x_1,\dots,x_{i+1})M</m> for some <m>i</m>, then <m>x_{i+1}M\subseteq (x_1,\dots,x_i)M</m>. 
                As <m>M\neq (x_1,\dots,x_i)M</m>, then <m>x_{i+1}</m> is a zero-divisor on <m>M/(x_1,\dots,x_i)M</m>, a contradiction. 
                Consequently, as <m>M</m> is Noetherian, this chain must terminate. 
                Hence, there are no <m>M</m>-sequences of infinite length. The same argument (using ACC) proves (b) as well. 
              </p>
            </proof>
          </lemma>

          <example xml:id="ex-51">
            <p>
              Let <m>R=k[x,y,x]</m>. 
              Then <m>x,y,z</m> is a maximal <m>R</m>-sequence.
            </p> 
          </example>

          <example xml:id="ex-52">
            <p>
              Let <m>R=k[x,y,z]_{(x,y,z)}</m> and <m>M=R/(xy,yz)</m>. 
              Then <m>y-z</m> is a maximal <m>M</m> -sequence. 
              To see this, note that <m>(xy,xz)=(y)\cap (x,z)</m> is a irredundant primary decomposition of <m>I</m>. 
              Thus, <m>(y)</m> and <m>(x,z)</m> are the associated primes of <m>M</m>. 
              Since <m>y-z</m> is not in either associated prime, it is a non-zero-divisor on <m>M</m>. 
              Also, <m>M\neq (y-z)M</m>, so <m>y-z</m> is <m>M</m>-regular.
              Note that <m>M/(y-z)M\cong k[x,y,z]_{(x,y,z)}/(xy, xz, y-z)\cong k[x,y]_{(x,y)}/(xy, y^2)</m>. 
              Since <m>(x,y)x=0</m> in <m>k[x,y]_{(x,y)}/(xy, y^2)</m>, <m>(x,y)</m> consists of zero-divisors on <m>M/(y-z)M</m>. 
              Thus, <m>y-z</m> is a maximal <m>M</m>-sequence.
            </p> </example>

            <p>
              Here we summarize some essential facts about primary decompositions for modules, and then use them to prove Krull's Intersection Theorem.
            </p>

          <definition xml:id="def-53">
            <statement>
              <p>
                Let <m>M</m> be an <m>R</m>-module. 
                A submodule <m>Q</m> of <m>M</m> is called <em>primary</em> if <m>Q\subsetneq M</m> and for every <m>r\in R</m> multiplication by <m>r</m> on <m>M/Q</m> is either injective or nilpotent; i.e., <m>r</m> is either a non-zero-divisor on <m>M/Q</m> or <m>r^nM\subseteq Q</m> for some <m>n</m>.
              </p>
            </statement>
          </definition>

          <remark>
            <p>
              Let <m>Q</m> be a primary submodule of <m>M</m>. 
              Then <m>p:=\sqrt{\operatorname{Ann}_R M/Q}</m> is a prime ideal of <m>R</m>. 
              We say that <m>Q</m> is a <m>p</m>-primary submodule of <m>M</m>.
            </p></remark>

          <theorem xml:id="thm-55">
            <statement>
              <p>
                Let <m>R</m> be a Noetherian ring, <m>M</m> a finitely generated <m>R</m>-module and <m>N\subsetneq M</m> a submodule. 
                Then there exists primary submodules <m>Q_1,\dots,Q_n</m> such that
              </p>

              <p><ul>
                <li>
                  <p>
                <m>N=Q_1\cap \cdots \cap Q_n</m>;
              </p>
                </li>

                <li>
                  <p>
                <m>N\subsetneq Q_1\cap \cdots \cap \hat{Q_i}\cap \cdots Q_n</m> for <m>i=1,\dots,n</m>;
              </p>
                </li>

                <li>
                  <p>
                <m>p_1,\dots,p_n</m> are distinct prime ideals, where <m>p_i=\sqrt{\operatorname{Ann}_R M/Q_i}</m>.
              </p>
                </li>

              </ul></p>

              <p>
                The decomposition <m>N=Q_1\,\cap\cdots\cap\, Q_n</m> is called an <term>irredundant primary decomposition for <m>N\subset M</m></term>. 
                The prime ideals <m>p_1,\dots,p_n</m> are uniquely determined by <m>N\subset M</m> and are called the <term>associated primes</term> of <m>N\subset M</m> (or more commonly, of <m>M/N</m>). 
                We denote the set of associated primes of <m>M/N</m> by <m>\operatorname{Ass}_R M/N</m>. 
                Moreover, a prime ideal <m>p\in \operatorname{Ass}_R M/N</m> if and only if <m>p=(N:_R x)</m> for some <m>x\in M</m>. 
                Additionally, if <m>p_i</m> is a minimal associated prime of <m>M/N</m>, the <m>Q_i=\phi^{-1}(N_{p_i})</m> where <m>\phi:M\to M_{p_i}</m> is the natural localization map.
              </p>
            </statement>
                    
            <proof>
              <p>
                See Atiyah-Macdonald. ◻
              </p>
            </proof>
          </theorem>

          <theorem xml:id="thm-56"><title>Krull's Intersection Theorem</title>
            <statement>
              <p>
                Let <m>R</m> be a Noetherian ring, <m>I</m> an ideal, and <m>M</m> a finitely generated <m>R</m>-module. 
                Then there exist an <m>s\in I</m> such that 
                <me>(1-s)\bigcap_{n=1}^{\infty} I^nM=0.</me>
              </p>
            </statement>
                    
            <proof>
              <p>
                <em>Proof.</em> Let <m>\displaystyle{N=\bigcap_{n=1}^{\infty} I^nM}</m>. 
                We claim that <m>IN=N</m>. 
                If <m>IN=M</m>, there is nothing to prove. 
                Suppose <m>IN\subsetneq M</m> and let <m>IN=Q_1\cap Q_2\cap \cdots \cap Q_r</m> be a primary decomposition of <m>IN\subset M</m>. 
                Then for each <m>i</m>, <m>IN\subseteq Q_i</m>. 
                If <m>N\not\subset Q_i</m> then <m>I</m> consists of zero-divisors on <m>M/Q_i</m>. 
                As <m>Q_i</m> is a primary submodule of <m>M</m>, we must have <m>I^nM\subseteq Q_i</m> for some <m>n</m>. 
                But <m>N\subseteq I^nM</m>, so <m>N\subseteq Q_i</m>, a contradiction. 
                Thus, <m>N\subseteq Q_1\cap\cdots \cap Q_r=IN</m>. 
                Consequently, <m>IN=N</m>. 
                By a homework exercise, this implies there exists <m>s\in I</m> such that <m>(1-s)N=0</m>. ◻
              </p>
            </proof>
          </theorem>

          <definition xml:id="def-57">
            <statement>
              <p>
                Let <m>R</m> be a ring. 
                The <em>Jacobson radical of <m>R</m></em>, denoted <m>J(R)</m>, is the intersection of all maximal ideals of <m>R</m>. 
                It is easily seen that if <m>r\in J(R)</m> then <m>1-r</m> is a unit.
              </p>
            </statement>
          </definition>

          <corollary xml:id="cor-58">
            <statement>
              <p>
                Let <m>R</m> be a Noetherian ring, <m>I\subseteq J(R)</m> an ideal, and <m>M</m> a finitely generated <m>R</m>-module. 
                Then 
                <me>\bigcap_{n=1}^{\infty} I^nM=0.</me>
              </p>
            </statement>
                
            <proof>
              <p>
                Apply Krull's Intersection Theorem and use that <m>1-s</m> is a unit for every <m>s\in I</m>.
              </p>
            </proof> 
          </corollary>

          <proposition xml:id="prop-59">
            <statement>
              <p>
                Let <m>R</m> be Noetherian, <m>M</m> a finitely generated <m>R</m>-module, and <m>{\bf x}=x_1,\dots,x_n\in J(R)</m> an <m>M</m>-sequence. 
                Then any permutation of <m>{\bf x}</m> is an <m>M</m>-sequence.
              </p>
            </statement>
                
            <proof>
              <p>
                It suffices to show that if <m>x,y\in J(R)</m> is an <m>M</m>-sequence then so is <m>y,x</m>. 
                First note that <m>(y,x)M=(x,y)M\neq M</m>. 
                We next show that <m>y</m> is regular on <m>M</m>: suppose <m>yu=0</m> for some <m>u\in M</m>. 
                Then <m>yu\in xM</m> so <m>u\in xM</m>. 
                Write <m>u=xu_1</m> where <m>u_1\in M</m>. 
                Then <m>0=yu=xyu_1</m>, so <m>yu_1=0</m>. 
                Repeating the argument above, we get <m>u_1\in xM</m> and hence <m>u\in (x)^2M</m>. 
                Continuing in this way, we obtain that <m>u\in \bigcap_{n\geqslant 1} (x)^nM</m>. 
                As <m>(x)\subseteq J(R)</m> we have <m>\bigcap_{n\geqslant 1} (x)^nM=0</m> and thus <m>u=0</m>. 
                This shows <m>y</m> is regular on <m>M</m>. 
                Now assume <m>xv\in yM</m> for some <m>v\in M</m>. 
                Then <m>xv=yw</m> for some <m>w\in M</m>. 
                Since <m>y</m> is regular on <m>M/xM</m>, we obtain that <m>w=xz</m> for some <m>z\in M</m>. 
                Consequently, <m>xv=xyz</m>. As <m>x</m> is regular on <m>M</m>, we then have <m>v=yz\in yM</m>. 
                Hence, <m>x</m> is regular on <m>M/yM</m>.
              </p>
            </proof> 
          </proposition>

          <definition xml:id="def-60">
            <statement>
              <p>
                Let <m>R</m> be a Noetherian ring, <m>I</m> an ideal of <m>R</m>, and <m>M</m> a finitely generated <m>R</m>-module such that <m>IM\neq M</m>. 
                Then the <em>grade of <m>I</m> on <m>M</m></em>, denote <m>\operatorname{grade}_I M</m> or <m>\operatorname{grade}(I,M)</m>, is defined to be the supremum of the lengths of all <m>M</m>-sequences contained in <m>I</m>.
              </p>
            </statement>
          </definition>

          <remark>
            <p>
              Note that it is not clear from the definition that <m>\operatorname{grade}_I M&lt;\infty</m>. 
              Although every maximal <m>M</m>-sequence is finite, the supremum of the lengths of such sequences might be infinite.
            </p>
          </remark>

          <convention>
            <p>
              Let <m>R</m> be a ring and <m>L</m> and <m>M</m> <m>R</m>-modules. 
              Define 
              <me>g(L,M):=\inf \{n\mid \operatorname{Ext}^n_R(L,M)\neq 0\}.</me> 
              Note that <m>g(L,M)\geqslant 0</m> for all <m>R</m>-modules <m>L</m> and <m>M</m>. 
              (Recall <m>\inf \emptyset=\infty</m>.)
            </p>
          </convention>

          <proposition xml:id="prop-62">
            <statement>
              <p>
                Let <m>R</m> be a ring, <m>L</m> and <m>M</m> <m>R</m>-modules, and <m>x\in R</m> such that <m>xL=0</m> and <m>x</m> is regular on <m>M</m>. Then <m>g(L,M/xM)=g(L,M)-1</m>. Furthermore, if <m>g:=g(L,M)&lt;\infty</m> then <m>\operatorname{Ext}^{g-1}_R(L,M/xM)\cong \operatorname{Ext}^g_R(L,M)</m>.
              </p>
            </statement>
                
            <proof>
              <p>
                Let <m>f:L\to M</m> be a homomorphism. 
                Then <m>xf(L)=f(xL)=f(0)=0</m>. 
                As <m>x</m> is regular on <m>M</m>, we see that <m>f(L)=0</m>. 
                Hence, <m>\operatorname{Hom}_R(L,M)=0</m> and so <m>g&gt;0</m>. 
                Now applying <m>\operatorname{Hom}_R(L,-)</m> to the s.e.s. <m>0\to M\xrightarrow{x} M\to M/xM\to 0</m> we get the long exact sequence 
                <me>\cdots\to \operatorname{Ext}^i_R(L,M)\xrightarrow{x} \operatorname{Ext}^i_R(L,M)\to \operatorname{Ext}^i_R(L,M/xM) \to \operatorname{Ext}^{i+1}_R(L,M)\xrightarrow{x} \cdots</me> 
                Since <m>xL=0</m> we have <m>x\operatorname{Ext}^i_R(L,M)=0</m> for all <m>i</m> (cf. Grifo's 915 notes, Exercise 73(c).) 
                Thus, for each <m>i</m> we have an exact sequence 
                <me>0\to \operatorname{Ext}^i_R(L,M)\to \operatorname{Ext}^i_R(L,M/xM) \to \operatorname{Ext}^{i+1}_R(L,M)\to 0.</me> 
                Both conclusions follow easily from this sequence.
              </p>
            </proof> 
          </proposition>

          <theorem xml:id="thm-63">
            <statement>
              <p>
                Let <m>R</m> be a Noetherian ring, <m>I</m> an ideal of <m>R</m>, and <m>M</m> a finitely generated <m>R</m>-module such that <m>IM\neq M</m>. 
                Let <m>x_1,\dots,x_r</m> be a maximal <m>M</m>-sequence contained in <m>I</m>. 
                Then <m>r=\sup\{n\mid \operatorname{Ext}^n_R(R/I,M)\neq 0\}.</m> 
                Consequently, all maximal <m>M</m>-sequences contained in <m>I</m> have the same length and 
                <me>\operatorname{grade}_IM=\inf\{n\mid \operatorname{Ext}^n_R(R/I,M)\neq 0\}.</me> 
                In particular, <m>\operatorname{grade}_I M&lt;\infty</m>.
              </p>
            </statement>
                
            <proof>
              <p>
                Notice that the right-hand-side is <m>g:=g(R/I,M)</m>. 
                Suppose <m>r=0</m>. Since <m>IM\neq M</m>, it must be that <m>I</m> consists of zero-divisors on <m>M</m>. 
                Thus, <m>I</m> is contained in the union of the associated primes of <m>M</m> (Grifo 905, Theorem 6.27). 
                By the prime avoidance lemma (Grifo 905, Theorem 3.29), <m>I\subseteq p</m> for some associated prime <m>p</m> of <m>M</m>. 
                Then the composition <m>R/I\to R/p\hookrightarrow M</m> is nonzero. 
                Hence, <m>\operatorname{Hom}_R(R/I,M)=\operatorname{Ext}^0_R(R/I,M)\neq 0</m> and <m>g=0=r</m>. 
                Proceeding by induction on <m>r</m>, we may assume <m>r&gt;0</m> and that the result holds for all finitely generated <m>R</m>-modules <m>N</m> with <m>IN\neq N</m> and having a maximal <m>N</m>-sequence of length at most <m>r-1</m>. 
                Let <m>N=M/x_1M</m>. 
                Then <m>IN\neq N</m> and <m>x_2,\dots, x_r</m> is a maximal <m>N</m>-sequence contained in <m>I</m>. 
                Hence, <m>r-1=g(R/I,N)=g-1</m> by Proposition <xref ref="prop-62" />. 
                Thus, <m>r=g</m>, which completes the proof.
              </p>
            </proof> 
          </theorem>

          <corollary xml:id="cor-64">
            <statement>
              <p>
                Let <m>R</m> be a Noetherian ring, <m>I</m> an ideal of <m>R</m>, and <m>M</m> a finitely generated <m>R</m>-module such that <m>IM\neq M</m>. 
                If <m>x\in I</m> is a regular element on <m>M</m>, then 
                <me>\operatorname{grade}_{I/(x)}M/xM=\operatorname{grade}_I M/xM=\operatorname{grade}_I M-1.</me>
              </p>
            </statement>
                
            <proof>
              <p>
                For the first equality, observe that any sequence <m>{\bf y}</m> in <m>I</m> is an <m>M/xM</m>-sequence if and only if its image <m>{\bf \overline{y}}</m> in <m>I/(x)</m> is an <m>M/xM</m>-sequence. 
                For the second equality, we have by Theorem <xref ref="thm-63"/> and Proposition <xref ref="prop-62" />, 
                <me>\operatorname{grade}_I M/xM=g(R/I,M/xM)=g(R/I,M)-1=\operatorname{grade}_I M-1.</me>
              </p>
            </proof> 
          </corollary>

          <definition xml:id="def-65">
            <statement>
              <p>
                Let <m>(R,m)</m> be a local ring and <m>M</m> a finitely generated <m>R</m>-module. 
                Then the <em>depth of <m>M</m></em>, denoted <m>\operatorname{depth}M</m>, is defined to be <m>\operatorname{grade}_m M</m>; 
                i.e., the length of the longest <m>M</m>-sequence from <m>R</m>.
              </p>
            </statement>
          </definition>

          <remark xml:id="rem-66"><!--xml:id="depth-Ext"-->
            <p>
              Let <m>R</m> be a local ring and <m>M</m> a finitely generated <m>R</m>-module. 
              By Theorem <xref ref="thm-63" />, we have 
              <me>\operatorname{depth}M=\inf \{n \mid \operatorname{Ext}^n_R(R/m,M)\neq 0\}.</me>
            </p>
          </remark>

          <p>
            <term>Note:</term> By convention, the depth of the zero module is infinity, since <m>\inf \emptyset = \infty</m>.
          </p>

          <theorem xml:id="thm-67"><title>Ischebeck's Theorem</title>
            <statement>
              <p>
                Let <m>(R,m)</m> be a local ring and <m>M</m> and <m>N</m> finitely generated <m>R</m>-modules. 
                Then <m>\operatorname{Ext}^i_R(M,N)=0</m> for <m>i&lt;\operatorname{depth}N - \operatorname{dim}M</m>.
              </p>
            </statement>

            <proof>
              <p>
                First, if either module is zero the result trivially holds. 
                So assume <m>M</m> and <m>N</m> are nonzero and let <m>d=\operatorname{dim}M</m>. If <m>d=0</m> then <m>M</m> has finite length. 
                Since <m>\operatorname{Ext}^i_R(R/m,N)=0</m> for all <m>i&lt;\operatorname{depth}N</m> by Remark <xref ref="rem-66" />, we have <m>\operatorname{Ext}^i_R(M,N)=0</m> for all <m>i&lt;\operatorname{depth}N</m> by Lemma <xref ref="bass3" />. 
                Hence, the result holds for the case <m>d=0</m>.
              </p>
  
              <p>
                Suppose <m>d&gt;0</m> and assume the result holds for all finitely generated modules of dimension less than <m>d</m>.
                Consider a filtration of <m>M</m>: 
                <me>0=M_0\subset M_1\subset \cdots \subset M_n=M</me> where <m>M_j/M_{j-1}\cong R/p_j</m> for some primes <m>p_1,\dots,p_n</m> of <m>R</m>. (See Grifo 905 :Theorem 6.33.) 
                Note that each <m>p_j</m> contains <m>\operatorname{Ann}_R M</m>, so <m>\operatorname{dim}R/p_j\leqslant d</m> for all <m>j</m>. 
                Hence, if we show <m>\operatorname{Ext}^i_R(R/p_j,N)=0</m> for all <m>i&lt;\operatorname{depth}N-\operatorname{dim}R/p_j</m> and all <m>j</m>, then we'll have <m>\operatorname{Ext}^i_R(M_j/M_{j-1},N)=0</m> for all <m>i&lt;\operatorname{depth}N-d</m> and all <m>j</m>. 
                Using the long exact sequences on <m>\operatorname{Ext}</m> arising from the short exact sequences 
                <me>0\to M_{j-1}\to M_j\to M_j/M_{j-1}\to 0,</me>
                we can conclude <m>\operatorname{Ext}^i_R(M_j,N)=0</m> for all <m>i&lt;\operatorname{depth}N-d</m>. 
                Since <m>M_n=M</m>, we'll be done.
              </p>
  
              <p>
                Thus, assume <m>M\cong R/p</m> for some prime <m>p</m> with <m>\operatorname{dim}R/p=d&gt;0</m>. 
                Since <m>p\subsetneq m</m>, let <m>x\in m\setminus p</m> and consider the short exact sequence 
                <me>0\to R/p\xrightarrow{x} R/p\to R/(p,x)\to 0.</me> 
                Since <m>\operatorname{dim}R/(p,x)\leqslant d-1</m>, we have <m>\operatorname{Ext}^i_R(R/(p,x), N)=0</m> for all <m>i&lt;\operatorname{depth}N-d+1</m> by the induction hypothesis. 
                Rewriting this, we have <m>\operatorname{Ext}^{i+1}_R(R/(p,x),N)=0</m> for all <m>i&lt;\operatorname{depth}N-d</m>. 
                From the long exact sequence on <m>\operatorname{Ext}</m>, we have 
                <me>\operatorname{Ext}^i_R(R/p,N)\xrightarrow{x} \operatorname{Ext}^i_R(R/p,N)\to \operatorname{Ext}^{i+1}_R(R/(p,x),N).</me> 
                By Nakayama's Lemma, we see that <m>\operatorname{Ext}^i_R(R/p,N)=0</m> for all <m>i&lt;\operatorname{depth}N-d</m>. 
                This completes the proof.
              </p></proof>
          </theorem>

          <corollary xml:id="thm-68">
            <statement>
              <p>
                Let <m>(R,m)</m> be a local ring and <m>M</m> a nonzero finitely generated <m>R</m>-module. 
                Then <m>\operatorname{depth}M\leqslant\operatorname{dim}R/p</m> for all <m>p\in \operatorname{Ass}_R M</m>. 
                In particular, <m>\operatorname{depth}M\leqslant\operatorname{dim}M</m>.
              </p>
            </statement>

            <proof>
              <p>
                Let <m>p\in \operatorname{Ass}_R M</m>. 
                Then <m>\operatorname{Ext}^0_R(R/p,M)=\operatorname{Hom}_R(R/p,M)\neq 0</m>. 
                By Theorem <xref ref="thm-67" />, <m>\operatorname{depth}M\leqslant\operatorname{dim}R/p</m>. ◻
              </p>
            </proof>
          </corollary>

          <example>
            <p>
                Let <m>k</m> be a field and <m>R=k[x_1,\dots,x_{d+1}]/(x_1,\dots,x_{d+1})(x_{d+1})</m>. 
                Let <m>m=(x_1,\dots,x_{d+1})R</m>. 
                Then <m>R_m</m> has depth zero and dimension <m>d</m>. 
                To see <m>\operatorname{depth}R_m=0</m>, note that <m>mx_{d+1}=0</m> in <m>R_m</m>, so <m>mR_m</m> consists of zero-divisors. 
                For <m>\operatorname{dim}R_m</m>, note that <m>\operatorname{dim}k[x_1,\dots,x_{d+1}]_m</m> is a <m>(d+1)</m>-dimensional domain, so <m>\operatorname{dim}R_m/I\leqslant d</m> for any nonzero ideal <m>I</m>. 
                On the other hand, <m>R_m/(x_{d+1})R_m\cong k[x_1,\dots,x_d]_{(x_1,\dots,x_d)}</m>, which has dimension <m>d</m>. 
                Thus, <m>\operatorname{dim}R_m\geqslant d</m>.
            </p> 
          </example>
          
        </section>

        <section xml:id="sec-depth-m2"><title>Macaulay2</title>

          <sage language="macaulay2">
            <input>
              loadPackage "Depth"
              A = QQ[x_1..x_3]/ideal(x_1^2, x_1*x_2)
              depth A
            </input>
          </sage>

          <sage language="macaulay2">
            <input>
              loadPackage "Depth"
              Q1 = QQ[x,y,z] / ideal(x^3-y*z, z^3)
              isCM Q1

              Q2 = QQ[x,y,z] / ideal(x*z,y*z);
              isCM Q2

              Q3 = QQ[x, y, z, w] / (ideal(x, y) + ideal(z, w));
              isCM Q3
            </input>
          </sage>

        </section>
        
      </chapter>

      <chapter xml:id="ch-cohen"><title>Cohen-Macaulay Rings</title>

        <section xml:id="sec-3"><title></title>

          <p>
            
          </p>
          
        </section>
        
      </chapter>

    </part>

    <part xml:id="part-locohom"><title>Local Cohomology</title>

      <chapter xml:id="ch-injective-modules"><title>Injective Modules</title>

        <section xml:id="sec-hulls"><title>Essential Extensions and Injective Hulls</title>

          <proposition xml:id="prop-2.11-2">
            <statement>
              <p>
                Let <m>\theta: M \rightarrow N</m> be a one-to-one map of <m>R</m>-modules. The following are equivalent:
                <ol>
                  <li>
                    <p>
                      For any map <m>\alpha: N \rightarrow L, \alpha \circ \theta</m> is one-to-one <m>\Rightarrow \alpha</m> is one-to-one. In particular, if <m>M \subseteq N</m>, then <m>\left.\alpha\right|_{M}</m> is one-to-one <m>\Rightarrow \alpha</m> is one-to-one.
                    </p>
                  </li>
          
                  <li>
                    <p>
                      Every nonzero submodule of <m>N</m> has a nonzero intersection with <m>\theta(M)</m>.
                    </p>
                  </li>
          
                  <li>
                    <p>
                      Every nonzero element of <m>N</m> has a nonzero multiple in <m>\theta(M)</m>.
                    </p>
                  </li>
                </ol>
              </p>
            </statement>

            <proof>
              <p>
                (1) <m>\Rightarrow</m> (2): 
                If <m>N^{\prime} \subseteq N</m> is nonzero, then <m>\alpha: N \rightarrow N / N^{\prime}</m> is not one-to-one, hence <m>\alpha \circ \theta: M \rightarrow</m> <m>N / N^{\prime}</m> is not either, so <m>M \cap N^{\prime} \neq 0</m>.
              </p>
        
              <p>
                <m>(2) \Rightarrow(3)</m>: 
                This is the special case of a cyclic submodule.
              </p>
        
              <p>
                <m>(3) \Rightarrow(1)</m>: Given a nonzero element in <m>n \in \operatorname{ker}(\alpha), n</m> has a nonzero multiple in <m>\theta(M)</m>, and any multiple of <m>n</m> is still in the kernel of <m>\alpha</m>.
              </p>
            </proof>
          </proposition>

          <definition xml:id="def-2.12-2"><title>Essential Extension</title>
            <statement>
              <p>
                A map <m>\theta</m> that satisfies the equivalent conditions above is called an <em>essential extension</em>. 
                We will often say that one module is an essential extension of another, meaning that the latter is a submodule, and the inclusion map is essential.
              </p>
            </statement>
          </definition>

          <p>
            Roughly, one can think of <m>A \subseteq B</m> is an essential extension as being something like a dual property to <m>A</m> being a generating set for <m>B</m> (even though generating sets aren't modules). 
            If <m>A \subseteq B</m> is essential, then anything in <m>B</m> can get multiplied back into <m>A</m>, whereas if <m>A</m> is a generating set for <m>B</m>, anything in <m>B</m> can be obtained by multiplying from elements in <m>A</m> (and adding).
          </p>

          <example>
            <p>
              Example 2.13. If <m>W</m> is a multiplicative set consisting of nonzerodivisors on <m>M</m>, then <m>W^{-1} M</m> is an essential extension of <m>M</m>. In particular, the fraction field of a domain is an essential extension of it.
            </p>
          </example>

          <example>
            <p>
              Example 2.14. If <m>M</m> is a (nonzero) <m>I</m>-torsion module, that is, every element of <m>M</m> is killed by a power of <m>I</m>, then <m>\operatorname{ann}_{M}(I) \subseteq M</m> is an essential extension.
            </p>
          </example>

          <definition xml:id="def-scole">
            <statement>
              <p>
                In particular, if <m>(R, \mathfrak{m})</m> is local and <m>M</m> is <m>\mathfrak{m}</m>-torsion, <m>\operatorname{ann}_{M}(\mathfrak{m})</m> is called the socle of <m>M</m>
              </p>
            </statement>
          </definition>

          <proposition xml:id="prop-scole">
            <statement>
              <p>
                <m>M</m> is an essential extension of its socle.
              </p>
            </statement>

            <proof>
              <p>
                Given <m>m \in M</m>, we have that <m>\operatorname{Ass}(R m) \subseteq \operatorname{Ass}(M){ }^{2}</m>.
                <fn>For a not-necessarily-finitely-generated module <m>M, \operatorname{Ass}(M)</m> is the set of primes <m>\mathfrak{q}</m> such that <m>R / \mathfrak{q}</m> embeds into <m>M</m>. Any nonzero module has an associated prime: this reduces to the finitely generated case by considering a nonzero finitely generated submodule.</fn>
                Since <m>M</m> is <m>I</m>-torsion, <m>\operatorname{Ass}(M) \subseteq V(I)</m>. Let <m>\mathfrak{p} \in \operatorname{Ass}(R m)</m>, and <m>x \in R m</m> such that <m>\operatorname{ann}(x)=\mathfrak{p}</m>. 
                Then <m>x</m> is a nonzero multiple of <m>m</m> that is killed by <m>I</m>.
              </p>
            </proof>
          </proposition>

          <proposition xml:id="prop-2.15-2">
            <statement>
              <p>
                Let <m>L \subseteq M \subseteq N</m> be <m>R</m>-modules.
                <ol>
                  <li>
                    <p>
                      <m>L \subseteq N</m> is essential if and only if <m>L \subseteq M</m> and <m>M \subseteq N</m> are essential.
                    </p>
                  </li>
          
                  <li>
                    <p>
                      If <m>M \subseteq N_{i} \subseteq N</m> and <m>N=\bigcup N_{i}</m>, then <m>M \subseteq N</m> is essential if and only if each <m>M \subseteq N_{i}</m> is essential.
                    </p>
                  </li>
          
                  <li>
                    <p>
                      There is a unique <m>N^{\prime}</m> such that <m>M \subseteq N^{\prime} \subseteq N</m> that is maximal with respect to the property that <m>M \subseteq N^{\prime}</m> is essential.
                    </p>
                  </li>
                </ol>
              </p>
            </statement>
          </proposition>

          <definition xml:id="def-2.16-2">
            <statement>
              <p>
                A module <m>N^{\prime}</m> as in (3) above is called a maximal essential extension of <m>M</m> in <m>N</m>.
                If <m>M \subseteq N</m> is essential, and <m>N</m> has no proper essential extensions, then we say that <m>N</m> is a maximal essential extension of <m>M</m>.
                For a not-necessarily-finitely-generated module <m>M, \operatorname{Ass}(M)</m> is the set of primes <m>\mathfrak{q}</m> such that <m>R / \mathfrak{q}</m> embeds into <m>M</m>. 
                Any nonzero module has an associated prime: this reduces to the finitely generated case by considering a nonzero finitely generated submodule.
              </p>
            </statement>
          </definition>
    
          <p>
            Beware that there are two notions of maximal essential extension above: a relative version that takes place inside another module, and an absolute version.
          </p>

          <proposition xml:id="prop-2.17-2">
            <statement>
              <p>
                Let <m>M</m> be an <m>R</m>-module. The following are equivalent:
                <ol>
                  <li>
                    <p>
                      <m>M</m> is an injective module
                    </p>
                  </li>
          
                  <li>
                    <p>
                      every one-to-one map <m>M \rightarrow N</m> splits
                    </p>
                  </li>
          
                  <li>
                    <p>
                      <m>M</m> has no proper essential extensions
                    </p>
                  </li>
                </ol>
              </p>
            </statement>

            <proof>
              <p>
                (1) <m>\Rightarrow(2)</m>: 
                The identity map <m>M \rightarrow M</m> extends to a map <m>N \rightarrow M</m> by the definition of injective.
              </p>
        
              <p>
                <m>(2) \Rightarrow(3)</m>:
                It suffices to note that <m>M \subseteq M \oplus M^{\prime}</m> is not essential: <m>\left(0, m^{\prime}\right)</m> has no nonzero multiple in (the image of) <m>M</m>.
              </p>
        
              <p>
                <m>(3) \Rightarrow(1)</m>: 
                Embed <m>M</m> in an injective module, <m>E</m>. 
                By Zorn's lemma, there is a maximal submodule <m>N</m> of <m>E</m> such that <m>M \cap N=0</m>. 
                Then, <m>M \rightarrow E / N</m> is essential, and by hypothesis, an isomorphism. 
                Then, <m>E=M+N=M \oplus N</m>. 
                Since <m>M</m> is a direct summand of an injective module, <m>M</m> is injective.
              </p>
            </proof>
          </proposition>

          <p>
            In particular, any maximal essential extension in the absolute sense is an injective module.
          </p>

          <proposition xml:id="prop-2.18-2">
            <statement>
              <p>
                Let <m>M</m> be an <m>R</m>-module. 
                If <m>E</m> is an injective module with <m>M \subseteq E</m>, then the maximal essential extension of <m>M</m> in <m>E</m> is an injective module. 
                All maximal essential extensions of <m>M</m> are isomorphic.
              </p>
            </statement>

            <proof>
              <p>
                Let <m>E^{\prime}</m> be a maximal essential extension of <m>M</m> in <m>E</m>, and <m>Q</m> be an essential extension of <m>E^{\prime}</m> (possibly not in <m>E</m> ). 
                Since <m>E</m> is injective, the inclusion of <m>E^{\prime} \subseteq E</m> extends to a map from <m>Q \rightarrow E</m>. 
                Since <m>E^{\prime} \rightarrow E</m> was one-to-one, and <m>E^{\prime} \rightarrow Q</m> essential, <m>Q</m> to <m>E</m> is one-to-one. 
                By definition of <m>E^{\prime}</m>, we have <m>E^{\prime}=Q</m>. 
                Thus, <m>E^{\prime}</m> is an absolute maximal essential extension of <m>M</m>, hence an injective module.
              </p>
        
              <p>
                Let <m>E^{\prime}</m> and <m>E^{\prime \prime}</m> be two maximal essential extensions of <m>M</m>. 
                The map from <m>M \rightarrow E^{\prime \prime}</m> extends to a map <m>\varphi: E^{\prime} \rightarrow E^{\prime \prime}</m>. 
                Since <m>E^{\prime}</m> is an essential extension of <m>M</m> and <m>M \rightarrow E^{\prime \prime}</m> is one-to-one, <m>\varphi: E^{\prime} \rightarrow E^{\prime \prime}</m> is one-to-one. 
                Since <m>E^{\prime}</m> is injective, <m>E^{\prime \prime}=\varphi\left(E^{\prime}\right) \oplus C</m> for some <m>C</m>. 
                Since <m>\varphi\left(E^{\prime}\right) \rightarrow E^{\prime \prime}</m> is essential, <m>C=0</m>.
              </p>
            </proof>
          </proposition>

          <definition xml:id="def-2.19-2">
            <statement>
              <p>
                An injective hull or injective envelope of an <m>R</m>-module <m>M</m> is a maximal essential extension of <m>M</m>. 
                By the previous proposition, this is well-defined up to isomorphism. 
                We write <m>E_{R}(M)</m> for an injective hull of <m>M</m>.
              </p>
            </statement>
          </definition>

          <definition xml:id="def-2.20-2">
            <statement>
              <p>
                A minimal injective resolution of an <m>R</m>-module <m>M</m> is an injective resolution <m>M \rightarrow E^{\bullet}</m> of <m>M</m> in which <m>E^{0}=E_{R}(M)</m>, and <m>E^{i}=E_{R}\left(\operatorname{coker}\left(\partial_{E^{\bullet}}^{i}\right)\right)</m> for each <m>i&gt;0</m>.
              </p>
            </statement>
          </definition>

          <example>
            <p>
              Example 2.21.
              <me>0(\rightarrow \mathbb{Z}) \rightarrow \mathbb{Q} \rightarrow \mathbb{Q} / \mathbb{Z} \rightarrow 0</me>
            </p>
      
            <p>
              is a minimal injective resolution of <m>\mathbb{Z}</m> as a <m>\mathbb{Z}</m>-module.
            </p>
          </example>

        </section>

        <section xml:id="sec-injective-noetherian"><title>Injective Modules in Noetherian Rings</title>

          <p>
            So far, our observations on injectives are very general. 
            For noetherian rings, there is a beautiful structure theory of injective modules due to Bass. 
            To prepare for the first step, we note:
          </p>

          <lemma xml:id="lem-2.22-2">
            <statement>
              <p>
                If <m>M</m> is a finitely generated <m>R</m>-module, and <m>\left\{N_{i}\right\}_{i \in I}</m> is an arbitrary family of <m>R</m> modules, then
                <me>\operatorname{Hom}_{R}\left(M, \bigoplus_{i \in I} N_{i}\right) \cong \bigoplus_{i \in I} \operatorname{Hom}_{R}\left(M, N_{i}\right)</me>
              </p>

              <p>
                If <m>N_{0} \subseteq N_{1} \subseteq N_{2} \subseteq \cdots</m>, then
              </p>
        
              <p>
                <me>\operatorname{Hom}_{R}\left(M, \bigcup_{i \in \mathbb{N}} N_{i}\right) \cong \bigcup_{i \in \mathbb{N}} \operatorname{Hom}_{R}\left(M, N_{i}\right)</me>
              </p>
            </statement>
          </lemma>

          <proposition xml:id="prop-2.23-2">
            <statement>
              <p>
                If <m>R</m> is noetherian, then every direct sum of injective <m>R</m>-modules is injective.
              </p>
            </statement>

            <proof>
              <p>
                Let <m>\left\{E_{i}\right\}_{i \in I}</m> be a family of injective modules. 
                For an ideal <m>\mathfrak{a}</m> and any <m>i, \operatorname{Hom}_{R}\left(R, E_{i}\right) \rightarrow</m> <m>\operatorname{Hom}_{R}\left(\mathfrak{a}, E_{i}\right)</m> is surjective. 
                Applying the previous lemma and the hypothesis that <m>\mathfrak{a}</m> is finitely generated, the composition
                <me>\operatorname{Hom}_{R}\left(R, \bigoplus_{i \in I} E_{i}\right) \cong \bigoplus_{i \in I} \operatorname{Hom}_{R}\left(R, E_{i}\right) \rightarrow \bigoplus_{i \in I} \operatorname{Hom}_{R}\left(\mathfrak{a}, E_{i}\right) \cong \operatorname{Hom}_{R}\left(\mathfrak{a}, \bigoplus_{i \in I} E_{i}\right)</me>
                is surjective. 
                By Baer's criterion, <m>\bigoplus_{i \in I} E_{i}</m> is injective.
              </p>
            </proof>
          </proposition>

          <paragraphs><title>Associated Primes</title>

            <p>
              Evidently, the injective hulls of prime cyclic modules, <m>E_{R}(R / \mathfrak{p})</m>, are injective modules. 
              They will be the building blocks in the structure theory. Both to that end and for our purposes later, we will want to understand their structure. 
              We collect some of their key properties here.
            </p>
      
            <p>
              Before we do this, we recall some facts about modules that are not necessarily finitely generated.
            </p>
      
            <p>
              Recall that <m>\mathfrak{p}</m> is an associated prime of a module <m>M</m> if there is an embedding <m>R / \mathfrak{p} \hookrightarrow M</m>; 
              we write <m>\operatorname{Ass}(M)</m> for the set of associated primes of <m>M</m>. For a general module,
              <ul>
                <li>
                  <p>
                    <m>\operatorname{Ass}(M)</m> need not be finite, and
                  </p>
                </li>
        
                <li>
                  <p>
                    <m>\bigcap_{\mathfrak{p} \in \operatorname{Ass}(M)} \mathfrak{p}</m> does not necessarily agree with <m>\sqrt{\operatorname{ann}_{R}(M)}</m>.
                  </p>
                </li>
              </ul>
            </p>
      
            <p>
              However, <m>M \subseteq N</m> implies <m>\operatorname{Ass}(M) \subseteq \operatorname{Ass}(N)</m>, and if <m>R</m> is noetherian,
            </p>
      
            <p>
              <ul>
                <li>
                  <p>
                    if <m>M \neq 0</m>, then <m>\operatorname{Ass}(M) \neq \varnothing</m>, and
                  </p>
                </li>
      
                <li>
                  <p>
                    <m>\operatorname{Supp}(M)=\{\mathfrak{q} \in \operatorname{Spec}(R) \mid \mathfrak{q} \supseteq \mathfrak{p}</m> for some <m>\mathfrak{p} \in \operatorname{Ass}(M)\}</m>.
                  </p>
                </li>
              </ul>
            </p>
      
            <p>
              Proof. 
              For the first, take some nonzero <m>m \in M ; \varnothing \neq \operatorname{Ass}(R m) \subseteq \operatorname{Ass}(M)</m>. 
              For the second, we note that <m>(R / \mathfrak{p})_{\mathfrak{q}} \neq 0</m> if <m>\mathfrak{q} \subseteq \mathfrak{p}</m>, which yields " <m>\supseteq</m>," and if <m>x / 1 \neq 0</m> in <m>M_{\mathfrak{q}}</m>, then <m>\mathfrak{q}</m> must contain an associated prime of <m>R x</m>, which is an associated prime of <m>M</m>.
            </p>
            
          </paragraphs>

          <paragraphs><title><m>I</m>-torsion</title>

            <p>
              A module <m>M</m> is <m>I</m>-torsion if for every <m>m \in M, \exists N</m> such that <m>I^{N} m=0</m>. 
              This does not necessarily imply that there is some <m>N</m> such that <m>I^{N} M=0</m>. If <m>R</m> is noetherian and <m>I=\left(f_{1}, \ldots, f_{t}\right)</m> then the following are equivalent:
            </p>
      
            <p>
              <ul>
                <li>
                  <p>
                    <m>M</m> is <m>I</m>-torsion;
                  </p>
                </li>
      
                <li>
                  <p>
                    <m>\forall m \in M</m>, there is an <m>N</m> such that <m>f_{i}^{N} m=0</m> for all <m>i</m>;
                  </p>
                </li>
      
                <li>
                  <p>
                    <m>\forall \mathfrak{p} \in \operatorname{Ass}(M), \mathfrak{p} \supseteq I</m>.
                  </p>
                </li>
              </ul>
            </p>
      
            <p>
              Proof. 
              For the equivalence of the first two, we note that <m>I^{N t} \subseteq\left(f_{1}^{N}, \ldots, f_{t}^{N}\right) \subseteq I^{N}</m>, so a large power of <m>I</m> kills an element iff large powers of each <m>f_{i}</m> do. 
              This uses finite generation in a crucial way. 
              The first implies the third since <m>I</m> contains a nonzerodivisor on the domain <m>R / \mathfrak{q}</m>, and any power of this element does not kill the generator of <m>R / \mathfrak{q}</m>. 
              The third implies the first, since, for each <m>x \in M</m>, the associated primes of the cyclic module <m>R x</m> all are contained in <m>I</m>, so <m>\sqrt{\operatorname{ann}(x)}=\bigcap_{\mathfrak{p} \in \operatorname{Ass}(R x)} \mathfrak{p} \subseteq</m> <m>I</m>.
            </p>
            
          </paragraphs>

          <lemma xml:id="lem-2.24-2">
            <statement>
              <p>
                If <m>M \subseteq N</m> is an essential extension, then <m>\operatorname{Ass}(M)=\operatorname{Ass}(N)</m>.
              </p>
            </statement>

            <proof>
              <p>
                We only need to see that an associated prime of <m>N</m> is also associated to <m>M</m>. 
                If <m>x</m> generates a cyclic submodule of <m>N</m> isomorphic to <m>R / \mathfrak{p}</m>, then any nonzero multiple of <m>x</m> does as well; 
                since <m>x</m> has a nonzero multiple in <m>M</m>, we are done.
              </p>
            </proof>
          </lemma>

          <theorem xml:id="thm-2.25-2">
            <statement>
              <p>
                Let <m>\mathfrak{p}</m> be a prime in a noetherian ring <m>R</m>. 
                Let <m>\kappa</m> be the fraction field of <m>R / \mathfrak{p}</m> (equivalently, the residue field of <m>R_{\mathfrak{p}}</m>.) 
                Let <m>E=E_{R}(R / \mathfrak{p})</m> be an injective hull for <m>R / \mathfrak{p}</m>.
              </p>
        
              <p>
                <ol>
                  <li>
                    <p>
                      If <m>x \in R \backslash \mathfrak{p}</m>, then <m>E \stackrel{x}{\rightarrow} E</m> is an isomorphism, hence <m>E=E_{\mathfrak{p}}</m>.
                    </p>
                  </li>
        
                  <li>
                    <p>
                      <m>\operatorname{ann}_{E}(\mathfrak{p})=\kappa</m>.
                    </p>
                  </li>
        
                  <li>
                    <p>
                      <m>\kappa \subseteq E</m> is an essential extension of <m>R_{\mathfrak{p}}</m>-modules and <m>E</m> is an injective hull of <m>\kappa</m> as an <m>R_{\mathfrak{p}}</m>-module.
                    </p>
                  </li>
        
                  <li>
                    <p>
                      <m>E</m> is <m>\mathfrak{p}</m>-torsion, and <m>\operatorname{Ass}(E)=\{\mathfrak{p}\}</m>.
                    </p>
                  </li>
          
                  <li>
                    <p>
                      <m>\operatorname{Hom}_{R_{\mathfrak{p}}}(\kappa, E) \cong \kappa</m> and <m>\operatorname{Hom}_{R_{\mathfrak{p}}}\left(\kappa, E_{R}(R / \mathfrak{q})_{\mathfrak{p}}\right)=0</m> for another prime <m>\mathfrak{q} \neq \mathfrak{p}</m>.
                    </p>
                  </li>
                </ol>
              </p>
            </statement>
          </theorem>

          <proof>
            <p>
              Proof. 4. This is immediate from the previous lemma and the discussion above it.
            </p>
      
            <p>
              <ol>
                <li>
                  <p>
                    By Example ??, <m>R / \mathfrak{p} \subseteq \kappa</m> is an essential extension, so <m>E</m> must contain a copy of <m>\kappa</m>; we identify <m>\kappa</m> with its isomorphic copy in <m>E: R / \mathfrak{p} \subseteq \kappa \subseteq E</m> are all essential. Since multiplication by <m>x</m> is one-to-one on <m>\kappa</m>, it must be one-to-one on its essential extension <m>E</m>. Then, the submodule <m>x E \cong E</m> is injective, so a direct summand of <m>E</m>. But, since <m>\kappa \subseteq x E \subseteq E</m> is essential, <m>E</m> cannot decompose as a nontrivial direct sum, so <m>x E=E</m>.
                  </p>
                </li>
      
                <li>
                  <p>
                    By part (1), <m>\operatorname{ann}_{E}(\mathfrak{p})=\operatorname{ann}_{E}\left(\mathfrak{p} R_{\mathfrak{p}}\right)</m> is a <m>\kappa</m>-vector space, and contains the copy of <m>\kappa</m> we found earlier, so <m>\kappa \subseteq \operatorname{ann}_{E}(\mathfrak{p})</m> splits. Since the extensions <m>\kappa \subseteq \operatorname{ann}_{E}(\mathfrak{p}) \subseteq E</m> are essential, <m>\operatorname{ann}_{E}(\mathfrak{p})</m> cannot decompose as a nontrivial direct sum of <m>\kappa</m>-vector spaces.
                  </p>
                </li>
      
                <li>
                  <p>
                    Since <m>\kappa \subseteq E</m> is essential as <m>R</m>-modules, it is clearly essential as <m>R_{\mathfrak{p}}</m>-modules. (Any nonzero element has a nonzero <m>R</m>-multiple, hence a nonzero <m>R_{\mathfrak{p}}</m>-multiple in the submodule.) To see that <m>E</m> is a maximal essential extension of <m>\kappa</m> as an <m>R_{\mathfrak{p}}</m>-module, let <m>E \subseteq M</m> be an essential extension of <m>R_{\mathfrak{p}}</m>-modules. For any nonzero <m>m \in M</m>, there is some nonzero multiple <m>(r / s) m</m> in <m>E</m>, with <m>s \notin \mathfrak{p}</m>. Then <m>r m</m> is a nonzero multiple of <m>m</m> in <m>E</m>, so <m>E \subseteq M</m> is an essential extension as <m>R</m>-modules, so <m>M=E</m>.
                  </p>
                </li>
        
                <li>
                  <p>
                    We recall that <m>\operatorname{Hom}_{R_{\mathfrak{p}}}\left(R_{\mathfrak{p}} / \mathfrak{p} R_{\mathfrak{p}}, M\right)</m> can be identified with the submodule of <m>M</m> consisting of elements killed by <m>\mathfrak{p} R_{\mathfrak{p}}</m>.
                  </p>
                </li>
              </ol>
            </p>
      
            <p>
              Then, the first isomorphism follows from part (2) applied in <m>R_{\mathfrak{p}}</m>.
            </p>
      
            <p>
              Set <m>E^{\prime}=E_{R}(R / \mathfrak{q})</m>. 
              By (4), <m>E_{\mathfrak{p}}^{\prime} \neq 0</m> only if <m>\mathfrak{q} \subseteq \mathfrak{p}</m>. 
              By <m>(1), E_{\mathfrak{p}}^{\prime}=E_{R_{\mathfrak{p}}}\left(R_{\mathfrak{p}} / \mathfrak{q} R_{\mathfrak{p}}\right)</m>, which by (4) has <m>\mathfrak{q} R_{\mathfrak{p}}</m> as its only associated prime; in particular, no element is killed by <m>\mathfrak{p} R_{\mathfrak{p}}</m>, so the hom is zero.
            </p>
          </proof>
    
          <p>
            We can now prove the structure theorem for injective modules.
          </p>

          <theorem xml:id="thm-2.26-2">
            <statement>
              <p>
                Let <m>R</m> be a noetherian ring and <m>E</m> an injective <m>R</m>-module. 
                There is a direct sum decomposition
                <me>E \cong \bigoplus_{\mathfrak{p} \in \operatorname{Spec}(R)} E_{R}(R / \mathfrak{p})^{\mu_{\mathfrak{p}}}</me>
                and the multiplicities <m>\mu_{\mathfrak{p}}</m> are uniquely determined by the formula <m>\mu_{\mathfrak{p}}=\operatorname{dim}_{\kappa(\mathfrak{p})} \operatorname{Hom}_{R_{\mathfrak{p}}}\left(\kappa(\mathfrak{p}), E_{\mathfrak{p}}\right)</m>, where <m>\kappa(\mathfrak{p})=R_{\mathfrak{p}} / \mathfrak{p} R_{\mathfrak{p}}</m>.
              </p>
            </statement>

            <proof>
              <p>
                By Zorn's lemma, there is a submodule <m>E^{\prime}</m> (not a priori nonzero) of <m>E</m> that is
                <ul>
                  <li>
                    <p>
                      isomorphic to a direct sum of injective hulls of prime cyclic modules: <m>E^{\prime} \cong \oplus_{\mathfrak{p}} E_{R}(R / \mathfrak{p})^{\eta_{\mathfrak{p}}}</m>,
                    </p>
                  </li>
        
                  <li>
                    <p>
                      and no other submodule of <m>E</m> contains <m>E^{\prime}</m> and admits a decomposition of this form.
                    </p>
                  </li>
                </ul>
              </p>
        
              <p>
                By Proposition ??, <m>E^{\prime}</m> is injective, so we can write <m>E=E^{\prime} \oplus C</m> for some <m>C</m>. 
                If <m>E^{\prime \prime} \neq 0</m>, take <m>\mathfrak{p} \in \operatorname{Ass}\left(E^{\prime \prime}\right)</m>. 
                The inclusion map <m>R / \mathfrak{p} \rightarrow E^{\prime \prime}</m> extends along the inclusion <m>R / \mathfrak{p} \subseteq E_{R}(R / \mathfrak{p})</m> to a map <m>E_{R}(R / \mathfrak{p})</m> since <m>E^{\prime \prime}</m> is injective; 
                since the inclusion is essential, <m>E_{R}(R / \mathfrak{p})</m> embeds into <m>E^{\prime \prime}</m>. 
                Since <m>E_{R}(R / \mathfrak{p})</m> is injective, it splits from <m>E^{\prime \prime}</m>, and we contradict the maximality of <m>E^{\prime}</m>. 
                Thus, a decomposition as promised exists. Given such a decomposition, the formulas for <m>\mu(\mathfrak{p})</m> follow from part (5) of the previous theorem.
              </p>
            </proof>
          </theorem>
          
          <p>
            Thus, injective modules are uniquely determined by a multiplicity for each prime. This structural data, for the modules appearing in a minimal injective resolution of a module, are called Bass numbers.
          </p>

          <definition xml:id="def-2.27-2">
            <statement>
              <p>
                (Bass numbers). 
                Let <m>R</m> be a noetherian ring, and <m>M</m> an <m>R</m>-module. Given a minimal injective resolution
                <me>0 \rightarrow(M \rightarrow) E^{0} \rightarrow E^{1} \rightarrow E^{2} \rightarrow \cdots</me>
                and decompositions
                <me>E^{i} \cong \bigoplus_{\mathfrak{p} \in \operatorname{Spec}(R)} E_{R}(R / \mathfrak{p})^{\mu(i, \mathfrak{p})}</me>
                we call <m>\mu(i, \mathfrak{p})</m> the <m>\mathrm{i}</m>-th Bass number of <m>M</m> with respect to <m>\mathfrak{p}</m>.
              </p>
            </statement>
          </definition>

          <theorem xml:id="thm-2.28-2">
            <statement>
              <p>
                Let <m>R</m> be a noetherian ring, and <m>M</m> an <m>R</m>-module. 
                The Bass numbers of <m>M</m> can be computed as
                <me>\mu(i, \mathfrak{p})=\operatorname{dim}_{\kappa(\mathfrak{p})} \operatorname{Ext}_{R_{\mathfrak{p}}}^{i}\left(\kappa(\mathfrak{p}), M_{\mathfrak{p}}\right) \quad \text { where } \quad \kappa(\mathfrak{p})=R_{\mathfrak{p}} / \mathfrak{p} R_{\mathfrak{p}}</me>
              </p>
            </statement>

            <proof>
              <p>
                Given a minimal injective resolution
                <me>0 \rightarrow(M \rightarrow) E^{0} \rightarrow E^{1} \rightarrow E^{2} \rightarrow \cdots</me>
                we leave it as an exercise to check that
                <me>0 \rightarrow\left(M_{\mathfrak{p}} \rightarrow\right) E_{\mathfrak{p}}^{0} \rightarrow E_{\mathfrak{p}}^{1} \rightarrow E_{\mathfrak{p}}^{2} \rightarrow \cdots</me>
                is a minimal injective resolution of <m>M_{\mathfrak{p}}</m> as an <m>R_{\mathfrak{p}}</m>-module, and that the number of copies of <m>E_{R}(R / \mathfrak{p})</m> in <m>E^{i}</m> is the same as the number of copies of <m>E_{R}(R / \mathfrak{p})</m> in <m>E_{\mathfrak{p}}^{i}</m>. 
                We compute the Ext modules in the statement from the latter injective resolution:
                <me>\operatorname{Ext}_{R_{\mathfrak{p}}}^{i}(\kappa(\mathfrak{p}), M)=H^{i}\left(0 \rightarrow \operatorname{Hom}_{R_{\mathfrak{p}}}\left(\kappa(\mathfrak{p}), E_{\mathfrak{p}}^{0}\right) \rightarrow \operatorname{Hom}_{R_{\mathfrak{p}}}\left(\kappa(\mathfrak{p}), E_{\mathfrak{p}}^{1}\right) \rightarrow \operatorname{Hom}_{R_{\mathfrak{p}}}\left(\kappa(\mathfrak{p}), E_{\mathfrak{p}}^{2}\right) \rightarrow \cdots\right)</me>
              </p>
        
              <p>
                Claim. The differentials in the complex above are zero.
              </p>
        
              <p>
                We need to show that for any <m>R_{\mathfrak{p}}</m>-linear <m>\alpha: \kappa(\mathfrak{p}) \rightarrow E_{\mathfrak{p}}^{i}</m>, the composition <m>\delta^{i} \circ \alpha: \kappa(\mathfrak{p}) \rightarrow E_{\mathfrak{p}}^{i+1}</m> is the zero map. 
                Let <m>x \in \kappa(\mathfrak{p})</m>, and suppose that <m>\alpha(x) \neq 0</m> in <m>E_{\mathfrak{p}}^{i}</m>. 
                The minimality of the injective resolution implies that <m>\alpha(x)</m> has a nonzero multiple in the image of <m>\delta^{i-1}</m>. 
                Since <m>\kappa</m> is a field, this implies that <m>\alpha(x)</m> is in the image of <m>\delta^{i-1}</m>, and hence in the kernel of <m>\delta^{i}</m>, establishing the claim.
              </p>
        
              <p>
                The proof of the theorem is now immediate, since the homology of the complex in the i-th spot is <m>\operatorname{Hom}_{R_{\mathfrak{p}}}\left(\kappa(\mathfrak{p}), E_{\mathfrak{p}}^{i}\right)</m>, which, by the previous theorem, is a <m>\kappa(\mathfrak{p})</m>-vector space of rank <m>\mu(i, \mathfrak{p})</m>.
              </p>
            </proof>
          </theorem>

          <corollary xml:id="cor-2.29-2">
            <statement>
              <p>
                If <m>R</m> is noetherian, and <m>M</m> is a finitely generated <m>R</m>-module, all of the Bass numbers of <m>M</m> are finite.
              </p>
            </statement>

            <proof>
              <p>
                We can compute <m>\mu(i, \mathfrak{p})</m> by taking a minimal free resolution of <m>\kappa(\mathfrak{p})</m>, applying <m>\operatorname{Hom}_{R_{\mathfrak{p}}}\left(-, M_{\mathfrak{p}}\right)</m>, and computing homology. 
                The complex we obtain consists of finitely generated modules, so its homology modules are finitely generated modules.
              </p>
            </proof>
          </corollary>

          <example>
            <p>
              Example 2.30. 
              Let's compute the Bass numbers of <m>\mathbb{Z}</m> as a <m>\mathbb{Z}</m>-module. 
              We claim that
              <me>\mathbb{Q} / \mathbb{Z} \cong \underset{p \text { prime }}{\bigoplus} \mathbb{Z}[1 / p] / \mathbb{Z} \cong \bigoplus_{\mathfrak{p} \in \operatorname{Spec}(\mathbb{Z}) \backslash\{(0)\}} E_{\mathbb{Z}}(\mathbb{Z} / p \mathbb{Z})</me>
            </p>
      
            <p>
              To see the first isomorphism, consider an element <m>[m / n] \in \mathbb{Q} / \mathbb{Z}</m> with <m>m / n</m> in lowest terms. 
              We want to see that <m>[m / n]</m> has a unique expression as a sum of elements of <m>\mathbb{Z}[1 / p] / \mathbb{Z}</m>. 
              We can discard any terms with denominators <m>q</m> not dividing <m>n</m>, since <m>(1 / q \cdot \mathbb{Z}) \cap(1 / n \cdot \mathbb{Z})=\mathbb{Z}</m>. 
              Write <m>n=p_{1}^{e_{1}} \cdots p_{n}^{e_{n}}</m>. 
              Then, by the Chinese remainder theorem
              <me>
                \begin{aligned}
                  &amp; \frac{m}{n} \equiv \sum_{i} \frac{a_{i}}{p_{i}^{e_{i}}} \\
                  &amp; m \equiv \sum_{i} a_{i} p_{1}^{e_{1}} \cdots \widehat{p_{i}^{e_{i}}} \cdots p_{n}^{e_{n}} \\
                  &amp; (\bmod 1) \\
                  &amp; (\bmod n) \\
                  &amp; \left\{\begin{array}{c}
                  m \equiv a_{1} \widehat{p_{1}^{e_{1}}} \cdots p_{i}^{e_{i}} \cdots p_{n}^{e_{n}} \quad\left(\bmod p_{1}^{e_{1}}\right) \\
                  \vdots \quad \vdots \quad \vdots \\
                  m \equiv a_{n} p_{1}^{e_{1}} \cdots p_{i}^{e_{i}} \cdots \widehat{p_{n}^{e_{n}}} \quad\left(\bmod p_{n}^{e_{n}}\right)
                  \end{array}\right.
                \end{aligned}
              </me>
            </p>
      
            <p>
              In each of these congruence equations, the product of prime powers on the RHS is a unit, so we can solve uniquely for each <m>a_{i} \bmod p_{i}^{e_{i}}</m>; 
              that is, each <m>\left[a_{i} / p_{i}^{e_{i}}\right] \in \mathbb{Z}[1 / p] / \mathbb{Z}</m> is uniquely determined. 
              This establishes the first isomorphism.
            </p>
      
            <p>
              For the second, it suffices to note that <m>\mathbb{Z}[1 / p] / \mathbb{Z}</m> is divisible (check it!), that it is <m>p</m>-torsion (clear), and that the annihilator of <m>p</m> in this module is isomorphic to <m>\mathbb{Z} / p \mathbb{Z}</m>. 
              From these observations, we see that the module is injective by Proposition ??, and that it is an essential extension of <m>\mathbb{Z} / p \mathbb{Z}</m> by Example ??.
            </p>
      
            <p>
              We conclude that the Bass numbers of <m>\mathbb{Z}</m> are
              <me>\mu(0, \mathfrak{p})=\left\{\begin{array}{ll}
                1 &amp; \text { if } \mathfrak{p}=(0) \\
                0 &amp; \text { if } \mathfrak{p}=(p) \neq(0)
                \end{array} \quad \text { and } \mu(1, \mathfrak{p})= \begin{cases}0 &amp; \text { if } \mathfrak{p}=(0) \\
                1 &amp; \text { if } \mathfrak{p}=(p) \neq(0)\end{cases}\right.
              </me>
            </p>
      
            <p>
              Each Bass number here is either 0 or 1 . 
              We caution that the "total first Bass number," the sum of the first Bass numbers, is infinite.
            </p>
          </example>

          <p>
            We note also that this 116 esque game of writing a fraction as a sum of fractions with pure-power denominators is very closely related to the calculation of local cohomology.
          </p>
    
          <p>
            We now know that the indecomposable injectives of a noetherian ring are all of the form <m>E_{R}(R / \mathfrak{p})</m>, that every injective is (in a unique way) a direct sum of these, and finitely generated modules all have injective resolutions in which each injective has a finite number of copies of <m>E_{R}(R / \mathfrak{p})</m> in its direct sum decomposition. 
            We also know many of the key structural properties of <m>E_{R}(R / \mathfrak{p})</m>, as collected in Theorem ??.
          </p>
    
          <p>
            We will want to have a better understanding of <m>E_{R}(k)</m> for the residue field of a local ring in order to the develop the duality theory hinted at on the first day of class. 
            We note that this encompasses any indecomposable injective <m>E_{S}(S / \mathfrak{p})</m> : by part (3) of Theorem ??, <m>E_{S}(S / \mathfrak{p})=E_{R}(k)</m> for <m>R=S_{\mathfrak{p}}</m> and <m>k</m> the residue field of <m>R</m>. 
            We will pursue this with a little bit of redundancy. 
            First, we will discuss a model for <m>E_{R}(k)</m> when <m>R</m> has a coefficient field (e.g., when <m>R</m> is complete) and the Matlis duality functor in that setting. 
            Then, we will develop the duality theory in full generality.
          </p>
          
        </section>

        <section xml:id="sec-mathis"><title>Mathis Duality</title>

          <p></p>
          
        </section>
        
      </chapter>

      <chapter xml:id="ch-loco"><title>Local Cohomology</title>

        <section xml:id="sec-def-loco"><title>Definitions of Local Cohomology</title>
          
          <p>
            Recall that we defined <m>\mathrm{H}_{I}^{i}(M):=R^{i} \Gamma_{I}(M)</m>. 
            Now, with the theory of injectives we have so far, we can prove some properties about these functors. 
            But first we want to collect some other definitions of local cohomology. 
            Some of our descriptions involve direct limits. 
            We recall a couple of facts about direct limits.
          </p>

          <definition xml:id="def-3.1-2">
            <statement>
              <p>
                Given a directed system of modules
                <me>\left(M_{i}\right)_{i \in \mathbb{N}}=\left(\cdots \longrightarrow M_{i} \longrightarrow M_{i+1} \longrightarrow \cdots\right)</me>
                its direct limit is the module <m>M=\lim _{i \in \mathbb{N}} M_{i}</m>, equipped with maps <m>\iota_{i}: M_{i} \rightarrow M</m> for all <m>i</m>, satisfying the property that, if there are maps <m>\alpha_{i}: M_{i} \rightarrow N</m> that commute with the maps in the system, then there is a unique map <m>\varphi: M \rightarrow N</m> such that <m>\alpha_{i}=\varphi \circ \iota_{i}</m> for all <m>i</m>.
              </p>
        
              <p>
                This notion is functorial: given two directed systems of complexes, and maps of complexes for each <m>i</m> that commute with the maps in the systems, there is an induced map on the direct limits.
              </p>
        
              <p>
                Direct limits can be realized explicitly as follows: every element is represented by a class <m>(m, i)</m> with <m>m \in M_{i}</m>. 
                Two classes <m>(m, i),(n, j)</m> are the same if and only if for some <m>k \geq \max \{i, j\}</m>, the images of <m>m</m> and <m>n</m> under the composed transition maps agree in <m>M_{k}</m>. 
                In particular, an element represents the zero class if and only if it is in the kernel of a large composition of the transition map.
              </p>
        
              <p>
                Similar considerations hold for systems indexed by an arbitrary poset <m>P</m>; 
                this consists of a collection of modules <m>M_{p}</m> for <m>p \in P</m>, and commuting maps <m>M_{p} \rightarrow M_{q}</m> for all <m>p \leq q</m>.
              </p>
            </statement>
          </definition>

          <remark>
            <p>
              Remark 3.2. 
              We defined the tensor product of complexes in terms of homological notation before. 
              The same definition works with cohomological indexing.
            </p>
          </remark>

          <lemma xml:id="lem-3.3-2">
            <statement>
              <p>
                (1) If
              </p>
          
              <p>
                <me>M_{\bullet}^{(0)} \longrightarrow M_{\bullet}^{(1)} \longrightarrow M_{\bullet}^{(2)} \longrightarrow \cdots</me>
              </p>
          
              <p>
                is a directed system of complexes, then
              </p>
          
              <p>
                <me>\mathrm{H}_{i}\left(\underset{t}{\lim } M_{\bullet}^{(t)}\right)=\underset{t}{\lim _{\longrightarrow}} \mathrm{H}_{i}\left(M_{\bullet}^{(t)}\right) .</me>
              </p>
          
              <p>
                (2) Given two directed systems of complexes, <m>M_{\bullet}^{(t)}</m> and <m>N_{\bullet}^{(t)}</m>, we have
              </p>
          
              <p>
                <me>\underset{t}{\lim _{\bullet}} M_{\bullet}^{(t)} \otimes N_{\bullet}^{(t)}=\left(\underset{t}{\lim _{t}} M_{\bullet}^{(t)}\right) \otimes\left(\lim _{t} N_{\bullet}^{(t)}\right)</me>
              </p>

              <p>
                The same considerations hold for arbitrary direct limits.
              </p>
            </statement>
          </lemma>

          <proposition xml:id="prop-3.4-2">
            <statement>
              <p>
                Let <m>R</m> be a noetherian ring and <m>I</m> an ideal in <m>R</m>. 
                For all <m>i</m>, there is an isomorphism of functors
                <me>\mathrm{H}_{I}^{i}(-) \cong \underset{t}{\lim } \operatorname{Ext}_{R}^{i}\left(R / I^{t},-\right)</me>
              </p>
          
              <p>
                Moreover, if <m>\left\{I_{i}\right\}_{i}</m> is a sequence of ideals such that for all <m>a \in \mathbb{N}</m> there exist <m>b, c</m> such that <m>I_{b} \subseteq I^{a}</m> and <m>I^{c} \subseteq I_{a}</m>, then
                <me>\mathrm{H}_{I}^{i}(-) \cong \underset{t}{\lim _{t}} \operatorname{Ext}_{R}^{i}\left(R / I_{t},-\right) .</me>
              </p>
            </statement>
          </proposition>

          <proof>
            <p>
              Proof. It is enough to show the later statement. Note that
            </p>
        
            <p>
              <me>\Gamma_{I}(M)=\bigcup_{t}\left(0::_{M} I^{t}\right)=\bigcup_{t}\left(0:_{M} I_{t}\right)=\lim _{\longrightarrow} \operatorname{Hom}_{R}\left(R / I_{t}, M\right)\left(=\operatorname{Hom}_{R}^{I-c t s}(R, M)\right)</me>
            </p>
        
            <p>
              Then, if <m>M \longrightarrow E^{\bullet}</m> is an injective resolution, then
            </p>
        
            <p>
              <me>
                \begin{aligned}
                \mathrm{H}_{I}^{i}(M) &amp; =\mathrm{H}^{i} \Gamma_{I}\left(0 \longrightarrow E^{0} \longrightarrow E^{1} \longrightarrow \cdots\right) \\
                &amp; =\mathrm{H}^{i} \underset{\longrightarrow}{l} \lim _{R} \operatorname{Hom}_{R}\left(R / I_{t}, E^{\bullet}\right) \\
                &amp; =\lim _{\longrightarrow} \mathrm{H}^{i}\left(\operatorname{Hom}_{R}\left(R / I_{t}, E^{\bullet}\right)\right) \\
                &amp; =\stackrel{\lim }{\longrightarrow} \operatorname{Ext}_{R}^{i}\left(R / I_{t}, M\right)
                \end{aligned}
              </me>
            </p>
        
            <p>
              It is easy to see that these isomorphisms are functorial.
            </p>
          </proof>
    
    <!-- div attr= class="center"-->
        <figure>
          <caption>image</caption>
          <image source="2023_12_05_e2b943b5b28c6794a270g-042.jpg"/>
        </figure><!--</div attr= class="center">-->

        <remark>
          <p>
            Remark 3.5. 
            Earlier, we saw that Koszul cohomology and <m>\operatorname{Ext}^{\bullet}(R / I,-)</m> measure similar things, and are equal when <m>I=\left(f_{1}, \ldots, f_{m}\right)</m>, is generated by a regular sequence. 
            Since <m>f_{1}^{t}, \ldots, f_{m}^{t}</m> form an <m>R</m>-sequence as well in this case, we obtain isomorphisms
            <me>H_{I}^{i}(M) \cong \underset{t}{\lim _{t}} \operatorname{Ext}_{R}^{i}\left(R /\left(f_{1}^{t}, \ldots, f_{m}^{t}\right), M\right) \cong \underset{t}{\lim _{t}} H^{i}\left(f_{1}^{t}, \ldots, f_{m}^{t} ; M\right)</me>
            though we should take care that we have the right maps in the directed system.
          </p>
      
          <p>
            In general, Koszul cohomology and <m>\operatorname{Ext}^{\bullet}(R / I,-)</m> are not the same; 
            we have seen examples in the homework. 
            However, we will soon see that they agree in the direct limit; 
            the isomorphism above holds for all ideals in a noetherian ring!
          </p>
        </remark>
    
        <p>
          Let <m>M</m> be an <m>R</m>-module and <m>x \in R</m>. 
          To compute the limit of the system
          <me>M \stackrel{x}{\longrightarrow} M \stackrel{x}{\longrightarrow} M \stackrel{x}{\longrightarrow} M \stackrel{x}{\longrightarrow} \cdots</me>
          we can replace <m>M</m> by <m>M^{\prime}=M / \Gamma_{x} M</m>, where <m>\Gamma_{x} M</m> are the elements killed by some composition of the maps <m>M \stackrel{x}{\longrightarrow} M</m>.
        </p>
    
        <p>
          <me>
            \begin{aligned}
            &amp; M^{\prime} \stackrel{x}{\longrightarrow} M^{\prime} \stackrel{x}{\longrightarrow} M^{\prime} \stackrel{x}{\longrightarrow} \cdots \\
            &amp; M^{\prime} \stackrel{1}{\longrightarrow} \frac{1}{x} M^{\prime} \stackrel{1}{\longrightarrow} \frac{1}{x^{2}} M^{\prime} \stackrel{1}{\longrightarrow}
            \end{aligned}
          </me>
          so the direct limit is <m>M_{x}</m>. 
          Note that we have a commutative square
        </p>
    
    <!-- div attr= class="center"-->
        <figure>
          <caption>image</caption>
          <image source="2023_12_05_e2b943b5b28c6794a270g-043.jpg"/>
        </figure><!--</div attr= class="center">-->
    
        <p>
          so we can identify <m>M^{\prime} \stackrel{x^{t}}{\longrightarrow} M^{\prime}</m> with <m>M^{\prime} \stackrel{1}{\longrightarrow} \frac{1}{x^{t}} M^{\prime}</m>.
        </p>
    
        <p>
          Now consider a directed system of (cohomological) Koszul complexes.
          <me>K^{\bullet}(1 ; M) \longrightarrow K^{\bullet}(x ; M) \longrightarrow K^{\bullet}\left(x^{2} ; M\right) \longrightarrow K^{\bullet}\left(x^{3} ; M\right) \longrightarrow \cdots</me>
          that is, 
        </p>

        <image source='2023_12_05_e2b943b5b28c6794a270g-043(1).jpg'/>
    
        <p>
          The limit of this system of Koszul complexes is the Čech complex of <m>x</m> on <m>M</m> :
          <me>
            \check{C}^{\bullet}(x ; M):=\left(\begin{array}{c}
            0 \longrightarrow \\
            0
            \end{array} \underset{1}{\longrightarrow} M_{x} \longrightarrow 0\right)
          </me>
        </p>
    
        <p>
          Given a sequence of elements <m>f_{1}, \ldots, f_{t} \in R</m>, the maps <m>K^{\bullet}\left(f_{i}^{t} ; R\right) \longrightarrow K^{\bullet}\left(f_{i}^{t+1} ; R\right)</m> given by 1 on <m>K^{0}, f_{i}</m> on <m>K^{1}</m>, induce maps
          <me>\begin{gathered}
            K^{\bullet}\left(f_{1}^{n}\right) \otimes \cdots \otimes K^{\bullet}\left(f_{t}^{n}\right) \otimes M \longrightarrow K^{\bullet}\left(f_{1}^{n+1}\right) \otimes \cdots \otimes K^{\bullet}\left(f_{t}^{n+1}\right) \otimes M \\
            K^{\bullet}\left(f_{1}^{n}, \ldots, f_{t}^{n} ; M\right) \\
            K^{\bullet}\left(f_{1}^{n+1}, \ldots, f_{t}^{n+1} ; M\right)
            \end{gathered}
          </me>
        </p>
    
        <p>
          Note that
          <me>\underset{n}{\lim _{\longrightarrow}} K^{\bullet}\left(f_{1}^{n}, \ldots, f_{t}^{n} ; M\right)=\bigotimes_{i=1}^{t} \lim _{\longrightarrow} K^{\bullet}\left(f_{i}^{n}\right) \otimes M=\bigotimes_{i=1}^{t} \check{C}^{\bullet}\left(f_{i}\right) \otimes M</me>
        </p>

        <definition xml:id="def-3.6-2">
          <statement>
            <p>
              Definition 3.6 (Čech complex). 
              We define the Čech complex of <m>f_{1}, \ldots, f_{t}</m> on <m>M</m> as
              <me>\check{C}^{\bullet}\left(f_{1}^{n}, \ldots, f_{t}^{n} ; M\right)=\check{C}^{\bullet}\left(f_{1}\right) \otimes \cdots \otimes \check{C}^{\bullet}\left(f_{t}\right) \otimes M</me>
              This is also sometimes denoted as <m>K^{\bullet}\left(f_{1}^{\infty}, \ldots, f_{t}^{\infty} ; M\right)</m>.
            </p>
          </statement>
        </definition>

        <example>
          <p>
            Example 3.7.
          </p>
      
      <!-- div attr= class="center"-->
          <figure>
            <caption>image</caption>
            <image source="2023_12_05_e2b943b5b28c6794a270g-044.jpg"/>
          </figure><!--</div attr= class="center">-->
      
          <p>
            As with the Koszul complex, easy inductions show that
            <ul>
              <li>
                <p>
                  <m>\check{C}\left(f_{1}, \ldots, f_{t} ; M\right) \cong \bigoplus_{\left\{j_{1}, \ldots, j_{i}\right\} \subseteq[t]} M_{f_{j_{1}} \cdots f_{j_{i}}}</m>
                </p>
              </li>
      
            <li>
              <p>
                The maps between components corresponding to subsets <m>I, J</m> are zero if <m>I \not \subset J</m>, and <m>\pm 1</m> if <m>J=I \cup\{k\}</m>.
              </p>
            </li>
          </ul>
        </p>
      
          <p>
            Note that
            <me>\lim _{\longrightarrow} \mathrm{H}^{i}\left(f_{1}^{n}, \ldots, f_{t}^{n} ; M\right)=\mathrm{H}^{i}\left(\check{C}\left(f_{1}, \ldots, f_{t} ; M\right)\right)=: \check{H}^{i}(\underline{f} ; M) .</me>
          </p>
        </example>
    
        <p>
          We will now study these cohomology modules.
        </p>

        <proposition xml:id="prop-3.8-2">
          <statement>
            <p>
              Proposition 3.8. 
              Let <m>\underline{f}=f_{1}, \ldots, f_{t} \in R</m> and <m>I=\left(f_{1}, \ldots, f_{t}\right)</m>.
              <ol>
                <li>
                  <p>
                    (1) Given a short exact sequence of R-modules
                  </p>
              
                  <p>
                    <me>0 \longrightarrow A \longrightarrow B \longrightarrow C \longrightarrow 0</me>
                  </p>
              
                  <p>
                    there is a long exact sequence
                  </p>
              
                  <p>
                    <me>0 \longrightarrow \check{H}^{0}(\underline{f} ; A) \longrightarrow \check{H}^{0}(\underline{f} ; B) \longrightarrow \check{H}^{0}(\underline{f} ; C) \longrightarrow \check{H}^{1}(\underline{f} ; A) \longrightarrow \cdots</me>
                  </p>
                </li>

                <li>
                  <p>
                    (2) For an arbitrary direct limit system, <m>\check{H}^{j}\left(\underline{f} ; \underline{\lim } M_{\lambda}\right) \cong \underline{\lim _{\longrightarrow}} \check{H}^{j}\left(\underline{f} ; M_{\lambda}\right)</m>.
                  </p>
                </li>

                <li>
                  <p>
                    (3) For any family of modules <m>\left\{M_{\lambda}\right\}_{\lambda \in \Lambda}, \check{H}^{j}\left(\underline{f} ; \bigoplus_{\lambda \in \Lambda} M_{\lambda}\right) \cong \bigoplus_{\lambda \in \Lambda} \check{H}^{j}\left(\underline{f} ; M_{\lambda}\right)</m>.
                  </p>
                </li>

                <li>
                  <p>
                    (4) (invariance of base) If <m>R \stackrel{\varphi}{\longrightarrow} S</m> is a ring map, <m>M</m> an <m>S</m>-module, then
                  </p>
              
                  <p>
                    <me>\check{H}^{j}(\underline{f} ; \varphi M) \cong{ }_{\varphi} \check{H}^{j}(\underline{\varphi(f)} ; M) .</me>
                  </p>
                </li>
              </ol>
            </p>         
          </statement>

          <proof>
            <p>
              Proof.
            </p>
        
            <p>
              (1) Since <m>\check{C} \bullet(f ; R)</m> consists of flat modules,
            </p>
        
        <!-- div attr= class="center"-->
            <figure>
              <caption>image</caption>
              <image source="Loco/2023_12_05_e2b943b5b28c6794a270g-045.jpg"/>
        </figure><!--</div attr= class="center">-->
        
            <p>
              is a short exact sequence of complexes, so this induces a long exact sequence in cohomology.
            </p>
        
            <p>
              <me>\begin{aligned}
                \check{H}^{j}\left(\underline{f} ; \underset{\lim }{\longrightarrow} M_{\lambda}\right)=\mathrm{H}^{j}\left(\check{C}^{\bullet}(\underline{f})\right. &amp; \left.\otimes \lim _{\rightarrow} M_{\lambda}\right)=\mathrm{H}^{j}\left(\underline{\lim }\left(\check{C}^{\bullet}(\underline{f}) \otimes M_{\lambda}\right)\right) \\
                &amp; =\underline{\lim } \mathrm{H}^{j}\left(\check{C}^{\bullet}(\underline{f}) \otimes M_{\lambda}\right)=\underline{\lim } \check{H}^{j}\left(\underline{f} ; M_{\lambda}\right)
                \end{aligned}
              </me>
            </p>
        
            <p>
              (3) This is easy to see, since the Cech complex is compatible with the direct sum decomposition.
            </p>
        
            <p>
              (4) Follows from the same property noted for Koszul complexes.
            </p>
          </proof>
        </proposition>

        <theorem xml:id="thm-3.9-2">
          <statement>
            <p>
              Theorem 3.9 (Fundamental Theorem of Local Cohomology). 
              Let <m>R</m> be a noetherian ring and <m>I=\left(f_{1}, \ldots, f_{t}\right)</m> an ideal. 
              Then, for all <m>R</m>-modules <m>M</m>,
              <me>\begin{aligned}
                R^{i} \Gamma_{I}(M) &amp; \cong \quad \check{H}^{i}(\underline{f} ; M) \\
                \mathbb{\|} &amp; \\
                \underset{n}{\lim _{\longrightarrow}} \operatorname{Ext}_{R}^{i}\left(R / I^{n}, M\right) &amp; \cong \underset{n}{\longrightarrow} \mathrm{lim}^{i}\left(f_{1}^{n}, \ldots, f_{t}^{n} ; M\right)
                \end{aligned}
              </me>
            </p>
        
            <p>
              These isomorphisms are functorial in <m>M</m> and extend to isomorphisms of long exact sequences given a short exact sequence
              <me>0 \longrightarrow A \longrightarrow B \longrightarrow C \longrightarrow 0 \text {. }</me>
            </p>
          </statement>

          <proof>
            <p>
              We have seen that <m>\Gamma_{I}(M) \cong \underset{n}{\lim _{n}} \operatorname{Ext}_{R}^{i}\left(R / I^{n}, M\right)</m> and <m>\check{H}^{i}(\underline{f} ; M) \cong \underset{n}{\lim _{n}} \mathrm{H}^{i}\left(f_{1}^{n}, \ldots, f_{t}^{n} ; M\right)</m>. 
              To show that <m>R^{i} \Gamma_{I}(M) \cong \check{H}^{i}(f ; M)</m>, we proceed in the following steps:
            </p>
        
            <p>
              Step 1: Show <m>\Gamma_{I}(M)</m> and <m>\check{H}^{0}(\underline{f} ; M)</m> are canonically isomorphic.
            </p>
        
            <p>
              Step 2: Show that <m>\check{H}^{&gt;0}(\underline{f} ; E)=0</m> for any injective module <m>E</m>.
            </p>
        
            <p>
              Step 3: Use the previous steps to conclude the proof.
            </p>
        
            <p>
              Proof of Step 1:
            </p>
        
            <p>
              <me>
                \begin{aligned}
                \check{H}^{0}(\underline{f} ; M) &amp; =\mathrm{H}^{0}\left(0 \rightarrow M \rightarrow \oplus_{i} M_{f_{i}}\right) \\
                &amp; =\left\{m \in M \mid\left[\frac{m}{1}\right]=0 \text { in } M_{f_{i}} \text { for all } i\right\} \\
                &amp; =\left\{m \in M \mid f_{i}^{\gg 0} \cdot m=0 \text { for all } i\right\} \\
                &amp; =\Gamma_{I}(M) .
                \end{aligned}
              </me>
            </p>
        
            <p>
              We note that the last equality uses finite generation of <m>I</m> in a crucial way; 
              only the containment " <m>\supseteq</m> " holds in general without this.
            </p>
        
            <p>
              Proof of Step 2: 
              By the structure theorem for injectives over noetherian rings, <m>E \cong \oplus E_{\lambda}</m>, where
              <me>E_{\lambda}=E_{R}(R / P) \cong E_{R_{P}}\left(R_{P} / P R_{P}\right)</me>
            </p>
        
            <p>
              By the direct sum property, we may replace <m>E</m> by <m>E_{R}(R / P)</m>. 
              By the invariance of base property, we may replace <m>R</m> by <m>R_{P}</m>. 
              Now, <m>E</m> is an injective hull of the residue field, so it is artinian, and we write <m>E=\lim _{\longrightarrow} E_{t}</m> where the <m>E_{t}</m> are modules of finite length. 
              It suffices to show that the vanishing holds for modules of finite length.
            </p>
        
            <p>
              We claim that if the desired vanishing holds for <m>M=K</m>, then it holds for all modules of finite length (which would complete Step 2). 
              We induce on the length of <m>L</m>. If <m>1&lt;\ell(M)&lt;\infty</m>, then write <m>0 \rightarrow L \rightarrow M \rightarrow K \rightarrow 0</m>, with <m>\ell(L)&lt;\ell(M)</m>. 
              The long exact sequence gives
              <me>\cdots \rightarrow \check{H}^{i}(\underline{f} ; L) \rightarrow \check{H}^{i}(\underline{f} ; M) \rightarrow \check{H}^{i}(\underline{f} ; K) \rightarrow \cdots,</me>
              and by the induction hypothesis,
              <me>\cdots \rightarrow 0 \rightarrow \check{H}^{i}(\underline{f} ; M) \rightarrow 0 \rightarrow \cdots,</me>
              for <m>i&gt;0</m>, establishing the claim.
            </p>
        
            <p>
              Applying the invariance of base property again, we may assume without loss of generality that <m>R=K</m>.
            </p>
        
            <p>
              There are multiple ways to deal with this case. We note that if <m>f_{i}=0</m>, then <m>\check{C}^{\bullet}\left(f_{i} ; K\right)=(0 \rightarrow K \rightarrow 0)</m>, and if <m>f_{i} \neq 0</m>, then <m>\check{C}^{\bullet}\left(f_{i} ; K\right)=(0 \rightarrow K \stackrel{1}{\longrightarrow} K \rightarrow 0)</m>. 
              It is then an easy exercise, which we leave to you, to show that <m>\check{H}^{i}(f ; K)=K</m> for <m>i=0</m> and 0 for <m>i&gt;0</m> if all <m>f_{i}</m> 's are zero, and that <m>\check{H}^{i}(\underline{f} ; K)=0</m> for all <m>i</m> otherwise.
            </p>
        
            <p>
              Of course, this step relied crucially on the structure theorem for injectives over noetherian rings.
            </p>
        
            <p>
              Proof of Step 3: 
              This follows in complete generality from the previous steps.
            </p>
        
            <p>
              We proceed by induction on <m>i</m>, with the base case being Step 1 . 
              Now, let <m>i&gt;0</m>.
            </p>
        
            <p>
              We assume that we have a canonical isomorphism between <m>H_{I}^{j}(M)</m> and <m>\check{H}^{j}(\underline{f} ; M)</m> for all <m>M</m> and all <m>j&lt;i</m>. Embed <m>M</m> into an injective <m>E</m> to get a short exact sequence
              <me>0 \rightarrow M \rightarrow E \rightarrow W \rightarrow 0</me>
            </p>
        
            <p>
              Then, there is a commutative diagram
            </p>
        
        <!-- div attr= class="center"-->
            <figure>
              <caption>image</caption>
              <image source="Loco/2023_12_05_e2b943b5b28c6794a270g-046.jpg"/>
        </figure><!--</div attr= class="center">-->
        
            <p>
              where bottom zero on the right comes from Step 2. This induces an isomorphism <m>H_{I}^{i}(M) \cong \check{H}^{i}(f ; M)</m>. 
              We omit the verification that this isomorphism does not depend on the choice of embedding into an injective, and that these isomorphisms are compatible with the connecting maps of long exact sequences.
            </p>
          </proof>
        </theorem>
    
        <p>
          These four different descriptions
          <me>
            \begin{array}{rlr}
            (1) R^{i} \Gamma_{I}(M) &amp; \cong &amp; (2) \check{H}^{i}(\underline{f} ; M) \\
            \mathbb{R} &amp; &amp; \mathbb{\|} \\
            \left(1^{\prime}\right) \underset{n}{\lim _{n}} \operatorname{Ext}_{R}^{i}\left(R / I^{n}, M\right) &amp; \cong\left(2^{\prime}\right) \underset{n}{\lim _{n}} \mathrm{H}^{i}\left(f_{1}^{n}, \ldots, f_{t}^{n} ; M\right)
            \end{array}
          </me>
          of local cohomology all have different advantages for attacking problems.
        </p>
    
        <p>
          The descriptions (1) and (1') are computed from injective resolutions, as opposed to (2) and <m>(2</m> '), which are computed from generators. 
          We might think of the former as being more natural, and the latter as being more flexible.
        </p>
    
        <p>
          We note that the descriptions (1) and (2) are made entirely from "big" modules that are somehow nice, whereas the descriptions (1') and (2') realize local cohomology as limits of finitely generated modules (if <m>M</m> is). 
          Some natural questions to ask already are whether we can realize the limits in (1') and (2') as filtered limits / unions, and whether the resulting limits are determined in some sense by finite stages in the limit system. 
          We will see a few results of this form, but it's worth noting that questions of this form are an active topic of research.
        </p>

        </section>

        <section xml:id="sec-cech-complex"><title>The Čech Complex</title>

          <p>
            
          </p>
          
        </section>

        <section xml:id="sec-properties-vanishing"><title>Properties and Vanishing Theorems</title>

          <p>
            Let's collect some basic properties of local cohomology. 
            We note that many (but not all) of the following facts can be proven quickly from more than one characterization of local cohomology.
          </p>
    
          <p>
            Let <m>R</m> be a noetherian ring, <m>I</m> an ideal, and <m>M</m> an <m>R</m>-module. 
            Let <m>\psi: R \rightarrow S</m> be a ring homomorphism, and <m>N</m> an <m>S</m>-module.
          </p>
    
          <p>
            <ol>
              <li>
                <p>
                  <m>\mathrm{H}_{I}^{i}(M)</m> is <m>I</m>-torsion for every <m>i \geq 0</m>.
                </p>
              </li>
    
              <li>
                <p>
                  If <m>\sqrt{J}=\sqrt{I}</m>, then <m>\mathrm{H}_{I}^{i}(M)=\mathrm{H}_{J}^{i}(M)</m> for every <m>i \geq 0</m>.
                </p>
              </li>
    
              <li>
                <p>
                  (Invariance of base) <m>\mathrm{H}_{I}^{i}\left({ }_{\psi} N\right)</m> has a natural <m>S</m>-module structure, and <m>\mathrm{H}_{I}^{i}\left({ }_{\psi} N\right) \cong \mathrm{H}_{\psi(I) S}^{i}(N)</m> as <m>S</m>-modules. We often write <m>\mathrm{H}_{I}^{i}(N)=\mathrm{H}_{I S}^{i}(N)</m> to abbreviate this when the map is implicit.
                </p>
              </li>
    
              <li>
                <p>
                  For any arbitrary direct limit system, <m>\mathrm{H}_{I}^{i}\left(\lim _{\longrightarrow} M_{\lambda}\right) \cong \underline{\lim } \mathrm{H}_{I}^{i}\left(M_{\lambda}\right)</m>.
                </p>
              </li>
    
              <li>
                <p>
                  (Flat base change) If <m>\psi</m> is flat, then <m>S \otimes_{R} \mathrm{H}_{I}^{i}(M) \cong \mathrm{H}_{I}^{i}\left(S \otimes_{R} M\right) \cong \mathrm{H}_{I S}^{i}\left(S \otimes_{R} M\right)</m>.
                </p>
              </li>
        
              <li>
                <p>
                  If <m>\mathfrak{p} \in \operatorname{Spec}(R)</m>, then <m>\mathrm{H}_{I}^{i}(M)_{\mathfrak{p}} \cong \mathrm{H}_{I_{\mathfrak{p}}}^{i}\left(M_{\mathfrak{p}}\right)</m>.
                </p>
              </li>
            </ol>
          </p>
    
          <p>
            Proof. 1. Any submodule or quotient module of an <m>I</m>-torsion module is <m>I</m>-torsion. Thus, the cohomology of a complex of <m>I</m>-torsion modules, e.g., <m>\Gamma_{I}\left(E^{\bullet}\right)</m> for some injective resolution <m>M \rightarrow E^{\bullet}</m>, is also <m>I</m>-torsion.
          </p>
    
          <p>
            <ol>
              <li>
                <p>
                  The functors <m>\Gamma_{I}</m> and <m>\Gamma_{J}</m> are the same, so they yield the same thing when applied to an injective resolution.
                </p>
              </li>
    
              <li>
                <p>
                  For any <m>x \in S</m>, the <m>S</m>-linear map <m>N \stackrel{\cdot x}{\longrightarrow} N</m> is the same as the <m>R</m>-linear map <m>{ }_{\psi} N \stackrel{\cdot x}{\longrightarrow} \psi N</m>; this gives a <m>\operatorname{map} \mathrm{H}_{I}^{i}\left({ }_{\psi} N\right) \stackrel{\cdot x}{\longrightarrow} \mathrm{H}_{I}^{i}\left({ }_{\psi} N\right)</m> by functoriality; it follows from functoriality that the map <m>\cdot x y</m> agrees with the composition of maps <m>\cdot x</m> and <m>\cdot y</m>, so this is an <m>S</m>-module action.
                </p>
              </li>
            </ol>
          </p>
    
          <p>
            The noted isomorphism follows from the Čech cohomology isomorphism <m>\check{H}^{i}\left(\underline{f} ;{ }_{\psi} N\right) \cong \check{H}^{i}(\underline{\psi(f)} ; N)</m>.
          </p>
    
          <p>
            <ol>
              <li>
                <p>
                  This again follows from the Čech cohomology statement.
                </p>
              </li>
    
              <li>
                <p>
                  <m>\left.\check{C} \bullet(\underline{f} ; M) \otimes_{R} S \cong \check{C} \bullet \underline{f \otimes 1} ; M \otimes_{R} S\right)</m>. By flatness of <m>S</m>, cohomology commutes with taking the tensor product.
                 </p>
                </li>
    
              <li>
                <p>
                  Special case of flat base change.
                </p>
              </li>
            </ol>
          </p>
    
          <p>
            We will find that we have the best understanding of local cohomology modules <m>\mathrm{H}_{I}^{i}(M)</m> in two situations: 
            when <m>I</m> is a maximal ideal, or when <m>M=R</m> is a regular ring. 
            Apropos the first of these settings:
          </p>
    
          <p>
            Proposition 3.11. Let <m>R</m> be a noetherian ring, <m>I</m> an ideal, and <m>M</m> an <m>R</m>-module. Let <m>\mathfrak{m}</m> be a maximal ideal of <m>R</m>.
          </p>
    
          <p><ol>
            <li>
                  <p>
            If <m>M</m> is finitely generated, then <m>\mathrm{H}_{\mathfrak{m}}^{i}(M)</m> is artinian for all <m>i</m>.
          </p>
            </li>
    
            <li>
                  <p>
            <m>\mathrm{H}_{\mathfrak{m}}^{i}(M) \cong \mathrm{H}_{\mathfrak{m}}^{i}(M)_{\mathfrak{m}} \cong \mathrm{H}_{\mathfrak{m} R_{\mathfrak{m}}}^{i}\left(M_{\mathfrak{m}}\right)</m>.
          </p>
            </li>
    
            <li>
                  <p>
            If <m>(R, \mathfrak{m})</m> is local, then <m>\mathrm{H}_{\mathfrak{m}}^{i}(M) \cong \mathrm{H}_{\mathfrak{m} \widehat{R}}^{i}\left(\widehat{R} \otimes_{R} M\right)</m>. In particular, if <m>M</m> is finitely generated, then <m>\mathrm{H}_{\mathfrak{m}}^{i}(M) \cong \mathrm{H}_{\mathfrak{m} \widehat{R}}^{i}(\widehat{M})</m>.
          </p>
            </li>
    
            <li>
                  <p>
            If <m>(R, \mathfrak{m}) \rightarrow(S, \mathfrak{n})</m> is a local homomorphism, and <m>S</m> is module-finite over the image of <m>R</m>, then <m>\mathrm{H}_{\mathfrak{m}}^{i}(S)=\mathrm{H}_{\mathfrak{n}}^{i}(S)</m>.
          </p>
            </li>
    
          </ol></p>
    
          <p>
            Proof. 1. By Problem #6 of HW #1, if <m>M \rightarrow E^{\bullet}</m> is an injective resolution,
          </p>
    
          <p>
            <me>\Gamma_{\mathfrak{m}}\left(E^{\bullet}\right)=0 \rightarrow E_{R}(R / \mathfrak{m})^{\mu(0, \mathfrak{m})} \rightarrow E_{R}(R / \mathfrak{m})^{\mu(1, \mathfrak{m})} \rightarrow \cdots</me>
          </p>
    
          <p>
            The Bass number <m>\mu(i, \mathfrak{m})(M)</m> is finite, so the complex above is a complex of artinian modules. Thus, <m>H_{\mathfrak{m}}^{i}(M)</m> is a quotient of a submodule of a finite direct sum of copies of <m>E_{R}(R / \mathfrak{m})</m>, hence, artinian.
          </p>
    
          <p><ol>
            <li>
                  <p>
            If <m>M</m> is <m>\mathfrak{m}</m>-torsion, then any element outside of <m>\mathfrak{m}</m> acts on <m>M</m> invertibly (check!). Then the second is a special case of 6 above.
          </p>
            </li>
    
            <li>
                  <p>
            By flat base change, <m>\widehat{R} \otimes_{R} \mathrm{H}_{\mathfrak{m}}^{i}(M) \cong \mathrm{H}_{\mathfrak{m} \widehat{R}}^{i}\left(\widehat{R} \otimes_{R} M\right)</m>. Since <m>\mathrm{H}_{\mathfrak{m}}^{i}(M)</m> is <m>\mathfrak{m}</m>-torsion, it is already the same as <m>\widehat{R} \otimes_{R} \mathrm{H}_{\mathfrak{m}}^{i}(M)</m>.
          </p>
            </li>
    
            <li>
                  <p>
            <m>\mathrm{H}_{\mathfrak{m}}^{i}(S)=\mathrm{H}_{\mathfrak{m} S}^{i}(S)=\mathrm{H}_{\mathfrak{n}}^{i}(S)</m>, since <m>\sqrt{\mathfrak{m} S}=\mathfrak{n}</m>.
          </p>
            </li>
    
          </ol></p>
    
          <p>
            Remark 3.12. Both <m>\# 1</m> and <m>\# 2</m> of the previous proposition fail for the module <m>\mathrm{H}_{(x, y)}^{2}\left(\frac{K[x, y, u, v]}{(x u-y v)}\right)</m> from worksheet <m>\# 3</m>, with <m>\mathfrak{m}</m> replaced by <m>\mathfrak{p}=(x, y)</m>.
          </p>
    
          <p>
            We want to note now that if <m>R</m> is a graded ring, <m>M</m> a graded module, and <m>I</m> a homogeneous ideal (i.e., an ideal generated by homogeneous elements <m>f_{1}, \ldots, f_{t}</m> ) then the local cohomology modules <m>\mathrm{H}_{I}^{i}(M)</m> are graded as well. This can be seen from the Čech complex:
          </p>
    
          <p>
            <me>0 \rightarrow M \rightarrow \bigoplus_{1 \leq i \leq t} M_{f_{i}} \rightarrow \bigoplus_{1 \leq i&lt;j \leq t} M_{f_{i} f_{j}} \rightarrow \cdots \rightarrow \bigoplus_{1 \leq i \leq t} M_{f_{1} \cdots \widehat{f}_{i} \cdots f_{t}} \rightarrow M_{f_{1} \cdots f_{t}} \rightarrow 0</me>
          </p>
    
          <p>
            which is evidently a complex of graded modules in this case.
          </p>
    
          <p>
            We could also see the grading from the other descriptions of local cohomology. This clear for the Koszul description, and is easily seen to give the same grading. There is also a classification of which graded modules are injective as objects in the category of graded modules. This endows the other two descriptions of local cohomology with a grading, and the Fundamental Theorem is compatible with this extra structure. We won't develop this approach (unless I change my mind!), but note that it is carried out throughly in Bruns &amp; Herzog as well as Brodmann &amp; Sharp.
          </p>
    
       
    
       
    
          <p>
            Our goal now is to understand, for an ideal <m>I</m> in a noetherian <m>\operatorname{ring} R</m>, and an <m>R</m>-module <m>M</m>, what are the least and greatest <m>i</m>, respectively, for which <m>\mathrm{H}_{I}^{i}(M) \neq 0</m>.
          </p>
    
          <p>
            There is an obvious guess (and obvious lower bound) for the least nonvanishing index: the depth of <m>I</m> on <m>M</m>. This guess turns out to be correct.
          </p>
    
          <p>
            Theorem 3.13. Let <m>R</m> be a noetherian ring, <m>I</m> an ideal, and <m>M</m> a finitely generated <m>R</m>-module. Then,
          </p>
    
          <p>
            <me>\min \left\{i \mid \mathrm{H}_{I}^{i}(M) \neq 0\right\}=\operatorname{depth}_{I}(M) .</me>
          </p>
    
          <p>
            Our convention is that <m>\min (\varnothing)=\operatorname{depth}_{I}(M)=\infty</m> if <m>I M=M</m>. In particular, if <m>\mathfrak{p}</m> is prime and <m>R</m> is Cohen-Macaulay, then
          </p>
    
          <p>
            <me>\min \left\{i \mid \mathrm{H}_{\mathfrak{p}}^{i}(R) \neq 0\right\}=\operatorname{ht}(\mathfrak{p}) .</me>
          </p>
    
          <p>
            Proof. If <m>I M=M</m>, then there is some <m>f \in I</m> that acts as the identity on <m>M</m>, so <m>I^{n} \mathrm{H}_{I}^{i}(M)=</m> <m>f^{n} \mathrm{H}_{I}^{i}(M)=\mathrm{H}_{I}^{i}(M)</m> for all <m>n</m>. On the other hand, <m>\mathrm{H}_{I}^{i}(M)</m> is <m>I</m>-torsion, so it must be the zero module.
          </p>
    
          <p>
            We now assume that <m>I M \neq M</m> and argue by induction on the depth.
          </p>
    
          <p>
            If <m>\operatorname{depth}_{I}(M)=0</m>, then every element of <m>I</m> is a zerodivisor on <m>M</m>, so <m>I</m> is contained in the union of the associated primes of <m>M</m>, and hence in some associated prime <m>\mathfrak{p}</m> of <m>M</m> by prime avoidance. Then, the copy of <m>R / \mathfrak{p}</m> in <m>M</m> is killed by <m>I</m>, hence nonzero in <m>\mathrm{H}_{I}^{0}(M)</m>.
          </p>
    
          <p>
            Now, if the depth is <m>d&gt;0</m>, take a regular element <m>x \in I</m> on <m>M</m>. The SES
          </p>
    
          <p>
            <me>0 \rightarrow M \stackrel{x}{\longrightarrow} M \rightarrow M / x M \rightarrow 0</me>
          </p>
    
          <p>
            yields the LES
          </p>
    
          <p>
            <me>\cdots \rightarrow H_{I}^{i-1}(M) \rightarrow H_{I}^{i-1}(M / x M) \rightarrow H_{I}^{i}(M) \stackrel{x}{\longrightarrow} H_{I}^{i}(M) \rightarrow \cdots</me>
          </p>
    
          <p>
            For <m>i&lt;d</m>, we obtain that <m>x</m> is a nzd on <m>H_{I}^{i}(M)</m>, but this module is <m>I</m>-torsion (hence <m>x</m>-torsion), so it must be zero. Then, the LES shows that <m>0 \neq H_{I}^{d-1}(M / x M)</m> injects into <m>H_{I}^{i}(M)</m>, so the latter is nonzero.
          </p>
    
          <p>
            We turn our attention to the top nonvanishing local cohomology module. This will be of recurring interest, so we give it some nomenclature.
          </p>
    
          <p>
            Definition 3.14. Let <m>R</m> be a ring, <m>I</m> an ideal, and <m>M</m> an <m>R</m>-module. The cohomological dimension of <m>I</m> on <m>M</m> is
          </p>
    
          <p>
            <me>\operatorname{cd}(I, M):=\max \left\{i \mid \mathrm{H}_{I}^{i}(M) \neq 0\right\}</me>
          </p>
    
          <p>
            This is closely related to another invariant of independent interest.
          </p>
    
          <p>
            Definition 3.15. Let <m>R</m> be a ring, <m>I</m> an ideal. The arithmetic rank of <m>I</m> is
          </p>
    
          <p>
            <me>\operatorname{ara}(I):=\min \left\{t \mid \text { there exist } f_{1}, \ldots, f_{t} \text { such that } \sqrt{I}=\sqrt{\left(f_{1}, \ldots, f_{t}\right)}\right\} \text {. }</me>
          </p>
    
          <p>
            The following fact, now easy to prove, is one of the key points to many applications of local cohomology.
          </p>
    
          <p>
            Theorem 3.16. Let <m>R</m> be a noetherian ring, <m>I</m> an ideal. Then <m>\operatorname{ara}(I) \geq \operatorname{cd}(I, M)</m> for all <m>R</m> modules <m>M</m>.
          </p>
    
          <p>
            Proof. Let <m>\sqrt{\left(f_{1}, \ldots, f_{t}\right)}=\sqrt{I}</m>. Then <m>\mathrm{H}_{I}^{i}(M)=\check{H}^{i}\left(f_{1}, \ldots, f_{t} ; M\right)</m>, and the latter vanishes for <m>i&gt;t</m>, since the Čech complex on <m>t</m> elements lives only in cohomological degrees less than or equal to <m>t</m>.
          </p>
    
          <p>
            This Theorem is useful both for understanding rank and for understanding cohomological dimension. We will employ it for the latter purpose first.
          </p>
    
          <p>
            Example 3.17. Let <m>K</m> be a field, and <m>T=\frac{K[x, y, u, v]}{(x u-y v)}</m>. Let <m>I=(x, y)</m>. We saw in worksheet #3 that <m>\mathrm{H}_{I}^{2}(T) \neq 0</m>. We claim that the support of <m>\mathrm{H}_{I}^{2}(T)</m> is <m>\mathcal{V}((x, y, u, v))</m>, so <m>\operatorname{Ass}\left(\mathrm{H}_{I}^{2}(T)\right)=\{(x, y, u, v)\}</m>. If <m>\mathfrak{p}</m> is a prime that does not contain <m>x</m> or <m>y</m>, then <m>I_{\mathfrak{p}}</m> is the unit ideal, so <m>\mathrm{H}_{I}^{2}(T)_{\mathfrak{p}}=\mathrm{H}_{I_{\mathfrak{p}}}^{2}\left(T_{\mathfrak{p}}\right)=0</m>. If <m>\mathfrak{p}</m> does not contain <m>u</m>, then <m>x=\frac{y v}{u}</m> in <m>T_{\mathfrak{p}}</m>, so <m>I_{\mathfrak{p}}=(y)</m>. Thus, <m>\mathrm{H}_{I}^{2}(T)_{\mathfrak{p}}=\mathrm{H}_{I_{\mathfrak{p}}}^{2}\left(T_{\mathfrak{p}}\right)=0</m>. Similarly, if <m>\mathfrak{p}</m> does not contain <m>v</m>, the same vanishing occurs.
          </p>
    
          <p>
            Proposition 3.18. Let <m>R</m> be a noetherian ring, <m>I</m> an ideal. For any <m>R</m>-module, <m>\operatorname{cd}(I, M) \leq \operatorname{cd}(I, R)</m>.
          </p>
    
          <p>
            Proof. Let <m>c=\operatorname{cd}(I)</m>. Since local cohomology commutes with direct sums, we have that <m>\mathrm{H}_{I}^{i}(F)=0</m> for any free module <m>F</m> and any <m>i&gt;c</m>. Now, given an arbitrary module <m>M</m>, take a short exact sequence
          </p>
    
          <p>
            <me>0 \rightarrow M^{\prime} \rightarrow F \rightarrow M \rightarrow 0</me>
          </p>
    
          <p>
            with <m>F</m> free. The LES of local cohomology gives isomorphisms <m>\mathrm{H}_{I}^{i+1}\left(M^{\prime}\right) \cong \mathrm{H}_{I}^{i}(M)</m> for all <m>i&gt;c</m>. Repeating this, we find for all <m>a&gt;0</m>, that there is some module <m>L</m> such that <m>\mathrm{H}_{I}^{i}(M) \cong \mathrm{H}_{I}^{i+a}\left(M^{(a)}\right)</m>. But, since <m>I</m> is finitely generated, <m>\operatorname{ara}(I)</m> is finite, and <m>\operatorname{cd}\left(I,\left(M^{(a)}\right)\right.</m> is less than this number for all modules. Hence, we must have that <m>\mathrm{H}_{I}^{i}(M)=0</m>.
          </p>
    
          <p>
            Following the last proposition, we write <m>\operatorname{cd}(I)</m> for <m>\operatorname{cd}(I, R)</m>. When <m>I=\mathfrak{m}</m> is a maximal ideal, we can say a bit more about cohomological dimension. Recall that, by the dimension of a module, we mean simply the dimension of <m>R / \operatorname{ann}(M)</m>. We note that, if <m>M</m> is finitely generated, this agrees with the dimension of the support of <m>M</m> as a subset of <m>\operatorname{Spec}(R)</m>, but this is not true if <m>M</m> is arbitrary (e.g. take <m>M=E_{R}(k)</m> for <m>R</m> of positive dimension).
          </p>
    
          <p>
            Proposition 3.19. Let <m>(R, \mathfrak{m})</m> be local, and <m>M</m> an <m>R</m>-module. Then <m>\operatorname{cd}(\mathfrak{m}, M) \leq \operatorname{dim}(M)</m>.
          </p>
    
          <p>
            Proof. By the invariance of base property, we may replace <m>R</m> by <m>R / \operatorname{ann}(M)</m>, and <m>\mathfrak{m}</m> by its image there, thus we can assume that <m>\operatorname{dim}(M)=\operatorname{dim}(R)</m>. The maximal ideal of <m>R</m> is generated by <m>\operatorname{dim}(R)</m> elements up to radical, so <m>\operatorname{cd}(\mathfrak{m}, M) \leq \operatorname{dim}(R)</m>, as required.
          </p>
    
          <p>
            Corollary 3.20. Let <m>(R, \mathfrak{m})</m> be local. The ring <m>R</m> is Cohen-Macaulay if and only if <m>\mathrm{H}_{\mathfrak{m}}^{i}(R)=0</m> for all <m>i \neq \operatorname{dim}(R)</m>.
          </p>
    
          <p>
            We want to now extend our cohomological dimension bounds to all ideals.
          </p>
    
          <p>
            Theorem 3.21. If <m>I</m> is a proper ideal in a local ring <m>(R, \mathfrak{m}, k)</m> of dimension <m>d</m>, then <m>\operatorname{ara}(I) \leq d</m>.
          </p>
    
          <p>
            Proof. If <m>I=\mathfrak{m}</m>, this is standard, so we assume that the height of <m>I</m> is less than <m>d</m>.
          </p>
    
          <p>
            Let <m>\mathcal{P}_{n}=\{\mathfrak{p} \in \operatorname{Spec}(R) \mid \operatorname{height}(\mathfrak{p})=n</m> and <m>\mathfrak{p} \nsupseteq I\}</m>. We will inductively find
          </p>
    
          <p>
            <me>r_{0}, \ldots, r_{n} \in I \text { such that }\left(r_{0}, \ldots, r_{n}\right) \nsubseteq \mathfrak{p} \text { for any } \mathfrak{p} \in \mathcal{P}_{n}</me>
          </p>
    
          <p>
            Once we have done this for <m>n=d-1</m>, we have <m>d</m> elements such that <m>\mathcal{V}\left(\left(r_{0}, \ldots, r_{d-1}\right)\right)=\mathcal{V}(I)</m>, and we are done.
          </p>
    
          <p>
            To choose <m>r_{0}</m>, we only need to avoid a subset of the minimal primes of <m>R</m>, which is finite, so we can do this by prime avoidance.
          </p>
    
          <p>
            Suppose that we have elements satisfying the specified condition for all <m>i&lt;n</m>. The set of minimal primes of <m>\left(r_{0}, \ldots, r_{n}\right)</m> of height <m>n+1</m> not containing <m>I, \operatorname{Min}\left(\left(r_{0}, \ldots, r_{n}\right)\right) \cap \mathcal{P}_{n+1}</m>, is finite (and <m>I</m> is clearly not any such <m>I</m> ), so we can choose an element <m>r_{n+1}</m> in <m>I</m> not in any of these.
          </p>
    
          <p>
            Now, suppose that <m>\left(r_{0}, \ldots, r_{n}, r_{n+1}\right)</m> is contained in some <m>\mathfrak{p}</m> in <m>\mathcal{P}_{n+1}</m>. Then, <m>\left(r_{0}, \ldots, r_{n}\right) \subseteq \mathfrak{p}</m> as well. If <m>\mathfrak{p}</m> is not minimal over <m>\left(r_{0}, \ldots, r_{n}\right)</m>, then take some <m>\mathfrak{q}</m> in between. The height of <m>\mathfrak{q}</m> is less than <m>n+1</m>, so <m>\mathfrak{q}</m> contradicts the induction hypothesis. If <m>\mathfrak{p}</m> is minimal over <m>\left(r_{0}, \ldots, r_{n}\right)</m>, then <m>\mathfrak{p} \in \operatorname{Min}\left(\left(r_{0}, \ldots, r_{n}\right)\right) \cap \mathcal{P}_{n+1}</m>, and <m>r_{n+1} \in \mathfrak{p}</m> contradicts the choice of <m>r_{n+1}</m>.
          </p>
    
          <p>
            Corollary 3.22. If <m>I</m> is an ideal in a noetherian ring, and <m>M</m> an <m>R</m>-module, then <m>\operatorname{cd}(I, M) \leq</m> <m>\operatorname{dim}(M)</m>.
          </p>
    
          <p>
            Proof. Given a counterexample, we can localize at an associated prime of <m>\mathrm{H}_{I}^{i}(M)</m>, and since <m>\mathrm{H}_{I}^{i}(M)_{\mathfrak{p}}=\mathrm{H}_{I_{\mathfrak{p}}}^{i}\left(M_{\mathfrak{p}}\right)</m> for all <m>\mathfrak{p}</m>, and <m>\operatorname{dim}\left(M_{\mathfrak{p}}\right) \leq \operatorname{dim}(M)</m>, it suffices to assume that <m>R</m> is local. Moreover, by invariance of base, we can replace <m>R</m> by <m>R / \operatorname{ann}(M)</m>, and assume that <m>\operatorname{dim}(R)=\operatorname{dim}(M)</m>. Then, applying the previous theorem, <m>\operatorname{cd}(I, M) \leq \operatorname{ara}(I) \leq \operatorname{dim}(R)=\operatorname{dim}(M)</m>.
          </p>
          
        </section>
        
      </chapter>

      <chapter xml:id="ch-canonical"><title>The Canonical Module</title>

        <section xml:id="sec-local-duality"><title>Local Duality</title>

          <p>
            Let <m>\mathfrak{m}</m> be the maximal ideal of <m>R</m>. We know that:
            <ul>
              <li>
                <p>
                  If <m>M</m> is a finitely generated <m>R</m>-module, then <m>\mathrm{H}_{\mathfrak{m}}^{i}(M)</m> is an artinian module;
                </p>
              </li>
      
              <li>
                <p>
                  If <m>R=M</m> is a polyonomial ring over a field <m>k</m>, then <m>\mathrm{H}_{\mathfrak{m}}^{d}(M) \cong E_{R}(k)</m>.
                </p>
              </li>
            </ul>
          </p>
      
          <p>
            The Matlis duals of <m>\mathrm{H}_{\mathfrak{m}}^{\bullet}(M)</m> are evidently finitely generated modules (if <m>R</m> is complete), and we might hope that they can be realized by formulas in terms of finitely generated elements.
          </p>
      
          <p>
            We will see that this turns out to be true. 
            We will establish formulas of this form for an increasingly general class of rings. 
            Along the way, to understand the new class of rings we will meet, we will pursue a more refined study of injective resolutions.
          </p>

          <p>
            We will give two proofs of this fact.
          </p>

          <lemma xml:id="lem-4.1">
            <statement>
              <p>
                If <m>(R, \mathfrak{m}, k)</m> is a regular local ring of dimension <m>d</m>, then <m>\mathrm{H}_{\mathfrak{m}}^{d}(R) \cong E_{R}(k)</m>.
              </p>
            </statement>

            <proof>
              <p>
                First, we note that both <m>\mathrm{H}_{\mathfrak{m}}^{d}(R)</m> and <m>E_{R}(k)</m> stay the same if <m>R</m> is replaced by its completion, so we may assume that <m>R</m> is complete. 
                By Cohen's Structure Theorem, <m>R=K \llbracket \underline{x} \rrbracket, V \llbracket \underline{x} \rrbracket</m>, or <m>V \llbracket \underline{x} \rrbracket /(f)</m> where <m>K</m> is a field and <m>V</m> a DVR.
              </p>
        
              <p>
                We have seen this by explicit computation for <m>R=k \llbracket \underline{x} \rrbracket</m> (worksheet) or <m>R=V \llbracket \underline{x} \rrbracket</m>, where <m>V</m> is a DVR (#2 on HW #2). 
                Also, if <m>f \in V \llbracket \underline{x} \rrbracket</m>, then, from the SES <m>0 \rightarrow R \rightarrow R \rightarrow R / f R \rightarrow 0</m>, we get the LES
                <me>\cdots \longrightarrow 0 \longrightarrow \mathrm{H}_{\mathfrak{m}}^{d-1}(V \llbracket \underline{x} \rrbracket /(f)) \longrightarrow \mathrm{H}_{\mathfrak{m}}^{d}(V \llbracket \underline{x} \rrbracket) \stackrel{f}{\longrightarrow} \mathrm{H}_{\mathfrak{m}}^{d}(V \llbracket \underline{x} \rrbracket) \longrightarrow 0,</me>
                where the last terms is zero since <m>\operatorname{dim}(R / f R)=d-1</m>. 
                Consequently,
                <me>\mathrm{H}_{\mathfrak{m}}^{d-1}(V \llbracket \underline{x} \rrbracket /(f))=\operatorname{ann}_{\mathrm{H}_{\mathfrak{m}}^{d}(V \llbracket \underline{x} \rrbracket)}(f)=\operatorname{ann}_{E_{V \llbracket \underline{x} \rrbracket}}(f)=E_{V \llbracket \underline{x} \rrbracket /(f)}(k) .</me>
              </p>
        
              <p>
                Thus, this holds for all complete regular rings.
              </p>
            </proof>

            <proof>
              <p>
                When <m>R</m> is regular, the following is an injective resolution of <m>R</m> (by #6 HW #2):
                <me>0(\rightarrow R) \rightarrow E_{R}(R) \rightarrow \bigoplus_{\mathrm{ht} \mathfrak{p}=1} E_{R}(R / \mathfrak{p}) \rightarrow \bigoplus_{\mathrm{ht} \mathfrak{p}=2} E_{R}(R / \mathfrak{p}) \rightarrow \cdots \rightarrow \bigoplus_{\mathrm{ht} \mathfrak{p}=d} E_{R}(R / \mathfrak{p}) \rightarrow 0</me>
              </p>
        
              <p>
                By applying <m>\Gamma_{\mathfrak{m}}</m> to this resolution, we are only left with <m>E(R / \mathfrak{m})</m> in the <m>d</m>-th spot.
              </p>
            </proof>
          </lemma>

          <p>
            If you don't believe in homework, don't worry; we will generalize this soon.
          </p>

          <exercise><title>Exercise 4.2.</title>
            <p>
              <ol>
                <li>
                  <p>
                    If <m>P</m> is a flat <m>R</m>-module, then <m>\operatorname{Tor}_{i}^{R}(P, M)=0</m> for all <m>i&gt;0</m> and all <m>R</m>-modules <m>M</m>.
                  </p>
                </li>
        
                <li>
                  <p>
                    If
                    <me>\cdots \longrightarrow P_{n} \longrightarrow \cdots \longrightarrow P_{1} \longrightarrow P_{0} \longrightarrow(M \longrightarrow) 0</me>
                    is exact and each <m>P_{i}</m> is flat (we say this is a flat resolution of <m>M</m> ), then <m>\operatorname{Tor}_{i}^{R}(M, N)=</m> <m>\mathrm{H}_{i}\left(P_{\bullet} \otimes_{R} N\right)</m> for all <m>i</m>.
                  </p>
                </li>
              </ol>
            </p>
          </exercise>

          <proposition xml:id="prop-4.3">
            <statement>
              <p>
                If <m>(R, \mathfrak{m})</m> is Cohen-Macaulay, and <m>M</m> is an R-module, then <m>\mathrm{H}_{\mathfrak{m}}^{i}(M) \cong \operatorname{Tor}_{d-i}^{R}\left(M, \mathrm{H}_{\mathfrak{m}}^{d}(R)\right)</m> for all <m>i</m>. 
                This isomorphism is functorial in <m>M</m>.
              </p>
            </statement>

            <proof>
              <p>
                Let <m>x_{1}, \ldots, x_{d}</m> be an SOP for <m>R</m>. The augmented Čech complex
              </p>
    
              <table>
                <title></title>
                <tabular>
                <row >
                  <cell halign="left">flat resolution</cell>
                  <cell halign="left"><m>\mathrm{d}</m></cell>
                  <cell halign="left"><m>\mathrm{d}-1</m></cell>
                  <cell halign="left">0</cell>
                </row>
                </tabular>
              </table>
    
              <p>
                <m>\begin{array}{lllll}\text { Čech indexing } &amp; 0 &amp; 1 &amp; \mathrm{~d}\end{array}</m>
              </p>
          
              <p>
                <me>0 \longrightarrow R \longrightarrow \bigoplus_{i} R_{x_{i}} \longrightarrow \cdots \longrightarrow R_{x_{1} \cdots x_{d}} \longrightarrow\left(\mathrm{H}_{\mathfrak{m}}^{d}(R) \longrightarrow\right) 0</me>
              </p>
          
              <p>
                is exact, since the lower local cohomologies vanish. Thus, <m>\check{C}^{\bullet}(\underline{x} ; R)</m> is a flat resolution of <m>\mathrm{H}_{\mathfrak{m}}^{d}(R)</m>. Then,
              </p>
          
              <p>
                <me>\mathrm{H}_{\mathfrak{m}}^{i}(M)=\check{H}^{i}\left(\check{C}^{\bullet}(\underline{x} ; M)\right)=\check{H}^{i}\left(\check{C}^{\bullet}(\underline{x} ; R) \otimes_{R} M\right)=\operatorname{Tor}_{d-i}^{R}\left(\mathrm{H}_{\mathfrak{m}}^{d}(R), M\right)</me>
              </p>
            </proof>
          </proposition>
    
        <p>
          We note that there is a switch from cohomological indexing of Čech complex and homological indexing of a flat resolution.
        </p>

        <proposition xml:id="prop-4.4">
          <statement>
            <p>
              (Ext-Tor dualities). If <m>(R, \mathfrak{m})</m> be a local ring of dimension <m>d</m>, and let <m>(-)^{\vee}</m> denote the Matlis duality functor.
            </p>
            <!-- div attr= class="center"-->
          <image source="2023_12_05_e2b943b5b28c6794a270g-056"/>

        <p><ol>
          <li>
              <p>
          If <m>M</m> is a finitely generated <m>R</m>-module, then <m>\operatorname{Tor}_{i}^{R}\left(M, N^{\vee}\right) \cong \operatorname{Ext}_{R}^{i}(M, N)^{\vee}</m>.
        </p>
          </li>
    
        </ol></p>
    
        <p>
          These isomorphisms are functorial in <m>M</m>.
        </p>
          </statement>

          <proof>
            <p>
              Let <m>P_{\bullet}(\longrightarrow M)</m> be a projective resolution of <m>M</m>.

            </p>

            <p>
              1.
            </p>
        
            <p>
              <me>\operatorname{Tor}_{i}^{R}(M, N)^{\vee} \cong \mathrm{H}_{i}\left(P_{\bullet} \otimes N\right)^{\vee} \cong \mathrm{H}_{i}\left(\left(P_{\bullet} \otimes N\right)^{\vee}\right) \cong \mathrm{H}_{i}\left(\operatorname{Hom}\left(P_{\bullet}, N^{\vee}\right)\right) \cong \operatorname{Ext}_{R}^{i}\left(M, N^{\vee}\right)</me>
            </p>
        
            <p>
              Given a map <m>M \rightarrow M^{\prime}</m>, we can lift to a map on projective resolutions, and it is easy to see that we get commuting maps through all of the isomorphisms above.
            </p>
        
            <p>
              <ol>
                <li>
                  <p>
                    By taking a minimal resolution, we may assume that <m>P_{\bullet}(\longrightarrow M)</m> is a complex of finitely generated free <m>R</m>-modules. In this case, there is a natural isomorphism (exercise!)
                  </p>
                </li>
              </ol>
              <me>P_{\bullet} \otimes \operatorname{Hom}_{R}(N, E) \cong \operatorname{Hom}_{R}\left(\operatorname{Hom}_{R}\left(P_{\bullet}, N\right), E\right)</me>
            </p>
        
            <p>
              Taking homology gives the isomorphism.
            </p>
          </proof>
        </proposition>
    
        <p>
          To help remember which hypothesis goes with which situation in the following, one might keep in mind that Matlis duals of artinian modules are complete.
        </p>

        <theorem xml:id="thm-4.5">
          <statement>
            <p>
              Theorem 4.5 (Local Duality). 
              Let <m>(R, \mathfrak{m}, k)</m> be a regular local ring of dimension <m>d</m>. 
              Then
            </p>
        
            <p>
              <ol>
                <li>
                  <p>
                    If <m>M</m> is a finitely generated <m>R</m>-module, then <m>\mathrm{H}_{\mathfrak{m}}^{i}(M)=\operatorname{Ext}_{d-i}^{R}(M, R)^{\vee}</m>.
                  </p>
                </li>
        
                <li>
                  <p>
                    If <m>R</m> is complete and <m>M</m> is arbitrary, then <m>\mathrm{H}_{\mathfrak{m}}^{i}(M)^{\vee}=\operatorname{Ext}_{d-i}^{R}(M, R)</m>.
                  </p>
                </li>
              </ol>
            </p>
        
            <p>
              These isomorphisms are functorial in <m>M</m>.
            </p>
          </statement>

          <proof>
            <p>
              Proof. 1.
            </p>
        
            <p>
              <me>\mathrm{H}_{\mathfrak{m}}^{i}(M) \cong \operatorname{Tor}_{d-i}^{R}\left(M, \mathrm{H}_{\mathfrak{m}}^{d}(R)\right) \cong \operatorname{Tor}_{d-i}^{R}\left(M, R^{\vee}\right) \cong \operatorname{Ext}_{R}^{d-i}(M, R)^{\vee} .</me>
            </p>
        
            <p>
              <ol>
                <li>
                  <p>
                    Since <m>R</m> is complete, <m>\mathrm{H}_{\mathfrak{m}}^{d}(R)^{\vee} \cong R^{\vee \vee} \cong R</m>. Then,
                  </p>
                </li>
              </ol>
            </p>
        
            <p>
              <me>\mathrm{H}_{\mathfrak{m}}^{i}(M)^{\vee} \cong \operatorname{Tor}_{d-i}^{R}\left(M, \mathrm{H}_{\mathfrak{m}}^{d}(R)\right)^{\vee} \cong \operatorname{Ext}_{R}^{d-i}\left(M, \mathrm{H}_{\mathfrak{m}}^{d}(R)^{\vee}\right) \cong \operatorname{Ext}_{R}^{d-i}(M, R)</me>
            </p>
          </proof>
        </theorem>
    
        <p>
          One often finds the just the first statement as local duality, but the second "opposite of local duality" is quite useful as well.
        </p>
    
        <p>
          Remark 4.6. By the exact same proof, if <m>R</m> is Cohen-Macaulay and <m>W</m> is some finitely generated module such that <m>W^{\vee} \cong \mathrm{H}_{\mathfrak{m}}^{d}(R)</m>, then
        </p>
    
        <p><ul>
          <li>
              <p>
          If <m>M</m> is a finitely generated <m>R</m>-module, then <m>\mathrm{H}_{\mathfrak{m}}^{i}(M)=\operatorname{Ext}_{R}^{d-i}(M, W)^{\vee}</m>.
        </p>
          </li>
    
          <li>
              <p>
          If <m>R</m> is complete, then <m>\mathrm{H}_{\mathfrak{m}}^{i}(M)^{\vee}=\operatorname{Ext}_{R}^{d-i}(M, W)</m> by the same proof.
        </p>
          </li>
    
        </ul></p>
    
        <p>
          We will return to this later.
        </p>
    
        <p>
          Local duality is a powerful tool to study local cohomology modules. Part of its power comes from its flexibility: there are many different rings, modules, and indices to plug in. Here are some special cases:
        </p>
    
        <p>
          Example 4.7. Let <m>(R, \mathfrak{m})</m> be a local ring, and <m>(S, \mathfrak{n})</m> another local ring such that <m>S</m> is regular, and <m>R</m> is a quotient of <m>S</m>. (Such an <m>S</m> exists whenever <m>R</m> is complete, or essentially of finite type over a field or <m>\mathbb{Z}</m>.) Then, since <m>R</m> is a finitely generated <m>S</m>-module, <m>\mathrm{H}_{\mathfrak{m}}^{i}(R) \cong \mathrm{H}_{\mathfrak{n}}^{i}(R) \cong \operatorname{Ext}_{S}^{\operatorname{dim}(S)-i}(R, S)^{\vee}</m> for all <m>i</m>.
        </p>
    
        <p>
          Example 4.8. Let <m>(R, \mathfrak{m}) \rightarrow(S, \mathfrak{n})</m> be a map of complete local rings, and suppose that <m>R</m> is regular, e.g., a power series ring over a field <m>K</m>. Then, <m>\mathrm{H}_{\mathfrak{m}}^{\operatorname{dim}(R)}(S)^{\vee} \cong \operatorname{Hom}_{R}(S, R)</m>.
        </p>
    
        <p>
          Here is an important application of Local Duality. Note that we are not assuming that <m>R</m> is regular in the statement.
        </p>

        <theorem xml:id="thm-4.9-2">
          <statement>
            <p>
              Theorem 4.9 (Grothendieck nonvanishing). Let <m>(R, \mathfrak{m}, k)</m> be a local ring and <m>M</m> a finitely generated <m>R</m>-module. Then <m>\operatorname{cd}(\mathfrak{m}, M)=\operatorname{dim}(M)</m>.

            </p>
          </statement>

          <proof>
            <p>
              We already know <m>\leqslant</m>. 
              Without loss of generality, we can assume that <m>M</m> is a faithful module, by invariance of base. 
              Complete; <m>\widehat{M}</m> is <m>\widehat{R}</m>-faithful, <m>\operatorname{dim}(M)=\operatorname{dim}(\widehat{M})</m>, and <m>\mathrm{H}_{\mathfrak{m}}^{\bullet}(M) \cong \mathrm{H}_{\mathfrak{m} \widehat{R}}^{\bullet}(\widehat{M})</m>. 
              Therefore, we may assume without loss of generality that <m>R</m> and <m>M</m> are complete.
            </p>
        
            <p>
              Now <m>R</m> is a quotient of a power series ring, so by invariance of base we may assume without loss of generality that <m>R</m> is a regular ring. 
              Note, however, that <m>M</m> is not necessarily faithful anymore.
            </p>
        
            <p>
              We claim that if the depth of <m>\operatorname{ann}(M)</m> on an <m>R</m>-module <m>N</m> is <m>t</m>, then <m>\operatorname{Ext}_{R}^{&lt;t}(M, N)=0</m>. 
              This is essentially the same as Rees's Theorem, but we include the argument anyway. 
              Indeed, by induction on the depth (if positive), we can assume that <m>\operatorname{Ext}_{R}^{&lt;t-1}(M, N / x N)=0</m> for <m>x</m> an <m>N</m>-regular element in <m>\operatorname{ann}(M)</m>. 
              From the usual LES, we see that, for <m>i&lt;t, x</m> acts injectively on <m>\operatorname{Ext}_{R}^{i}(M, N)=0</m>, but <m>x</m> annihilates this module as well, so it must be the zero module. 
              This establishes the claim.
            </p>
        
            <p>
              Now, by Local Duality, <m>\mathrm{H}_{\mathfrak{m}}^{i}(M) \cong \operatorname{Ext}_{R}^{\operatorname{dim}(R)-i}(M, R)^{\vee}</m>. 
              Since Matlis Duality is faithful, the indicated Ext is nonzero if and only if its dual is. Thus,
            </p>
        
            <p>
              <me>\begin{aligned}
                  \operatorname{cd}(\mathfrak{m}, M)=\max \left\{j \mid \mathrm{H}_{m}^{j}(M) \neq 0\right\} &amp; =\max \left\{\operatorname{dim}(R)-i \mid \operatorname{Ext}_{R}^{\operatorname{dim}(R)-i}(M, R) \neq 0\right\} \\
                  &amp; =\operatorname{dim}(R)-\min \left\{i \mid \operatorname{Ext}_{R}^{i}(M, R) \neq 0\right\} \\
                  &amp; \geq \operatorname{dim}(R)-\operatorname{depth}_{\operatorname{ann}(M)}(R) \\
                  &amp; \geq \operatorname{dim}(R)-\operatorname{height}(\operatorname{ann}(M)) \\
                  &amp; \geq \operatorname{dim}(R / \operatorname{ann}(M))=\operatorname{dim}(M) .
                  \end{aligned}
                </me>
            </p>
        
            <p>
              Since <m>\operatorname{dim}(M) \geq \operatorname{cd}(\mathfrak{m}, M)</m>, equality holds throughout.
            </p>
          </proof>
        </theorem>
    
        <p>
          Remark 4.10. A consequence of this argument, by taking <m>M=R / I</m>, is that if <m>R</m> is a regular local ring (or any ring for which Local Duality holds!) there are equalities for any ideal <m>I \subset R</m> :
        </p>
    
        <p>
          <me>\operatorname{depth}_{I}(R)=\operatorname{height}(I)=\operatorname{dim}(R)-\operatorname{dim}(R / I)</me>
        </p>
    
        <p>
          Of course, these can be obtained more directly (for Cohen-Macaulay rings).
        </p>
    
        <p>
          Following Remark ??, we should be able to generalize local duality, so that we can compute local cohomology as duals of Ext modules over rings that are more relevant. The best generalization would be in the case of a Cohen-Macaulay local ring <m>R</m> such that <m>R^{\vee} \cong \mathrm{H}_{\mathfrak{m}}^{d}(R)</m>. Failing that, we would like to understand when a f.g. module <m>K</m> such that <m>K^{\vee} \cong H_{\mathfrak{m}}^{d}(R)</m> exists over a CM local ring, and how else we might recognize such a <m>K</m>.
        </p>
          
        </section>

        <section xml:id="sec-gorenstein"><title>Gorenstein Rings</title>

          <p>
            
          </p>
          
        </section>

        <section xml:id="sec-canonical-mod"><title>Canonical Modules</title>

          <p>
            
          </p>
          
        </section>

        <section xml:id="sec-graded-local-duality"><title>Graded Local Duality and Regularity</title>

          <p>
            
          </p>
          
        </section>
        
      </chapter>

      
    </part>

    <backmatter xml:id="backmatter"><title>Backmatter</title>

      <appendix><title>Foundational Knowledge</title>

        <section xml:id="sec-rings"><title>Ring Theory</title>

          <p>
            In this class, all rings have a multiplicative identity, written as 1 or <m>1_{R}</m> is we want to emphasize that we are referring to the ring <m>R</m>. 
            This is what some authors call unital rings; since for us all rings are unital, we will omit the adjective. 
            Moreover, we will think of 1 as part of the structure of the ring, and thus require it be preserved by all natural constructions. 
            As such, a subring <m>S</m> of <m>R</m> must share the same multiplicative identity with <m>R</m>, meaning <m>1_{R}=1_{S}</m>. 
            Moreover, any ring homomorphism must preserve the multiplicative identity. 
            To clear any possible confusion, we include below the relevant definitions.
          </p>

          <definition xml:id="def-A1"><title>Ring</title>
            <statement>
              <p>
                A <em>ring</em> is a set <m>R</m> equipped with two binary operations, + and <m>\cdot</m>, satisfying:
                <ol>
                  <li>
                    <p>
                      <m>(R,+)</m> is an abelian group with identity element denoted <m>0</m> or <m>0_{R}</m>.
                    </p>
                  </li>
          
                  <li>
                    <p>
                      The operation <m>\cdot</m> is associative, so that <m>(R, \cdot)</m> is a semigroup.
                    </p>
                  </li>
            
                  <li>
                    <p>
                      For all <m>a, b, c \in R</m>, we have
                      <me>a \cdot(b+c)=a \cdot b+a \cdot c \quad \text { and } \quad(a+b) \cdot c=a \cdot c+b \cdot c</me>
                    </p>
                  </li>

                  <li>
                    <p>
                      there is a multiplicative identity, written as 1 or <m>1_{R}</m>, such that <m>1 \neq 0</m> and <m>1 \cdot a=a=a \cdot 1</m> for all <m>a \in R</m>.
                    </p>
                  </li>
                </ol>
              </p>
            </statement>
          </definition>

          <p>
            To simplify notation, we will often drop the <m>\cdot</m> when writing the multiplication of two elements, so that <m>a b</m> will mean <m>a \cdot b</m>.
          </p>
      
          <p>
            Note that the requirement that <m>1 \neq 0</m> makes it so that the zero ring is not a ring.
          </p>

          <definition xml:id="def-A2"><title>Commutative Ring</title>
            <statement>
              <p>
                A ring <m>R</m> is a <em>commutative ring</em> if for all <m>a, b \in R</m> we have <m>a \cdot b=b \cdot a</m>.
              </p>
            </statement>
          </definition>

          <definition xml:id="def-A3"><title>Division Ring</title>
            <statement>
              <p>
                A ring <m>R</m> is a <em>division ring</em> if <m>1 \neq 0</m> and <m>R \backslash\{0\}</m> is a group under <m>\cdot</m>, so every nonzero <m>r \in R</m> has a multiplicative inverse. A field is a commutative division ring.
              </p>
            </statement>
          </definition>

          <definition xml:id="def-A4"><title>Integral Domain</title>
            <statement>
              <p>
                A commutative ring <m>R</m> is a <em>domain</em>, sometimes called an <em>integral domain</em>, if it has no zerodivisors: <m>a b=0 \Rightarrow a=0</m> or <m>b=0</m>. 
                Note that in particular we reserve the word domain for commutative rings.
              </p>
            </statement>
          </definition>
      
          <p>
            For some familiar examples, <m>\mathrm{M}_{n}(R)</m> (the set of <m>n \times n</m> matrices) is a ring with the usual addition and multiplication of matrices, <m>\mathbb{Z}</m> and <m>\mathbb{Z} / n</m> are commutative rings, <m>\mathbb{C}</m> and <m>\mathbb{Q}</m> are fields, and the real Hamiltonian quaternion ring <m>\mathbb{H}</m> is a division ring.
          </p>

          <definition xml:id="def-A5"><title>Ring Homomorphism</title>
            <statement>
              <p>
                A ring homomorphism is a function <m>f: R \rightarrow S</m> satisfying the following:
              </p>
              <p><ul>
                <li>
                    <p>
                <m>f(a+b)=f(a)+f(b)</m> for all <m>a, b \in R</m>.
              </p>
                </li>
          
                <li>
                    <p>
                <m>f(a b)=f(a) f(b)</m> for all <m>a, b \in R</m>.
              </p>
                </li>
          
                <li>
                    <p>
                <m>f\left(1_{R}\right)=1_{S}</m>.
              </p>
                </li>
          
              </ul></p>
            </statement>
          </definition>
      
          <p>
            Under this definition, the map <m>f: \mathbb{R} \rightarrow \mathrm{M}_{2}(\mathbb{R})</m> sending <m>a \mapsto\left[\begin{array}{ll}a &amp; 0 \\ 0 &amp; 0\end{array}\right]</m> preserves addition and multiplication but not the multiplicative identities, and thus it is not a ring homomorphism.
          </p>

          <exercise xml:id="exe-65">
            <statement>
              <p>
                For any ring <m>R</m>, there exists a unique homomorphism <m>\mathbb{Z} \rightarrow R</m>.
              </p>
            </statement>
          </exercise>

          <definition xml:id="def-A6"><title>Subring</title>
            <statement>
              <p>
                A subset <m>S</m> of a ring <m>R</m> is a subring of <m>R</m> if it is a ring under the same addition and multiplication operations and <m>1_{R}=1_{S}</m>.
              </p>
            </statement>
          </definition>
      
          <p>
            So under this definition, <m>2 \mathbb{Z}</m>, the set of even integers, is not a subring of <m>\mathbb{Z}</m>; in fact, it is not even a ring, since it does not have a multiplicative identity!
          </p>

          <definition xml:id="def-A7"><title>Ideal</title>
            <statement>
              <p>
                Let <m>R</m> be a ring. A subset <m>I</m> of <m>R</m> is an ideal if:
              </p>
          
              <p>
                <ul>
                  <li>
                    <p>
                      <m>I</m> is nonempty.
                    </p>
                  </li>
          
                  <li>
                    <p>
                      <m>(I,+)</m> is a subgroup of <m>(R,+)</m>.
                    </p>
                  </li>
            
                  <li>
                    <p>
                      For every <m>a \in I</m> and every <m>r \in R</m>, we have <m>r a \in I</m> and <m>a r \in I</m>.
                    </p>
                  </li>
                </ul>
              </p>
            </statement>
          </definition>

          <p>
            The final property is often called absorption. 
            A left ideal satisfies only absorption on the left, meaning that we require only that <m>r a \in I</m> for all <m>r \in R</m> and <m>a \in I</m>. 
            Similarly, a right ideal satisfies only absorption on the right, meaning that <m>a r \in I</m> for all <m>r \in R</m> and <m>a \in I</m>.
          </p>
      
          <p>
            When <m>R</m> is a commutative ring, the left ideals, right ideals, and ideals over <m>R</m> are all the same. 
            However, if <m>R</m> is not commutative, then these can be very different classes.
          </p>
      
          <p>
            One key distinction between unital rings and nonunital rings is that if one requires every ring to have a 1 , as we do, then the ideals and subrings of a ring <m>R</m> are very different creatures. 
            In fact, the only subring of <m>R</m> that is also an ideal is <m>R</m> itself. 
            The change lies in what constitutes a subring; notice that nothing has changed in the definition of ideal.
          </p>

          <remark xml:id="rem-a8">
            <p>
              Every ring <m>R</m> has two trivial ideals: <m>R</m> itself and the zero ideal <m>(0)=\{0\}</m>.
            </p>
          </remark>
      
          <p>
            A nontrivial ideal <m>I</m> of <m>R</m> is an ideal that <m>I \neq R</m> and <m>I \neq(0)</m>. 
            An ideal <m>I</m> of <m>R</m> is a proper ideal if <m>I \neq R</m>.
          </p>
          
        </section>

        <section xml:id="sec-modules"><title>Module Theory</title>
          <p>
            You can learn more about the basic theory of (commutative) rings and <m>R</m>-modules in any introductory algebra book, such as [DF04].
          </p>

          <definition xml:id="def-A9"><title>Module</title>
            <statement>
              <p>
                Definition A.9. Let <m>R</m> be a ring with <m>1 \neq 0</m>. A left <m>R</m>-module is an abelian group <m>(M,+)</m> together with an action <m>R \times M \rightarrow M</m> of <m>R</m> on <m>M</m>, written as <m>(r, m) \mapsto r m</m>, such that for all <m>r, s \in R</m> and <m>m, n \in M</m> we have the following:
              </p>
          
              <p><ul>
                <li>
                    <p>
                <m>(r+s) m=r m+s m</m>,
              </p>
                </li>
          
                <li>
                    <p>
                <m>(r s) m=r(s m)</m>,
              </p>
                </li>
          
                <li>
                    <p>
                <m>r(m+n)=r m+r n</m>, and
              </p>
                </li>
          
                <li>
                    <p>
                <m>1 m=m</m>.
              </p>
                </li>
          
              </ul></p>
          
              <p>
                A right <m>R</m>-module is an abelian group <m>(M,+)</m> together with an action of <m>R</m> on <m>M</m>, written as <m>M \times R \rightarrow M,(m, r) \mapsto m r</m>, such that for all <m>r, s \in R</m> and <m>m, n \in M</m> we have
              </p>
          
              <p><ul>
                <li>
                    <p>
                <m>m(r+s)=m r+m s</m>,
              </p>
                </li>
          
                <li>
                    <p>
                <m>m(r s)=(m r) s</m>,
              </p>
                </li>
          
                <li>
                    <p>
                <m>(m+n) r=m r+n r</m>, and
              </p>
                </li>
          
                <li>
                    <p>
                <m>m 1=m</m>.
              </p>
                </li>
          
              </ul></p>
            </statement>
          </definition>
      
          <p>
            By default, we will be studying left <m>R</m>-modules. 
            To make the writing less heavy, we will sometimes say <m>R</m>-module rather than left <m>R</m>-module whenever there is no ambiguity.
          </p>

          <remark>
            <p>
              Remark A.10. 
              If <m>R</m> is a commutative ring, then any left <m>R</m>-module <m>M</m> may be regarded as a right <m>R</m>-module by setting <m>m r:=r m</m>. 
              Likewise, any right <m>R</m>-module may be regarded as a left <m>R</m>-module. 
              Thus for commutative rings, we just refer to modules, and not left or right modules.
            </p>
          </remark>
      
          <p>
            The definitions of submodule, quotient of modules, and homomorphism of modules are very natural and easy to guess, but here they are.
          </p>

          <definition xml:id="def-A11"><title>Submodule</title>
            <statement>
              <p>
                If <m>N \subseteq M</m> are <m>R</m>-modules with compatible structures, we say that <m>N</m> is a submodule of <m>M</m>.
              </p>
          
              <p>
                A map <m>M \stackrel{f}{\longrightarrow} N</m> between <m>R</m>-modules is a homomorphism of <m>R</m>-modules if it is a homomorphism of abelian groups that preserves the <m>R</m>-action, meaning <m>f(r a)=r f(a)</m> for all <m>r \in R</m> and all <m>a \in M</m>. 
                We sometimes refer to <m>R</m>-module homomorphisms as <m>R</m>-module maps, or maps of <m>R</m>-modules. 
                An isomorphism of <m>R</m>-modules is a bijective homomorphism, which we really should think about as a relabeling of the elements in our module. 
                If two modules <m>M</m> and <m>N</m> are isomorphic, we write <m>M \cong N</m>.
              </p>
          
              <p>
                Given an <m>R</m>-module <m>M</m> and a submodule <m>N \subseteq M</m>, the quotient <m>M / N</m> is an <m>R</m>-module whose elements are the equivalence classes determined by the relation on <m>M</m> given by <m>a \sim</m> <m>b \Leftrightarrow a-b \in N</m>. 
                One can check that this set naturally inherits an <m>R</m>-module structure from the <m>R</m>-module structure on <m>M</m>, and it comes equipped with a natural canonical map <m>M \longrightarrow M / N</m> induced by sending <m>1</m> to its equivalence class.
              </p>
            </statement>
          </definition>

          <example>
            <p>
              Example A.12. 
              The modules over a field <m>k</m> are precisely all the <m>k</m>-vector spaces. 
              Linear transformations are precisely all the <m>k</m>-module maps.
            </p>
          </example>
      
          <p>
            While vector spaces make for a great first example, be warned that many of the basic facts we are used to from linear algebra are often a little more subtle in commutative algebra. 
            These differences are features, not bugs.
          </p>

          <example>
            <p>
              Example A.13. 
              The <m>\mathbb{Z}</m>-modules are precisely all the abelian groups.
            </p>
          </example>

          <example>
            <p>
              Example A.14. 
              When we think of the ring <m>R</m> as a module over itself, the submodules of <m>R</m> are precisely the ideals of <m>R</m>.
            </p>
          </example>

          <theorem xml:id="thm-A15"><title>First Isomorphism Theorem</title>
            <statement>
              <p>
                Any <m>R</m>-module homomorphism <m>M \stackrel{f}{\longrightarrow} N</m> satisfies <m>M / \operatorname{ker} f \cong \operatorname{im} f</m>.
              </p>
            </statement>
          </theorem>
      
          <p>
            The first big noticeable difference between vector spaces and more general <m>R</m>-modules is that while every vector space has a basis, most <m>R</m>-modules do not.
          </p>

          <definition xml:id="def-A16"><title>Generated Modules</title>
            <statement>
              <p>
                A subset <m>\Gamma \subseteq M</m> of an <m>R</m>-module <m>M</m> is a generating set, or a set of generators, if every element in <m>M</m> can be written as a finite linear combination of elements in <m>M</m> with coefficients in <m>R</m>. 
                A basis for an <m>R</m>-module <m>M</m> is a generating set <m>\Gamma</m> for <m>M</m> such that <m>\sum_{i} a_{i} \gamma_{i}=0</m> implies <m>a_{i}=0</m> for all <m>i</m>. 
                An <m>R</m>-module is free if it has a basis.
              </p>
            </statement>
          </definition>

          <remark>
            <p>
              Remark A.17. 
              Every vector space is a free module.
            </p>
          </remark>

          <remark>
            <p>
              Remark A.18. 
              Every free <m>R</m>-module is isomorphic to a direct sum of copies of <m>R</m>. 
              Indeed, let's construct such an isomorphism for a given free <m>R</m>-module <m>M</m>. 
              Given a basis <m>\Gamma=\left\{\gamma_{i}\right\}_{i \in I}</m> for <m>M</m>, let
              <me>
                \begin{aligned}
                &amp; \bigoplus_{i \in I} R \stackrel{\pi}{\longrightarrow} M \\
                &amp; \left(r_{i}\right)_{i \in I} \longrightarrow \sum_{i} r_{i} \gamma_{i}
                \end{aligned}
              </me>
            </p>
        
            <p>
              The condition that <m>\Gamma</m> is a basis for <m>M</m> can be restated into the statement that <m>\pi</m> is an isomorphism of <m>R</m>-modules.
            </p>
          </remark>
      
          <p>
            One of the key things that makes commutative algebra so rich and beautiful is that most modules are in fact not free. 
            In general, every <m>R</m>-module has a generating set - for example, <m>M</m> itself. 
            Given some generating set <m>\Gamma</m> for <m>M</m>, we can always repeat the idea above and write a presentation <m>\oplus_{i \in I} R \stackrel{\pi}{\longrightarrow} M</m> for <m>M</m>, but in general the resulting map <m>\pi</m> will have a nontrivial kernel. 
            A nonzero kernel element <m>\left(r_{i}\right)_{i \in I} \in \operatorname{ker} \pi</m> corresponds to a relation between the generators of <m>M</m>.
          </p>

          <remark>
            <p>
              Remark A.19. 
              Given a set of generators for an <m>R</m>-module <m>M</m>, any homomorphism of <m>R</m> modules <m>M \longrightarrow N</m> is determined by the images of the generators.
            </p>
          </remark>
      
          <p>
            We say that a module is finitely generated if we can find a finite generating set for <m>M</m>. 
            The simplest finitely generated modules are the cyclic modules.
          </p>

          <example>
            <p>
              Example A.20. 
              An <m>R</m>-module is cyclic if it can be generated by one element. 
              Equivalently, we can write <m>M</m> as a quotient of <m>R</m> by some ideal <m>I</m>. 
              Indeed, given a generator <m>m</m> for <m>M</m>, the kernel of the map <m>R \stackrel{\pi}{\longrightarrow} M</m> induced by <m>1 \mapsto m</m> is some ideal <m>I</m>. 
              Since we assumed that <m>m</m> generates <m>M, \pi</m> is automatically surjective, and thus induces an isomorphism <m>R / I \cong M</m>.
            </p>
          </example>

          <p>
            Similarly, if an <m>R</m>-module has <m>n</m> generators, we can naturally think about it as a quotient of <m>R^{n}</m> by the submodule of relations among those <m>n</m> generators.
          </p>
        </section>

        <section xml:id="sec-topology"><title>Topology</title>

          <p>
            
          </p>
          
        </section>

      </appendix>

      <appendix xml:id="macaulay2"><title>Macaulay2</title>

        <introduction>
          <p>
            There are several computer algebra systems dedicated to algebraic geometry and commutative algebra computations, such as <url href="https://www.singular.uni-kl.de/" visual="https://www.singular.uni-kl.de/"> Singular</url> (more popular among algebraic geometers), <url href="https://cocoa.dima.unige.it/cocoa/" visual="https://cocoa.dima.unige.it/cocoa/"> CoCoA</url> (which is more popular with european commutative algebraists, having originated in Genova, Italy), and <url href="https://faculty.math.illinois.edu/Macaulay2/" visual="https://faculty.math.illinois.edu/Macaulay2/"> Macaulay2</url>. There are many computations you could run on any of these systems (and others), but we will focus on Macaulay2 since it's the most popular computer algebra system among US based commutative algebraists.
          </p>

          <p>
            Macaulay2, as the name suggests, is a successor of a previous computer algebra system named Macaulay. Macaulay was first developed in 1983 by Dave Bayer and Mike Stillman, and while some still use it today, the system has not been updated since its final release in 2000. In 1993, Daniel Grayson and Mike Stillman released the first version of Macaulay2, and the current stable version if Macaulay2 1.16.
          </p>

          <p>
            Macaulay2, or M2 for short, is an open-source project, with many contributors writing packages that are then released with the newest Macaulay2 version. Journals like the Journal of Software for Algebra and Geometry publish peer-refereed short articles that describe and explain the functionality of new packages, with the package source code being peer reviewed as well.
          </p>

          <p>
            The National Science Foundation has funded Macaulay2 since 1992. Besides funding the project through direct grants, the NSF has also funded several Macaulay2 workshops — conferences where Macaulay2 package developers gather to work on new packages, and to share updates to the Macaulay2 core code and recent packages.
          </p>
        </introduction>
      
        <section xml:id="sec-getting-started"><title>Getting Started</title>

          <p>
            A Macaulay2 session often starts with defining some ambient ring we will be doing computations over. Common rings such as the rationals and the integers can be defined using the commands <c>QQ</c> and <c>ZZ</c>; one can easily take quotients or build polynomial rings (in finitely many variables) over these. For example,
          </p>

          <pre>
            i1 : R = ZZ/101[x,y]

            o1 = R

            o1 : PolynomialRing

                and

            i1 : k = ZZ/101;

            i2 : R = k[x,y];
          </pre>

          <p>
            both store the ring <m>\Z/(101)</m> as <m>R</m>, with the small difference that in the second example Macaulay2 has named the coefficient field <m>k</m>. One quirk that might make a difference later is that if we use the first option and later set <m>k</m> to be the field <m>\Z/(101)</m>, our ring <m>R</m> is not a polynomial ring over <m>k</m>. Also, in the second example we ended each line with a <c>;</c>, which tells Macaulay2 to run the command but not display the result of the computation — which is in this case was simply an assignment, so the result is not relevant.
          </p>

          <p>
            We can now do all sorts of computations over our ring <m>R</m>. For example, we can define an ideal in <m>R</m> as follows:
          </p>

          <pre>
            i3 : I = ideal(x^2,y^2,x*y)
                         2   2
            o3 = ideal (x , y , x*y)

            o3 : Ideal of R
          </pre>

          <p>
            Above we have set <m>I</m> to be the ideal in <m>R</m> that is generated by <m>x^2, y^2, xy</m>. The notation <c>ideal( )</c>  requires the usage of <c>^</c> for powers and <c>*</c> for products; alternatively, we can define the exact same ideal with the notation <c>ideal" "</c>, as follows:
          </p>

          <pre>
            i3 : I = ideal"x2,y2,xy"
                         2   2
            o3 = ideal (x , y , x*y)

            o3 : Ideal of R
          </pre>

          <p>
            Now we can use this ideal <m>I</m> to either define a quotient ring <m>S=R/I</m> or the <m>R</m>-module <m>M=R/I</m>, as follows:
          </p>

          <pre>
            i4 : M = R^1/I

            o4 = cokernel | x2 y2 xy |
                                        1
            o4 : R-module, quotient of R

            i5 : S = R/I

            o5 = S

            o5 : QuotientRing
          </pre>

          <p>
            It's important to note that while <m>R</m> is a ring, <m>R^1</m> is the <m>R</m>-module <m>R</m> — this is a very
            important difference for Macaulay2, since these two objects have different types. So <m>S</m> defined
            above is a ring, while <m>M</m> is a module. Notice that Macaulay2 stored the module <m>M</m> as the
            cokernel of the map 
            <me>
              R^3\xrightarrow {[x^2\;\;y^2\;\;xy]} R.
            </me>
          </p>  

          <p>
            When you make a new definition in Macaulay2, you might want to pay attention to
            what ring your new object is defined over. For example, now that we defined this ring <m>S</m>,
            Macaulay2 has automatically taken <m>S</m> to be our current ambient ring, and any calculation
            or definition we run next will be considered over <m>S</m> and not <m>R</m>. If you want to return to the
            original ring <m>R</m>, you must first run the command <c>use R</c>
          </p>  

          <p>
            If you want to work over a finitely generated algebra over one of the basic rings you
            can define in Macaulay2, and your ring is not a quotient of a polynomial ring, you want
            to rewrite this algebra as a quotient of a polynomial ring. For example, suppose you want
            to work over the second Veronese in <m>2</m> variables over our field <m>k</m> from before, meaning the
            algebra <m>k[x^2, xy, y^2]</m>. We need <m>3</m> algebra generators, which we will call <m>a, b, c,</m> corresponding
            to <m>x^2, x^y,</m> and <m>y^2</m>:
          </p>

          <pre>
            o6 = U

            o6 : PolynomialRing
            
            i7 : f = map(R,U,{x^2,x*y,y^2})
                           2        2
            o7 = map(R,U,{x , x*y, y })

            o7 : RingMap R &lt;--- U

            i8 : J = ker f
                        2
            o8 = ideal(b - a*c)

            o8 : Ideal of U

            i9 : T = U/J

            o9 = T

            o9 : QuotientRing
          </pre>

          <p>
            Our ring <m>T</m> at the end is isomorphic to the 2nd Veronese of <m>R</m>, which is the ring we
            wanted. Note the syntax order in <c>map</c>: first target, then source, then a list with the images
            of each algebra generator.
          </p>
        </section>

        <section xml:id="sec-asking-for-help"><title>Asking Macaulay2 for Help</title>
          <p>
            As you're learning how to use Macaulay2, you will often find yourself needing some help.
            Luckily, Macaulay2 can help you directly! For example, suppose you know the name of a
            command, but do not remember the syntax to use it. You can ask <c>?command</c>, and Macaulay2
            will show you the different usages of the command you want to know about.
          </p>    

          <pre>
            i10 : ?primaryDecomposition

            primaryDecomposition -- irredundant primary decomposition of an ideal
              * Usage:
                  primaryDecomposition I
              * Inputs:
                * I, an ideal, in a (quotient of a) polynomial ring R
              * Optional inputs:
                * MinimalGenerators =&gt; a Boolean value, default value true, if false, the
                  components will not be minimalized
                * Strategy =&gt; ..., default value null,
              * Outputs:
                * a list, containing a minimal list of primary ideals whose intersection
                is I

            Ways to use primaryDecomposition :
            ==================================

            * "primaryDecomposition(Ideal)" -- see "primaryDecomposition" -- irredundant
              primary decomposition of an ideal
            * "primaryDecomposition(Module)" -- irredundant primary decomposition of a
              module
            * "primaryDecomposition(Ring)" -- see "primaryDecomposition(Module)" --
              irredundant primary decomposition of a module

            For the programmer
            ==================

            The object "primaryDecomposition" is a method function with options
          </pre>

          <p>
            If instead you'd rather read the complete Macaulay2 documentation on the command
            you are interested in, you can use the <c>viewHelp</c> command, which will open an html page
            with the documentation you asked for. So running
          </p>

          <pre>
            i11 : viewHelp "primaryDecomposition"
          </pre>

          <p>
            will open an html page dedicate to the method primaryDecomposition, which includes
            examples and links to related methods.
          </p>
          
        </section>

        <section xml:id="sec-basic-commands"><title>Basic Commands</title>
          <p>
            Many Macaulay2 commands are easy to guess, and named exactly what you would expect
            them to be named. Often, googling “Macaulay2” followed by a few descriptive words will
            easily land you on the documentation for whatever you are trying to do.
          </p>

          <p>
            Here are some basic commands you will likely use:

            <ul>
              <li>
                <p>
                  <c>ideal (f_1, \dots , f_n)</c> will return the ideal generated by <m>f_1, \dots , f_n</m>. Here products should
                  be indicated by <c>*</c>, and powers with <c>^</c>. If you'd rather not use <c>^</c> (this might be nice if
                  you have lots of powers), you can write <c>ideal (f_1, \dots , f_n)</c> instead.
                </p>
              </li>

              <li>
                <p>
                  <c>map S, R, (f_1, \dots , f_n)</c> gives a ring map <m>R \to S</m> if <m>R</m> and <m>S</m> are rings, and <m>R</m> is a quotient
                  of <m>k[x_1, \dots , x_n]</m>. The resulting ring map will send <m>x_i \mapsto f_i</m>. There are many variations
                  of <c>map</c> — for example, you can use it to define <m>R</m>-module homomorphisms — but you
                  should carefully input the information in the required format. Try <c>viewHelp</c> map in
                  Macaulay2 for more details.
                </p>
              </li>

              <li>
                <p>
                  <c>ker</c><m>(f)</m> returns the kernel of the map <m>f</m> .
                </p>
              </li>

              <li>
                <p>
                  <c>I + J</c> and <c>I*J</c> return the sum and product of the ideals <m>I</m> and <m>J</m>, respectively.
                </p>
              </li>

              <li>
                <p>
                  <c>A = matrix\{\{a_1,1, \dots , a_1,n}, \dots , {a_m,1, \dots , a_m,n\}\}</c> returns the matrix 

                  <me>A=
                    \begin{pmatrix}
                      a_{1,1} &amp; \dots &amp; a_{1,n} \\
                      &amp; \ddots &amp; \\
                      a_{m,1} &amp; \dots &amp; a_{m,n}
                    \end{pmatrix}
                  </me>
                </p>
              </li>
            </ul>
          </p>

          <p>
            As in most programming languages, Macaulay2 follows the convention that the first
            position in a list is the <m>0</m>th position.
          </p>    

          <p>
            The method <c>primaryDecomposition</c> returns a list of primary ideals whose intersection
            is the input ideal, and <c>associatedPrimes</c> returns the list of associated primes of the given
            ideal or module. Operations on lists are often intuitive. For example, let's say we want to
            find the primary component of an ideal with a particular radical.
          </p>  

          <pre>
            i1 : R = QQ[x,y];

            i2 : I = ideal"x2,xy";

            o2 : Ideal of R

            i3 : prim = primaryDecomposition I
                                      2
            o3 = {ideal x, ideal (y, x )}

            o3 : List

            i4 : L = select(prim, Q -&gt; radical(Q) == ideal"x,y")
                             2
            o4 = {ideal (y, x )}

            o4 : List
          </pre>

          <p>
          The method <c>select</c> returns a list of all the elements in our list with the required properties. 
          In this case, if we actually want the primary ideal we just selected, as opposed to a
          list containing it, we need to extract the first component of our list <m>L</m>.
          </p>  

          <pre>
            i5 : L_0
                            2
            o5 = ideal (y, x )

            o5 : Ideal of R
          </pre>
        </section>
      </appendix>

      <colophon>
        <p> This book was authored in <pretext />. </p>
      </colophon>

    </backmatter>

  </book>
</pretext>
